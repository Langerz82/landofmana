(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){cls=require("./lib/class");_=require("underscore");GameTypes=require("../shared/js/gametypes");ItemTypes=require("../shared/js/itemtypes");Types=GameTypes;Utils=require("./utils");AppearanceData=require("./data/appearancedata")},{"../shared/js/gametypes":379,"../shared/js/itemtypes":380,"./data/appearancedata":2,"./lib/class":5,"./utils":12,underscore:354}],2:[function(require,module,exports){var _=require("underscore"),AppearancesJson=require("../../shared/data/appearance.json");var AppearanceData=[];var ItemGearTypes={weapon:[],weaponarcher:[],armor:[],armorarcher:[]};_.each(AppearancesJson,function(value,key){AppearanceData.push({name:value.name,type:value.type,sprite:value.sprite,buy:value.buy});if(ItemGearTypes[value.type]){ItemGearTypes[value.type].push({key:key,val:value})}});module.exports.ItemGearTypes=ItemGearTypes;module.exports.Data=AppearanceData;module.exports.getSpriteByID=function(id){return AppearanceData[id].sprite}},{"../../shared/data/appearance.json":378,underscore:354}],3:[function(require,module,exports){var path=require("path");var server;module.exports=function(config){return require("./redis")}},{"./redis":9,path:undefined}],4:[function(require,module,exports){var _=require("underscore");var Types=require("../shared/js/gametypes");var itemKindMax=999;var itemNumberMax=100;var itemDurabilityMax=1e3;var itemExperienceMax=9999999;var itemPriceMax=99999999;var auctionEntriesMax=9999;var achievementIndexMax=99;var achievementRankMax=10;var achievementCountMax=999999;var skillsXPMax=999999999;var mapsCountMax=10;var mapCoordsMax=16384;var orientationsMax=4;var questCountMax=999;var questIdMax=999999999999999;var questTypeMax=9;var questNpcIdMax=100;var questCountMax=99;var questStatusMax=5;var questStrDataLen=32;var questObjectTypeMax=9;var questObjectKindMax=999;var questObjectCountMax=999;var questObjectChanceMax=2e3;var questObjectLevelMax=999;var shortcutIndexMax=8;var shortcutTypeMax=2;var shortcutTypeIdMax=999;var usernameLenMin=2;var usernameLenMax=16;var userHashLenMin=120;var userHashLenMax=120;var playerNameLenMin=2;var playerNameLenMax=16;var playerColorsMaxLen=6;var playerSpritesMax=999;var playerPVPStatsMax=999999;var playerXpMax=999999999;var playerSkillXpMax=999999999;var playerStatPointsMax=1e3;var playerStatFreePointsMax=6e3;var playerGoldMax=999999999;var worldNameLenMin=2;var worldNameLenMax=16;var worldUsersCountMin=2;var worldUsersCountMax=1e3;var userServerPasswordLenMin=10;var userServerPasswordLenMax=128;var maxWorldCount=10;var maxPlayersPerUser=20;var worldKeyLenMin=2;var worldKeyLenMax=16;var serverAddressLenMin=7;var serverAddressLenMax=15;var serverPortMin=1024;var serverPortMax=65535;var serverProtocolLenMin=2;var serverProtocolLenMax=2;var playerLooksTotal=177;var playerLooksTotalCost=1e4;var userBansTotal=1e3;var banDateMin=173e10;var banDateMax=18e11;var getItemSlots=function(type){if(type==0)return 50;if(type==1)return 96;if(type==2)return 5;return 0};var isTypeValid=function(fmt,msg){if(Array.isArray(fmt)){var res=_isTypeValid(fmt[0],msg);if(!res){return false}if(fmt[0]==="no"||fmt[0]==="so"){return true}var cfn=fmt[0]==="n"&&msg>=fmt[1]&&msg<=fmt[2];if(cfn){return true}var cfs=fmt[0]==="s"&&msg.length>=fmt[1]&&msg.length<=fmt[2];if(cfs){return true}var cfa=fmt[0]==="array"&&msg.length>=fmt[1]&&msg.length<=fmt[2];if(cfa){return true}var cfo=fmt[0]==="object"&&Object.keys(msg).length>=fmt[1]&&Object.keys(msg).length<=fmt[2];if(cfo){return true}}else{return _isTypeValid(fmt,msg)}};var _isTypeValid=function(fmt,msg){if(fmt==="n"&&_.isNumber(Number(msg))){return true}if(fmt==="s"&&_.isString(msg)){return true}if(fmt==="no"&&(_.isNull(msg)||_.isNumber(Number(msg)))){return true}if(fmt==="so"&&(_.isNull(msg)||_.isString(msg))){return true}if(fmt==="array"&&Array.isArray(msg)){return true}if(fmt==="object"&&typeof msg==="object"){return true}console.info("isType not type or invalid.");console.info("fmt:"+fmt);console.info("msg:"+JSON.stringify(msg));return false};(function(){FormatChecker=Class.extend({init:function(){this.formats={};this.formats[Types.UserMessages.CU_CREATE_USER]=[["s",usernameLenMin,usernameLenMax],["s",userHashLenMin,userHashLenMax]];this.formats[Types.UserMessages.CU_LOGIN_USER]=[["s",usernameLenMin,usernameLenMax],["s",userHashLenMin,userHashLenMax]];this.formats[Types.UserMessages.CU_LOGIN_PLAYER]=[["n",0,maxWorldCount],["n",0,maxPlayersPerUser]];this.formats[Types.UserMessages.CU_CREATE_PLAYER]=[["n",0,maxWorldCount],["s",playerNameLenMin,playerNameLenMax]];this.formats[Types.UserMessages.WU_GAMESERVER_INFO]=[["s",worldNameLenMin,worldNameLenMax],["n",0,worldUsersCountMax],["n",worldUsersCountMin,worldUsersCountMax],["s",serverAddressLenMin,serverAddressLenMin],["n",serverPortMin,serverPortMax],["s",userServerPasswordLenMin,userServerPasswordLenMax],["s",worldKeyLenMin,worldKeyLenMax]];this.formats[Types.UserMessages.WU_UPDATE_PLAYER_COUNT]=[["n",0,worldUsersCountMax],["n",1,worldUsersCountMax]];this.formats[Types.UserMessages.WU_PLAYER_LOGGED_IN]=[["n",0,1],["s",usernameLenMin,usernameLenMax],["s",playerNameLenMin,playerNameLenMax]];this.formats[Types.UserMessages.WU_SAVE_PLAYERS_LIST]=[["array",0,worldUsersCountMax,[["s",playerNameLenMin,playerNameLenMax]]]];this.formats[Types.UserMessages.WU_PLAYER_LOADED]=[["s",serverProtocolLenMin,serverProtocolLenMax],["s",serverAddressLenMin,serverAddressLenMax],["n",serverPortMin,serverPortMax]];this.formats[Types.UserMessages.WU_SAVE_PLAYER_LOOKS]=[["array",0,playerLooksTotal,[["n",0,playerLooksTotalCost]]]];this.formats[Types.UserMessages.WU_SAVE_USER_BANS]=[["array",0,userBansTotal,[["s",usernameLenMin,usernameLenMax],["n",banDateMin,banDateMax]]]];this.formats[Types.UserMessages.WU_ADD_PLAYER_GOLD]=[["s",playerNameLenMin,playerNameLenMax],["n",0,playerGoldMax]]},checkFormatData:function(fmt,msg){var tfmt=Array.isArray(fmt)?fmt[0]:fmt;var t=isTypeValid(tfmt,msg);if(!t){console.info("isType not type or invalid.");return false}var cfa=fmt[0]==="array";if(cfa){console.info("format is Array and in length.");if(fmt[3]){for(var i=0;i<msg.length;++i){var res=this.checkFormat(fmt[3],[msg[i]],true);if(!res)return false}}}var cfo=fmt[0]==="object";if(cfo){console.info("format is Object and in keys range.");if(fmt[3]){for(var id in msg[i]){var res=this.checkFormat(fmt[3],msg[i][id]);if(!res)return false}}}return true},checkFormatCSV:function(index,msg,fmt){console.info("fnCheckFormatCSV: index:"+index);if(!_.isString(msg)){console.info("fnCheckFormatCSV: message not a string.");return false}var arr=msg.split(",");if(arr.length!==fmt.length){try{throw new Error}catch(e){console.error(e.stack)}console.info("fnCheckFormatCSV: message incorrect length.");console.info("fnCheckFormatCSV: arr.length:"+arr.length);return false}var res=this.checkFormat(fmt,arr,false);if(!res){console.info("fnCheckFormatCSV: message check format failed.");console.info("fnCheckFormatCSV: fmt:"+JSON.stringify(fmt));console.info("fnCheckFormatCSV: arr:"+JSON.stringify(arr));return false}return true},checkPlayerItems:function(msg,type){console.info("fnItems: type:"+type);var arr=null;try{if(!_.isString(msg)){console.info("fnItems: items data not a string.");return false}arr=JSON.parse(msg)}catch(err){console.info("fnItems: items data JSON parse failed.");return false}if(!arr)console.info("fnItems: items data no data.");if(!Array.isArray(arr)){console.info("fnItems: items data not a array of items.");return false}var fmt=[["array",0,getItemSlots(type),[["n",0,getItemSlots(type)],["n",0,itemKindMax],["n",0,itemNumberMax],["n",0,itemDurabilityMax],["n",0,itemDurabilityMax],["n",0,itemExperienceMax]]]];var res=this.checkFormat(fmt,[arr],true);if(!res){console.info("fnItems: item array not correct format.");console.info(JSON.stringify(fmt));console.info(JSON.stringify(arr));return false}return true},checkFormat:function(format,message,ignoreLength){var self=this;var ignoreLength=ignoreLength||false;if(format){if(!ignoreLength&&message.length!==format.length){console.info("checkFormat - length incorrect. fmt:"+JSON.stringify(message)+", msg:"+JSON.stringify(format));return false}var fmt=Array.isArray(format[0])?format[0][0]:format[0];if(fmt==="array"&&Array.isArray(message)&&message.length===0){return Array.isArray(fmt)?fmt[1]===0:true}if(fmt==="object"&&typeof message==="object"&&Object.keys(message).length===0){return Array.isArray(fmt)?fmt[1]===0:true}for(var i=0,n=format.length;i<n;i+=1){var res=this.checkFormatData(format[i],message[i]);if(!res)return false}return true}else{console.error("Unknown message type. ");console.warn("message: "+JSON.stringify(message));console.warn("format: "+JSON.stringify(format));return false}},check:function(msg){var self=this;var message=msg.slice(0),type=message.shift(),format=format||this.formats[type];if(type===Types.UserMessages.WU_SAVE_PLAYER_DATA){console.info("WU_SAVE_PLAYER_DATA");if(message[0]){var fmt=[["s",this.playerNameMin,this.playerNameMax]];var res=this.checkFormat(fmt,[message[0]],true);if(!res){console.info("message 0 failed.");return false}}if(!Array.isArray(message[1])){console.info("message 1 not an array.");return false}if(message[1].length!==7){console.info("message 1 not length 7.");return false}var data=null;var msg=message[1][0];if(msg){fmt=[["s",this.usernameMin,this.usernameMax],["so",120,120],["n",0,99999],["s",45,45]];var res=this.checkFormat(fmt,msg,true);if(!res){console.info("message arr1-0 failed.");return false}}var msg=message[1][1];if(!Array.isArray(msg)){console.info("message 1-1 not an array.");return false}if(msg.length!==11){console.info("message 1-1 not length 11.");return false}if(!msg){console.info("message[1][1] not defined.")}var fmt=[["n",0,mapsCountMax],["n",0,mapCoordsMax],["n",0,mapCoordsMax],["n",0,orientationsMax]];var res=this.checkFormatCSV(1,msg[1],fmt);if(!res){return false}var fmt=[["n",0,playerStatPointsMax],["n",0,playerStatPointsMax],["n",0,playerStatPointsMax],["n",0,playerStatPointsMax],["n",0,playerStatPointsMax],["n",0,playerStatFreePointsMax]];var res=this.checkFormatCSV(2,msg[2],fmt);if(!res){return false}var fmt=[["n",0,playerXpMax],["n",0,playerXpMax],["n",0,playerXpMax],["n",0,playerXpMax],["n",0,playerXpMax],["n",0,playerXpMax],["n",0,playerXpMax],["n",0,playerXpMax],["n",0,playerXpMax],["n",0,playerXpMax]];var res=this.checkFormatCSV(3,msg[3],fmt);if(!res){return false}var fmt=[["n",0,playerGoldMax],["n",0,playerGoldMax]];var res=this.checkFormatCSV(4,msg[4],fmt);if(!res){return false}var fmt=[["n",0,playerSkillXpMax],["n",0,playerSkillXpMax],["n",0,playerSkillXpMax],["n",0,playerSkillXpMax],["n",0,playerSkillXpMax],["n",0,playerSkillXpMax],["n",0,playerSkillXpMax]];var res=this.checkFormatCSV(5,msg[5],fmt);if(!res){return false}var fmt=[["n",0,playerPVPStatsMax],["n",0,playerPVPStatsMax]];var res=this.checkFormatCSV(6,msg[6],fmt);if(!res){return false}var fmt=[["n",0,playerSpritesMax],["n",0,playerSpritesMax],["n",0,playerSpritesMax],["n",0,playerSpritesMax]];var res=this.checkFormatCSV(7,msg[7],fmt);if(!res){return false}var fmt=[["s",0,playerColorsMaxLen],["n",0,playerColorsMaxLen]];var res=this.checkFormatCSV(8,msg[8],fmt);if(!res){return false}var data=msg[9];if(!_.isString(data)){console.info("shortcuts data not a string.");return false}try{obj=JSON.parse(data)}catch{console.info("shortcuts data, json parse invalid.");return false}if(typeof obj!=="object"){console.info("shortcuts data, data not object.");return false}var len=Object.keys(obj).length;if(len>shortcutIndexMax){console.info("shortcuts data, length longer than 8")}var fmt=[["object",0,shortcutIndexMax,[["n",0,shortcutIndexMax],["n",0,shortcutTypeMax],["n",0,shortcutTypeIdMax]]]];var res=this.checkFormat(fmt,[obj],true);if(!res){console.info("shortcuts data, shortcut format failed.");console.info(JSON.stringify(fmt));console.info(JSON.stringify(tsc));return false}var arr;var data=msg[10];if(!_.isString(data)){console.info("complete quests data not a string.");return false}try{arr=JSON.parse(data)}catch{console.info("complete quests JSON parse error :"+JSON.stringify(data));return false}console.warn("complete quests: arr:"+JSON.stringify(arr));if(typeof arr!=="object"){console.info("complete quests is not an object.");return false}fmt=[["object",0,questCountMax,[["no",0,questNpcIdMax],["n",0,questIdMax]]]];var res=this.checkFormat(fmt,[arr],true);if(!res){console.info("complete quests format failed.");console.info(JSON.stringify(fmt));console.info(JSON.stringify(arr));return false}var arr=message[1][2];console.info(JSON.stringify(arr));if(!Array.isArray(arr)){console.info("quests is not an array.");return false}if(arr.length>99){console.info("quests is over 99.");return false}var appendFmtObject=function(fmt){return fmt.concat([["n",0,questObjectTypeMax],["n",0,questObjectKindMax],["n",0,questObjectCountMax],["n",0,questObjectChanceMax],["n",0,questObjectLevelMax],["n",0,questObjectLevelMax]])};for(var rec of arr){fmt=[["n",0,questIdMax],["n",0,questTypeMax],["n",0,questNpcIdMax],["n",0,questCountMax],["n",0,questStatusMax],["s",0,questStrDataLen],["s",0,questStrDataLen]];if(rec.length===13){fmt=appendFmtObject(fmt)}else if(rec.length===19){fmt=appendFmtObject(fmt)}var res=this.checkFormat(fmt,rec,true);if(!res){console.info("quests format failed.");console.info(JSON.stringify(fmt));console.info(JSON.stringify(rec));return false}}var data=message[1][3];if(data){if(!_.isString(data)){console.info("message arr1-3 is not a string.");return false}var arr=data.split(",");var count=arr.length;if(count%3!==0){console.info("message arr1-3 not correct achievement count.");return false}var fmt=[["array",0,achievementIndexMax,[["n",0,achievementIndexMax],["n",0,achievementRankMax],["n",0,achievementCountMax]]]];var res=this.checkFormat(fmt,[arr],true);if(!res){console.info("message arr1-3 checkFormat failed. i="+i);console.info(JSON.stringify(fmt));console.info(JSON.stringify(arr));return false}}var data=message[1][4];if(data){if(!this.checkPlayerItems(data,0)){console.info("inventory data msg1-4 format failed. "+JSON.stringify(data));return false}}var data=message[1][5];if(data){if(!this.checkPlayerItems(data,1)){console.info("bank data msg1-5 format failed. "+JSON.stringify(data));return false}}var data=message[1][6];if(data){if(!this.checkPlayerItems(data,2)){console.info("equipment data msg1-6 format failed. "+JSON.stringify(data));return false}}var data=parseInt(message[2]);if(!(data===0||data===1)){console.info("update not 0 or 1.");return false}console.info("fmt:"+JSON.stringify(fmt));console.info("message:"+JSON.stringify(message));return true}else if(type===Types.UserMessages.WU_SAVE_PLAYER_AUCTIONS){console.info("WU_SAVE_PLAYER_AUCTIONS");var arr=message;var fmt=[["array",0,auctionEntriesMax,[["s",0,playerNameLenMax],["n",0,itemPriceMax],["n",0,itemKindMax],["n",0,itemNumberMax],["n",0,itemDurabilityMax],["n",0,itemDurabilityMax],["n",0,itemExperienceMax]]]];return this.checkFormat(fmt,[arr],true)}else if(type===Types.UserMessages.WU_SAVE_PLAYER_LOOKS){console.info("WU_SAVE_PLAYER_LOOKS");var msg=message[0];if(!_.isString(msg)){console.info("message is not a string.");return false}var fmt=this.formats[type];var arr=msg.split(",");return this.checkFormat(fmt,[arr],true)}else if(this.formats[type]){var res=this.checkFormat(this.formats[type],message,true);return res}else{try{throw new Error}catch(err){console.info(err.stack)}console.error("Unknown message type: "+type);console.warn("message="+message);return false}}});var checker=new FormatChecker;exports.check=checker.check.bind(checker)})()},{"../shared/js/gametypes":379,underscore:354}],5:[function(require,module,exports){var initializing=false,fnTest=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;Class=function(){};Class.extend=function(prop){var _super=this.prototype;initializing=true;var prototype=new this;initializing=false;for(var name in prop){prototype[name]=typeof prop[name]=="function"&&typeof _super[name]=="function"&&fnTest.test(prop[name])?function(name,fn){return function(){var tmp=this._super;this._super=_super[name];var ret=fn.apply(this,arguments);this._super=tmp;return ret}}(name,prop[name]):prop[name]}Class=function(){if(!initializing&&this.init)this.init.apply(this,arguments)};Class.prototype=prototype;Class.constructor=Class;Class.extend=arguments.callee;return Class};if(!(typeof exports==="undefined")){exports.Class=Class}},{}],6:[function(require,module,exports){(function(__dirname){(function(){require("./common");var fs=require("fs");var crypto=require("crypto");var Metrics=require("./metrics");var ProductionConfig=require("./productionconfig");var User=require("./user");var WorldHandler=require("./worldhandler");var Utils=require("./utils");var redis=require("./redis");var UserMessages=require("./usermessage");var _=require("underscore");var readline=require("readline").createInterface({input:process.stdin,output:process.stdout});let packageName="com.retrorpgonline2";let IO_STATES={MSG_BUYPRODUCT:1,MSG_ERRORPRODUCT:2};SAVING_SERVER=false;AUCTION_SAVED=false;PLAYERS_SAVED=false;worldHandlers=[];users={};loggedInUsers={};player_users={};Log=require("log");var fs=require("fs");var util=require("util");var crypto=require("crypto");var log_file=fs.createWriteStream(__dirname+"/../console.log",{flags:"w"});var log_stdout=process.stdout;function main(config){log=new Log(Log.INFO||Log.DEBUG||Log.ERROR);console.isEnabled=true;Object.defineProperty(log,"log",{value:undefined,writable:true,enumerable:true});Object.defineProperty(log,"info",{value:undefined,writable:true,enumerable:true});Object.defineProperty(log,"warn",{value:undefined,writable:true,enumerable:true});Object.defineProperty(log,"error",{value:undefined,writable:true,enumerable:true});log.log=function(d){var txt="LOG: "+util.format(d)+"\n";console.info(txt)};log.info=function(d){var txt="INFO: "+util.format(d)+"\n";console.info(txt)};log.warn=function(d){var txt="WARN: "+util.format(d)+"\n";console.warn(txt)};log.error=function(d){var txt="ERROR: "+util.format(d)+"\n";console.error(txt)};var production_config=new ProductionConfig(config);if(production_config.inProduction()){_.extend(config,production_config.getProductionSettings())}MainConfig=config;var ws=require("./ws");var server=new ws.WebsocketServer(config);var metrics=config.metrics_enabled?new Metrics(config):null;var lastTotalPlayers=0;var self=this;var DatabaseSelector=require("./databaseselector");console.info("Initializing RRO2 GameServer - World ");var selector=DatabaseSelector(config);selector(config);DBH=databaseHandler=new selector(config);console.log("REDIS SERVER CREATED!!!!!!!!!!!!!");self.handleConnectWorld=function(msg,conn){var wh=new WorldHandler(self,conn);conn._connection.worldHandler=wh;worldHandlers.push(wh);conn.onClose(function(conn){if(conn._server.disconnectionCallback){conn._server.disconnectionCallback(conn)}})};self.handleConnectUser=function(msg,conn){var current_date=(new Date).valueOf().toString();var random=Math.random().toString();var hash=crypto.createHash("sha1").update(current_date+random).digest("hex");conn.hash=hash;console.warn("onConnect: hash="+hash);console.info(JSON.stringify(config));console.info("version sent");console.info("UC_VERSION: "+GameTypes.UserMessages.UC_VERSION);conn.sendUTF8(GameTypes.UserMessages.UC_VERSION+","+config.version+","+conn.hash);var reply=[GameTypes.UserMessages.UC_WORLDS];var i=0;for(var wh of worldHandlers){var world=wh.world;if(!world)continue;reply.push(i++);reply.push(world.name);reply.push(world.count);reply.push(world.maxCount)}conn.send(reply);var user=new User(self,conn);user.hashChallenge=conn.hash;conn.onClose(function(conn){if(user)delete loggedInUsers[user.name];user=null})};server.onConnect(function(conn){var listener=function(message){console.info("recv[0]="+message);var action=parseInt(message[0]);message.shift();switch(action){case Types.UserMessages.WU_CONNECT_WORLD:self.handleConnectWorld(message,conn);break;case Types.UserMessages.CU_CONNECT_USER:self.handleConnectUser(message,conn);break}};conn.listen(listener)});server.onDisconnect(function(socket){console.log("disconnected - client");var wh=socket._connection.worldHandler;if(wh){wh.release();delete worldHandlers.removeVal(wh);wh=null}});server.onError(function(){console.error(Array.prototype.join.call(arguments,", "))});server.onRequestStatus(function(){return JSON.stringify(getWorldDistribution(worlds))});process.on("uncaughtException",function(e){console.info(JSON.stringify(e));console.error("uncaughtException: "+e.stack)});server._ioServer.on("connection",socket=>{console.log("connected")});server._ioServer.on("msg",message=>{console.log("msg="+JSON.stringify(message))});var signalHandler=function(){closeServer()};process.on("SIGINT",signalHandler);process.on("SIGTERM",signalHandler);process.on("SIGQUIT",signalHandler);var cmdPrompt=function(){if(process.platform==="win32"){readline.on("SIGINT",function(){process.emit("SIGINT")})}readline.question("Command:",function(line){getInput(line);setTimeout(cmdPrompt,100)})};cmdPrompt()}function changePassword(args){var world=worlds[0];var username=args[0];var password=args[1];var hash=crypto.createHash("sha1").update(username+password).digest("hex");DBH.savePassword(username,hash)}function getInput(cmd){args=cmd.split(" ");cmdarg=args[0];args.shift();console.info("cmd: "+cmd);switch(cmdarg){case"setpass":changePassword(args);break;case"exit":case"quit":case"q":case"x":closeServer();break;case"s":case"save":closeServer();break;case"forcequit":closeServer();process.exit(1);break;default:console.info("Unknown command.")}}function checkSaved(){var allSavedInterval=setInterval(function(){console.info("allSavedInterval");var allSaved=true;for(var wh of worldHandlers){console.info("wh.SAVED_PLAYERS:"+wh.SAVED_PLAYERS);if(!wh.savedWorldState()){allSaved=false;break}}if(allSaved){for(var wh of worldHandlers){wh.sendWorldClose()}clearInterval(allSavedInterval);setTimeout(function(){process.exit(0)},2e3)}},500)}function closeServer(){readline.close();saveServer();checkSaved()}function sleep(ms){return new Promise(resolve=>setTimeout(resolve,ms))}function saveServer(){console.log("saving server!");for(var wh of worldHandlers){wh.sendWorldSave()}}function getConfigFile(path,callback){fs.readFile(path,"utf8",function(err,json_string){if(err){callback(null)}else{callback(JSON.parse(json_string))}})}var defaultConfigPath="./config.json";var customConfigPath="./config_local.json";process.argv.forEach(function(val,index,array){if(index===2){customConfigPath=val}});getConfigFile(defaultConfigPath,function(defaultConfig){getConfigFile(customConfigPath,function(localConfig){if(localConfig){main(localConfig)}else if(defaultConfig){main(defaultConfig)}else{console.error("Server cannot start without any configuration file.");process.exit(1)}})})}).call(this)}).call(this,require("path").join(__dirname,"js"))},{"./common":1,"./databaseselector":3,"./metrics":7,"./productionconfig":8,"./redis":9,"./user":10,"./usermessage":11,"./utils":12,"./worldhandler":13,"./ws":14,crypto:undefined,fs:undefined,log:201,path:undefined,readline:undefined,underscore:354,util:undefined}],7:[function(require,module,exports){var _=require("underscore");var cls=require("./lib/class");var Metrics={};Metrics=cls.Class.extend({init:function(config){var self=this;this.config=config;this.client=new(require("memcache").Client)(config.memcached_port,config.memcached_host);this.client.connect();this.isReady=false;this.client.on("connect",function(){console.info("Metrics enabled: memcached client connected to "+config.memcached_host+":"+config.memcached_port);self.isReady=true;if(self.readyCallback){self.readyCallback()}})},ready:function(callback){this.readyCallback=callback},updatePlayerCounters:function(worlds,updatedCallback){var self=this;var config=this.config;var numServers=_.size(config.game_servers);var playerCount=_.reduce(worlds,function(sum,world){return sum+world.playerCount},0);if(this.isReady){this.client.set("player_count_"+config.server_name,playerCount,function(){var totalPlayers=0;_.each(config.game_servers,function(server){self.client.get("player_count_"+server.name,function(error,result){var count=result?parseInt(result,10):0;totalPlayers+=count;numServers-=1;if(numServers===0){self.client.set("total_players",totalPlayers,function(){if(updatedCallback){updatedCallback(totalPlayers)}})}})})})}else{console.error("Memcached client not connected")}},updateWorldDistribution:function(worlds){this.client.set("world_distribution_"+this.config.server_name,worlds)},updateWorldCount:function(){this.client.set("world_count_"+this.config.server_name,this.config.nb_worlds)},getOpenWorldCount:function(callback){this.client.get("world_count_"+this.config.server_name,function(error,result){callback(result)})},getTotalPlayers:function(callback){this.client.get("total_players",function(error,result){callback(result)})}});module.exports=Metrics},{"./lib/class":5,memcache:undefined,underscore:354}],8:[function(require,module,exports){var cls=require("./lib/class");var ProductionConfig={};ProductionConfig=cls.Class.extend({init:function(config){this.config=config;try{this.production=require("../production_hosts/"+config.production+".js")}catch(err){this.production=null}},inProduction:function(){if(this.production!==null){return this.production.isActive()}return false},getProductionSettings:function(){if(this.inProduction()){return this.production}}});module.exports=ProductionConfig},{"./lib/class":5}],9:[function(require,module,exports){var crypto=require("crypto");var fs=require("fs");var redis=require("redis");var bcrypt=require("bcrypt");var Utils=require("./utils");var client;var hgetarray=function(hash,key,callback){if(Array.isArray(key)){var m=client.multi();for(var i=0;i<key.length;++i)m.hget(hash,key[i]);m.exec(callback)}else{client.hget(hash,key,callback)}};var getStoreType=function(type){var sType;switch(type){case 0:sType="iItem_";break;case 1:sType="bItem_";break;case 2:sType="eItem_";break}return sType};var getStoreTypeNew=function(type){var sType;switch(type){case 0:sType="inventory";break;case 1:sType="bank";break;case 2:sType="equipment";break}return sType};var getItemsStoreCount=function(type){if(type===1)return 96;if(type===2)return 5;return 50};module.exports=DatabaseHandler=cls.Class.extend({init:function(config){var self=this;client=redis.createClient(config.redis_port,config.redis_host,{socket_nodelay:true});client.auth(config.redis_password);client.on("error",function(err){console.error("Redis error: "+err)});client.hgetarray=hgetarray;this.ready=true;if(config.remove_old_values===1)this.removeOldValues();this.insertMissingPlayerKeys()},replaceSkills:function(){var self=this;client.keys("p:*",function(err,keys){if(err)return console.log(err);for(var i=0,len=keys.length;i<len;i++){var key=keys[i];console.info(key);if(key.startsWith("p:")){var j=0;client.hget(key,"skills",function(err,data){var len=data.split(",").length;var key=keys[j++];client.hset(key,"skills","0,0,0,0,0,0,0")})}}})},removeOldValues:function(){var self=this;client.del("b:bans");client.del("s:auction");client.del("l:looks");client.keys("b:bans-*",function(err,keys){if(err)return console.log(err);for(var key of keys){client.del(key)}});client.keys("s:auction-*",function(err,keys){if(err)return console.log(err);for(var key of keys){client.del(key)}});client.keys("l:looks-*",function(err,keys){if(err)return console.log(err);for(var key of keys){client.del(key)}});client.keys("p:*",function(err,keys){if(err)return console.log(err);for(var i=0,len=keys.length;i<len;i++){var key=keys[i];console.info(key);if(key.startsWith("p:")){client.hdel(key,"newquests");client.hdel(key,"newquests2");client.hdel(key,"completeQuests");client.hdel(key,"completeQuests2")}}})},insertMissingPlayerKeys:function(){client.keys("p:*",function(err,keys){if(err)return console.log(err);client.smembers("player",function(err,reply){for(var pName of keys){var pName=pName.substr(2);if(!reply.includes(pName)){client.sadd("player",pName)}}})})},createPlayerKeys:function(){client.keys("p:*",function(err,arr){for(var rec of arr){console.info("rec="+rec);var playerName=rec.substr(2);if(playerName.length>0)client.sadd("player",playerName)}})},ExistsUsername:function(name,callback){return this.isNameInSet("usr",name,callback)},ExistsPlayerName:function(name,callback){return this.isNameInSet("player",name,callback)},isNameInSet:function(setName,name,callback){var nameLower=name.toLowerCase();client.smembers(setName,function(err,reply){reply=reply.map(function(rec){return rec.toLowerCase()});if(callback)callback(name,reply.includes(nameLower))})},createUser:function(user){var self=this;var uKey="u:"+user.name;this.ExistsUsername(user.name,function(name,res){if(res){user.connection.send([Types.UserMessages.UC_ERROR,"userexists"]);user.connection.close("Username not available: "+user.name);return}var lenLooks=AppearanceData.Data.length;user.looks=new Uint8Array(lenLooks);for(var i=0;i<lenLooks;++i)user.looks[i]=0;user.looks[0]=1;user.looks[50]=1;user.looks[77]=1;user.looks[151]=1;user.gems=2e3;var curTime=(new Date).getTime();var data=[user.hash,user.salt,0,"",curTime,0,"",user.gems,Utils.BinArrayToBase64(user.looks),user.connection._connection.remoteAddress];self.saveUserInfo(user.name,data,function(username,data){user.hasLoggedIn=true;users[user.name]=1;loggedInUsers[user.name]=1;self.sendPlayers(user)})})},savePlayerUserInfo:function(username,playerName,data,callback){var uKey="u:"+username;client.multi().sadd("usr",username).hset(uKey,"gems",data[0]).hset(uKey,"looks2",data[1]).exec(function(err,replies){if(callback)callback(username,playerName,data)})},saveUserInfo:function(username,data,callback){var uKey="u:"+username;client.multi().sadd("usr",username).hset(uKey,"username",username).hset(uKey,"hash",data[0]).hset(uKey,"salt",data[1]).hset(uKey,"banTime",data[2]).hset(uKey,"banDuration",data[3]).hset(uKey,"lastLoginTime",data[4]).hset(uKey,"membership",data[5]).hset(uKey,"players",data[6]).hset(uKey,"gems",data[7]).hset(uKey,"looks2",data[8]).hset(uKey,"ipAddresses",data[9]).exec(function(err,replies){if(callback)callback(username,data)})},savePassword:function(username,hash){var uKey="u:"+username;client.hset(uKey,"hash",hash)},removeUser:function(user){var self=this;var uKey="u:"+user.name;client.hgetall(uKey,function(err,data){console.info("replies: "+data);console.info(JSON.stringify(data));if(data===null||!(typeof data==="object"))return;var db_user={hash:data.hash,salt:data.salt};console.info(JSON.stringify(db_user));console.error("USER CHECK USER");if(user.checkUser(db_user,true)){console.error("USER CHECK USER SUCCESS");var playerNames=data.players.split(",");for(var i=0;i<playerNames.length;++i){var pKey="p:"+playerNames[i];client.del(pKey)}client.del(uKey);client.srem("usr",user.name);user.connection.send([Types.UserMessages.UC_ERROR,"removed_user_ok"]);user.connection.close();return}user.connection.send([Types.UserMessages.UC_ERROR,"removed_user_fail"]);user.connection.close()})},loadUser:function(user){var self=this;var uKey="u:"+user.name;var curTime=(new Date).getTime();this.ExistsUsername(user.name,function(name,res){if(!res){user.connection.send([Types.UserMessages.UC_ERROR,"invalidlogin"]);return false}client.hgetall(uKey,function(err,data){console.info("replies: "+data);console.info(JSON.stringify(data));if(data===null||!(typeof data==="object"))return false;var db_user={hash:data.hash,salt:data.salt,banTime:data.banTime,banDuration:data.banDuration,lastLoginTime:data.lastLoginTime,membership:data.membership,players:data.players,ipAddresses:data.ipAddresses,gems:data.gems};if(!data.gems)db_user.gems=2e3;else db_user.gems=parseInt(data.gems);var len=AppearanceData.Data.length;db_user.looks=new Uint8Array(len);if(data.looks2){db_user.looks=Utils.Base64ToBinArray(data.looks2,len)}db_user.looks[0]=1;db_user.looks[50]=1;db_user.looks[77]=1;db_user.looks[151]=1;console.info(JSON.stringify(db_user));user.looks=db_user.looks;user.gems=db_user.gems;if(user.checkUser(db_user)){var ipAddress=user.connection._connection.remoteAddress;if(!data.ipAddesses)client.hset(uKey,"ipAddresses",ipAddress);else{if(!toString(data.ipAddesses).includes(ipAddress))client.hset(uKey,"ipAddresses",db_user.ipAddresses+","+ipAddress)}client.hset(uKey,"lastLoginTime",(new Date).getTime());self.sendPlayers(user);return true}return false})})},createPlayerNameInUser:function(username,playerName,callback){var uKey="u:"+username;client.hget(uKey,"players",function(err,reply){var db_players=[];if(reply)db_players=reply.split(",");if(!db_players.includes(playerName)){db_players.push(playerName);client.hset(uKey,"players",db_players.join(","))}if(callback)callback()})},sendPlayers:function(user){var uKey="u:"+user.name;client.hget(uKey,"players",function(err,reply){console.info("players_reply:"+reply);if(reply===null||reply===""){user.sendPlayers();return}var playerNames=reply.split(",");var db_players=[];var count=0;for(var i=0;i<playerNames.length;++i){var pKey="p:"+playerNames[i];console.info("pKey:"+pKey);var keyArray=["name","map","exps","colors","sprites"];hgetarray(pKey,keyArray,function(err,reply){if(err||!reply[0]){console.info("redis - sendPlayers, err:"+JSON.stringify(err));++count;return}console.info("reply:"+JSON.stringify(reply));var db_player={name:reply[0],map:reply[1].split(",")[0],exp:reply[2].split(",")[0],colors:reply[3].split(","),sprites:reply[4].split(",")};db_players.push(db_player);if(++count===playerNames.length)user.sendPlayers(db_players)})}})},createPlayer:function(playerName,callback){var self=this;this.ExistsPlayerName(playerName,function(name,res){if(res){if(callback)callback(playerName,false);return}console.info("CREATING PLAYER");if(callback)callback(playerName,true)})},loadUserInfo:function(username,callback){var uKey="u:"+username;client.hgetall(uKey,function(err,data){console.info("replies: "+data);console.info(JSON.stringify(data));if(data===null||!(typeof data==="object"))return;if(callback)callback(username,data)})},loadPlayerUserInfo:function(user,callback){var uKey="u:"+user.name;client.multi().hget(uKey,"gems").hget(uKey,"looks2").exec(function(err,data){if(data===null||!(typeof data==="object"))return;if(data[1]===null){var b64=Utils.BinArrayToBase64(user.looks);data[1]=b64}if(callback)callback(user.name,data)})},loadPlayerInfo:function(playerName,callback){var pKey="p:"+playerName;client.hdel(pKey,"skillSlots");client.multi().hget(pKey,"name").hget(pKey,"map").hget(pKey,"stats").hget(pKey,"exps").hget(pKey,"gold").hget(pKey,"skills").hget(pKey,"pStats").hget(pKey,"sprites").hget(pKey,"colors").hget(pKey,"shortcuts").hget(pKey,"completeQuests").exec(function(err,data){if(data===null||!(typeof data==="object"))return;if(callback)callback(playerName,data)})},savePlayerInfo:function(playerName,data,callback){var pKey="p:"+playerName;client.multi().sadd("player",data[0]).hset(pKey,"name",data[0]).hset(pKey,"map",data[1]).hset(pKey,"stats",data[2]).hset(pKey,"exps",data[3]).hset(pKey,"gold",data[4]).hset(pKey,"skills",data[5]).hset(pKey,"pStats",data[6]).hset(pKey,"sprites",data[7]).hset(pKey,"colors",data[8]).hset(pKey,"shortcuts",data[9]).hset(pKey,"completeQuests",data[10]).exec(function(err,replies){if(err){console.warn(err);console.warn(JSON.stringify(replies));return}if(callback)callback(playerName)})},addPlayerGoldOffline:function(playerName,goldAmount){console.info("redis.addPlayerGoldOffline: playerName:"+playerName);console.info("goldAmount:"+goldAmount);var pKey="p:"+playerName;client.hget(pKey,"goldoffline",function(err,data){console.info("modifyGold.gold: "+JSON.stringify(data));if(!data){console.error("redis.addPlayerGoldOffline - no goldoffline record for player '"+playerName+"' found.");return}if(err||!data||data===""){console.warn(err);console.warn(JSON.stringify(data));return}var currentGold=parseInt(data);console.info("currentGold:"+currentGold);var totalGold=Math.max(0,currentGold+goldAmount);client.hset(pKey,"goldoffline",totalGold,function(err){if(err)console.warn("redis.addPlayerGoldOffline: save error, "+JSON.stringify(err))})})},transferOfflineGold:function(playerName,callback){console.info("redis.transferOfflineGold: playerName:"+playerName);var self=this;this.getGoldOffline(playerName,function(playerName,addGold){self.modifyGold(playerName,addGold,0,function(playerName){self.resetGoldOffline(playerName,function(playerName){if(callback)callback(playerName)})})})},resetGoldOffline:function(playerName,callback){console.info("redis.resetGoldOffline: playerName:"+playerName);var pKey="p:"+playerName;client.hset(pKey,"goldoffline",0,function(err,data){if(err){console.info("redis.resetGoldOffline: "+JSON.stringify(err))}if(callback)callback(playerName)})},getGoldOffline:function(playerName,callback){console.info("redis.getGoldOffline: playerName:"+playerName);var type=type||0;var golddiff=parseInt(golddiff);var pKey="p:"+playerName;client.hget(pKey,"goldoffline",function(err,data){console.info("getGoldOffline.gold: "+JSON.stringify(data));if(!data){console.error("redis.getGoldOffline - no gold record for player '"+playerName+"' found.");if(callback)callback(playerName,0);return}if(err||!data||data===""){console.warn(err);console.warn(JSON.stringify(data));return}var gold=data.split(",");if(callback)callback(playerName,parseInt(gold[0]))})},modifyGold:function(playerName,golddiff,type,callback){console.info("redis.modifyGold: playerName:"+playerName);console.info("golddiff:"+golddiff);console.info("type:"+type);var type=type||0;var golddiff=parseInt(golddiff);var pKey="p:"+playerName;client.hget(pKey,"gold",function(err,data){console.info("modifyGold.gold: "+JSON.stringify(data));if(!data){console.error("redis.modifyGold - no gold record for player '"+playerName+"' found.");if(callback)callback(playerName,golddiff,type);return}if(err||!data||data===""){console.warn(err);console.warn(JSON.stringify(data));if(callback)callback(playerName,golddiff,type);return}var gold=data.split(",");gold[type]=parseInt(gold[type])+golddiff;client.hset(pKey,"gold",gold.join(","),function(err){if(err){console.warn("redis.modifyGold: save gold error "+JSON.stringify(err))}if(callback)callback(playerName,golddiff,type)})})},modifyGems:function(username,diff){var uKey="u:"+username;var diff=parseInt(diff);client.hget(uKey,"gems",function(err,data){var gems=parseInt(data);gems+=diff;client.hset(uKey,"gems",gems)})},loadItems:function(playerName,type,callback){var self=this;var pKey="p:"+playerName;var maxNumber=getItemsStoreCount(type);var sType=getStoreTypeNew(type);client.hget(pKey,sType,function(err,data){if(err||!data||data===""){console.warn(err);console.warn(JSON.stringify(data));return}if(callback)callback(playerName,data)})},saveItems:function(playerName,type,data,callback){var pKey="p:"+playerName;var sType=getStoreTypeNew(type);console.info("saveItems: "+data);console.info("pKey: "+pKey);console.info("sType: "+sType);client.hset(pKey,sType,data,function(err,replies){if(err||!data||data===""){console.warn(err);console.warn(JSON.stringify(replies));console.warn(JSON.stringify(data));return}if(callback)callback(playerName)})},saveQuests:function(playerName,data,callback){var pKey="p:"+playerName;client.hset(pKey,"newquests",data,function(err,replies){if(err||!data||data===""){console.warn(err);console.warn(JSON.stringify(replies));console.warn(JSON.stringify(data));return}if(callback)callback(playerName)})},loadQuests:function(playerName,callback){var self=this;console.info("loadQuest");var pKey="p:"+playerName;var multi=client.multi();var indexes;client.hget(pKey,"newquests",function(err,data){if(err||!data||data===""){console.warn(err);console.warn(JSON.stringify(data));data=[]}console.info(pKey);console.info("getItems - data="+data);if(callback)callback(playerName,data)})},saveAchievements:function(playerName,data,callback){console.info("saveAchievement");var pKey="p:"+playerName;client.hset(pKey,"achievements",data,function(err,replies){if(err){console.warn(err);console.warn(JSON.stringify(replies));console.warn(JSON.stringify(data));return}if(callback)callback(playerName)})},loadAchievements:function(playerName,callback){console.info("loadAchievement");var pKey="p:"+playerName;client.hget(pKey,"achievements",function(err,data){if(err||!data||data===""){console.warn(err);console.warn(JSON.stringify(data));return}if(callback)callback(playerName,data)})},loadAuctions:function(worldKey,callback){var key="s:auction-"+worldKey;client.smembers(key,function(err,reply){if(err||reply===null||!(typeof reply==="object")){console.warn("loadAuctions - err: "+JSON.stringify(err));console.warn("loadAuctions - data: "+JSON.stringify(reply));return}if(callback)callback(worldKey,reply);return})},saveAuctions:function(worldKey,data,callback){console.info("redis - saveAuctions: "+JSON.stringify(data));var key="s:auction-"+worldKey;client.del(key);var multi=client.multi();var exec=data.length>0;for(var i=0;i<data.length;++i){multi.sadd(key,data[i])}if(exec){multi.exec(function(err,reply){if(err){console.error("redis - saveAuctions: "+JSON.stringify(err));return}if(callback)callback(worldKey,reply)})}},loadLooks:function(worldKey,callback){var key="l:looks-"+worldKey;client.hget(key,"prices",function(err,reply){if(err||!reply||reply===""){console.warn(err);console.warn(JSON.stringify(reply));return}if(reply){if(callback)callback(worldKey,reply)}})},saveLooks:function(worldKey,looks,callback){console.info("redis - saveLooks: ");var key="l:looks-"+worldKey;client.del(key);client.hset(key,"prices",looks.join(","),function(err,reply){if(err){console.error("redis - saveLooks:"+JSON.stringify(err));return}if(callback)callback(worldKey,reply)})},loadBans:function(worldKey,callback){var key="b:bans-"+worldKey;client.smembers(key,function(err,reply){if(err||reply===null||!(typeof reply==="object")){console.warn("loadBans - err: "+JSON.stringify(err));console.warn("loadBans - data: "+JSON.stringify(reply));return}if(callback)callback(worldKey,reply);return})},saveBans:function(worldKey,data,callback){console.info("redis - saveBans: ");var key="b:bans-"+worldKey;client.del(key);if(data.length===0)return;console.warn("data:"+JSON.stringify(data));var multi=client.multi();for(var i=0;i<data.length;++i){multi.sadd(key,data[i])}multi.exec(function(err,reply){if(err){console.error("redis - saveBans: "+JSON.stringify(err));return}if(callback)callback(worldKey,reply)})}})},{"./utils":12,bcrypt:34,crypto:undefined,fs:undefined,redis:246}],10:[function(require,module,exports){var crypto=require("crypto"),formatCheck=require("./format").check,UserMessages=require("./usermessage"),bcrypt=require("bcrypt"),CryptoJS=require("crypto-js");function PlayerSummary(index,db_player){this.index=index;this.name=db_player.name;this.exp=db_player.exp;this.colors=db_player.colors;this.sprites=db_player.sprites;return this}PlayerSummary.prototype.toArray=function(){return[this.index,this.name,this.exp,this.colors[0],this.colors[1],this.sprites[0],this.sprites[1]]};PlayerSummary.prototype.toString=function(){return this.toArray().join(",")};module.exports=User=cls.Class.extend({init:function(main,connection,worldConnection){var self=this;this.main=main;this.connection=connection;this.hashChallenge=connection.hash;connection.user=this;this.worldConnection=null;this.currentPlayer=null;this.players=[];this.loadedUser=false;this.loadedPlayer=false;this.player_loggedin=false;this.looks=new Uint8Array(AppearanceData.Data.length);this.looks[0]=1;this.looks[50]=1;this.looks[77]=1;this.looks[151]=1;this.gems=0;this.lastPacketTime=Date.now();this.listener=function(message){console.info("recv[0]="+message);var action=parseInt(message[0]);if(!action)return;if(!formatCheck(message)){self.connection.close("Invalid value "+action+" packet format: "+message);return}message.shift();switch(action){case Types.UserMessages.CU_CREATE_USER:self.handleCreateUser(message);return;case Types.UserMessages.CU_LOGIN_USER:self.handleLoginUser(message);return}if(!self.loadedUser){console.info("Cannot Login User: "+message);return}switch(action){case Types.UserMessages.CU_CREATE_PLAYER:self.handleCreatePlayer(message);return;case Types.UserMessages.CU_LOGIN_PLAYER:self.handleLoginPlayer(message);return;case Types.UserMessages.CU_REMOVE_USER:self.handleRemoveUser(message);return}if(!self.loadedPlayer){console.info("Cannot Login: "+message);return}};this.connection.listen(this.listener)},onClose:function(){console.info("onClose - called");clearTimeout(this.disconnectTimeout);console.warn("User.onClose - called.");if(this.hasLoggedIn)delete loggedInUsers[this.name];delete users[this.name];delete this},send:function(message){this.connection.send(message)},sendWorld:function(message){this.worldConnection.send(message)},handleCreateUser:function(message){var self=this;var name=Utils.sanitize(message[0]);var hash=Utils.sanitize(message[1]);hash=Utils.btoa(hash);console.info("Starting Client/Server Handshake");self.name=name.substr(0,16).trim().toLowerCase();console.info("self.user.name="+self.name);var bytes=CryptoJS.AES.decrypt(hash,this.hashChallenge);var decrypt=JSON.parse(bytes.toString(CryptoJS.enc.Utf8));var current_date=(new Date).valueOf().toString();var random=Math.random().toString();var salt=crypto.createHash("sha1").update(current_date+random).digest("hex");hash=crypto.createHash("sha1").update(decrypt+salt).digest("hex");try{if(!Utils.checkInputName(self.name)){self.connection.sendU([Types.UserMessages.UC_ERROR,"invalidusername"]);return}self.hash=hash;self.salt=salt;DBH.createUser(self)}catch(e){console.info("message="+e.message);console.info("stack="+e.stack)}},handleLoginUser:function(message){var self=this;var name=Utils.sanitize(message[0]);var hash=Utils.sanitize(message[1]);hash=Utils.btoa(hash);console.info("Starting Client/Server Handshake");self.name=name.substr(0,16).trim().toLowerCase();console.info("self.name="+self.name);try{if(!Utils.checkInputName(self.name)){self.connection.send([Types.UserMessages.SC_ERROR,"invalidname"]);return}self.hash=hash;DBH.loadUser(self)}catch(e){console.info("message="+e.message);console.info("stack="+e.stack)}},handleRemoveUser:function(message){var self=this;var hash=Utils.sanitize(message[1]);hash=Utils.btoa(hash);console.info("self.name="+self.name);try{self.hash=hash;DBH.removeUser(self)}catch(e){console.info("message="+e.message);console.info("stack="+e.stack)}},checkUser:function(db_user,skip_logged_in){skip_logged_in=skip_logged_in||false;var curTime=Date.now();var banTime=db_user.banTime+db_user.banDuration;if(banTime>curTime){this.connection.send([Types.UserMessages.UC_ERROR,"ban"]);this.connection.close("Closing connection to: "+player.name);return false}if(db_user.membershipTime>curTime){user.membership=true}var bytes=CryptoJS.AES.decrypt(this.hash,this.hashChallenge);var decrypt=JSON.parse(bytes.toString(CryptoJS.enc.Utf8));var hash=crypto.createHash("sha1").update(decrypt+db_user.salt).digest("hex");console.info("checkUser: "+hash+" !== "+db_user.hash);if(hash!==db_user.hash){this.connection.send([Types.UserMessages.UC_ERROR,"invalidlogin"]);if(++this.passwordTries>3)this.connection.close("Wrong Password: "+this.name);return false}console.info("LOGIN: "+this.name);console.info("loggedInUsers: "+JSON.stringify(loggedInUsers));if(users.hasOwnProperty(this.name)){this.connection.send([Types.UserMessages.UC_ERROR,"loggedin"]);return false}if(loggedInUsers.hasOwnProperty(this.name)){this.connection.send([Types.UserMessages.UC_ERROR,"loggedin"]);return false}for(var wh of worldHandlers){if(wh.loggedInUsers.hasOwnProperty(this.name)){this.connection.send([Types.UserMessages.UC_ERROR,"loggedin"]);return false}}users[this.name]=this;loggedInUsers[this.name]=1;this.hasLoggedIn=true;var d=new Date;var lastLoginTimeDate=new Date(db_user.lastLoginTime);return true},sendPlayers:function(db_players){this.loadedUser=true;if(!Array.isArray(db_players)){this.connection.send([Types.UserMessages.UC_PLAYER_SUM,"0"]);return}var sendMsg=[Types.UserMessages.UC_PLAYER_SUM,db_players.length];for(var i=0;i<db_players.length;++i){var dbp=db_players[i];var playerSum=new PlayerSummary(i,dbp);this.players.push(playerSum);sendMsg=sendMsg.concat(playerSum.toArray())}this.connection.send(sendMsg)},handleCreatePlayer:function(message){var self=this;var worldIndex=parseInt(message[0]);var name=Utils.sanitize(message[1]);var worldHandler=this.getWorldHandler(worldIndex);var tmpPlayer={name:name};console.info("Starting Client/Server Handshake");tmpPlayer.name=tmpPlayer.name.substr(0,16).trim();if(!Utils.checkInputName(tmpPlayer.name)){user.connection.send([Types.UserMessages.UC_ERROR,"invalidname"]);return}var db_player={name:tmpPlayer.name,map:0,exp:0,colors:[0,0],sprites:[0,0]};var playername=db_player.name;var playerSummary=new PlayerSummary(this.players.length,db_player);this.players.push(playerSummary);console.info("self.player.name="+db_player.name);try{var callback=function(db_player){if(self.loginPlayer(worldIndex,playerSummary)){var p=self.currentPlayer;p.name=db_player.name;players.push(p)}};DBH.createPlayer(playername,function(playername,res){if(res){worldHandler.createPlayerToWorld(self,self.name,playername)}else{self.connection.send([Types.UserMessages.UC_ERROR,"playerexists"])}})}catch(e){console.info("message="+e.message);console.info("stack="+e.stack)}},handleLoginPlayer:function(message){var worldIndex=parseInt(message[0]);var playerIndex=parseInt(message[1]);if(playerIndex<0&&playerIndex>=this.players.length)return false;this.loginPlayer(worldIndex,this.players[playerIndex])},getWorldHandler:function(worldIndex){if(worldIndex<0||worldIndex>=worldHandlers.length){console.info("getWorldHandler - worldIndex out of range.");return null}console.info("worldIndex: "+worldIndex);var worldHandler=worldHandlers[worldIndex];if(!worldHandler){console.info("No world Handler!");return null}return worldHandler},loginPlayer:function(worldIndex,playerSummary){var worldHandler=this.getWorldHandler(worldIndex);var playerName=playerSummary.name;this.playerName=playerName;if(worldHandler){worldHandler.sendPlayerToWorld(this,this.name,playerName)}else{console.info("No world Handler!")}player_users[playerName]=this;return true}})},{"./format":4,"./usermessage":11,bcrypt:34,crypto:undefined,"crypto-js":58}],11:[function(require,module,exports){var _=require("underscore");var cls=require("./lib/class");var UserMessages={};module.exports=UserMessages;var Message=cls.Class.extend({});UserMessages.WorldReady=Message.extend({init:function(user,protocol,address,port){this.user=user;this.protocol=protocol;this.address=address;this.port=port},serialize:function(){return[Types.UserMessages.UC_WORLD_READY,this.user.name,this.user.playerName,this.user.hash,this.protocol,this.address,this.port]}});UserMessages.LoadPlayerAuctions=Message.extend({init:function(data){this.data=data},serialize:function(){return[Types.UserMessages.UW_LOAD_PLAYER_AUCTIONS].concat(this.data)}});UserMessages.LoadPlayerLooks=Message.extend({init:function(data){this.data=data},serialize:function(){return[Types.UserMessages.UW_LOAD_PLAYER_LOOKS].concat(this.data)}});UserMessages.LoadUserBans=Message.extend({init:function(data){this.data=data},serialize:function(){return[Types.UserMessages.UW_LOAD_USER_BANS].concat(this.data)}});UserMessages.SendLoadPlayerData=Message.extend({init:function(playerName,playerData){this.playerName=playerName;this.playerData=playerData},serialize:function(){return[Types.UserMessages.UW_LOAD_PLAYER_DATA,this.playerName,this.playerData]}})},{"./lib/class":5,underscore:354}],12:[function(require,module,exports){var Utils={},sanitizer=require("sanitizer");Utils.sanitize=function(string){return sanitizer.escape(sanitizer.sanitize(string))};Utils.random=function(range){return Math.floor(Math.random()*range)};Utils.randomRange=function(min,max){return min+Math.random()*(max-min)};Utils.randomInt=function(val){return Math.floor(Math.random()*(val+1))};Utils.randomRangeInt=function(min,max){return min+Math.floor(Math.random()*(max-min+1))};Utils.percentToBool=function(percent){if(Math.random()<percent*.01){return true}else{return false}};Utils.ratioToBool=function(ratio){if(Math.random()<ratio){return true}else{return false}};Utils.clamp=function(min,max,value){if(value<min){return min}else if(value>max){return max}else{return value}};Utils.randomOrientation=function(){var o,r=Utils.random(4);if(r===0)o=Types.Orientations.LEFT;if(r===1)o=Types.Orientations.RIGHT;if(r===2)o=Types.Orientations.UP;if(r===3)o=Types.Orientations.DOWN;return o};Utils.getOrientationString=function(r){var o="NONE";if(r===1)o="UP";else if(r===2)o="DOWN";else if(r===3)o="LEFT";else if(r===4)o="RIGHT";return o};Utils.getOrientationFromLastMove=function(entity){if(!entity.path||entity.path.length===0)return Utils.randomOrientation();var x2=entity.path[entity.path.length-1][0];var y2=entity.path[entity.path.length-1][1];if(entity.path.length===1){var x=entity.x;var y=entity.y}else{var x=entity.path[entity.path.length-2][0];var y=entity.path[entity.path.length-2][1]}if(x2>x)return Types.Orientations.RIGHT;else if(x2<x)return Types.Orientations.LEFT;else if(y2>y)return Types.Orientations.DOWN;else if(y2<y)return Types.Orientations.UP};Utils.randomPositionNextTo=function(entity){var a=entity.x,b=entity.y,r=Utils.random(4);if(r===0)--a;if(r===1)++a;if(r===2)--b;if(r===3)++b;return{x:a,y:b}};Utils.Mixin=function(target,source){if(source){for(var key,keys=Object.keys(source),l=keys.length;l--;){key=keys[l];if(source.hasOwnProperty(key)){target[key]=source[key]}}}return target};Utils.distanceTo=function(x,y,x2,y2){var distX=Math.abs(x-x2);var distY=Math.abs(y-y2);return distX>distY?distX:distY};Utils.manhattenDistance=function(pos1,pos2){return Math.abs(pos1.x-pos2.x)+Math.abs(pos1.y-pos2.y)},Utils.realDistance=function(p1,p2){return~~Math.pow(Math.pow(p2[0]-p1[0],2)+Math.pow(p2[1]-p1[1],2),.5)},Utils.NaN2Zero=function(num){if(isNaN(num*1)){return 0}else{return num*1}};Utils.trueFalse=function(bool){return bool==="true"?true:false};Utils.utilSleep=function(ms){return new Promise(resolve=>setTimeout(resolve,ms))};Utils.removeDoubleQuotes=function(val){return val.toString().replace(/^"(.+(?="$))"$/,"$1")};Utils.max=function(array,colIndex){Math.max.apply(Math,array.map(function(v){return v[colIndex]}))};Utils.min=function(array,colIndex){Math.min.apply(Math,array.map(function(v){return v[colIndex]}))};Utils.array_values=function(input){var tmp_arr=[],key="";for(key in input)tmp_arr[tmp_arr.length]=input[key];return tmp_arr};Utils.arraysEqual=function(a,b){if(a===b)return true;if(a===null||b===null)return false;if(a.length!==b.length)return false;for(var i=0;i<a.length;++i){if(a[i]!==b[i])return false}return true};Utils.setEquipmentBonus=function(kind){if(ItemTypes.isWeapon(kind)||ItemTypes.isArcherWeapon(kind)||ItemTypes.isArmor(kind)){var probability=Utils.random(1024);var bonus=0;for(var i=1;i<=1024;i*=2){if(probability<i){return Math.max(10-bonus,1)}++bonus}}return 1};Utils.pad=function(val,size){var s=val+"";while(s.length<size)s="0"+s;return s};Utils.checkInputName=function(name){if(name===null)return false;else if(name==="")return false;else if(name===" ")return false;for(var i=0;i<name.length;i++){var c=name.charCodeAt(i);if(!(44032<=c&&c<=55203||12593<=c&&c<=12686||97<=c&&c<=122||65<=c&&c<=90||48<=c&&c<=57)){return false}}return true};if(!Array.prototype.last){Object.defineProperty(Array.prototype,"last",{value:function(){return this[this.length-1]}})}if(!Array.prototype.parseInt){Object.defineProperty(Array.prototype,"parseInt",{value:function(){return this.map(function(x){return parseInt(x,10)})}})}ArrayParseInt=function(){return this.map(function(x){return parseInt(x,10)})};if(!String.prototype.reverse){String.prototype.reverse=function(){return this.split("").reverse().join("")}}Utils.ceilGrid=function(val){return~~(val+.5)};if(!Number.prototype.ceilGrid){Number.prototype.ceilGrid=function(){return~~(this+.5)}}Utils.minProp=function(arr,prop){return arr.reduce(function(prev,curr){return prev[prop]<curr[prop]?prev:curr})};Utils.maxProp=function(arr,prop){return arr.reduce(function(prev,curr){return prev[prop]>curr[prop]?prev:curr})};Utils.Sleep=function(ms){return new Promise(resolve=>setTimeout(resolve,ms))};var groupBy=function(xs,key){return xs.reduce(function(rv,x){(rv[x[key]]=rv[x[key]]||[]).push(x);return rv},{})};Utils.GetGroupCountArray=function(groupArray,field){var group=groupBy(groupArray,field);var array=[];for(var rec in group){array.push([rec,group[rec].length])}console.info(JSON.stringify(array));array.sort(function(a,b){return a[1]-b[1]});return array};Utils.roundTo=function(val,nearest){return Math.round(val/nearest)*nearest};Utils.floorTo=function(val,nearest){return Math.floor(val/nearest)*nearest};Utils.ceilTo=function(val,nearest){return Math.ceil(val/nearest)*nearest};Utils.btoa=function(val){return Buffer.from(val,"base64").toString("utf8")};Utils.getGridPosition=function(x,y){return{gx:x>>4,gy:y>>4}};Utils.BinArrayToBase64=function(uint8array){var len=Math.ceil(uint8array.length/32);var tarr=[];for(var i=0;i<len;i++){var num=uint8array.slice(i*32,i*32+32).join("");tarr.push(parseInt(num,2))}var base64=tarr.toString("base64");return base64};Utils.Base64ToBinArray=function(base64,limit){var data=base64.toString("binary");var arr=data.split(",");var uint8array=new Uint8Array(arr.length*32);for(var i=0;i<arr.length;++i){var dec=parseInt(arr[i]);var bin=dec.toString(2);var l=bin.length;var index=(i+1)*32-l;for(var j=0;j<l;++j)uint8array[index+j]=bin[j]}return uint8array.slice(0,limit)};if(!Array.prototype.removeVal){Object.defineProperty(Array.prototype,"removeVal",{value:function(val){return this.splice(this.indexOf(val),1)}})}module.exports=Utils},{sanitizer:260}],13:[function(require,module,exports){var formatCheck=require("./format").check,UserMessages=require("./usermessage");module.exports=WorldHandler=cls.Class.extend({init:function(main,connection){var self=this;this.main=main;this.connection=connection;this.world=null;this.users={};this.SAVED_AUCTIONS=false;this.SAVED_LOOKS=false;this.SAVED_BANS=false;this.SAVED_PLAYERS=true;this.playerSaveData={};this.playerLoadData={};this.playerCreateData={};this.loggedInUsers={};this.block=false;this.listener=function(message){console.info("recv[0]="+message);var action=parseInt(message[0]);if(!action)return;if(!formatCheck(message)){self.connection.close("Invalid value "+action+" packet format: "+message);return}message.shift();if(action===Types.UserMessages.WU_GAMESERVER_INFO){self.handleGameServerInfo(message);return}if(!self.game_server)return;if(action===Types.UserMessages.WU_UPDATE_PLAYER_COUNT){self.handleUpdatePlayerCount(message);return}else if(action===Types.UserMessages.WU_SAVE_PLAYER_DATA){self.handleSavePlayerData(message);return}else if(action===Types.UserMessages.WU_PLAYER_LOGGED_IN){self.handlePlayerLoggedIn(message);return}else if(action===Types.UserMessages.WU_SAVE_PLAYERS_LIST){self.handleSavePlayersList(message);return}else if(action===Types.UserMessages.WU_PLAYER_LOADED){self.handlePlayerLoaded(message);return}else if(action===Types.UserMessages.WU_SAVE_PLAYER_AUCTIONS){self.handleSavePlayerAuctions(message);return}else if(action===Types.UserMessages.WU_SAVE_PLAYER_LOOKS){self.handleSavePlayerLooks(message);return}else if(action===Types.UserMessages.WU_SAVE_USER_BANS){self.handleSaveUserBans(message);return}else if(action===Types.UserMessages.WU_ADD_PLAYER_GOLD){self.handleAddPlayerGold(message);return}};this.connection.listen(this.listener)},send:function(message){this.connection.send(message)},sendClient:function(message){if(this.user)this.user.connection.send(message.serialize());else{console.warn("sendClient called without user set: "+JSON.stringify(message.serialize()))}},sendMessage:function(message){this.connection.send(message.serialize())},handleSavePlayersList:function(msg){console.info("handleSavePlayersList: "+JSON.stringify(msg));if(msg[0].length===0){this.SAVED_PLAYERS=true;return}this.SAVED_PLAYERS=false},handleSavePlayerAuctions:function(msg){console.info("worldHandler, handleSavePlayerAuctions: "+JSON.stringify(msg));var self=this;if(!this.world){console.warn("handleSavePlayerAuctions: world is not set.");return}if(Array.isArray(msg)&&msg.length===0){self.SAVED_AUCTIONS=true;return}DBH.saveAuctions(this.world.key,msg,function(key,data){self.SAVED_AUCTIONS=true})},handleSavePlayerLooks:function(msg){console.info("worldHandler, handleSavePlayerLooks: ");var self=this;if(!this.world){console.warn("handleSavePlayerLooks: world is not set.");return}DBH.saveLooks(this.world.key,msg,function(key,data){self.SAVED_LOOKS=true})},handleSaveUserBans:function(msg){console.info("worldHandler, handleSaveUserBans: ");var self=this;if(!this.world){console.warn("handleSaveUserBans: world is not set.");return}if(Array.isArray(msg[0])&&msg[0].length===0){self.SAVED_BANS=true;return}DBH.saveBans(this.world.key,msg[0],function(key,data){self.SAVED_BANS=true})},release:function(){console.info("worldHandler released.");for(var tmp in this.loggedInUsers){console.info("releasing user: "+tmp);delete loggedInUsers[tmp]}delete this.loggedInUsers;delete this},handlePlayerLoggedIn:function(msg){console.info("handlePlayerLoggedIn: "+JSON.stringify(msg));var status=Number(msg[0]);var username=msg[1];var playerName=msg[2];if(status===1){loggedInUsers[username]=playerName;this.loggedInUsers[username]=username;this.users[username]=username}else{delete loggedInUsers[username];delete this.loggedInUsers[username];delete this.users[username]}},handleGameServerInfo:function(msg){console.info("handleGameServerInfo: "+JSON.stringify(msg));var self=this;var world={name:msg[0],count:parseInt(msg[1]),maxCount:parseInt(msg[2]),ipAddress:msg[3],port:parseInt(msg[4]),password:msg[5],key:msg[6]};if(world.password===MainConfig.user_password){this.game_server=true}else{return}this.world=world;self.sendAuctionsToWorld(self.worldIndex);self.sendLooksToWorld(self.worldIndex);self.sendBansToWorld(self.worldIndex)},handleUpdatePlayerCount:function(msg){this.world.count=parseInt(msg[0]);this.world.maxCount=parseInt(msg[1])},handleSavePlayerData:function(msg){console.info("handleSavePlayerData: "+JSON.stringify(msg));var self=this;var playerName=msg[0];var data=msg[1];var update=parseInt(msg[2])===1;if(!this.playerSaveData.hasOwnProperty(playerName)){console.warn("CANNOT SAVE PLAYER AS NOT SENT TO GAME SERVER.");return}this.playerSaveData[playerName]=0;var username=data[0].shift();var hash=data[0].shift();var checkPlayerSaved=function(playerName){self.playerSaveData[playerName]++;if(self.playerSaveData[playerName]===7){DBH.createPlayerNameInUser(username,playerName);if(!update){delete self.playerSaveData[playerName];delete loggedInUsers[username]}console.info("loggedInUsers: "+JSON.stringify(loggedInUsers))}if(Object.keys(self.playerSaveData).length===0){DBH.transferOfflineGold(playerName,function(playerName){self.SAVED_PLAYERS=true})}};DBH.savePlayerUserInfo(username,playerName,data[0],function(username,playerName,data){checkPlayerSaved(playerName)});DBH.savePlayerInfo(playerName,data[1],function(playerName){checkPlayerSaved(playerName)});DBH.saveQuests(playerName,JSON.stringify(data[2]),function(playerName){checkPlayerSaved(playerName)});DBH.saveAchievements(playerName,data[3],function(playerName){checkPlayerSaved(playerName)});DBH.saveItems(playerName,0,data[4],function(playerName){checkPlayerSaved(playerName)});DBH.saveItems(playerName,1,data[5],function(playerName){checkPlayerSaved(playerName)});DBH.saveItems(playerName,2,data[6],function(playerName){checkPlayerSaved(playerName)})},handlePlayerLoaded:function(msg){console.info("handlePlayerLoaded");var protocol=msg[0],address=msg[1],port=msg[2];this.sendClient(new UserMessages.WorldReady(this.user,protocol,address,port));this.block=false},handleCreatePlayerInfo:function(playername){console.info("handleCreatePlayerInfo");var data=[playername,"0,0,0,0","2,2,2,2,2,0","0,0,0,0,0,0,0,0,0,0","0,0","0,0,0,0,0,0,0","0,0","77,0,151,50","0,0","{}","{}"];return data},handleCreatePlayerQuests:function(playername){console.info("handleCreatePlayerQuests");return"[]"},handleCreatePlayerAchievements:function(playername){console.info("handleCreatePlayerAchievements");return"[]"},handleCreatePlayerItems:function(playername){console.info("handleCreatePlayerItems");return"[]"},createPlayerToWorld:function(user,username,playername){console.info("createPlayerToWorld");var self=this;this.block=true;user.playerName=playername;this.user=user;console.info("SENDING USERNAME: "+username);console.info("SENDING PLAYER: "+playername);var playerName=playername;var checkLoadDataFull=function(index,data){var objData=self.playerCreateData[playerName];objData.count++;objData.data[index]=data;if(objData.count===7){self.playerSaveData[playerName]=0;self.sendMessage(new UserMessages.SendLoadPlayerData(playerName,objData.data));delete self.playerCreateData[playerName]}self.playerCreateData[playerName]=objData};DBH.loadPlayerUserInfo(user,function(username,data){var objData={};objData.data=new Array(7);objData.count=0;self.playerCreateData[playerName]=objData;data.unshift(self.user.hash);data.unshift(username);checkLoadDataFull(0,data);data=self.handleCreatePlayerInfo(playerName);checkLoadDataFull(1,data);data=self.handleCreatePlayerQuests(playerName);checkLoadDataFull(2,data);data=self.handleCreatePlayerAchievements(playerName);checkLoadDataFull(3,data);data=self.handleCreatePlayerItems(playerName);checkLoadDataFull(4,data);data=self.handleCreatePlayerItems(playerName);checkLoadDataFull(5,data);data=self.handleCreatePlayerItems(playerName);checkLoadDataFull(6,data)})},sendAuctionsToWorld:function(worldindex){var self=this;if(!this.world){console.warn("sendAuctionsToWorld - no world set.");return}DBH.loadAuctions(this.world.key,function(key,db_data){console.info("sendAuctionsToWorld: "+JSON.stringify(db_data));self.sendMessage(new UserMessages.LoadPlayerAuctions(db_data))})},sendLooksToWorld:function(worldindex){var self=this;if(!this.world){console.warn("sendLooksToWorld - no world set.");return}DBH.loadLooks(this.world.key,function(key,db_data){var data=db_data.split(",");data=data.parseInt();self.sendMessage(new UserMessages.LoadPlayerLooks(data))})},sendBansToWorld:function(worldindex){var self=this;if(!this.world){console.warn("sendLooksToWorld - no world set.");return}DBH.loadBans(this.world.key,function(key,db_data){self.sendMessage(new UserMessages.LoadUserBans(db_data))})},handleAddPlayerGold:function(msg){var playerName=msg[0];var goldAmount=parseInt(msg[1]);DBH.addPlayerGoldOffline(playerName,goldAmount)},sendWorldSave:function(){console.info("worldHandler - UW_WORLD_SAVE.");this.send([Types.UserMessages.UW_WORLD_SAVE])},sendWorldClose:function(){console.info("worldHandler - UW_WORLD_CLOSE.");this.send([Types.UserMessages.UW_WORLD_CLOSE])},savedWorldState:function(){console.info("WorldHandler, savedWorldState");console.info("SAVED_PLAYERS: "+this.SAVED_PLAYERS);console.info("SAVED_LOOKS: "+this.SAVED_LOOKS);console.info("SAVED_AUCTIONS: "+this.SAVED_AUCTIONS);console.info("SAVED_BANS: "+this.SAVED_BANS);return this.SAVED_PLAYERS&&this.SAVED_LOOKS&&this.SAVED_AUCTIONS&&this.SAVED_BANS},sendPlayerToWorld:function(user,username,playername){console.info("sendPlayerToWorld");var self=this;user.playerName=playername;this.user=user;console.info("SENDING USERNAME: "+username);console.info("SENDING PLAYER: "+playername);var checkLoadDataFull=function(index,db_data){var objData=self.playerLoadData[playername];objData.count++;objData.data[index]=db_data;if(objData.count===7){self.playerSaveData[playername]=0;self.sendMessage(new UserMessages.SendLoadPlayerData(playername,objData.data));delete self.playerLoadData[playername]}else{self.playerLoadData[playername]=objData}};DBH.loadPlayerUserInfo(user,function(username,db_data){var objData={};objData.data=new Array(7);objData.count=0;self.playerLoadData[playername]=objData;db_data.unshift(self.user.hash);db_data.unshift(username);checkLoadDataFull(0,db_data);DBH.loadPlayerInfo(playername,function(playername,db_data){checkLoadDataFull(1,db_data)});DBH.loadQuests(playername,function(playername,db_data){checkLoadDataFull(2,db_data)});DBH.loadAchievements(playername,function(playername,db_data){checkLoadDataFull(3,db_data)});DBH.loadItems(playername,0,function(playername,db_data){checkLoadDataFull(4,db_data)});DBH.loadItems(playername,1,function(playername,db_data){checkLoadDataFull(5,db_data)});DBH.loadItems(playername,2,function(playername,db_data){checkLoadDataFull(6,db_data)})})}})},{"./format":4,"./usermessage":11}],14:[function(require,module,exports){var _=require("underscore");var BISON=require("bison");var useBison=false;var cls=require("./lib/class");var http=require("http");var https=require("https");const{Server:Server}=require("socket.io");var url=require("url");var Utils=require("./utils");var WS={};var zlib=require("zlib");var connect=require("connect");var fs=require("fs");module.exports=WS;var sServer=cls.Class.extend({init:function(){},onConnect:function(callback){this.connectionCallback=callback},onDisconnect:function(callback){this.disconnectionCallback=callback},onError:function(callback){this.errorCallback=callback},broadcast:function(message){throw"Not implemented"},forEachConnection:function(callback){_.each(this._connections,callback)},addConnection:function(connection){this._connections[connection.id]=connection},removeConnection:function(id){delete this._connections[id]},getConnection:function(id){return this._connections[id]}});var Connection=cls.Class.extend({init:function(id,connection,server){this._connection=connection;this._server=server;this.id=id},onClose:function(callback){this.closeCallback=callback},listen:function(callback){this.listenCallback=callback},broadcast:function(message){throw"Not implemented"},send:function(message){throw"Not implemented"},sendUTF8:function(data){throw"Not implemented"},close:function(logError){console.info("Closing connection to "+this._connection.remoteAddress+". "+logError);this._connection.conn.close()}});WS.WebsocketServer=sServer.extend({_connections:{},_counter:0,init:function(config){var self=this;this._super();var app={};if(config.https_cert!==""){app.cert=fs.readFileSync(config.https_cert)}if(config.https_key!==""){app.key=fs.readFileSync(config.https_key)}var protocol=http;if(config.protocol==="https")protocol=https;var client_connect=function(socket){console.info("Client socket connected from "+socket.conn.remoteAddress);socket.remoteAddress=socket.conn.remoteAddress;var c=new WS.socketioConnection(self._createId(),socket,self);if(self.connectionCallback){self.connectionCallback(c)}self.addConnection(c)};this._protoServer=protocol.createServer(app);this._protoServer.listen(config.port,config.ip,function serverOnlyListening(){console.info("Server (only) is listening on port "+config.port)});this._ioServer=new Server(this._protoServer,{cors:{origin:"*"}});this._ioServer.on("connection",function webSocketListener(socket){client_connect(socket)});this._ioServer.on("connect_error",function(err){console.error(err)})},_createId:function(){return 5e4+this._counter++},broadcast:function(message){this.forEachConnection(function(connection){connection.send(message)})},onRequestStatus:function(statusCallback){this.statusCallback=statusCallback}});WS.socketioConnection=Connection.extend({init:function(id,connection,server){var self=this;this._super(id,connection,server);this._connection.on("connect_error",err=>{console.error(err.message)});this._connection.on("message",function(message){console.info("m="+message);console.info(typeof message);var flag=message.charAt(0);if(flag==="2"){var buffer=Buffer.from(flag,"base64");zlib.gunzip(buffer,(err,buffer)=>{if(err)console.log(err.toString());else{if(self.listenCallback){if(useBison){self.listenCallback(BISON.decode(buffer))}else{self.listenCallback(JSON.parse(buffer))}}}})}else{if(self.listenCallback){if(useBison){self.listenCallback(BISON.decode(message.substr(1)))}else{self.listenCallback(JSON.parse(message.substr(1)))}}}});this._connection.on("disconnect",function(){console.info("Client closed socket "+self._connection.conn.remoteAddress);if(self.closeCallback)self.closeCallback(self);if(self.hasOwnProperty("user"))self.user.onClose();self._connection.conn.close();delete self._server.removeConnection(self.id)})},send:function(message){console.info("send="+message);var self=this;var data;if(useBison){data=BISON.encode(message)}else{data=JSON.stringify(message)}if(data.length>=2048){zlib.gzip(data,{level:1},(err,buffer)=>{buffer=new Buffer(buffer).toString("base64");self.sendUTF8("2"+buffer)})}else{self.sendUTF8("1"+data)}},sendUTF8:function(data){this._connection.send(data)}})},{"./lib/class":5,"./utils":12,bison:36,connect:40,fs:undefined,http:undefined,https:undefined,"socket.io":326,underscore:354,url:undefined,zlib:undefined}],15:[function(require,module,exports){(function(__dirname){(function(){"use strict";module.exports=exports;exports.mockS3Http=require("./util/s3_setup").get_mockS3Http();exports.mockS3Http("on");const mocking=exports.mockS3Http("get");const fs=require("fs");const path=require("path");const nopt=require("nopt");const log=require("npmlog");log.disableProgress();const napi=require("./util/napi.js");const EE=require("events").EventEmitter;const inherits=require("util").inherits;const cli_commands=["clean","install","reinstall","build","rebuild","package","testpackage","publish","unpublish","info","testbinary","reveal","configure"];const aliases={};log.heading="node-pre-gyp";if(mocking){log.warn(`mocking s3 to ${process.env.node_pre_gyp_mock_s3}`)}Object.defineProperty(exports,"find",{get:function(){return require("./pre-binding").find},enumerable:true});function Run({package_json_path:package_json_path="./package.json",argv:argv}){this.package_json_path=package_json_path;this.commands={};const self=this;cli_commands.forEach(command=>{self.commands[command]=function(argvx,callback){log.verbose("command",command,argvx);return require("./"+command)(self,argvx,callback)}});this.parseArgv(argv);this.binaryHostSet=false}inherits(Run,EE);exports.Run=Run;const proto=Run.prototype;proto.package=require("../package.json");proto.configDefs={help:Boolean,arch:String,debug:Boolean,directory:String,proxy:String,loglevel:String};proto.shorthands={release:"--no-debug",C:"--directory",debug:"--debug",j:"--jobs",silent:"--loglevel=silent",silly:"--loglevel=silly",verbose:"--loglevel=verbose"};proto.aliases=aliases;proto.parseArgv=function parseOpts(argv){this.opts=nopt(this.configDefs,this.shorthands,argv);this.argv=this.opts.argv.remain.slice();const commands=this.todo=[];argv=this.argv.map(arg=>{if(arg in this.aliases){arg=this.aliases[arg]}return arg});argv.slice().forEach(arg=>{if(arg in this.commands){const args=argv.splice(0,argv.indexOf(arg));argv.shift();if(commands.length>0){commands[commands.length-1].args=args}commands.push({name:arg,args:[]})}});if(commands.length>0){commands[commands.length-1].args=argv.splice(0)}let package_json_path=this.package_json_path;if(this.opts.directory){package_json_path=path.join(this.opts.directory,package_json_path)}this.package_json=JSON.parse(fs.readFileSync(package_json_path));this.todo=napi.expand_commands(this.package_json,this.opts,commands);const npm_config_prefix="npm_config_";Object.keys(process.env).forEach(name=>{if(name.indexOf(npm_config_prefix)!==0)return;const val=process.env[name];if(name===npm_config_prefix+"loglevel"){log.level=val}else{name=name.substring(npm_config_prefix.length);if(name==="argv"){if(this.opts.argv&&this.opts.argv.remain&&this.opts.argv.remain.length){}else{this.opts[name]=val}}else{this.opts[name]=val}}});if(this.opts.loglevel){log.level=this.opts.loglevel}log.resume()};proto.setBinaryHostProperty=function(command){if(this.binaryHostSet){return this.package_json.binary.host}const p=this.package_json;if(!p||!p.binary||p.binary.host){return""}if(!p.binary.staging_host||!p.binary.production_host){return""}let target="production_host";if(command==="publish"||command==="unpublish"){target="staging_host"}const npg_s3_host=process.env.node_pre_gyp_s3_host;if(npg_s3_host==="staging"||npg_s3_host==="production"){target=`${npg_s3_host}_host`}else if(this.opts["s3_host"]==="staging"||this.opts["s3_host"]==="production"){target=`${this.opts["s3_host"]}_host`}else if(this.opts["s3_host"]||npg_s3_host){throw new Error(`invalid s3_host ${this.opts["s3_host"]||npg_s3_host}`)}p.binary.host=p.binary[target];this.binaryHostSet=true;return p.binary.host};proto.usage=function usage(){const str=["","  Usage: node-pre-gyp <command> [options]","","  where <command> is one of:",cli_commands.map(c=>"    - "+c+" - "+require("./"+c).usage).join("\n"),"","node-pre-gyp@"+this.version+"  "+path.resolve(__dirname,".."),"node@"+process.versions.node].join("\n");return str};Object.defineProperty(proto,"version",{get:function(){return this.package.version},enumerable:true})}).call(this)}).call(this,require("path").join(__dirname,"node_modules","@mapbox","node-pre-gyp","lib"))},{"../package.json":21,"./pre-binding":16,"./util/napi.js":18,"./util/s3_setup":19,events:undefined,fs:undefined,nopt:218,npmlog:219,path:undefined,util:undefined}],16:[function(require,module,exports){"use strict";const npg=require("..");const versioning=require("../lib/util/versioning.js");const napi=require("../lib/util/napi.js");const existsSync=require("fs").existsSync||require("path").existsSync;const path=require("path");module.exports=exports;exports.usage="Finds the require path for the node-pre-gyp installed module";exports.validate=function(package_json,opts){versioning.validate_config(package_json,opts)};exports.find=function(package_json_path,opts){if(!existsSync(package_json_path)){throw new Error(package_json_path+"does not exist")}const prog=new npg.Run({package_json_path:package_json_path,argv:process.argv});prog.setBinaryHostProperty();const package_json=prog.package_json;versioning.validate_config(package_json,opts);let napi_build_version;if(napi.get_napi_build_versions(package_json,opts)){napi_build_version=napi.get_best_napi_build_version(package_json,opts)}opts=opts||{};if(!opts.module_root)opts.module_root=path.dirname(package_json_path);const meta=versioning.evaluate(package_json,opts,napi_build_version);return meta.module}},{"..":15,"../lib/util/napi.js":18,"../lib/util/versioning.js":20,fs:undefined,path:undefined}],17:[function(require,module,exports){module.exports={"0.1.14":{node_abi:null,v8:"1.3"},"0.1.15":{node_abi:null,v8:"1.3"},"0.1.16":{node_abi:null,v8:"1.3"},"0.1.17":{node_abi:null,v8:"1.3"},"0.1.18":{node_abi:null,v8:"1.3"},"0.1.19":{node_abi:null,v8:"2.0"},"0.1.20":{node_abi:null,v8:"2.0"},"0.1.21":{node_abi:null,v8:"2.0"},"0.1.22":{node_abi:null,v8:"2.0"},"0.1.23":{node_abi:null,v8:"2.0"},"0.1.24":{node_abi:null,v8:"2.0"},"0.1.25":{node_abi:null,v8:"2.0"},"0.1.26":{node_abi:null,v8:"2.0"},"0.1.27":{node_abi:null,v8:"2.1"},"0.1.28":{node_abi:null,v8:"2.1"},"0.1.29":{node_abi:null,v8:"2.1"},"0.1.30":{node_abi:null,v8:"2.1"},"0.1.31":{node_abi:null,v8:"2.1"},"0.1.32":{node_abi:null,v8:"2.1"},"0.1.33":{node_abi:null,v8:"2.1"},"0.1.90":{node_abi:null,v8:"2.2"},"0.1.91":{node_abi:null,v8:"2.2"},"0.1.92":{node_abi:null,v8:"2.2"},"0.1.93":{node_abi:null,v8:"2.2"},"0.1.94":{node_abi:null,v8:"2.2"},"0.1.95":{node_abi:null,v8:"2.2"},"0.1.96":{node_abi:null,v8:"2.2"},"0.1.97":{node_abi:null,v8:"2.2"},"0.1.98":{node_abi:null,v8:"2.2"},"0.1.99":{node_abi:null,v8:"2.2"},"0.1.100":{node_abi:null,v8:"2.2"},"0.1.101":{node_abi:null,v8:"2.3"},"0.1.102":{node_abi:null,v8:"2.3"},"0.1.103":{node_abi:null,v8:"2.3"},"0.1.104":{node_abi:null,v8:"2.3"},"0.2.0":{node_abi:1,v8:"2.3"},"0.2.1":{node_abi:1,v8:"2.3"},"0.2.2":{node_abi:1,v8:"2.3"},"0.2.3":{node_abi:1,v8:"2.3"},"0.2.4":{node_abi:1,v8:"2.3"},"0.2.5":{node_abi:1,v8:"2.3"},"0.2.6":{node_abi:1,v8:"2.3"},"0.3.0":{node_abi:1,v8:"2.5"},"0.3.1":{node_abi:1,v8:"2.5"},"0.3.2":{node_abi:1,v8:"3.0"},"0.3.3":{node_abi:1,v8:"3.0"},"0.3.4":{node_abi:1,v8:"3.0"},"0.3.5":{node_abi:1,v8:"3.0"},"0.3.6":{node_abi:1,v8:"3.0"},"0.3.7":{node_abi:1,v8:"3.0"},"0.3.8":{node_abi:1,v8:"3.1"},"0.4.0":{node_abi:1,v8:"3.1"},"0.4.1":{node_abi:1,v8:"3.1"},"0.4.2":{node_abi:1,v8:"3.1"},"0.4.3":{node_abi:1,v8:"3.1"},"0.4.4":{node_abi:1,v8:"3.1"},"0.4.5":{node_abi:1,v8:"3.1"},"0.4.6":{node_abi:1,v8:"3.1"},"0.4.7":{node_abi:1,v8:"3.1"},"0.4.8":{node_abi:1,v8:"3.1"},"0.4.9":{node_abi:1,v8:"3.1"},"0.4.10":{node_abi:1,v8:"3.1"},"0.4.11":{node_abi:1,v8:"3.1"},"0.4.12":{node_abi:1,v8:"3.1"},"0.5.0":{node_abi:1,v8:"3.1"},"0.5.1":{node_abi:1,v8:"3.4"},"0.5.2":{node_abi:1,v8:"3.4"},"0.5.3":{node_abi:1,v8:"3.4"},"0.5.4":{node_abi:1,v8:"3.5"},"0.5.5":{node_abi:1,v8:"3.5"},"0.5.6":{node_abi:1,v8:"3.6"},"0.5.7":{node_abi:1,v8:"3.6"},"0.5.8":{node_abi:1,v8:"3.6"},"0.5.9":{node_abi:1,v8:"3.6"},"0.5.10":{node_abi:1,v8:"3.7"},"0.6.0":{node_abi:1,v8:"3.6"},"0.6.1":{node_abi:1,v8:"3.6"},"0.6.2":{node_abi:1,v8:"3.6"},"0.6.3":{node_abi:1,v8:"3.6"},"0.6.4":{node_abi:1,v8:"3.6"},"0.6.5":{node_abi:1,v8:"3.6"},"0.6.6":{node_abi:1,v8:"3.6"},"0.6.7":{node_abi:1,v8:"3.6"},"0.6.8":{node_abi:1,v8:"3.6"},"0.6.9":{node_abi:1,v8:"3.6"},"0.6.10":{node_abi:1,v8:"3.6"},"0.6.11":{node_abi:1,v8:"3.6"},"0.6.12":{node_abi:1,v8:"3.6"},"0.6.13":{node_abi:1,v8:"3.6"},"0.6.14":{node_abi:1,v8:"3.6"},"0.6.15":{node_abi:1,v8:"3.6"},"0.6.16":{node_abi:1,v8:"3.6"},"0.6.17":{node_abi:1,v8:"3.6"},"0.6.18":{node_abi:1,v8:"3.6"},"0.6.19":{node_abi:1,v8:"3.6"},"0.6.20":{node_abi:1,v8:"3.6"},"0.6.21":{node_abi:1,v8:"3.6"},"0.7.0":{node_abi:1,v8:"3.8"},"0.7.1":{node_abi:1,v8:"3.8"},"0.7.2":{node_abi:1,v8:"3.8"},"0.7.3":{node_abi:1,v8:"3.9"},"0.7.4":{node_abi:1,v8:"3.9"},"0.7.5":{node_abi:1,v8:"3.9"},"0.7.6":{node_abi:1,v8:"3.9"},"0.7.7":{node_abi:1,v8:"3.9"},"0.7.8":{node_abi:1,v8:"3.9"},"0.7.9":{node_abi:1,v8:"3.11"},"0.7.10":{node_abi:1,v8:"3.9"},"0.7.11":{node_abi:1,v8:"3.11"},"0.7.12":{node_abi:1,v8:"3.11"},"0.8.0":{node_abi:1,v8:"3.11"},"0.8.1":{node_abi:1,v8:"3.11"},"0.8.2":{node_abi:1,v8:"3.11"},"0.8.3":{node_abi:1,v8:"3.11"},"0.8.4":{node_abi:1,v8:"3.11"},"0.8.5":{node_abi:1,v8:"3.11"},"0.8.6":{node_abi:1,v8:"3.11"},"0.8.7":{node_abi:1,v8:"3.11"},"0.8.8":{node_abi:1,v8:"3.11"},"0.8.9":{node_abi:1,v8:"3.11"},"0.8.10":{node_abi:1,v8:"3.11"},"0.8.11":{node_abi:1,v8:"3.11"},"0.8.12":{node_abi:1,v8:"3.11"},"0.8.13":{node_abi:1,v8:"3.11"},"0.8.14":{node_abi:1,v8:"3.11"},"0.8.15":{node_abi:1,v8:"3.11"},"0.8.16":{node_abi:1,v8:"3.11"},"0.8.17":{node_abi:1,v8:"3.11"},"0.8.18":{node_abi:1,v8:"3.11"},"0.8.19":{node_abi:1,v8:"3.11"},"0.8.20":{node_abi:1,v8:"3.11"},"0.8.21":{node_abi:1,v8:"3.11"},"0.8.22":{node_abi:1,v8:"3.11"},"0.8.23":{node_abi:1,v8:"3.11"},"0.8.24":{node_abi:1,v8:"3.11"},"0.8.25":{node_abi:1,v8:"3.11"},"0.8.26":{node_abi:1,v8:"3.11"},"0.8.27":{node_abi:1,v8:"3.11"},"0.8.28":{node_abi:1,v8:"3.11"},"0.9.0":{node_abi:1,v8:"3.11"},"0.9.1":{node_abi:10,v8:"3.11"},"0.9.2":{node_abi:10,v8:"3.11"},"0.9.3":{node_abi:10,v8:"3.13"},"0.9.4":{node_abi:10,v8:"3.13"},"0.9.5":{node_abi:10,v8:"3.13"},"0.9.6":{node_abi:10,v8:"3.15"},"0.9.7":{node_abi:10,v8:"3.15"},"0.9.8":{node_abi:10,v8:"3.15"},"0.9.9":{node_abi:11,v8:"3.15"},"0.9.10":{node_abi:11,v8:"3.15"},"0.9.11":{node_abi:11,v8:"3.14"},"0.9.12":{node_abi:11,v8:"3.14"},"0.10.0":{node_abi:11,v8:"3.14"},"0.10.1":{node_abi:11,v8:"3.14"},"0.10.2":{node_abi:11,v8:"3.14"},"0.10.3":{node_abi:11,v8:"3.14"},"0.10.4":{node_abi:11,v8:"3.14"},"0.10.5":{node_abi:11,v8:"3.14"},"0.10.6":{node_abi:11,v8:"3.14"},"0.10.7":{node_abi:11,v8:"3.14"},"0.10.8":{node_abi:11,v8:"3.14"},"0.10.9":{node_abi:11,v8:"3.14"},"0.10.10":{node_abi:11,v8:"3.14"},"0.10.11":{node_abi:11,v8:"3.14"},"0.10.12":{node_abi:11,v8:"3.14"},"0.10.13":{node_abi:11,v8:"3.14"},"0.10.14":{node_abi:11,v8:"3.14"},"0.10.15":{node_abi:11,v8:"3.14"},"0.10.16":{node_abi:11,v8:"3.14"},"0.10.17":{node_abi:11,v8:"3.14"},"0.10.18":{node_abi:11,v8:"3.14"},"0.10.19":{node_abi:11,v8:"3.14"},"0.10.20":{node_abi:11,v8:"3.14"},"0.10.21":{node_abi:11,v8:"3.14"},"0.10.22":{node_abi:11,v8:"3.14"},"0.10.23":{node_abi:11,v8:"3.14"},"0.10.24":{node_abi:11,v8:"3.14"},"0.10.25":{node_abi:11,v8:"3.14"},"0.10.26":{node_abi:11,v8:"3.14"},"0.10.27":{node_abi:11,v8:"3.14"},"0.10.28":{node_abi:11,v8:"3.14"},"0.10.29":{node_abi:11,v8:"3.14"},"0.10.30":{node_abi:11,v8:"3.14"},"0.10.31":{node_abi:11,v8:"3.14"},"0.10.32":{node_abi:11,v8:"3.14"},"0.10.33":{node_abi:11,v8:"3.14"},"0.10.34":{node_abi:11,v8:"3.14"},"0.10.35":{node_abi:11,v8:"3.14"},"0.10.36":{node_abi:11,v8:"3.14"},"0.10.37":{node_abi:11,v8:"3.14"},"0.10.38":{node_abi:11,v8:"3.14"},"0.10.39":{node_abi:11,v8:"3.14"},"0.10.40":{node_abi:11,v8:"3.14"},"0.10.41":{node_abi:11,v8:"3.14"},"0.10.42":{node_abi:11,v8:"3.14"},"0.10.43":{node_abi:11,v8:"3.14"},"0.10.44":{node_abi:11,v8:"3.14"},"0.10.45":{node_abi:11,v8:"3.14"},"0.10.46":{node_abi:11,v8:"3.14"},"0.10.47":{node_abi:11,v8:"3.14"},"0.10.48":{node_abi:11,v8:"3.14"},"0.11.0":{node_abi:12,v8:"3.17"},"0.11.1":{node_abi:12,v8:"3.18"},"0.11.2":{node_abi:12,v8:"3.19"},"0.11.3":{node_abi:12,v8:"3.19"},"0.11.4":{node_abi:12,v8:"3.20"},"0.11.5":{node_abi:12,v8:"3.20"},"0.11.6":{node_abi:12,v8:"3.20"},"0.11.7":{node_abi:12,v8:"3.20"},"0.11.8":{node_abi:13,v8:"3.21"},"0.11.9":{node_abi:13,v8:"3.22"},"0.11.10":{node_abi:13,v8:"3.22"},"0.11.11":{node_abi:14,v8:"3.22"},"0.11.12":{node_abi:14,v8:"3.22"},"0.11.13":{node_abi:14,v8:"3.25"},"0.11.14":{node_abi:14,v8:"3.26"},"0.11.15":{node_abi:14,v8:"3.28"},"0.11.16":{node_abi:14,v8:"3.28"},"0.12.0":{node_abi:14,v8:"3.28"},"0.12.1":{node_abi:14,v8:"3.28"},"0.12.2":{node_abi:14,v8:"3.28"},"0.12.3":{node_abi:14,v8:"3.28"},"0.12.4":{node_abi:14,v8:"3.28"},"0.12.5":{node_abi:14,v8:"3.28"},"0.12.6":{node_abi:14,v8:"3.28"},"0.12.7":{node_abi:14,v8:"3.28"},"0.12.8":{node_abi:14,v8:"3.28"},"0.12.9":{node_abi:14,v8:"3.28"},"0.12.10":{node_abi:14,v8:"3.28"},"0.12.11":{node_abi:14,v8:"3.28"},"0.12.12":{node_abi:14,v8:"3.28"},"0.12.13":{node_abi:14,v8:"3.28"},"0.12.14":{node_abi:14,v8:"3.28"},"0.12.15":{node_abi:14,v8:"3.28"},"0.12.16":{node_abi:14,v8:"3.28"},"0.12.17":{node_abi:14,v8:"3.28"},"0.12.18":{node_abi:14,v8:"3.28"},"1.0.0":{node_abi:42,v8:"3.31"},"1.0.1":{node_abi:42,v8:"3.31"},"1.0.2":{node_abi:42,v8:"3.31"},"1.0.3":{node_abi:42,v8:"4.1"},"1.0.4":{node_abi:42,v8:"4.1"},"1.1.0":{node_abi:43,v8:"4.1"},"1.2.0":{node_abi:43,v8:"4.1"},"1.3.0":{node_abi:43,v8:"4.1"},"1.4.1":{node_abi:43,v8:"4.1"},"1.4.2":{node_abi:43,v8:"4.1"},"1.4.3":{node_abi:43,v8:"4.1"},"1.5.0":{node_abi:43,v8:"4.1"},"1.5.1":{node_abi:43,v8:"4.1"},"1.6.0":{node_abi:43,v8:"4.1"},"1.6.1":{node_abi:43,v8:"4.1"},"1.6.2":{node_abi:43,v8:"4.1"},"1.6.3":{node_abi:43,v8:"4.1"},"1.6.4":{node_abi:43,v8:"4.1"},"1.7.1":{node_abi:43,v8:"4.1"},"1.8.1":{node_abi:43,v8:"4.1"},"1.8.2":{node_abi:43,v8:"4.1"},"1.8.3":{node_abi:43,v8:"4.1"},"1.8.4":{node_abi:43,v8:"4.1"},"2.0.0":{node_abi:44,v8:"4.2"},"2.0.1":{node_abi:44,v8:"4.2"},"2.0.2":{node_abi:44,v8:"4.2"},"2.1.0":{node_abi:44,v8:"4.2"},"2.2.0":{node_abi:44,v8:"4.2"},"2.2.1":{node_abi:44,v8:"4.2"},"2.3.0":{node_abi:44,v8:"4.2"},"2.3.1":{node_abi:44,v8:"4.2"},"2.3.2":{node_abi:44,v8:"4.2"},"2.3.3":{node_abi:44,v8:"4.2"},"2.3.4":{node_abi:44,v8:"4.2"},"2.4.0":{node_abi:44,v8:"4.2"},"2.5.0":{node_abi:44,v8:"4.2"},"3.0.0":{node_abi:45,v8:"4.4"},"3.1.0":{node_abi:45,v8:"4.4"},"3.2.0":{node_abi:45,v8:"4.4"},"3.3.0":{node_abi:45,v8:"4.4"},"3.3.1":{node_abi:45,v8:"4.4"},"4.0.0":{node_abi:46,v8:"4.5"},"4.1.0":{node_abi:46,v8:"4.5"},"4.1.1":{node_abi:46,v8:"4.5"},"4.1.2":{node_abi:46,v8:"4.5"},"4.2.0":{node_abi:46,v8:"4.5"},"4.2.1":{node_abi:46,v8:"4.5"},"4.2.2":{node_abi:46,v8:"4.5"},"4.2.3":{node_abi:46,v8:"4.5"},"4.2.4":{node_abi:46,v8:"4.5"},"4.2.5":{node_abi:46,v8:"4.5"},"4.2.6":{node_abi:46,v8:"4.5"},"4.3.0":{node_abi:46,v8:"4.5"},"4.3.1":{node_abi:46,v8:"4.5"},"4.3.2":{node_abi:46,v8:"4.5"},"4.4.0":{node_abi:46,v8:"4.5"},"4.4.1":{node_abi:46,v8:"4.5"},"4.4.2":{node_abi:46,v8:"4.5"},"4.4.3":{node_abi:46,v8:"4.5"},"4.4.4":{node_abi:46,v8:"4.5"},"4.4.5":{node_abi:46,v8:"4.5"},"4.4.6":{node_abi:46,v8:"4.5"},"4.4.7":{node_abi:46,v8:"4.5"},"4.5.0":{node_abi:46,v8:"4.5"},"4.6.0":{node_abi:46,v8:"4.5"},"4.6.1":{node_abi:46,v8:"4.5"},"4.6.2":{node_abi:46,v8:"4.5"},"4.7.0":{node_abi:46,v8:"4.5"},"4.7.1":{node_abi:46,v8:"4.5"},"4.7.2":{node_abi:46,v8:"4.5"},"4.7.3":{node_abi:46,v8:"4.5"},"4.8.0":{node_abi:46,v8:"4.5"},"4.8.1":{node_abi:46,v8:"4.5"},"4.8.2":{node_abi:46,v8:"4.5"},"4.8.3":{node_abi:46,v8:"4.5"},"4.8.4":{node_abi:46,v8:"4.5"},"4.8.5":{node_abi:46,v8:"4.5"},"4.8.6":{node_abi:46,v8:"4.5"},"4.8.7":{node_abi:46,v8:"4.5"},"4.9.0":{node_abi:46,v8:"4.5"},"4.9.1":{node_abi:46,v8:"4.5"},"5.0.0":{node_abi:47,v8:"4.6"},"5.1.0":{node_abi:47,v8:"4.6"},"5.1.1":{node_abi:47,v8:"4.6"},"5.2.0":{node_abi:47,v8:"4.6"},"5.3.0":{node_abi:47,v8:"4.6"},"5.4.0":{node_abi:47,v8:"4.6"},"5.4.1":{node_abi:47,v8:"4.6"},"5.5.0":{node_abi:47,v8:"4.6"},"5.6.0":{node_abi:47,v8:"4.6"},"5.7.0":{node_abi:47,v8:"4.6"},"5.7.1":{node_abi:47,v8:"4.6"},"5.8.0":{node_abi:47,v8:"4.6"},"5.9.0":{node_abi:47,v8:"4.6"},"5.9.1":{node_abi:47,v8:"4.6"},"5.10.0":{node_abi:47,v8:"4.6"},"5.10.1":{node_abi:47,v8:"4.6"},"5.11.0":{node_abi:47,v8:"4.6"},"5.11.1":{node_abi:47,v8:"4.6"},"5.12.0":{node_abi:47,v8:"4.6"},"6.0.0":{node_abi:48,v8:"5.0"},"6.1.0":{node_abi:48,v8:"5.0"},"6.2.0":{node_abi:48,v8:"5.0"},"6.2.1":{node_abi:48,v8:"5.0"},"6.2.2":{node_abi:48,v8:"5.0"},"6.3.0":{node_abi:48,v8:"5.0"},"6.3.1":{node_abi:48,v8:"5.0"},"6.4.0":{node_abi:48,v8:"5.0"},"6.5.0":{node_abi:48,v8:"5.1"},"6.6.0":{node_abi:48,v8:"5.1"},"6.7.0":{node_abi:48,v8:"5.1"},"6.8.0":{node_abi:48,v8:"5.1"},"6.8.1":{node_abi:48,v8:"5.1"},"6.9.0":{node_abi:48,v8:"5.1"},"6.9.1":{node_abi:48,v8:"5.1"},"6.9.2":{node_abi:48,v8:"5.1"},"6.9.3":{node_abi:48,v8:"5.1"},"6.9.4":{node_abi:48,v8:"5.1"},"6.9.5":{node_abi:48,v8:"5.1"},"6.10.0":{node_abi:48,v8:"5.1"},"6.10.1":{node_abi:48,v8:"5.1"},"6.10.2":{node_abi:48,v8:"5.1"},"6.10.3":{node_abi:48,v8:"5.1"},"6.11.0":{node_abi:48,v8:"5.1"},"6.11.1":{node_abi:48,v8:"5.1"},"6.11.2":{node_abi:48,v8:"5.1"},"6.11.3":{node_abi:48,v8:"5.1"},"6.11.4":{node_abi:48,v8:"5.1"},"6.11.5":{node_abi:48,v8:"5.1"},"6.12.0":{node_abi:48,v8:"5.1"},"6.12.1":{node_abi:48,v8:"5.1"},"6.12.2":{node_abi:48,v8:"5.1"},"6.12.3":{node_abi:48,v8:"5.1"},"6.13.0":{node_abi:48,v8:"5.1"},"6.13.1":{node_abi:48,v8:"5.1"},"6.14.0":{node_abi:48,v8:"5.1"},"6.14.1":{node_abi:48,v8:"5.1"},"6.14.2":{node_abi:48,v8:"5.1"},"6.14.3":{node_abi:48,v8:"5.1"},"6.14.4":{node_abi:48,v8:"5.1"},"6.15.0":{node_abi:48,v8:"5.1"},"6.15.1":{node_abi:48,v8:"5.1"},"6.16.0":{node_abi:48,v8:"5.1"},"6.17.0":{node_abi:48,v8:"5.1"},"6.17.1":{node_abi:48,v8:"5.1"},"7.0.0":{node_abi:51,v8:"5.4"},"7.1.0":{node_abi:51,v8:"5.4"},"7.2.0":{node_abi:51,v8:"5.4"},"7.2.1":{node_abi:51,v8:"5.4"},"7.3.0":{node_abi:51,v8:"5.4"},"7.4.0":{node_abi:51,v8:"5.4"},"7.5.0":{node_abi:51,v8:"5.4"},"7.6.0":{node_abi:51,v8:"5.5"},"7.7.0":{node_abi:51,v8:"5.5"},"7.7.1":{node_abi:51,v8:"5.5"},"7.7.2":{node_abi:51,v8:"5.5"},"7.7.3":{node_abi:51,v8:"5.5"},"7.7.4":{node_abi:51,v8:"5.5"},"7.8.0":{node_abi:51,v8:"5.5"},"7.9.0":{node_abi:51,v8:"5.5"},"7.10.0":{node_abi:51,v8:"5.5"},"7.10.1":{node_abi:51,v8:"5.5"},"8.0.0":{node_abi:57,v8:"5.8"},"8.1.0":{node_abi:57,v8:"5.8"},"8.1.1":{node_abi:57,v8:"5.8"},"8.1.2":{node_abi:57,v8:"5.8"},"8.1.3":{node_abi:57,v8:"5.8"},"8.1.4":{node_abi:57,v8:"5.8"},"8.2.0":{node_abi:57,v8:"5.8"},"8.2.1":{node_abi:57,v8:"5.8"},"8.3.0":{node_abi:57,v8:"6.0"},"8.4.0":{node_abi:57,v8:"6.0"},"8.5.0":{node_abi:57,v8:"6.0"},"8.6.0":{node_abi:57,v8:"6.0"},"8.7.0":{node_abi:57,v8:"6.1"},"8.8.0":{node_abi:57,v8:"6.1"},"8.8.1":{node_abi:57,v8:"6.1"},"8.9.0":{node_abi:57,v8:"6.1"},"8.9.1":{node_abi:57,v8:"6.1"},"8.9.2":{node_abi:57,v8:"6.1"},"8.9.3":{node_abi:57,v8:"6.1"},"8.9.4":{node_abi:57,v8:"6.1"},"8.10.0":{node_abi:57,v8:"6.2"},"8.11.0":{node_abi:57,v8:"6.2"},"8.11.1":{node_abi:57,v8:"6.2"},"8.11.2":{node_abi:57,v8:"6.2"},"8.11.3":{node_abi:57,v8:"6.2"},"8.11.4":{node_abi:57,v8:"6.2"},"8.12.0":{node_abi:57,v8:"6.2"},"8.13.0":{node_abi:57,v8:"6.2"},"8.14.0":{node_abi:57,v8:"6.2"},"8.14.1":{node_abi:57,v8:"6.2"},"8.15.0":{node_abi:57,v8:"6.2"},"8.15.1":{node_abi:57,v8:"6.2"},"8.16.0":{node_abi:57,v8:"6.2"},"8.16.1":{node_abi:57,v8:"6.2"},"8.16.2":{node_abi:57,v8:"6.2"},"8.17.0":{node_abi:57,v8:"6.2"},"9.0.0":{node_abi:59,v8:"6.2"},"9.1.0":{node_abi:59,v8:"6.2"},"9.2.0":{node_abi:59,v8:"6.2"},"9.2.1":{node_abi:59,v8:"6.2"},"9.3.0":{node_abi:59,v8:"6.2"},"9.4.0":{node_abi:59,v8:"6.2"},"9.5.0":{node_abi:59,v8:"6.2"},"9.6.0":{node_abi:59,v8:"6.2"},"9.6.1":{node_abi:59,v8:"6.2"},"9.7.0":{node_abi:59,v8:"6.2"},"9.7.1":{node_abi:59,v8:"6.2"},"9.8.0":{node_abi:59,v8:"6.2"},"9.9.0":{node_abi:59,v8:"6.2"},"9.10.0":{node_abi:59,v8:"6.2"},"9.10.1":{node_abi:59,v8:"6.2"},"9.11.0":{node_abi:59,v8:"6.2"},"9.11.1":{node_abi:59,v8:"6.2"},"9.11.2":{node_abi:59,v8:"6.2"},"10.0.0":{node_abi:64,v8:"6.6"},"10.1.0":{node_abi:64,v8:"6.6"},"10.2.0":{node_abi:64,v8:"6.6"},"10.2.1":{node_abi:64,v8:"6.6"},"10.3.0":{node_abi:64,v8:"6.6"},"10.4.0":{node_abi:64,v8:"6.7"},"10.4.1":{node_abi:64,v8:"6.7"},"10.5.0":{node_abi:64,v8:"6.7"},"10.6.0":{node_abi:64,v8:"6.7"},"10.7.0":{node_abi:64,v8:"6.7"},"10.8.0":{node_abi:64,v8:"6.7"},"10.9.0":{node_abi:64,v8:"6.8"},"10.10.0":{node_abi:64,v8:"6.8"},"10.11.0":{node_abi:64,v8:"6.8"},"10.12.0":{node_abi:64,v8:"6.8"},"10.13.0":{node_abi:64,v8:"6.8"},"10.14.0":{node_abi:64,v8:"6.8"},"10.14.1":{node_abi:64,v8:"6.8"},"10.14.2":{node_abi:64,v8:"6.8"},"10.15.0":{node_abi:64,v8:"6.8"},"10.15.1":{node_abi:64,v8:"6.8"},"10.15.2":{node_abi:64,v8:"6.8"},"10.15.3":{node_abi:64,v8:"6.8"},"10.16.0":{node_abi:64,v8:"6.8"},"10.16.1":{node_abi:64,v8:"6.8"},"10.16.2":{node_abi:64,v8:"6.8"},"10.16.3":{node_abi:64,v8:"6.8"},"10.17.0":{node_abi:64,v8:"6.8"},"10.18.0":{node_abi:64,v8:"6.8"},"10.18.1":{node_abi:64,v8:"6.8"},"10.19.0":{node_abi:64,v8:"6.8"},"10.20.0":{node_abi:64,v8:"6.8"},"10.20.1":{node_abi:64,v8:"6.8"},"10.21.0":{node_abi:64,v8:"6.8"},"10.22.0":{node_abi:64,v8:"6.8"},"10.22.1":{node_abi:64,v8:"6.8"},"10.23.0":{node_abi:64,v8:"6.8"},"10.23.1":{node_abi:64,v8:"6.8"},"10.23.2":{node_abi:64,v8:"6.8"},"10.23.3":{node_abi:64,v8:"6.8"},"10.24.0":{node_abi:64,v8:"6.8"},"10.24.1":{node_abi:64,v8:"6.8"},"11.0.0":{node_abi:67,v8:"7.0"},"11.1.0":{node_abi:67,v8:"7.0"},"11.2.0":{node_abi:67,v8:"7.0"},"11.3.0":{node_abi:67,v8:"7.0"},"11.4.0":{node_abi:67,v8:"7.0"},"11.5.0":{node_abi:67,v8:"7.0"},"11.6.0":{node_abi:67,v8:"7.0"},"11.7.0":{node_abi:67,v8:"7.0"},"11.8.0":{node_abi:67,v8:"7.0"},"11.9.0":{node_abi:67,v8:"7.0"},"11.10.0":{node_abi:67,v8:"7.0"},"11.10.1":{node_abi:67,v8:"7.0"},"11.11.0":{node_abi:67,v8:"7.0"},"11.12.0":{node_abi:67,v8:"7.0"},"11.13.0":{node_abi:67,v8:"7.0"},"11.14.0":{node_abi:67,v8:"7.0"},"11.15.0":{node_abi:67,v8:"7.0"},"12.0.0":{node_abi:72,v8:"7.4"},"12.1.0":{node_abi:72,v8:"7.4"},"12.2.0":{node_abi:72,v8:"7.4"},"12.3.0":{node_abi:72,v8:"7.4"},"12.3.1":{node_abi:72,v8:"7.4"},"12.4.0":{node_abi:72,v8:"7.4"},"12.5.0":{node_abi:72,v8:"7.5"},"12.6.0":{node_abi:72,v8:"7.5"},"12.7.0":{node_abi:72,v8:"7.5"},"12.8.0":{node_abi:72,v8:"7.5"},"12.8.1":{node_abi:72,v8:"7.5"},"12.9.0":{node_abi:72,v8:"7.6"},"12.9.1":{node_abi:72,v8:"7.6"},"12.10.0":{node_abi:72,v8:"7.6"},"12.11.0":{node_abi:72,v8:"7.7"},"12.11.1":{node_abi:72,v8:"7.7"},"12.12.0":{node_abi:72,v8:"7.7"},"12.13.0":{node_abi:72,v8:"7.7"},"12.13.1":{node_abi:72,v8:"7.7"},"12.14.0":{node_abi:72,v8:"7.7"},"12.14.1":{node_abi:72,v8:"7.7"},"12.15.0":{node_abi:72,v8:"7.7"},"12.16.0":{node_abi:72,v8:"7.8"},"12.16.1":{node_abi:72,v8:"7.8"},"12.16.2":{node_abi:72,v8:"7.8"},"12.16.3":{node_abi:72,v8:"7.8"},"12.17.0":{node_abi:72,v8:"7.8"},"12.18.0":{node_abi:72,v8:"7.8"},"12.18.1":{node_abi:72,v8:"7.8"},"12.18.2":{node_abi:72,v8:"7.8"},"12.18.3":{node_abi:72,v8:"7.8"},"12.18.4":{node_abi:72,v8:"7.8"},"12.19.0":{node_abi:72,v8:"7.8"},"12.19.1":{node_abi:72,v8:"7.8"},"12.20.0":{node_abi:72,v8:"7.8"},"12.20.1":{node_abi:72,v8:"7.8"},"12.20.2":{node_abi:72,v8:"7.8"},"12.21.0":{node_abi:72,v8:"7.8"},"12.22.0":{node_abi:72,v8:"7.8"},"12.22.1":{node_abi:72,v8:"7.8"},"12.22.2":{node_abi:72,v8:"7.8"},"12.22.3":{node_abi:72,v8:"7.8"},"12.22.4":{node_abi:72,v8:"7.8"},"12.22.5":{node_abi:72,v8:"7.8"},"12.22.6":{node_abi:72,v8:"7.8"},"12.22.7":{node_abi:72,v8:"7.8"},"13.0.0":{node_abi:79,v8:"7.8"},"13.0.1":{node_abi:79,v8:"7.8"},"13.1.0":{node_abi:79,v8:"7.8"},"13.2.0":{node_abi:79,v8:"7.9"},"13.3.0":{node_abi:79,v8:"7.9"},"13.4.0":{node_abi:79,v8:"7.9"},"13.5.0":{node_abi:79,v8:"7.9"},"13.6.0":{node_abi:79,v8:"7.9"},"13.7.0":{node_abi:79,v8:"7.9"},"13.8.0":{node_abi:79,v8:"7.9"},"13.9.0":{node_abi:79,v8:"7.9"},"13.10.0":{node_abi:79,v8:"7.9"},"13.10.1":{node_abi:79,v8:"7.9"},"13.11.0":{node_abi:79,v8:"7.9"},"13.12.0":{node_abi:79,v8:"7.9"},"13.13.0":{node_abi:79,v8:"7.9"},"13.14.0":{node_abi:79,v8:"7.9"},"14.0.0":{node_abi:83,v8:"8.1"},"14.1.0":{node_abi:83,v8:"8.1"},"14.2.0":{node_abi:83,v8:"8.1"},"14.3.0":{node_abi:83,v8:"8.1"},"14.4.0":{node_abi:83,v8:"8.1"},"14.5.0":{node_abi:83,v8:"8.3"},"14.6.0":{node_abi:83,v8:"8.4"},"14.7.0":{node_abi:83,v8:"8.4"},"14.8.0":{node_abi:83,v8:"8.4"},"14.9.0":{node_abi:83,v8:"8.4"},"14.10.0":{node_abi:83,v8:"8.4"},"14.10.1":{node_abi:83,v8:"8.4"},"14.11.0":{node_abi:83,v8:"8.4"},"14.12.0":{node_abi:83,v8:"8.4"},"14.13.0":{node_abi:83,v8:"8.4"},"14.13.1":{node_abi:83,v8:"8.4"},"14.14.0":{node_abi:83,v8:"8.4"},"14.15.0":{node_abi:83,v8:"8.4"},"14.15.1":{node_abi:83,v8:"8.4"},"14.15.2":{node_abi:83,v8:"8.4"},"14.15.3":{node_abi:83,v8:"8.4"},"14.15.4":{node_abi:83,v8:"8.4"},"14.15.5":{node_abi:83,v8:"8.4"},"14.16.0":{node_abi:83,v8:"8.4"},"14.16.1":{node_abi:83,v8:"8.4"},"14.17.0":{node_abi:83,v8:"8.4"},"14.17.1":{node_abi:83,v8:"8.4"},"14.17.2":{node_abi:83,v8:"8.4"},"14.17.3":{node_abi:83,v8:"8.4"},"14.17.4":{node_abi:83,v8:"8.4"},"14.17.5":{node_abi:83,v8:"8.4"},"14.17.6":{node_abi:83,v8:"8.4"},"14.18.0":{node_abi:83,v8:"8.4"},"14.18.1":{node_abi:83,v8:"8.4"},"15.0.0":{node_abi:88,v8:"8.6"},"15.0.1":{node_abi:88,v8:"8.6"},"15.1.0":{node_abi:88,v8:"8.6"},"15.2.0":{node_abi:88,v8:"8.6"},"15.2.1":{node_abi:88,v8:"8.6"},"15.3.0":{node_abi:88,v8:"8.6"},"15.4.0":{node_abi:88,v8:"8.6"},"15.5.0":{node_abi:88,v8:"8.6"},"15.5.1":{node_abi:88,v8:"8.6"},"15.6.0":{node_abi:88,v8:"8.6"},"15.7.0":{node_abi:88,v8:"8.6"},"15.8.0":{node_abi:88,v8:"8.6"},"15.9.0":{node_abi:88,v8:"8.6"},"15.10.0":{node_abi:88,v8:"8.6"},"15.11.0":{node_abi:88,v8:"8.6"},"15.12.0":{node_abi:88,v8:"8.6"},"15.13.0":{node_abi:88,v8:"8.6"},"15.14.0":{node_abi:88,v8:"8.6"},"16.0.0":{node_abi:93,v8:"9.0"},"16.1.0":{node_abi:93,v8:"9.0"},"16.2.0":{node_abi:93,v8:"9.0"},"16.3.0":{node_abi:93,v8:"9.0"},"16.4.0":{node_abi:93,v8:"9.1"},"16.4.1":{node_abi:93,v8:"9.1"},"16.4.2":{node_abi:93,v8:"9.1"},"16.5.0":{node_abi:93,v8:"9.1"},"16.6.0":{node_abi:93,v8:"9.2"},"16.6.1":{node_abi:93,v8:"9.2"},"16.6.2":{node_abi:93,v8:"9.2"},"16.7.0":{node_abi:93,v8:"9.2"},"16.8.0":{node_abi:93,v8:"9.2"},"16.9.0":{node_abi:93,v8:"9.3"},"16.9.1":{node_abi:93,v8:"9.3"},"16.10.0":{node_abi:93,v8:"9.3"},"16.11.0":{node_abi:93,v8:"9.4"},"16.11.1":{node_abi:93,v8:"9.4"},"16.12.0":{node_abi:93,v8:"9.4"},"16.13.0":{node_abi:93,v8:"9.4"},"17.0.0":{node_abi:102,v8:"9.5"},"17.0.1":{node_abi:102,v8:"9.5"},"17.1.0":{node_abi:102,v8:"9.5"}}},{}],18:[function(require,module,exports){"use strict";const fs=require("fs");module.exports=exports;const versionArray=process.version.substr(1).replace(/-.*$/,"").split(".").map(item=>+item);const napi_multiple_commands=["build","clean","configure","package","publish","reveal","testbinary","testpackage","unpublish"];const napi_build_version_tag="napi_build_version=";module.exports.get_napi_version=function(){let version=process.versions.napi;if(!version){if(versionArray[0]===9&&versionArray[1]>=3)version=2;else if(versionArray[0]===8)version=1}return version};module.exports.get_napi_version_as_string=function(target){const version=module.exports.get_napi_version(target);return version?""+version:""};module.exports.validate_package_json=function(package_json,opts){const binary=package_json.binary;const module_path_ok=pathOK(binary.module_path);const remote_path_ok=pathOK(binary.remote_path);const package_name_ok=pathOK(binary.package_name);const napi_build_versions=module.exports.get_napi_build_versions(package_json,opts,true);const napi_build_versions_raw=module.exports.get_napi_build_versions_raw(package_json);if(napi_build_versions){napi_build_versions.forEach(napi_build_version=>{if(!(parseInt(napi_build_version,10)===napi_build_version&&napi_build_version>0)){throw new Error("All values specified in napi_versions must be positive integers.")}})}if(napi_build_versions&&(!module_path_ok||!remote_path_ok&&!package_name_ok)){throw new Error("When napi_versions is specified; module_path and either remote_path or "+"package_name must contain the substitution string '{napi_build_version}`.")}if((module_path_ok||remote_path_ok||package_name_ok)&&!napi_build_versions_raw){throw new Error("When the substitution string '{napi_build_version}` is specified in "+"module_path, remote_path, or package_name; napi_versions must also be specified.")}if(napi_build_versions&&!module.exports.get_best_napi_build_version(package_json,opts)&&module.exports.build_napi_only(package_json)){throw new Error("The Node-API version of this Node instance is "+module.exports.get_napi_version(opts?opts.target:undefined)+". "+"This module supports Node-API version(s) "+module.exports.get_napi_build_versions_raw(package_json)+". "+"This Node instance cannot run this module.")}if(napi_build_versions_raw&&!napi_build_versions&&module.exports.build_napi_only(package_json)){throw new Error("The Node-API version of this Node instance is "+module.exports.get_napi_version(opts?opts.target:undefined)+". "+"This module supports Node-API version(s) "+module.exports.get_napi_build_versions_raw(package_json)+". "+"This Node instance cannot run this module.")}};function pathOK(path){return path&&(path.indexOf("{napi_build_version}")!==-1||path.indexOf("{node_napi_label}")!==-1)}module.exports.expand_commands=function(package_json,opts,commands){const expanded_commands=[];const napi_build_versions=module.exports.get_napi_build_versions(package_json,opts);commands.forEach(command=>{if(napi_build_versions&&command.name==="install"){const napi_build_version=module.exports.get_best_napi_build_version(package_json,opts);const args=napi_build_version?[napi_build_version_tag+napi_build_version]:[];expanded_commands.push({name:command.name,args:args})}else if(napi_build_versions&&napi_multiple_commands.indexOf(command.name)!==-1){napi_build_versions.forEach(napi_build_version=>{const args=command.args.slice();args.push(napi_build_version_tag+napi_build_version);expanded_commands.push({name:command.name,args:args})})}else{expanded_commands.push(command)}});return expanded_commands};module.exports.get_napi_build_versions=function(package_json,opts,warnings){const log=require("npmlog");let napi_build_versions=[];const supported_napi_version=module.exports.get_napi_version(opts?opts.target:undefined);if(package_json.binary&&package_json.binary.napi_versions){package_json.binary.napi_versions.forEach(napi_version=>{const duplicated=napi_build_versions.indexOf(napi_version)!==-1;if(!duplicated&&supported_napi_version&&napi_version<=supported_napi_version){napi_build_versions.push(napi_version)}else if(warnings&&!duplicated&&supported_napi_version){log.info("This Node instance does not support builds for Node-API version",napi_version)}})}if(opts&&opts["build-latest-napi-version-only"]){let latest_version=0;napi_build_versions.forEach(napi_version=>{if(napi_version>latest_version)latest_version=napi_version});napi_build_versions=latest_version?[latest_version]:[]}return napi_build_versions.length?napi_build_versions:undefined};module.exports.get_napi_build_versions_raw=function(package_json){const napi_build_versions=[];if(package_json.binary&&package_json.binary.napi_versions){package_json.binary.napi_versions.forEach(napi_version=>{if(napi_build_versions.indexOf(napi_version)===-1){napi_build_versions.push(napi_version)}})}return napi_build_versions.length?napi_build_versions:undefined};module.exports.get_command_arg=function(napi_build_version){return napi_build_version_tag+napi_build_version};module.exports.get_napi_build_version_from_command_args=function(command_args){for(let i=0;i<command_args.length;i++){const arg=command_args[i];if(arg.indexOf(napi_build_version_tag)===0){return parseInt(arg.substr(napi_build_version_tag.length),10)}}return undefined};module.exports.swap_build_dir_out=function(napi_build_version){if(napi_build_version){const rm=require("rimraf");rm.sync(module.exports.get_build_dir(napi_build_version));fs.renameSync("build",module.exports.get_build_dir(napi_build_version))}};module.exports.swap_build_dir_in=function(napi_build_version){if(napi_build_version){const rm=require("rimraf");rm.sync("build");fs.renameSync(module.exports.get_build_dir(napi_build_version),"build")}};module.exports.get_build_dir=function(napi_build_version){return"build-tmp-napi-v"+napi_build_version};module.exports.get_best_napi_build_version=function(package_json,opts){let best_napi_build_version=0;const napi_build_versions=module.exports.get_napi_build_versions(package_json,opts);if(napi_build_versions){const our_napi_version=module.exports.get_napi_version(opts?opts.target:undefined);napi_build_versions.forEach(napi_build_version=>{if(napi_build_version>best_napi_build_version&&napi_build_version<=our_napi_version){best_napi_build_version=napi_build_version}})}return best_napi_build_version===0?undefined:best_napi_build_version};module.exports.build_napi_only=function(package_json){return package_json.binary&&package_json.binary.package_name&&package_json.binary.package_name.indexOf("{node_napi_label}")===-1}},{fs:undefined,npmlog:219,rimraf:256}],19:[function(require,module,exports){"use strict";module.exports=exports;const url=require("url");const fs=require("fs");const path=require("path");module.exports.detect=function(opts,config){const to=opts.hosted_path;const uri=url.parse(to);config.prefix=!uri.pathname||uri.pathname==="/"?"":uri.pathname.replace("/","");if(opts.bucket&&opts.region){config.bucket=opts.bucket;config.region=opts.region;config.endpoint=opts.host;config.s3ForcePathStyle=opts.s3ForcePathStyle}else{const parts=uri.hostname.split(".s3");const bucket=parts[0];if(!bucket){return}if(!config.bucket){config.bucket=bucket}if(!config.region){const region=parts[1].slice(1).split(".")[0];if(region==="amazonaws"){config.region="us-east-1"}else{config.region=region}}}};module.exports.get_s3=function(config){if(process.env.node_pre_gyp_mock_s3){const AWSMock=require("mock-aws-s3");const os=require("os");AWSMock.config.basePath=`${os.tmpdir()}/mock`;const s3=AWSMock.S3();const wcb=fn=>(err,...args)=>{if(err&&err.code==="ENOENT"){err.code="NotFound"}return fn(err,...args)};return{listObjects(params,callback){return s3.listObjects(params,wcb(callback))},headObject(params,callback){return s3.headObject(params,wcb(callback))},deleteObject(params,callback){return s3.deleteObject(params,wcb(callback))},putObject(params,callback){return s3.putObject(params,wcb(callback))}}}const AWS=require("aws-sdk");AWS.config.update(config);const s3=new AWS.S3;return{listObjects(params,callback){return s3.listObjects(params,callback)},headObject(params,callback){return s3.headObject(params,callback)},deleteObject(params,callback){return s3.deleteObject(params,callback)},putObject(params,callback){return s3.putObject(params,callback)}}};module.exports.get_mockS3Http=function(){let mock_s3=false;if(!process.env.node_pre_gyp_mock_s3){return()=>mock_s3}const nock=require("nock");const host="https://mapbox-node-pre-gyp-public-testing-bucket.s3.us-east-1.amazonaws.com";const mockDir=process.env.node_pre_gyp_mock_s3+"/mapbox-node-pre-gyp-public-testing-bucket";const mock_http=()=>{function get(uri,requestBody){const filepath=path.join(mockDir,uri.replace("%2B","+"));try{fs.accessSync(filepath,fs.constants.R_OK)}catch(e){return[404,"not found\n"]}return[200,fs.createReadStream(filepath)]}return nock(host).persist().get(()=>mock_s3).reply(get)};mock_http(nock,host,mockDir);const mockS3Http=action=>{const previous=mock_s3;if(action==="off"){mock_s3=false}else if(action==="on"){mock_s3=true}else if(action!=="get"){throw new Error(`illegal action for setMockHttp ${action}`)}return previous};return mockS3Http}},{"aws-sdk":undefined,fs:undefined,"mock-aws-s3":undefined,nock:undefined,os:undefined,path:undefined,url:undefined}],20:[function(require,module,exports){"use strict";module.exports=exports;const path=require("path");const semver=require("semver");const url=require("url");const detect_libc=require("detect-libc");const napi=require("./napi.js");let abi_crosswalk;if(process.env.NODE_PRE_GYP_ABI_CROSSWALK){abi_crosswalk=require(process.env.NODE_PRE_GYP_ABI_CROSSWALK)}else{abi_crosswalk=require("./abi_crosswalk.json")}const major_versions={};Object.keys(abi_crosswalk).forEach(v=>{const major=v.split(".")[0];if(!major_versions[major]){major_versions[major]=v}});function get_electron_abi(runtime,target_version){if(!runtime){throw new Error("get_electron_abi requires valid runtime arg")}if(typeof target_version==="undefined"){throw new Error("Empty target version is not supported if electron is the target.")}const sem_ver=semver.parse(target_version);return runtime+"-v"+sem_ver.major+"."+sem_ver.minor}module.exports.get_electron_abi=get_electron_abi;function get_node_webkit_abi(runtime,target_version){if(!runtime){throw new Error("get_node_webkit_abi requires valid runtime arg")}if(typeof target_version==="undefined"){throw new Error("Empty target version is not supported if node-webkit is the target.")}return runtime+"-v"+target_version}module.exports.get_node_webkit_abi=get_node_webkit_abi;function get_node_abi(runtime,versions){if(!runtime){throw new Error("get_node_abi requires valid runtime arg")}if(!versions){throw new Error("get_node_abi requires valid process.versions object")}const sem_ver=semver.parse(versions.node);if(sem_ver.major===0&&sem_ver.minor%2){return runtime+"-v"+versions.node}else{return versions.modules?runtime+"-v"+ +versions.modules:"v8-"+versions.v8.split(".").slice(0,2).join(".")}}module.exports.get_node_abi=get_node_abi;function get_runtime_abi(runtime,target_version){if(!runtime){throw new Error("get_runtime_abi requires valid runtime arg")}if(runtime==="node-webkit"){return get_node_webkit_abi(runtime,target_version||process.versions["node-webkit"])}else if(runtime==="electron"){return get_electron_abi(runtime,target_version||process.versions.electron)}else{if(runtime!=="node"){throw new Error("Unknown Runtime: '"+runtime+"'")}if(!target_version){return get_node_abi(runtime,process.versions)}else{let cross_obj;if(abi_crosswalk[target_version]){cross_obj=abi_crosswalk[target_version]}else{const target_parts=target_version.split(".").map(i=>+i);if(target_parts.length!==3){throw new Error("Unknown target version: "+target_version)}const major=target_parts[0];let minor=target_parts[1];let patch=target_parts[2];if(major===1){while(true){if(minor>0)--minor;if(patch>0)--patch;const new_iojs_target=""+major+"."+minor+"."+patch;if(abi_crosswalk[new_iojs_target]){cross_obj=abi_crosswalk[new_iojs_target];console.log("Warning: node-pre-gyp could not find exact match for "+target_version);console.log("Warning: but node-pre-gyp successfully choose "+new_iojs_target+" as ABI compatible target");break}if(minor===0&&patch===0){break}}}else if(major>=2){if(major_versions[major]){cross_obj=abi_crosswalk[major_versions[major]];console.log("Warning: node-pre-gyp could not find exact match for "+target_version);console.log("Warning: but node-pre-gyp successfully choose "+major_versions[major]+" as ABI compatible target")}}else if(major===0){if(target_parts[1]%2===0){while(--patch>0){const new_node_target=""+major+"."+minor+"."+patch;if(abi_crosswalk[new_node_target]){cross_obj=abi_crosswalk[new_node_target];console.log("Warning: node-pre-gyp could not find exact match for "+target_version);console.log("Warning: but node-pre-gyp successfully choose "+new_node_target+" as ABI compatible target");break}}}}}if(!cross_obj){throw new Error("Unsupported target version: "+target_version)}const versions_obj={node:target_version,v8:cross_obj.v8+".0",modules:cross_obj.node_abi>1?cross_obj.node_abi:undefined};return get_node_abi(runtime,versions_obj)}}}module.exports.get_runtime_abi=get_runtime_abi;const required_parameters=["module_name","module_path","host"];function validate_config(package_json,opts){const msg=package_json.name+" package.json is not node-pre-gyp ready:\n";const missing=[];if(!package_json.main){missing.push("main")}if(!package_json.version){missing.push("version")}if(!package_json.name){missing.push("name")}if(!package_json.binary){missing.push("binary")}const o=package_json.binary;if(o){required_parameters.forEach(p=>{if(!o[p]||typeof o[p]!=="string"){missing.push("binary."+p)}})}if(missing.length>=1){throw new Error(msg+"package.json must declare these properties: \n"+missing.join("\n"))}if(o){const protocol=url.parse(o.host).protocol;if(protocol==="http:"){throw new Error("'host' protocol ("+protocol+") is invalid - only 'https:' is accepted")}}napi.validate_package_json(package_json,opts)}module.exports.validate_config=validate_config;function eval_template(template,opts){Object.keys(opts).forEach(key=>{const pattern="{"+key+"}";while(template.indexOf(pattern)>-1){template=template.replace(pattern,opts[key])}});return template}function fix_slashes(pathname){if(pathname.slice(-1)!=="/"){return pathname+"/"}return pathname}function drop_double_slashes(pathname){return pathname.replace(/\/\//g,"/")}function get_process_runtime(versions){let runtime="node";if(versions["node-webkit"]){runtime="node-webkit"}else if(versions.electron){runtime="electron"}return runtime}module.exports.get_process_runtime=get_process_runtime;const default_package_name="{module_name}-v{version}-{node_abi}-{platform}-{arch}.tar.gz";const default_remote_path="";module.exports.evaluate=function(package_json,options,napi_build_version){options=options||{};validate_config(package_json,options);const v=package_json.version;const module_version=semver.parse(v);const runtime=options.runtime||get_process_runtime(process.versions);const opts={name:package_json.name,configuration:options.debug?"Debug":"Release",debug:options.debug,module_name:package_json.binary.module_name,version:module_version.version,prerelease:module_version.prerelease.length?module_version.prerelease.join("."):"",build:module_version.build.length?module_version.build.join("."):"",major:module_version.major,minor:module_version.minor,patch:module_version.patch,runtime:runtime,node_abi:get_runtime_abi(runtime,options.target),node_abi_napi:napi.get_napi_version(options.target)?"napi":get_runtime_abi(runtime,options.target),napi_version:napi.get_napi_version(options.target),napi_build_version:napi_build_version||"",node_napi_label:napi_build_version?"napi-v"+napi_build_version:get_runtime_abi(runtime,options.target),target:options.target||"",platform:options.target_platform||process.platform,target_platform:options.target_platform||process.platform,arch:options.target_arch||process.arch,target_arch:options.target_arch||process.arch,libc:options.target_libc||detect_libc.familySync()||"unknown",module_main:package_json.main,toolset:options.toolset||"",bucket:package_json.binary.bucket,region:package_json.binary.region,s3ForcePathStyle:package_json.binary.s3ForcePathStyle||false};const validModuleName=opts.module_name.replace("-","_");const host=process.env["npm_config_"+validModuleName+"_binary_host_mirror"]||package_json.binary.host;opts.host=fix_slashes(eval_template(host,opts));opts.module_path=eval_template(package_json.binary.module_path,opts);if(options.module_root){opts.module_path=path.join(options.module_root,opts.module_path)}else{opts.module_path=path.resolve(opts.module_path)}opts.module=path.join(opts.module_path,opts.module_name+".node");opts.remote_path=package_json.binary.remote_path?drop_double_slashes(fix_slashes(eval_template(package_json.binary.remote_path,opts))):default_remote_path;const package_name=package_json.binary.package_name?package_json.binary.package_name:default_package_name;opts.package_name=eval_template(package_name,opts);opts.staged_tarball=path.join("build/stage",opts.remote_path,opts.package_name);opts.hosted_path=url.resolve(opts.host,opts.remote_path);opts.hosted_tarball=url.resolve(opts.hosted_path,opts.package_name);return opts}},{"./abi_crosswalk.json":17,"./napi.js":18,"detect-libc":88,path:undefined,semver:288,url:undefined}],21:[function(require,module,exports){module.exports={name:"@mapbox/node-pre-gyp",description:"Node.js native addon binary install tool",version:"1.0.11",keywords:["native","addon","module","c","c++","bindings","binary"],license:"BSD-3-Clause",author:"Dane Springmeyer <dane@mapbox.com>",repository:{type:"git",url:"git://github.com/mapbox/node-pre-gyp.git"},bin:"./bin/node-pre-gyp",main:"./lib/node-pre-gyp.js",dependencies:{"detect-libc":"^2.0.0","https-proxy-agent":"^5.0.0","make-dir":"^3.1.0","node-fetch":"^2.6.7",nopt:"^5.0.0",npmlog:"^5.0.1",rimraf:"^3.0.2",semver:"^7.3.5",tar:"^6.1.11"},devDependencies:{"@mapbox/cloudfriend":"^5.1.0","@mapbox/eslint-config-mapbox":"^3.0.0","aws-sdk":"^2.1087.0",codecov:"^3.8.3",eslint:"^7.32.0","eslint-plugin-node":"^11.1.0","mock-aws-s3":"^4.0.2",nock:"^12.0.3","node-addon-api":"^4.3.0",nyc:"^15.1.0",tape:"^5.5.2","tar-fs":"^2.1.1"},nyc:{all:true,"skip-full":false,exclude:["test/**"]},scripts:{coverage:"nyc --all --include index.js --include lib/ npm test","upload-coverage":"nyc report --reporter json && codecov --clear --flags=unit --file=./coverage/coverage-final.json",lint:"eslint bin/node-pre-gyp lib/*js lib/util/*js test/*js scripts/*js",fix:"npm run lint -- --fix","update-crosswalk":"node scripts/abi_crosswalk.js",test:"tape test/*test.js"}}},{}],22:[function(require,module,exports){exports.Emitter=Emitter;function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){function on(){this.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks["$"+event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}if(callbacks.length===0){delete this._callbacks["$"+event]}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=new Array(arguments.length-1),callbacks=this._callbacks["$"+event];for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.emitReserved=Emitter.prototype.emit;Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks["$"+event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],23:[function(require,module,exports){module.exports=exports=abbrev.abbrev=abbrev;abbrev.monkeyPatch=monkeyPatch;function monkeyPatch(){Object.defineProperty(Array.prototype,"abbrev",{value:function(){return abbrev(this)},enumerable:false,configurable:true,writable:true});Object.defineProperty(Object.prototype,"abbrev",{value:function(){return abbrev(Object.keys(this))},enumerable:false,configurable:true,writable:true})}function abbrev(list){if(arguments.length!==1||!Array.isArray(list)){list=Array.prototype.slice.call(arguments,0)}for(var i=0,l=list.length,args=[];i<l;i++){args[i]=typeof list[i]==="string"?list[i]:String(list[i])}args=args.sort(lexSort);var abbrevs={},prev="";for(var i=0,l=args.length;i<l;i++){var current=args[i],next=args[i+1]||"",nextMatches=true,prevMatches=true;if(current===next)continue;for(var j=0,cl=current.length;j<cl;j++){var curChar=current.charAt(j);nextMatches=nextMatches&&curChar===next.charAt(j);prevMatches=prevMatches&&curChar===prev.charAt(j);if(!nextMatches&&!prevMatches){j++;break}}prev=current;if(j===cl){abbrevs[current]=current;continue}for(var a=current.substr(0,j);j<=cl;j++){abbrevs[a]=current;a+=current.charAt(j)}}return abbrevs}function lexSort(a,b){return a===b?0:a>b?1:-1}},{}],24:[function(require,module,exports){
/*!
 * accepts
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
"use strict";var Negotiator=require("negotiator");var mime=require("mime-types");module.exports=Accepts;function Accepts(req){if(!(this instanceof Accepts)){return new Accepts(req)}this.headers=req.headers;this.negotiator=new Negotiator(req)}Accepts.prototype.type=Accepts.prototype.types=function(types_){var types=types_;if(types&&!Array.isArray(types)){types=new Array(arguments.length);for(var i=0;i<types.length;i++){types[i]=arguments[i]}}if(!types||types.length===0){return this.negotiator.mediaTypes()}if(!this.headers.accept){return types[0]}var mimes=types.map(extToMime);var accepts=this.negotiator.mediaTypes(mimes.filter(validMime));var first=accepts[0];return first?types[mimes.indexOf(first)]:false};Accepts.prototype.encoding=Accepts.prototype.encodings=function(encodings_){var encodings=encodings_;if(encodings&&!Array.isArray(encodings)){encodings=new Array(arguments.length);for(var i=0;i<encodings.length;i++){encodings[i]=arguments[i]}}if(!encodings||encodings.length===0){return this.negotiator.encodings()}return this.negotiator.encodings(encodings)[0]||false};Accepts.prototype.charset=Accepts.prototype.charsets=function(charsets_){var charsets=charsets_;if(charsets&&!Array.isArray(charsets)){charsets=new Array(arguments.length);for(var i=0;i<charsets.length;i++){charsets[i]=arguments[i]}}if(!charsets||charsets.length===0){return this.negotiator.charsets()}return this.negotiator.charsets(charsets)[0]||false};Accepts.prototype.lang=Accepts.prototype.langs=Accepts.prototype.language=Accepts.prototype.languages=function(languages_){var languages=languages_;if(languages&&!Array.isArray(languages)){languages=new Array(arguments.length);for(var i=0;i<languages.length;i++){languages[i]=arguments[i]}}if(!languages||languages.length===0){return this.negotiator.languages()}return this.negotiator.languages(languages)[0]||false};function extToMime(type){return type.indexOf("/")===-1?mime.lookup(type):type}function validMime(type){return typeof type==="string"}},{"mime-types":210,negotiator:213}],25:[function(require,module,exports){"use strict";module.exports=({onlyFirst:onlyFirst=false}={})=>{const pattern=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(pattern,onlyFirst?undefined:"g")}},{}],26:[function(require,module,exports){"use strict";module.exports=validate;function isArguments(thingy){return thingy!=null&&typeof thingy==="object"&&thingy.hasOwnProperty("callee")}const types={"*":{label:"any",check:()=>true},A:{label:"array",check:_=>Array.isArray(_)||isArguments(_)},S:{label:"string",check:_=>typeof _==="string"},N:{label:"number",check:_=>typeof _==="number"},F:{label:"function",check:_=>typeof _==="function"},O:{label:"object",check:_=>typeof _==="object"&&_!=null&&!types.A.check(_)&&!types.E.check(_)},B:{label:"boolean",check:_=>typeof _==="boolean"},E:{label:"error",check:_=>_ instanceof Error},Z:{label:"null",check:_=>_==null}};function addSchema(schema,arity){const group=arity[schema.length]=arity[schema.length]||[];if(group.indexOf(schema)===-1)group.push(schema)}function validate(rawSchemas,args){if(arguments.length!==2)throw wrongNumberOfArgs(["SA"],arguments.length);if(!rawSchemas)throw missingRequiredArg(0,"rawSchemas");if(!args)throw missingRequiredArg(1,"args");if(!types.S.check(rawSchemas))throw invalidType(0,["string"],rawSchemas);if(!types.A.check(args))throw invalidType(1,["array"],args);const schemas=rawSchemas.split("|");const arity={};schemas.forEach(schema=>{for(let ii=0;ii<schema.length;++ii){const type=schema[ii];if(!types[type])throw unknownType(ii,type)}if(/E.*E/.test(schema))throw moreThanOneError(schema);addSchema(schema,arity);if(/E/.test(schema)){addSchema(schema.replace(/E.*$/,"E"),arity);addSchema(schema.replace(/E/,"Z"),arity);if(schema.length===1)addSchema("",arity)}});let matching=arity[args.length];if(!matching){throw wrongNumberOfArgs(Object.keys(arity),args.length)}for(let ii=0;ii<args.length;++ii){let newMatching=matching.filter(schema=>{const type=schema[ii];const typeCheck=types[type].check;return typeCheck(args[ii])});if(!newMatching.length){const labels=matching.map(_=>types[_[ii]].label).filter(_=>_!=null);throw invalidType(ii,labels,args[ii])}matching=newMatching}}function missingRequiredArg(num){return newException("EMISSINGARG","Missing required argument #"+(num+1))}function unknownType(num,type){return newException("EUNKNOWNTYPE","Unknown type "+type+" in argument #"+(num+1))}function invalidType(num,expectedTypes,value){let valueType;Object.keys(types).forEach(typeCode=>{if(types[typeCode].check(value))valueType=types[typeCode].label});return newException("EINVALIDTYPE","Argument #"+(num+1)+": Expected "+englishList(expectedTypes)+" but got "+valueType)}function englishList(list){return list.join(", ").replace(/, ([^,]+)$/," or $1")}function wrongNumberOfArgs(expected,got){const english=englishList(expected);const args=expected.every(ex=>ex.length===1)?"argument":"arguments";return newException("EWRONGARGCOUNT","Expected "+english+" "+args+" but got "+got)}function moreThanOneError(schema){return newException("ETOOMANYERRORTYPES",'Only one error type per argument signature is allowed, more than one found in "'+schema+'"')}function newException(code,msg){const err=new TypeError(msg);err.code=code;if(Error.captureStackTrace)Error.captureStackTrace(err,validate);return err}},{}],27:[function(require,module,exports){"use strict";exports.TrackerGroup=require("./tracker-group.js");exports.Tracker=require("./tracker.js");exports.TrackerStream=require("./tracker-stream.js")},{"./tracker-group.js":29,"./tracker-stream.js":30,"./tracker.js":31}],28:[function(require,module,exports){"use strict";var EventEmitter=require("events").EventEmitter;var util=require("util");var trackerId=0;var TrackerBase=module.exports=function(name){EventEmitter.call(this);this.id=++trackerId;this.name=name};util.inherits(TrackerBase,EventEmitter)},{events:undefined,util:undefined}],29:[function(require,module,exports){"use strict";var util=require("util");var TrackerBase=require("./tracker-base.js");var Tracker=require("./tracker.js");var TrackerStream=require("./tracker-stream.js");var TrackerGroup=module.exports=function(name){TrackerBase.call(this,name);this.parentGroup=null;this.trackers=[];this.completion={};this.weight={};this.totalWeight=0;this.finished=false;this.bubbleChange=bubbleChange(this)};util.inherits(TrackerGroup,TrackerBase);function bubbleChange(trackerGroup){return function(name,completed,tracker){trackerGroup.completion[tracker.id]=completed;if(trackerGroup.finished){return}trackerGroup.emit("change",name||trackerGroup.name,trackerGroup.completed(),trackerGroup)}}TrackerGroup.prototype.nameInTree=function(){var names=[];var from=this;while(from){names.unshift(from.name);from=from.parentGroup}return names.join("/")};TrackerGroup.prototype.addUnit=function(unit,weight){if(unit.addUnit){var toTest=this;while(toTest){if(unit===toTest){throw new Error("Attempted to add tracker group "+unit.name+" to tree that already includes it "+this.nameInTree(this))}toTest=toTest.parentGroup}unit.parentGroup=this}this.weight[unit.id]=weight||1;this.totalWeight+=this.weight[unit.id];this.trackers.push(unit);this.completion[unit.id]=unit.completed();unit.on("change",this.bubbleChange);if(!this.finished){this.emit("change",unit.name,this.completion[unit.id],unit)}return unit};TrackerGroup.prototype.completed=function(){if(this.trackers.length===0){return 0}var valPerWeight=1/this.totalWeight;var completed=0;for(var ii=0;ii<this.trackers.length;ii++){var trackerId=this.trackers[ii].id;completed+=valPerWeight*this.weight[trackerId]*this.completion[trackerId]}return completed};TrackerGroup.prototype.newGroup=function(name,weight){return this.addUnit(new TrackerGroup(name),weight)};TrackerGroup.prototype.newItem=function(name,todo,weight){return this.addUnit(new Tracker(name,todo),weight)};TrackerGroup.prototype.newStream=function(name,todo,weight){return this.addUnit(new TrackerStream(name,todo),weight)};TrackerGroup.prototype.finish=function(){this.finished=true;if(!this.trackers.length){this.addUnit(new Tracker,1,true)}for(var ii=0;ii<this.trackers.length;ii++){var tracker=this.trackers[ii];tracker.finish();tracker.removeListener("change",this.bubbleChange)}this.emit("change",this.name,1,this)};var buffer="                                  ";TrackerGroup.prototype.debug=function(depth){depth=depth||0;var indent=depth?buffer.substr(0,depth):"";var output=indent+(this.name||"top")+": "+this.completed()+"\n";this.trackers.forEach(function(tracker){if(tracker instanceof TrackerGroup){output+=tracker.debug(depth+1)}else{output+=indent+" "+tracker.name+": "+tracker.completed()+"\n"}});return output}},{"./tracker-base.js":28,"./tracker-stream.js":30,"./tracker.js":31,util:undefined}],30:[function(require,module,exports){"use strict";var util=require("util");var stream=require("readable-stream");var delegate=require("delegates");var Tracker=require("./tracker.js");var TrackerStream=module.exports=function(name,size,options){stream.Transform.call(this,options);this.tracker=new Tracker(name,size);this.name=name;this.id=this.tracker.id;this.tracker.on("change",delegateChange(this))};util.inherits(TrackerStream,stream.Transform);function delegateChange(trackerStream){return function(name,completion,tracker){trackerStream.emit("change",name,completion,trackerStream)}}TrackerStream.prototype._transform=function(data,encoding,cb){this.tracker.completeWork(data.length?data.length:1);this.push(data);cb()};TrackerStream.prototype._flush=function(cb){this.tracker.finish();cb()};delegate(TrackerStream.prototype,"tracker").method("completed").method("addWork").method("finish")},{"./tracker.js":31,delegates:86,"readable-stream":238,util:undefined}],31:[function(require,module,exports){"use strict";var util=require("util");var TrackerBase=require("./tracker-base.js");var Tracker=module.exports=function(name,todo){TrackerBase.call(this,name);this.workDone=0;this.workTodo=todo||0};util.inherits(Tracker,TrackerBase);Tracker.prototype.completed=function(){return this.workTodo===0?0:this.workDone/this.workTodo};Tracker.prototype.addWork=function(work){this.workTodo+=work;this.emit("change",this.name,this.completed(),this)};Tracker.prototype.completeWork=function(work){this.workDone+=work;if(this.workDone>this.workTodo){this.workDone=this.workTodo}this.emit("change",this.name,this.completed(),this)};Tracker.prototype.finish=function(){this.workTodo=this.workDone=1;this.emit("change",this.name,1,this)}},{"./tracker-base.js":28,util:undefined}],32:[function(require,module,exports){"use strict";module.exports=balanced;function balanced(a,b,str){if(a instanceof RegExp)a=maybeMatch(a,str);if(b instanceof RegExp)b=maybeMatch(b,str);var r=range(a,b,str);return r&&{start:r[0],end:r[1],pre:str.slice(0,r[0]),body:str.slice(r[0]+a.length,r[1]),post:str.slice(r[1]+b.length)}}function maybeMatch(reg,str){var m=str.match(reg);return m?m[0]:null}balanced.range=range;function range(a,b,str){var begs,beg,left,right,result;var ai=str.indexOf(a);var bi=str.indexOf(b,ai+1);var i=ai;if(ai>=0&&bi>0){if(a===b){return[ai,bi]}begs=[];left=str.length;while(i>=0&&!result){if(i==ai){begs.push(i);ai=str.indexOf(a,i+1)}else if(begs.length==1){result=[begs.pop(),bi]}else{beg=begs.pop();if(beg<left){left=beg;right=bi}bi=str.indexOf(b,i+1)}i=ai<bi&&ai>=0?ai:bi}if(begs.length){result=[left,right]}}return result}},{}],33:[function(require,module,exports){
/*!
 * base64id v0.1.0
 */
var crypto=require("crypto");var Base64Id=function(){};Base64Id.prototype.getRandomBytes=function(bytes){var BUFFER_SIZE=4096;var self=this;bytes=bytes||12;if(bytes>BUFFER_SIZE){return crypto.randomBytes(bytes)}var bytesInBuffer=parseInt(BUFFER_SIZE/bytes);var threshold=parseInt(bytesInBuffer*.85);if(!threshold){return crypto.randomBytes(bytes)}if(this.bytesBufferIndex==null){this.bytesBufferIndex=-1}if(this.bytesBufferIndex==bytesInBuffer){this.bytesBuffer=null;this.bytesBufferIndex=-1}if(this.bytesBufferIndex==-1||this.bytesBufferIndex>threshold){if(!this.isGeneratingBytes){this.isGeneratingBytes=true;crypto.randomBytes(BUFFER_SIZE,function(err,bytes){self.bytesBuffer=bytes;self.bytesBufferIndex=0;self.isGeneratingBytes=false})}if(this.bytesBufferIndex==-1){return crypto.randomBytes(bytes)}}var result=this.bytesBuffer.slice(bytes*this.bytesBufferIndex,bytes*(this.bytesBufferIndex+1));this.bytesBufferIndex++;return result};Base64Id.prototype.generateId=function(){var rand=Buffer.alloc(15);if(!rand.writeInt32BE){return Math.abs(Math.random()*Math.random()*Date.now()|0).toString()+Math.abs(Math.random()*Math.random()*Date.now()|0).toString()}this.sequenceNumber=this.sequenceNumber+1|0;rand.writeInt32BE(this.sequenceNumber,11);if(crypto.randomBytes){this.getRandomBytes(12).copy(rand)}else{[0,4,8].forEach(function(i){rand.writeInt32BE(Math.random()*Math.pow(2,32)|0,i)})}return rand.toString("base64").replace(/\//g,"_").replace(/\+/g,"-")};exports=module.exports=new Base64Id},{crypto:undefined}],34:[function(require,module,exports){(function(__dirname){(function(){"use strict";var nodePreGyp=require("@mapbox/node-pre-gyp");var path=require("path");var binding_path=nodePreGyp.find(path.resolve(path.join(__dirname,"./package.json")));var bindings=require(binding_path);var crypto=require("crypto");var promises=require("./promises");module.exports.genSaltSync=function genSaltSync(rounds,minor){if(!rounds){rounds=10}else if(typeof rounds!=="number"){throw new Error("rounds must be a number")}if(!minor){minor="b"}else if(minor!=="b"&&minor!=="a"){throw new Error('minor must be either "a" or "b"')}return bindings.gen_salt_sync(minor,rounds,crypto.randomBytes(16))};module.exports.genSalt=function genSalt(rounds,minor,cb){var error;if(typeof arguments[0]==="function"){cb=arguments[0];rounds=10;minor="b"}else if(typeof arguments[1]==="function"){cb=arguments[1];minor="b"}if(!cb){return promises.promise(genSalt,this,[rounds,minor])}if(!rounds){rounds=10}else if(typeof rounds!=="number"){error=new Error("rounds must be a number");return process.nextTick(function(){cb(error)})}if(!minor){minor="b"}else if(minor!=="b"&&minor!=="a"){error=new Error('minor must be either "a" or "b"');return process.nextTick(function(){cb(error)})}crypto.randomBytes(16,function(error,randomBytes){if(error){cb(error);return}bindings.gen_salt(minor,rounds,randomBytes,cb)})};module.exports.hashSync=function hashSync(data,salt){if(data==null||salt==null){throw new Error("data and salt arguments required")}if(!(typeof data==="string"||data instanceof Buffer)||typeof salt!=="string"&&typeof salt!=="number"){throw new Error("data must be a string or Buffer and salt must either be a salt string or a number of rounds")}if(typeof salt==="number"){salt=module.exports.genSaltSync(salt)}return bindings.encrypt_sync(data,salt)};module.exports.hash=function hash(data,salt,cb){var error;if(typeof data==="function"){error=new Error("data must be a string or Buffer and salt must either be a salt string or a number of rounds");return process.nextTick(function(){data(error)})}if(typeof salt==="function"){error=new Error("data must be a string or Buffer and salt must either be a salt string or a number of rounds");return process.nextTick(function(){salt(error)})}if(cb&&typeof cb!=="function"){return promises.reject(new Error("cb must be a function or null to return a Promise"))}if(!cb){return promises.promise(hash,this,[data,salt])}if(data==null||salt==null){error=new Error("data and salt arguments required");return process.nextTick(function(){cb(error)})}if(!(typeof data==="string"||data instanceof Buffer)||typeof salt!=="string"&&typeof salt!=="number"){error=new Error("data must be a string or Buffer and salt must either be a salt string or a number of rounds");return process.nextTick(function(){cb(error)})}if(typeof salt==="number"){return module.exports.genSalt(salt,function(err,salt){return bindings.encrypt(data,salt,cb)})}return bindings.encrypt(data,salt,cb)};module.exports.compareSync=function compareSync(data,hash){if(data==null||hash==null){throw new Error("data and hash arguments required")}if(!(typeof data==="string"||data instanceof Buffer)||typeof hash!=="string"){throw new Error("data must be a string or Buffer and hash must be a string")}return bindings.compare_sync(data,hash)};module.exports.compare=function compare(data,hash,cb){var error;if(typeof data==="function"){error=new Error("data and hash arguments required");return process.nextTick(function(){data(error)})}if(typeof hash==="function"){error=new Error("data and hash arguments required");return process.nextTick(function(){hash(error)})}if(cb&&typeof cb!=="function"){return promises.reject(new Error("cb must be a function or null to return a Promise"))}if(!cb){return promises.promise(compare,this,[data,hash])}if(data==null||hash==null){error=new Error("data and hash arguments required");return process.nextTick(function(){cb(error)})}if(!(typeof data==="string"||data instanceof Buffer)||typeof hash!=="string"){error=new Error("data and hash must be strings");return process.nextTick(function(){cb(error)})}return bindings.compare(data,hash,cb)};module.exports.getRounds=function getRounds(hash){if(hash==null){throw new Error("hash argument required")}if(typeof hash!=="string"){throw new Error("hash must be a string")}return bindings.get_rounds(hash)}}).call(this)}).call(this,require("path").join(__dirname,"node_modules","bcrypt"))},{"./promises":35,"@mapbox/node-pre-gyp":15,crypto:undefined,path:undefined}],35:[function(require,module,exports){"use strict";var Promise=global.Promise;module.exports.promise=function(fn,context,args){if(!Array.isArray(args)){args=Array.prototype.slice.call(args)}if(typeof fn!=="function"){return Promise.reject(new Error("fn must be a function"))}return new Promise(function(resolve,reject){args.push(function(err,data){if(err){reject(err)}else{resolve(data)}});fn.apply(context,args)})};module.exports.reject=function(err){return Promise.reject(err)};module.exports.use=function(promise){Promise=promise}},{}],36:[function(require,module,exports){(function(undefined){var chr=String.fromCharCode;var tok=new Array(65536);for(var i=0;i<65536;i++){tok[i]=chr(i)}var enc="";function _encode(data,top){if(typeof data==="number"){var m=data|0;if(m!==data){var add=0,r=(data-m)*100;if(r<0){add=(r+1|0)-r;r=add>=1&&add<=1.5?r|0:r-1|0}else{add=r|0;r=r-add>=.5?r+1|0:add}add=0;if(data<0){m=0-m;r=0-r;add=1}if(m<65536){if(m===0){enc+=tok[13+add]+tok[r+128]}else{enc+=tok[13+add]+tok[r]+tok[m]}}else{enc+=tok[15+add]+tok[m>>16&65535]+tok[m&65535]+tok[r]}}else{var add=0;if(data<=0){data=0-data;add=1}else{data--}if(data<116){enc+=tok[17+data+add*116]}else if(data<65536){enc+=tok[1+add]+tok[data]}else{enc+=tok[3+add]+tok[data>>16&65535]+tok[data&65535]}}}else if(typeof data==="string"){var l=data.length;enc+=tok[7];while(l>=65535){l-=65535;enc+=tok[65535]}enc+=tok[l]+data}else if(data===true){enc+=tok[5]}else if(data===false){enc+=tok[6]}else if(data===null){enc+=tok[0]}else if(data instanceof Array){enc+=tok[8];for(var i=0,l=data.length;i<l;i++){_encode(data[i],false)}if(!top){enc+=tok[9]}}else if(data instanceof Object){enc+=tok[10];for(var e in data){enc+=tok[17+e.length]+e;_encode(data[e],false)}if(!top){enc+=tok[11]}}}function encode(data){enc="";_encode(data,true);return enc}function decode(data){var p=0,l=data.length;var stack=[],dec=undefined,f=null,t=0,i=-1;var dict=false,set=false;var key="",e=null,r=0;while(p<l){t=data.charCodeAt(p++);f=stack[i];if(dict&&set&&t>16){key=data.substring(p,p+t-17);p+=t-17;set=false}else if(t===8||t===10){e=t===8?new Array:new Object;set=dict=t===10;dec!==undefined?f instanceof Array?f.push(e):f[key]=e:dec=e;stack.push(e);i++}else if(t===11||t===9){stack.pop();set=dict=!(stack[--i]instanceof Array)}else if(t>16){t=t-17;t=t>115?0-t+116:t+1;f instanceof Array?f.push(t):f[key]=t;set=true}else if(t>0&&t<5){if(((t-1)/2|0)===0){e=data.charCodeAt(p);p++}else{e=(data.charCodeAt(p)<<16)+data.charCodeAt(p+1);p+=2}e=t%2?e+1:0-e;f instanceof Array?f.push(e):f[key]=e;set=true}else if(t>12&&t<17){if(((t-13)/2|0)===0){r=data.charCodeAt(p);if(r>127){e=0;r-=128;p++}else{e=data.charCodeAt(p+1);p+=2}}else{e=(data.charCodeAt(p)<<16)+data.charCodeAt(p+1);r=data.charCodeAt(p+2);p+=3}e=t%2?e+r*.01:0-(e+r*.01);f instanceof Array?f.push(e):f[key]=e;set=true}else if(t>4&&t<7){f instanceof Array?f.push(t===5):f[key]=t===5;set=true}else if(t===0){f instanceof Array?f.push(null):f[key]=null;set=true}else if(t===7){e=0;while(data.charCodeAt(p)===65535){e+=65535;p++}e+=data.charCodeAt(p++);f instanceof Array?f.push(data.substr(p,e)):f[key]=data.substr(p,e);p+=e;set=true}}return dec}if(typeof window==="undefined"){exports.encode=encode;exports.decode=decode}else{window.BISON={encode:encode,decode:decode}}})()},{}],37:[function(require,module,exports){var concatMap=require("concat-map");var balanced=require("balanced-match");module.exports=expandTop;var escSlash="\0SLASH"+Math.random()+"\0";var escOpen="\0OPEN"+Math.random()+"\0";var escClose="\0CLOSE"+Math.random()+"\0";var escComma="\0COMMA"+Math.random()+"\0";var escPeriod="\0PERIOD"+Math.random()+"\0";function numeric(str){return parseInt(str,10)==str?parseInt(str,10):str.charCodeAt(0)}function escapeBraces(str){return str.split("\\\\").join(escSlash).split("\\{").join(escOpen).split("\\}").join(escClose).split("\\,").join(escComma).split("\\.").join(escPeriod)}function unescapeBraces(str){return str.split(escSlash).join("\\").split(escOpen).join("{").split(escClose).join("}").split(escComma).join(",").split(escPeriod).join(".")}function parseCommaParts(str){if(!str)return[""];var parts=[];var m=balanced("{","}",str);if(!m)return str.split(",");var pre=m.pre;var body=m.body;var post=m.post;var p=pre.split(",");p[p.length-1]+="{"+body+"}";var postParts=parseCommaParts(post);if(post.length){p[p.length-1]+=postParts.shift();p.push.apply(p,postParts)}parts.push.apply(parts,p);return parts}function expandTop(str){if(!str)return[];if(str.substr(0,2)==="{}"){str="\\{\\}"+str.substr(2)}return expand(escapeBraces(str),true).map(unescapeBraces)}function identity(e){return e}function embrace(str){return"{"+str+"}"}function isPadded(el){return/^-?0\d/.test(el)}function lte(i,y){return i<=y}function gte(i,y){return i>=y}function expand(str,isTop){var expansions=[];var m=balanced("{","}",str);if(!m||/\$$/.test(m.pre))return[str];var isNumericSequence=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(m.body);var isAlphaSequence=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(m.body);var isSequence=isNumericSequence||isAlphaSequence;var isOptions=m.body.indexOf(",")>=0;if(!isSequence&&!isOptions){if(m.post.match(/,(?!,).*\}/)){str=m.pre+"{"+m.body+escClose+m.post;return expand(str)}return[str]}var n;if(isSequence){n=m.body.split(/\.\./)}else{n=parseCommaParts(m.body);if(n.length===1){n=expand(n[0],false).map(embrace);if(n.length===1){var post=m.post.length?expand(m.post,false):[""];return post.map(function(p){return m.pre+n[0]+p})}}}var pre=m.pre;var post=m.post.length?expand(m.post,false):[""];var N;if(isSequence){var x=numeric(n[0]);var y=numeric(n[1]);var width=Math.max(n[0].length,n[1].length);var incr=n.length==3?Math.abs(numeric(n[2])):1;var test=lte;var reverse=y<x;if(reverse){incr*=-1;test=gte}var pad=n.some(isPadded);N=[];for(var i=x;test(i,y);i+=incr){var c;if(isAlphaSequence){c=String.fromCharCode(i);if(c==="\\")c=""}else{c=String(i);if(pad){var need=width-c.length;if(need>0){var z=new Array(need+1).join("0");if(i<0)c="-"+z+c.slice(1);else c=z+c}}}N.push(c)}}else{N=concatMap(n,function(el){return expand(el,false)})}for(var j=0;j<N.length;j++){for(var k=0;k<post.length;k++){var expansion=pre+N[j]+post[k];if(!isTop||isSequence||expansion)expansions.push(expansion)}}return expansions}},{"balanced-match":32,"concat-map":39}],38:[function(require,module,exports){module.exports=colorSupport({alwaysReturn:true},colorSupport);function hasNone(obj,options){obj.level=0;obj.hasBasic=false;obj.has256=false;obj.has16m=false;if(!options.alwaysReturn){return false}return obj}function hasBasic(obj){obj.hasBasic=true;obj.has256=false;obj.has16m=false;obj.level=1;return obj}function has256(obj){obj.hasBasic=true;obj.has256=true;obj.has16m=false;obj.level=2;return obj}function has16m(obj){obj.hasBasic=true;obj.has256=true;obj.has16m=true;obj.level=3;return obj}function colorSupport(options,obj){options=options||{};obj=obj||{};if(typeof options.level==="number"){switch(options.level){case 0:return hasNone(obj,options);case 1:return hasBasic(obj);case 2:return has256(obj);case 3:return has16m(obj)}}obj.level=0;obj.hasBasic=false;obj.has256=false;obj.has16m=false;if(typeof process==="undefined"||!process||!process.stdout||!process.env||!process.platform){return hasNone(obj,options)}var env=options.env||process.env;var stream=options.stream||process.stdout;var term=options.term||env.TERM||"";var platform=options.platform||process.platform;if(!options.ignoreTTY&&!stream.isTTY){return hasNone(obj,options)}if(!options.ignoreDumb&&term==="dumb"&&!env.COLORTERM){return hasNone(obj,options)}if(platform==="win32"){return hasBasic(obj)}if(env.TMUX){return has256(obj)}if(!options.ignoreCI&&(env.CI||env.TEAMCITY_VERSION)){if(env.TRAVIS){return has256(obj)}else{return hasNone(obj,options)}}switch(env.TERM_PROGRAM){case"iTerm.app":var ver=env.TERM_PROGRAM_VERSION||"0.";if(/^[0-2]\./.test(ver)){return has256(obj)}else{return has16m(obj)}case"HyperTerm":case"Hyper":return has16m(obj);case"MacTerm":return has16m(obj);case"Apple_Terminal":return has256(obj)}if(/^xterm-256/.test(term)){return has256(obj)}if(/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(term)){return hasBasic(obj)}if(env.COLORTERM){return hasBasic(obj)}return hasNone(obj,options)}},{}],39:[function(require,module,exports){module.exports=function(xs,fn){var res=[];for(var i=0;i<xs.length;i++){var x=fn(xs[i],i);if(isArray(x))res.push.apply(res,x);else res.push(x)}return res};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},{}],40:[function(require,module,exports){
/*!
 * connect
 * Copyright(c) 2010 Sencha Inc.
 * Copyright(c) 2011 TJ Holowaychuk
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
"use strict";var debug=require("debug")("connect:dispatcher");var EventEmitter=require("events").EventEmitter;var finalhandler=require("finalhandler");var http=require("http");var merge=require("utils-merge");var parseUrl=require("parseurl");module.exports=createServer;var env=process.env.NODE_ENV||"development";var proto={};var defer=typeof setImmediate==="function"?setImmediate:function(fn){process.nextTick(fn.bind.apply(fn,arguments))};function createServer(){function app(req,res,next){app.handle(req,res,next)}merge(app,proto);merge(app,EventEmitter.prototype);app.route="/";app.stack=[];return app}proto.use=function use(route,fn){var handle=fn;var path=route;if(typeof route!=="string"){handle=route;path="/"}if(typeof handle.handle==="function"){var server=handle;server.route=path;handle=function(req,res,next){server.handle(req,res,next)}}if(handle instanceof http.Server){handle=handle.listeners("request")[0]}if(path[path.length-1]==="/"){path=path.slice(0,-1)}debug("use %s %s",path||"/",handle.name||"anonymous");this.stack.push({route:path,handle:handle});return this};proto.handle=function handle(req,res,out){var index=0;var protohost=getProtohost(req.url)||"";var removed="";var slashAdded=false;var stack=this.stack;var done=out||finalhandler(req,res,{env:env,onerror:logerror});req.originalUrl=req.originalUrl||req.url;function next(err){if(slashAdded){req.url=req.url.substr(1);slashAdded=false}if(removed.length!==0){req.url=protohost+removed+req.url.substr(protohost.length);removed=""}var layer=stack[index++];if(!layer){defer(done,err);return}var path=parseUrl(req).pathname||"/";var route=layer.route;if(path.toLowerCase().substr(0,route.length)!==route.toLowerCase()){return next(err)}var c=path.length>route.length&&path[route.length];if(c&&c!=="/"&&c!=="."){return next(err)}if(route.length!==0&&route!=="/"){removed=route;req.url=protohost+req.url.substr(protohost.length+removed.length);if(!protohost&&req.url[0]!=="/"){req.url="/"+req.url;slashAdded=true}}call(layer.handle,route,err,req,res,next)}next()};proto.listen=function listen(){var server=http.createServer(this);return server.listen.apply(server,arguments)};function call(handle,route,err,req,res,next){var arity=handle.length;var error=err;var hasError=Boolean(err);debug("%s %s : %s",handle.name||"<anonymous>",route,req.originalUrl);try{if(hasError&&arity===4){handle(err,req,res,next);return}else if(!hasError&&arity<4){handle(req,res,next);return}}catch(e){error=e}next(error)}function logerror(err){if(env!=="test")console.error(err.stack||err.toString())}function getProtohost(url){if(url.length===0||url[0]==="/"){return undefined}var fqdnIndex=url.indexOf("://");return fqdnIndex!==-1&&url.lastIndexOf("?",fqdnIndex)===-1?url.substr(0,url.indexOf("/",3+fqdnIndex)):undefined}},{debug:43,events:undefined,finalhandler:165,http:undefined,parseurl:222,"utils-merge":360}],41:[function(require,module,exports){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){if(typeof window!=="undefined"&&window.process&&window.process.type==="renderer"){return true}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}};function formatArgs(args){var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return;var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c)}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}if(!r&&typeof process!=="undefined"&&"env"in process){r=process.env.DEBUG}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},{"./debug":42}],42:[function(require,module,exports){exports=module.exports=createDebug.debug=createDebug["default"]=createDebug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevTime;function selectColor(namespace){var hash=0,i;for(i in namespace){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0}return exports.colors[Math.abs(hash)%exports.colors.length]}function createDebug(namespace){function debug(){if(!debug.enabled)return;var self=debug;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args.unshift("%O")}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args)}debug.namespace=namespace;debug.enabled=exports.enabled(namespace);debug.useColors=exports.useColors();debug.color=selectColor(namespace);if("function"===typeof exports.init){exports.init(debug)}return debug}function enable(namespaces){exports.save(namespaces);exports.names=[];exports.skips=[];var split=(typeof namespaces==="string"?namespaces:"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:45}],43:[function(require,module,exports){if(typeof process!=="undefined"&&process.type==="renderer"){module.exports=require("./browser.js")}else{module.exports=require("./node.js")}},{"./browser.js":41,"./node.js":44}],44:[function(require,module,exports){var tty=require("tty");var util=require("util");exports=module.exports=require("./debug");exports.init=init;exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.colors=[6,2,3,4,5,1];exports.inspectOpts=Object.keys(process.env).filter(function(key){return/^debug_/i.test(key)}).reduce(function(obj,key){var prop=key.substring(6).toLowerCase().replace(/_([a-z])/g,function(_,k){return k.toUpperCase()});var val=process.env[key];if(/^(yes|on|true|enabled)$/i.test(val))val=true;else if(/^(no|off|false|disabled)$/i.test(val))val=false;else if(val==="null")val=null;else val=Number(val);obj[prop]=val;return obj},{});var fd=parseInt(process.env.DEBUG_FD,10)||2;if(1!==fd&&2!==fd){util.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")()}var stream=1===fd?process.stdout:2===fd?process.stderr:createWritableStdioStream(fd);function useColors(){return"colors"in exports.inspectOpts?Boolean(exports.inspectOpts.colors):tty.isatty(fd)}exports.formatters.o=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts).split("\n").map(function(str){return str.trim()}).join(" ")};exports.formatters.O=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts)};function formatArgs(args){var name=this.namespace;var useColors=this.useColors;if(useColors){var c=this.color;var prefix="  [3"+c+";1m"+name+" "+"[0m";args[0]=prefix+args[0].split("\n").join("\n"+prefix);args.push("[3"+c+"m+"+exports.humanize(this.diff)+"[0m")}else{args[0]=(new Date).toUTCString()+" "+name+" "+args[0]}}function log(){return stream.write(util.format.apply(util,arguments)+"\n")}function save(namespaces){if(null==namespaces){delete process.env.DEBUG}else{process.env.DEBUG=namespaces}}function load(){return process.env.DEBUG}function createWritableStdioStream(fd){var stream;var tty_wrap=process.binding("tty_wrap");switch(tty_wrap.guessHandleType(fd)){case"TTY":stream=new tty.WriteStream(fd);stream._type="tty";if(stream._handle&&stream._handle.unref){stream._handle.unref()}break;case"FILE":var fs=require("fs");stream=new fs.SyncWriteStream(fd,{autoClose:false});stream._type="fs";break;case"PIPE":case"TCP":var net=require("net");stream=new net.Socket({fd:fd,readable:false,writable:true});stream.readable=false;stream.read=null;stream._type="pipe";if(stream._handle&&stream._handle.unref){stream._handle.unref()}break;default:throw new Error("Implement me. Unknown stream file type!")}stream.fd=fd;stream._isStdio=true;return stream}function init(debug){debug.inspectOpts={};var keys=Object.keys(exports.inspectOpts);for(var i=0;i<keys.length;i++){debug.inspectOpts[keys[i]]=exports.inspectOpts[keys[i]]}}exports.enable(load())},{"./debug":42,fs:undefined,net:undefined,tty:undefined,util:undefined}],45:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==="string"&&val.length>0){return parse(val)}else if(type==="number"&&isNaN(val)===false){return options.long?fmtLong(val):fmtShort(val)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))};function parse(str){str=String(str);if(str.length>100){return}var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match){return}var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}function fmtShort(ms){if(ms>=d){return Math.round(ms/d)+"d"}if(ms>=h){return Math.round(ms/h)+"h"}if(ms>=m){return Math.round(ms/m)+"m"}if(ms>=s){return Math.round(ms/s)+"s"}return ms+"ms"}function fmtLong(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n){return}if(ms<n*1.5){return Math.floor(ms/n)+" "+name}return Math.ceil(ms/n)+" "+name+"s"}},{}],46:[function(require,module,exports){"use strict";var prefix="[";exports.up=function up(num){return prefix+(num||"")+"A"};exports.down=function down(num){return prefix+(num||"")+"B"};exports.forward=function forward(num){return prefix+(num||"")+"C"};exports.back=function back(num){return prefix+(num||"")+"D"};exports.nextLine=function nextLine(num){return prefix+(num||"")+"E"};exports.previousLine=function previousLine(num){return prefix+(num||"")+"F"};exports.horizontalAbsolute=function horizontalAbsolute(num){if(num==null)throw new Error("horizontalAboslute requires a column to position to");return prefix+num+"G"};exports.eraseData=function eraseData(){return prefix+"J"};exports.eraseLine=function eraseLine(){return prefix+"K"};exports.goto=function(x,y){return prefix+y+";"+x+"H"};exports.gotoSOL=function(){return"\r"};exports.beep=function(){return""};exports.hideCursor=function hideCursor(){return prefix+"?25l"};exports.showCursor=function showCursor(){return prefix+"?25h"};var colors={reset:0,bold:1,italic:3,underline:4,inverse:7,stopBold:22,stopItalic:23,stopUnderline:24,stopInverse:27,white:37,black:30,blue:34,cyan:36,green:32,magenta:35,red:31,yellow:33,bgWhite:47,bgBlack:40,bgBlue:44,bgCyan:46,bgGreen:42,bgMagenta:45,bgRed:41,bgYellow:43,grey:90,brightBlack:90,brightRed:91,brightGreen:92,brightYellow:93,brightBlue:94,brightMagenta:95,brightCyan:96,brightWhite:97,bgGrey:100,bgBrightBlack:100,bgBrightRed:101,bgBrightGreen:102,bgBrightYellow:103,bgBrightBlue:104,bgBrightMagenta:105,bgBrightCyan:106,bgBrightWhite:107};exports.color=function color(colorWith){if(arguments.length!==1||!Array.isArray(colorWith)){colorWith=Array.prototype.slice.call(arguments)}return prefix+colorWith.map(colorNameToCode).join(";")+"m"};function colorNameToCode(color){if(colors[color]!=null)return colors[color];throw new Error("Unknown color or style name: "+color)}},{}],47:[function(require,module,exports){(function(){"use strict";var assign=require("object-assign");var vary=require("vary");var defaults={origin:"*",methods:"GET,HEAD,PUT,PATCH,POST,DELETE",preflightContinue:false,optionsSuccessStatus:204};function isString(s){return typeof s==="string"||s instanceof String}function isOriginAllowed(origin,allowedOrigin){if(Array.isArray(allowedOrigin)){for(var i=0;i<allowedOrigin.length;++i){if(isOriginAllowed(origin,allowedOrigin[i])){return true}}return false}else if(isString(allowedOrigin)){return origin===allowedOrigin}else if(allowedOrigin instanceof RegExp){return allowedOrigin.test(origin)}else{return!!allowedOrigin}}function configureOrigin(options,req){var requestOrigin=req.headers.origin,headers=[],isAllowed;if(!options.origin||options.origin==="*"){headers.push([{key:"Access-Control-Allow-Origin",value:"*"}])}else if(isString(options.origin)){headers.push([{key:"Access-Control-Allow-Origin",value:options.origin}]);headers.push([{key:"Vary",value:"Origin"}])}else{isAllowed=isOriginAllowed(requestOrigin,options.origin);headers.push([{key:"Access-Control-Allow-Origin",value:isAllowed?requestOrigin:false}]);headers.push([{key:"Vary",value:"Origin"}])}return headers}function configureMethods(options){var methods=options.methods;if(methods.join){methods=options.methods.join(",")}return{key:"Access-Control-Allow-Methods",value:methods}}function configureCredentials(options){if(options.credentials===true){return{key:"Access-Control-Allow-Credentials",value:"true"}}return null}function configureAllowedHeaders(options,req){var allowedHeaders=options.allowedHeaders||options.headers;var headers=[];if(!allowedHeaders){allowedHeaders=req.headers["access-control-request-headers"];headers.push([{key:"Vary",value:"Access-Control-Request-Headers"}])}else if(allowedHeaders.join){allowedHeaders=allowedHeaders.join(",")}if(allowedHeaders&&allowedHeaders.length){headers.push([{key:"Access-Control-Allow-Headers",value:allowedHeaders}])}return headers}function configureExposedHeaders(options){var headers=options.exposedHeaders;if(!headers){return null}else if(headers.join){headers=headers.join(",")}if(headers&&headers.length){return{key:"Access-Control-Expose-Headers",value:headers}}return null}function configureMaxAge(options){var maxAge=(typeof options.maxAge==="number"||options.maxAge)&&options.maxAge.toString();if(maxAge&&maxAge.length){return{key:"Access-Control-Max-Age",value:maxAge}}return null}function applyHeaders(headers,res){for(var i=0,n=headers.length;i<n;i++){var header=headers[i];if(header){if(Array.isArray(header)){applyHeaders(header,res)}else if(header.key==="Vary"&&header.value){vary(res,header.value)}else if(header.value){res.setHeader(header.key,header.value)}}}}function cors(options,req,res,next){var headers=[],method=req.method&&req.method.toUpperCase&&req.method.toUpperCase();if(method==="OPTIONS"){headers.push(configureOrigin(options,req));headers.push(configureCredentials(options,req));headers.push(configureMethods(options,req));headers.push(configureAllowedHeaders(options,req));headers.push(configureMaxAge(options,req));headers.push(configureExposedHeaders(options,req));applyHeaders(headers,res);if(options.preflightContinue){next()}else{res.statusCode=options.optionsSuccessStatus;res.setHeader("Content-Length","0");res.end()}}else{headers.push(configureOrigin(options,req));headers.push(configureCredentials(options,req));headers.push(configureExposedHeaders(options,req));applyHeaders(headers,res);next()}}function middlewareWrapper(o){var optionsCallback=null;if(typeof o==="function"){optionsCallback=o}else{optionsCallback=function(req,cb){cb(null,o)}}return function corsMiddleware(req,res,next){optionsCallback(req,function(err,options){if(err){next(err)}else{var corsOptions=assign({},defaults,options);var originCallback=null;if(corsOptions.origin&&typeof corsOptions.origin==="function"){originCallback=corsOptions.origin}else if(corsOptions.origin){originCallback=function(origin,cb){cb(null,corsOptions.origin)}}if(originCallback){originCallback(req.headers.origin,function(err2,origin){if(err2||!origin){next(err2)}else{corsOptions.origin=origin;cors(corsOptions,req,res,next)}})}else{next()}}})}}module.exports=middlewareWrapper})()},{"object-assign":220,vary:361}],48:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./enc-base64"),require("./md5"),require("./evpkdf"),require("./cipher-core"))}else if(typeof define==="function"&&define.amd){define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var BlockCipher=C_lib.BlockCipher;var C_algo=C.algo;var SBOX=[];var INV_SBOX=[];var SUB_MIX_0=[];var SUB_MIX_1=[];var SUB_MIX_2=[];var SUB_MIX_3=[];var INV_SUB_MIX_0=[];var INV_SUB_MIX_1=[];var INV_SUB_MIX_2=[];var INV_SUB_MIX_3=[];(function(){var d=[];for(var i=0;i<256;i++){if(i<128){d[i]=i<<1}else{d[i]=i<<1^283}}var x=0;var xi=0;for(var i=0;i<256;i++){var sx=xi^xi<<1^xi<<2^xi<<3^xi<<4;sx=sx>>>8^sx&255^99;SBOX[x]=sx;INV_SBOX[sx]=x;var x2=d[x];var x4=d[x2];var x8=d[x4];var t=d[sx]*257^sx*16843008;SUB_MIX_0[x]=t<<24|t>>>8;SUB_MIX_1[x]=t<<16|t>>>16;SUB_MIX_2[x]=t<<8|t>>>24;SUB_MIX_3[x]=t;var t=x8*16843009^x4*65537^x2*257^x*16843008;INV_SUB_MIX_0[sx]=t<<24|t>>>8;INV_SUB_MIX_1[sx]=t<<16|t>>>16;INV_SUB_MIX_2[sx]=t<<8|t>>>24;INV_SUB_MIX_3[sx]=t;if(!x){x=xi=1}else{x=x2^d[d[d[x8^x2]]];xi^=d[d[xi]]}}})();var RCON=[0,1,2,4,8,16,32,64,128,27,54];var AES=C_algo.AES=BlockCipher.extend({_doReset:function(){var t;if(this._nRounds&&this._keyPriorReset===this._key){return}var key=this._keyPriorReset=this._key;var keyWords=key.words;var keySize=key.sigBytes/4;var nRounds=this._nRounds=keySize+6;var ksRows=(nRounds+1)*4;var keySchedule=this._keySchedule=[];for(var ksRow=0;ksRow<ksRows;ksRow++){if(ksRow<keySize){keySchedule[ksRow]=keyWords[ksRow]}else{t=keySchedule[ksRow-1];if(!(ksRow%keySize)){t=t<<8|t>>>24;t=SBOX[t>>>24]<<24|SBOX[t>>>16&255]<<16|SBOX[t>>>8&255]<<8|SBOX[t&255];t^=RCON[ksRow/keySize|0]<<24}else if(keySize>6&&ksRow%keySize==4){t=SBOX[t>>>24]<<24|SBOX[t>>>16&255]<<16|SBOX[t>>>8&255]<<8|SBOX[t&255]}keySchedule[ksRow]=keySchedule[ksRow-keySize]^t}}var invKeySchedule=this._invKeySchedule=[];for(var invKsRow=0;invKsRow<ksRows;invKsRow++){var ksRow=ksRows-invKsRow;if(invKsRow%4){var t=keySchedule[ksRow]}else{var t=keySchedule[ksRow-4]}if(invKsRow<4||ksRow<=4){invKeySchedule[invKsRow]=t}else{invKeySchedule[invKsRow]=INV_SUB_MIX_0[SBOX[t>>>24]]^INV_SUB_MIX_1[SBOX[t>>>16&255]]^INV_SUB_MIX_2[SBOX[t>>>8&255]]^INV_SUB_MIX_3[SBOX[t&255]]}}},encryptBlock:function(M,offset){this._doCryptBlock(M,offset,this._keySchedule,SUB_MIX_0,SUB_MIX_1,SUB_MIX_2,SUB_MIX_3,SBOX)},decryptBlock:function(M,offset){var t=M[offset+1];M[offset+1]=M[offset+3];M[offset+3]=t;this._doCryptBlock(M,offset,this._invKeySchedule,INV_SUB_MIX_0,INV_SUB_MIX_1,INV_SUB_MIX_2,INV_SUB_MIX_3,INV_SBOX);var t=M[offset+1];M[offset+1]=M[offset+3];M[offset+3]=t},_doCryptBlock:function(M,offset,keySchedule,SUB_MIX_0,SUB_MIX_1,SUB_MIX_2,SUB_MIX_3,SBOX){var nRounds=this._nRounds;var s0=M[offset]^keySchedule[0];var s1=M[offset+1]^keySchedule[1];var s2=M[offset+2]^keySchedule[2];var s3=M[offset+3]^keySchedule[3];var ksRow=4;for(var round=1;round<nRounds;round++){var t0=SUB_MIX_0[s0>>>24]^SUB_MIX_1[s1>>>16&255]^SUB_MIX_2[s2>>>8&255]^SUB_MIX_3[s3&255]^keySchedule[ksRow++];var t1=SUB_MIX_0[s1>>>24]^SUB_MIX_1[s2>>>16&255]^SUB_MIX_2[s3>>>8&255]^SUB_MIX_3[s0&255]^keySchedule[ksRow++];var t2=SUB_MIX_0[s2>>>24]^SUB_MIX_1[s3>>>16&255]^SUB_MIX_2[s0>>>8&255]^SUB_MIX_3[s1&255]^keySchedule[ksRow++];var t3=SUB_MIX_0[s3>>>24]^SUB_MIX_1[s0>>>16&255]^SUB_MIX_2[s1>>>8&255]^SUB_MIX_3[s2&255]^keySchedule[ksRow++];s0=t0;s1=t1;s2=t2;s3=t3}var t0=(SBOX[s0>>>24]<<24|SBOX[s1>>>16&255]<<16|SBOX[s2>>>8&255]<<8|SBOX[s3&255])^keySchedule[ksRow++];var t1=(SBOX[s1>>>24]<<24|SBOX[s2>>>16&255]<<16|SBOX[s3>>>8&255]<<8|SBOX[s0&255])^keySchedule[ksRow++];var t2=(SBOX[s2>>>24]<<24|SBOX[s3>>>16&255]<<16|SBOX[s0>>>8&255]<<8|SBOX[s1&255])^keySchedule[ksRow++];var t3=(SBOX[s3>>>24]<<24|SBOX[s0>>>16&255]<<16|SBOX[s1>>>8&255]<<8|SBOX[s2&255])^keySchedule[ksRow++];M[offset]=t0;M[offset+1]=t1;M[offset+2]=t2;M[offset+3]=t3},keySize:256/32});C.AES=BlockCipher._createHelper(AES)})();return CryptoJS.AES})},{"./cipher-core":50,"./core":51,"./enc-base64":52,"./evpkdf":55,"./md5":60}],49:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./enc-base64"),require("./md5"),require("./evpkdf"),require("./cipher-core"))}else if(typeof define==="function"&&define.amd){define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var BlockCipher=C_lib.BlockCipher;var C_algo=C.algo;const N=16;const ORIG_P=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731];const ORIG_S=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var BLOWFISH_CTX={pbox:[],sbox:[]};function F(ctx,x){let a=x>>24&255;let b=x>>16&255;let c=x>>8&255;let d=x&255;let y=ctx.sbox[0][a]+ctx.sbox[1][b];y=y^ctx.sbox[2][c];y=y+ctx.sbox[3][d];return y}function BlowFish_Encrypt(ctx,left,right){let Xl=left;let Xr=right;let temp;for(let i=0;i<N;++i){Xl=Xl^ctx.pbox[i];Xr=F(ctx,Xl)^Xr;temp=Xl;Xl=Xr;Xr=temp}temp=Xl;Xl=Xr;Xr=temp;Xr=Xr^ctx.pbox[N];Xl=Xl^ctx.pbox[N+1];return{left:Xl,right:Xr}}function BlowFish_Decrypt(ctx,left,right){let Xl=left;let Xr=right;let temp;for(let i=N+1;i>1;--i){Xl=Xl^ctx.pbox[i];Xr=F(ctx,Xl)^Xr;temp=Xl;Xl=Xr;Xr=temp}temp=Xl;Xl=Xr;Xr=temp;Xr=Xr^ctx.pbox[1];Xl=Xl^ctx.pbox[0];return{left:Xl,right:Xr}}function BlowFishInit(ctx,key,keysize){for(let Row=0;Row<4;Row++){ctx.sbox[Row]=[];for(let Col=0;Col<256;Col++){ctx.sbox[Row][Col]=ORIG_S[Row][Col]}}let keyIndex=0;for(let index=0;index<N+2;index++){ctx.pbox[index]=ORIG_P[index]^key[keyIndex];keyIndex++;if(keyIndex>=keysize){keyIndex=0}}let Data1=0;let Data2=0;let res=0;for(let i=0;i<N+2;i+=2){res=BlowFish_Encrypt(ctx,Data1,Data2);Data1=res.left;Data2=res.right;ctx.pbox[i]=Data1;ctx.pbox[i+1]=Data2}for(let i=0;i<4;i++){for(let j=0;j<256;j+=2){res=BlowFish_Encrypt(ctx,Data1,Data2);Data1=res.left;Data2=res.right;ctx.sbox[i][j]=Data1;ctx.sbox[i][j+1]=Data2}}return true}var Blowfish=C_algo.Blowfish=BlockCipher.extend({_doReset:function(){if(this._keyPriorReset===this._key){return}var key=this._keyPriorReset=this._key;var keyWords=key.words;var keySize=key.sigBytes/4;BlowFishInit(BLOWFISH_CTX,keyWords,keySize)},encryptBlock:function(M,offset){var res=BlowFish_Encrypt(BLOWFISH_CTX,M[offset],M[offset+1]);M[offset]=res.left;M[offset+1]=res.right},decryptBlock:function(M,offset){var res=BlowFish_Decrypt(BLOWFISH_CTX,M[offset],M[offset+1]);M[offset]=res.left;M[offset+1]=res.right},blockSize:64/32,keySize:128/32,ivSize:64/32});C.Blowfish=BlockCipher._createHelper(Blowfish)})();return CryptoJS.Blowfish})},{"./cipher-core":50,"./core":51,"./enc-base64":52,"./evpkdf":55,"./md5":60}],50:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./evpkdf"))}else if(typeof define==="function"&&define.amd){define(["./core","./evpkdf"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){CryptoJS.lib.Cipher||function(undefined){var C=CryptoJS;var C_lib=C.lib;var Base=C_lib.Base;var WordArray=C_lib.WordArray;var BufferedBlockAlgorithm=C_lib.BufferedBlockAlgorithm;var C_enc=C.enc;var Utf8=C_enc.Utf8;var Base64=C_enc.Base64;var C_algo=C.algo;var EvpKDF=C_algo.EvpKDF;var Cipher=C_lib.Cipher=BufferedBlockAlgorithm.extend({cfg:Base.extend(),createEncryptor:function(key,cfg){return this.create(this._ENC_XFORM_MODE,key,cfg)},createDecryptor:function(key,cfg){return this.create(this._DEC_XFORM_MODE,key,cfg)},init:function(xformMode,key,cfg){this.cfg=this.cfg.extend(cfg);this._xformMode=xformMode;this._key=key;this.reset()},reset:function(){BufferedBlockAlgorithm.reset.call(this);this._doReset()},process:function(dataUpdate){this._append(dataUpdate);return this._process()},finalize:function(dataUpdate){if(dataUpdate){this._append(dataUpdate)}var finalProcessedData=this._doFinalize();return finalProcessedData},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function selectCipherStrategy(key){if(typeof key=="string"){return PasswordBasedCipher}else{return SerializableCipher}}return function(cipher){return{encrypt:function(message,key,cfg){return selectCipherStrategy(key).encrypt(cipher,message,key,cfg)},decrypt:function(ciphertext,key,cfg){return selectCipherStrategy(key).decrypt(cipher,ciphertext,key,cfg)}}}}()});var StreamCipher=C_lib.StreamCipher=Cipher.extend({_doFinalize:function(){var finalProcessedBlocks=this._process(!!"flush");return finalProcessedBlocks},blockSize:1});var C_mode=C.mode={};var BlockCipherMode=C_lib.BlockCipherMode=Base.extend({createEncryptor:function(cipher,iv){return this.Encryptor.create(cipher,iv)},createDecryptor:function(cipher,iv){return this.Decryptor.create(cipher,iv)},init:function(cipher,iv){this._cipher=cipher;this._iv=iv}});var CBC=C_mode.CBC=function(){var CBC=BlockCipherMode.extend();CBC.Encryptor=CBC.extend({processBlock:function(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;xorBlock.call(this,words,offset,blockSize);cipher.encryptBlock(words,offset);this._prevBlock=words.slice(offset,offset+blockSize)}});CBC.Decryptor=CBC.extend({processBlock:function(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;var thisBlock=words.slice(offset,offset+blockSize);cipher.decryptBlock(words,offset);xorBlock.call(this,words,offset,blockSize);this._prevBlock=thisBlock}});function xorBlock(words,offset,blockSize){var block;var iv=this._iv;if(iv){block=iv;this._iv=undefined}else{block=this._prevBlock}for(var i=0;i<blockSize;i++){words[offset+i]^=block[i]}}return CBC}();var C_pad=C.pad={};var Pkcs7=C_pad.Pkcs7={pad:function(data,blockSize){var blockSizeBytes=blockSize*4;var nPaddingBytes=blockSizeBytes-data.sigBytes%blockSizeBytes;var paddingWord=nPaddingBytes<<24|nPaddingBytes<<16|nPaddingBytes<<8|nPaddingBytes;var paddingWords=[];for(var i=0;i<nPaddingBytes;i+=4){paddingWords.push(paddingWord)}var padding=WordArray.create(paddingWords,nPaddingBytes);data.concat(padding)},unpad:function(data){var nPaddingBytes=data.words[data.sigBytes-1>>>2]&255;data.sigBytes-=nPaddingBytes}};var BlockCipher=C_lib.BlockCipher=Cipher.extend({cfg:Cipher.cfg.extend({mode:CBC,padding:Pkcs7}),reset:function(){var modeCreator;Cipher.reset.call(this);var cfg=this.cfg;var iv=cfg.iv;var mode=cfg.mode;if(this._xformMode==this._ENC_XFORM_MODE){modeCreator=mode.createEncryptor}else{modeCreator=mode.createDecryptor;this._minBufferSize=1}if(this._mode&&this._mode.__creator==modeCreator){this._mode.init(this,iv&&iv.words)}else{this._mode=modeCreator.call(mode,this,iv&&iv.words);this._mode.__creator=modeCreator}},_doProcessBlock:function(words,offset){this._mode.processBlock(words,offset)},_doFinalize:function(){var finalProcessedBlocks;var padding=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){padding.pad(this._data,this.blockSize);finalProcessedBlocks=this._process(!!"flush")}else{finalProcessedBlocks=this._process(!!"flush");padding.unpad(finalProcessedBlocks)}return finalProcessedBlocks},blockSize:128/32});var CipherParams=C_lib.CipherParams=Base.extend({init:function(cipherParams){this.mixIn(cipherParams)},toString:function(formatter){return(formatter||this.formatter).stringify(this)}});var C_format=C.format={};var OpenSSLFormatter=C_format.OpenSSL={stringify:function(cipherParams){var wordArray;var ciphertext=cipherParams.ciphertext;var salt=cipherParams.salt;if(salt){wordArray=WordArray.create([1398893684,1701076831]).concat(salt).concat(ciphertext)}else{wordArray=ciphertext}return wordArray.toString(Base64)},parse:function(openSSLStr){var salt;var ciphertext=Base64.parse(openSSLStr);var ciphertextWords=ciphertext.words;if(ciphertextWords[0]==1398893684&&ciphertextWords[1]==1701076831){salt=WordArray.create(ciphertextWords.slice(2,4));ciphertextWords.splice(0,4);ciphertext.sigBytes-=16}return CipherParams.create({ciphertext:ciphertext,salt:salt})}};var SerializableCipher=C_lib.SerializableCipher=Base.extend({cfg:Base.extend({format:OpenSSLFormatter}),encrypt:function(cipher,message,key,cfg){cfg=this.cfg.extend(cfg);var encryptor=cipher.createEncryptor(key,cfg);var ciphertext=encryptor.finalize(message);var cipherCfg=encryptor.cfg;return CipherParams.create({ciphertext:ciphertext,key:key,iv:cipherCfg.iv,algorithm:cipher,mode:cipherCfg.mode,padding:cipherCfg.padding,blockSize:cipher.blockSize,formatter:cfg.format})},decrypt:function(cipher,ciphertext,key,cfg){cfg=this.cfg.extend(cfg);ciphertext=this._parse(ciphertext,cfg.format);var plaintext=cipher.createDecryptor(key,cfg).finalize(ciphertext.ciphertext);return plaintext},_parse:function(ciphertext,format){if(typeof ciphertext=="string"){return format.parse(ciphertext,this)}else{return ciphertext}}});var C_kdf=C.kdf={};var OpenSSLKdf=C_kdf.OpenSSL={execute:function(password,keySize,ivSize,salt,hasher){if(!salt){salt=WordArray.random(64/8)}if(!hasher){var key=EvpKDF.create({keySize:keySize+ivSize}).compute(password,salt)}else{var key=EvpKDF.create({keySize:keySize+ivSize,hasher:hasher}).compute(password,salt)}var iv=WordArray.create(key.words.slice(keySize),ivSize*4);key.sigBytes=keySize*4;return CipherParams.create({key:key,iv:iv,salt:salt})}};var PasswordBasedCipher=C_lib.PasswordBasedCipher=SerializableCipher.extend({cfg:SerializableCipher.cfg.extend({kdf:OpenSSLKdf}),encrypt:function(cipher,message,password,cfg){cfg=this.cfg.extend(cfg);var derivedParams=cfg.kdf.execute(password,cipher.keySize,cipher.ivSize,cfg.salt,cfg.hasher);cfg.iv=derivedParams.iv;var ciphertext=SerializableCipher.encrypt.call(this,cipher,message,derivedParams.key,cfg);ciphertext.mixIn(derivedParams);return ciphertext},decrypt:function(cipher,ciphertext,password,cfg){cfg=this.cfg.extend(cfg);ciphertext=this._parse(ciphertext,cfg.format);var derivedParams=cfg.kdf.execute(password,cipher.keySize,cipher.ivSize,ciphertext.salt,cfg.hasher);cfg.iv=derivedParams.iv;var plaintext=SerializableCipher.decrypt.call(this,cipher,ciphertext,derivedParams.key,cfg);return plaintext}})}()})},{"./core":51,"./evpkdf":55}],51:[function(require,module,exports){(function(root,factory){if(typeof exports==="object"){module.exports=exports=factory()}else if(typeof define==="function"&&define.amd){define([],factory)}else{root.CryptoJS=factory()}})(this,function(){var CryptoJS=CryptoJS||function(Math,undefined){var crypto;if(typeof window!=="undefined"&&window.crypto){crypto=window.crypto}if(typeof self!=="undefined"&&self.crypto){crypto=self.crypto}if(typeof globalThis!=="undefined"&&globalThis.crypto){crypto=globalThis.crypto}if(!crypto&&typeof window!=="undefined"&&window.msCrypto){crypto=window.msCrypto}if(!crypto&&typeof global!=="undefined"&&global.crypto){crypto=global.crypto}if(!crypto&&typeof require==="function"){try{crypto=require("crypto")}catch(err){}}var cryptoSecureRandomInt=function(){if(crypto){if(typeof crypto.getRandomValues==="function"){try{return crypto.getRandomValues(new Uint32Array(1))[0]}catch(err){}}if(typeof crypto.randomBytes==="function"){try{return crypto.randomBytes(4).readInt32LE()}catch(err){}}}throw new Error("Native crypto module could not be used to get secure random number.")};var create=Object.create||function(){function F(){}return function(obj){var subtype;F.prototype=obj;subtype=new F;F.prototype=null;return subtype}}();var C={};var C_lib=C.lib={};var Base=C_lib.Base=function(){return{extend:function(overrides){var subtype=create(this);if(overrides){subtype.mixIn(overrides)}if(!subtype.hasOwnProperty("init")||this.init===subtype.init){subtype.init=function(){subtype.$super.init.apply(this,arguments)}}subtype.init.prototype=subtype;subtype.$super=this;return subtype},create:function(){var instance=this.extend();instance.init.apply(instance,arguments);return instance},init:function(){},mixIn:function(properties){for(var propertyName in properties){if(properties.hasOwnProperty(propertyName)){this[propertyName]=properties[propertyName]}}if(properties.hasOwnProperty("toString")){this.toString=properties.toString}},clone:function(){return this.init.prototype.extend(this)}}}();var WordArray=C_lib.WordArray=Base.extend({init:function(words,sigBytes){words=this.words=words||[];if(sigBytes!=undefined){this.sigBytes=sigBytes}else{this.sigBytes=words.length*4}},toString:function(encoder){return(encoder||Hex).stringify(this)},concat:function(wordArray){var thisWords=this.words;var thatWords=wordArray.words;var thisSigBytes=this.sigBytes;var thatSigBytes=wordArray.sigBytes;this.clamp();if(thisSigBytes%4){for(var i=0;i<thatSigBytes;i++){var thatByte=thatWords[i>>>2]>>>24-i%4*8&255;thisWords[thisSigBytes+i>>>2]|=thatByte<<24-(thisSigBytes+i)%4*8}}else{for(var j=0;j<thatSigBytes;j+=4){thisWords[thisSigBytes+j>>>2]=thatWords[j>>>2]}}this.sigBytes+=thatSigBytes;return this},clamp:function(){var words=this.words;var sigBytes=this.sigBytes;words[sigBytes>>>2]&=4294967295<<32-sigBytes%4*8;words.length=Math.ceil(sigBytes/4)},clone:function(){var clone=Base.clone.call(this);clone.words=this.words.slice(0);return clone},random:function(nBytes){var words=[];for(var i=0;i<nBytes;i+=4){words.push(cryptoSecureRandomInt())}return new WordArray.init(words,nBytes)}});var C_enc=C.enc={};var Hex=C_enc.Hex={stringify:function(wordArray){var words=wordArray.words;var sigBytes=wordArray.sigBytes;var hexChars=[];for(var i=0;i<sigBytes;i++){var bite=words[i>>>2]>>>24-i%4*8&255;hexChars.push((bite>>>4).toString(16));hexChars.push((bite&15).toString(16))}return hexChars.join("")},parse:function(hexStr){var hexStrLength=hexStr.length;var words=[];for(var i=0;i<hexStrLength;i+=2){words[i>>>3]|=parseInt(hexStr.substr(i,2),16)<<24-i%8*4}return new WordArray.init(words,hexStrLength/2)}};var Latin1=C_enc.Latin1={stringify:function(wordArray){var words=wordArray.words;var sigBytes=wordArray.sigBytes;var latin1Chars=[];for(var i=0;i<sigBytes;i++){var bite=words[i>>>2]>>>24-i%4*8&255;latin1Chars.push(String.fromCharCode(bite))}return latin1Chars.join("")},parse:function(latin1Str){var latin1StrLength=latin1Str.length;var words=[];for(var i=0;i<latin1StrLength;i++){words[i>>>2]|=(latin1Str.charCodeAt(i)&255)<<24-i%4*8}return new WordArray.init(words,latin1StrLength)}};var Utf8=C_enc.Utf8={stringify:function(wordArray){try{return decodeURIComponent(escape(Latin1.stringify(wordArray)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(utf8Str){return Latin1.parse(unescape(encodeURIComponent(utf8Str)))}};var BufferedBlockAlgorithm=C_lib.BufferedBlockAlgorithm=Base.extend({reset:function(){this._data=new WordArray.init;this._nDataBytes=0},_append:function(data){if(typeof data=="string"){data=Utf8.parse(data)}this._data.concat(data);this._nDataBytes+=data.sigBytes},_process:function(doFlush){var processedWords;var data=this._data;var dataWords=data.words;var dataSigBytes=data.sigBytes;var blockSize=this.blockSize;var blockSizeBytes=blockSize*4;var nBlocksReady=dataSigBytes/blockSizeBytes;if(doFlush){nBlocksReady=Math.ceil(nBlocksReady)}else{nBlocksReady=Math.max((nBlocksReady|0)-this._minBufferSize,0)}var nWordsReady=nBlocksReady*blockSize;var nBytesReady=Math.min(nWordsReady*4,dataSigBytes);if(nWordsReady){for(var offset=0;offset<nWordsReady;offset+=blockSize){this._doProcessBlock(dataWords,offset)}processedWords=dataWords.splice(0,nWordsReady);data.sigBytes-=nBytesReady}return new WordArray.init(processedWords,nBytesReady)},clone:function(){var clone=Base.clone.call(this);clone._data=this._data.clone();return clone},_minBufferSize:0});var Hasher=C_lib.Hasher=BufferedBlockAlgorithm.extend({cfg:Base.extend(),init:function(cfg){this.cfg=this.cfg.extend(cfg);this.reset()},reset:function(){BufferedBlockAlgorithm.reset.call(this);this._doReset()},update:function(messageUpdate){this._append(messageUpdate);this._process();return this},finalize:function(messageUpdate){if(messageUpdate){this._append(messageUpdate)}var hash=this._doFinalize();return hash},blockSize:512/32,_createHelper:function(hasher){return function(message,cfg){return new hasher.init(cfg).finalize(message)}},_createHmacHelper:function(hasher){return function(message,key){return new C_algo.HMAC.init(hasher,key).finalize(message)}}});var C_algo=C.algo={};return C}(Math);return CryptoJS})},{crypto:undefined}],52:[function(require,module,exports){(function(root,factory){if(typeof exports==="object"){module.exports=exports=factory(require("./core"))}else if(typeof define==="function"&&define.amd){define(["./core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var C_enc=C.enc;var Base64=C_enc.Base64={stringify:function(wordArray){var words=wordArray.words;var sigBytes=wordArray.sigBytes;var map=this._map;wordArray.clamp();var base64Chars=[];for(var i=0;i<sigBytes;i+=3){var byte1=words[i>>>2]>>>24-i%4*8&255;var byte2=words[i+1>>>2]>>>24-(i+1)%4*8&255;var byte3=words[i+2>>>2]>>>24-(i+2)%4*8&255;var triplet=byte1<<16|byte2<<8|byte3;for(var j=0;j<4&&i+j*.75<sigBytes;j++){base64Chars.push(map.charAt(triplet>>>6*(3-j)&63))}}var paddingChar=map.charAt(64);if(paddingChar){while(base64Chars.length%4){base64Chars.push(paddingChar)}}return base64Chars.join("")},parse:function(base64Str){var base64StrLength=base64Str.length;var map=this._map;var reverseMap=this._reverseMap;if(!reverseMap){reverseMap=this._reverseMap=[];for(var j=0;j<map.length;j++){reverseMap[map.charCodeAt(j)]=j}}var paddingChar=map.charAt(64);if(paddingChar){var paddingIndex=base64Str.indexOf(paddingChar);if(paddingIndex!==-1){base64StrLength=paddingIndex}}return parseLoop(base64Str,base64StrLength,reverseMap)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function parseLoop(base64Str,base64StrLength,reverseMap){var words=[];var nBytes=0;for(var i=0;i<base64StrLength;i++){if(i%4){var bits1=reverseMap[base64Str.charCodeAt(i-1)]<<i%4*2;var bits2=reverseMap[base64Str.charCodeAt(i)]>>>6-i%4*2;var bitsCombined=bits1|bits2;words[nBytes>>>2]|=bitsCombined<<24-nBytes%4*8;nBytes++}}return WordArray.create(words,nBytes)}})();return CryptoJS.enc.Base64})},{"./core":51}],53:[function(require,module,exports){(function(root,factory){if(typeof exports==="object"){module.exports=exports=factory(require("./core"))}else if(typeof define==="function"&&define.amd){define(["./core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var C_enc=C.enc;var Base64url=C_enc.Base64url={stringify:function(wordArray,urlSafe){if(urlSafe===undefined){urlSafe=true}var words=wordArray.words;var sigBytes=wordArray.sigBytes;var map=urlSafe?this._safe_map:this._map;wordArray.clamp();var base64Chars=[];for(var i=0;i<sigBytes;i+=3){var byte1=words[i>>>2]>>>24-i%4*8&255;var byte2=words[i+1>>>2]>>>24-(i+1)%4*8&255;var byte3=words[i+2>>>2]>>>24-(i+2)%4*8&255;var triplet=byte1<<16|byte2<<8|byte3;for(var j=0;j<4&&i+j*.75<sigBytes;j++){base64Chars.push(map.charAt(triplet>>>6*(3-j)&63))}}var paddingChar=map.charAt(64);if(paddingChar){while(base64Chars.length%4){base64Chars.push(paddingChar)}}return base64Chars.join("")},parse:function(base64Str,urlSafe){if(urlSafe===undefined){urlSafe=true}var base64StrLength=base64Str.length;var map=urlSafe?this._safe_map:this._map;var reverseMap=this._reverseMap;if(!reverseMap){reverseMap=this._reverseMap=[];for(var j=0;j<map.length;j++){reverseMap[map.charCodeAt(j)]=j}}var paddingChar=map.charAt(64);if(paddingChar){var paddingIndex=base64Str.indexOf(paddingChar);if(paddingIndex!==-1){base64StrLength=paddingIndex}}return parseLoop(base64Str,base64StrLength,reverseMap)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function parseLoop(base64Str,base64StrLength,reverseMap){var words=[];var nBytes=0;for(var i=0;i<base64StrLength;i++){if(i%4){var bits1=reverseMap[base64Str.charCodeAt(i-1)]<<i%4*2;var bits2=reverseMap[base64Str.charCodeAt(i)]>>>6-i%4*2;var bitsCombined=bits1|bits2;words[nBytes>>>2]|=bitsCombined<<24-nBytes%4*8;nBytes++}}return WordArray.create(words,nBytes)}})();return CryptoJS.enc.Base64url})},{"./core":51}],54:[function(require,module,exports){(function(root,factory){if(typeof exports==="object"){module.exports=exports=factory(require("./core"))}else if(typeof define==="function"&&define.amd){define(["./core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var C_enc=C.enc;var Utf16BE=C_enc.Utf16=C_enc.Utf16BE={stringify:function(wordArray){var words=wordArray.words;var sigBytes=wordArray.sigBytes;var utf16Chars=[];for(var i=0;i<sigBytes;i+=2){var codePoint=words[i>>>2]>>>16-i%4*8&65535;utf16Chars.push(String.fromCharCode(codePoint))}return utf16Chars.join("")},parse:function(utf16Str){var utf16StrLength=utf16Str.length;var words=[];for(var i=0;i<utf16StrLength;i++){words[i>>>1]|=utf16Str.charCodeAt(i)<<16-i%2*16}return WordArray.create(words,utf16StrLength*2)}};C_enc.Utf16LE={stringify:function(wordArray){var words=wordArray.words;var sigBytes=wordArray.sigBytes;var utf16Chars=[];for(var i=0;i<sigBytes;i+=2){var codePoint=swapEndian(words[i>>>2]>>>16-i%4*8&65535);utf16Chars.push(String.fromCharCode(codePoint))}return utf16Chars.join("")},parse:function(utf16Str){var utf16StrLength=utf16Str.length;var words=[];for(var i=0;i<utf16StrLength;i++){words[i>>>1]|=swapEndian(utf16Str.charCodeAt(i)<<16-i%2*16)}return WordArray.create(words,utf16StrLength*2)}};function swapEndian(word){return word<<8&4278255360|word>>>8&16711935}})();return CryptoJS.enc.Utf16})},{"./core":51}],55:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./sha1"),require("./hmac"))}else if(typeof define==="function"&&define.amd){define(["./core","./sha1","./hmac"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var Base=C_lib.Base;var WordArray=C_lib.WordArray;var C_algo=C.algo;var MD5=C_algo.MD5;var EvpKDF=C_algo.EvpKDF=Base.extend({cfg:Base.extend({keySize:128/32,hasher:MD5,iterations:1}),init:function(cfg){this.cfg=this.cfg.extend(cfg)},compute:function(password,salt){var block;var cfg=this.cfg;var hasher=cfg.hasher.create();var derivedKey=WordArray.create();var derivedKeyWords=derivedKey.words;var keySize=cfg.keySize;var iterations=cfg.iterations;while(derivedKeyWords.length<keySize){if(block){hasher.update(block)}block=hasher.update(password).finalize(salt);hasher.reset();for(var i=1;i<iterations;i++){block=hasher.finalize(block);hasher.reset()}derivedKey.concat(block)}derivedKey.sigBytes=keySize*4;return derivedKey}});C.EvpKDF=function(password,salt,cfg){return EvpKDF.create(cfg).compute(password,salt)}})();return CryptoJS.EvpKDF})},{"./core":51,"./hmac":57,"./sha1":76}],56:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(undefined){var C=CryptoJS;var C_lib=C.lib;var CipherParams=C_lib.CipherParams;var C_enc=C.enc;var Hex=C_enc.Hex;var C_format=C.format;var HexFormatter=C_format.Hex={stringify:function(cipherParams){return cipherParams.ciphertext.toString(Hex)},parse:function(input){var ciphertext=Hex.parse(input);return CipherParams.create({ciphertext:ciphertext})}}})();return CryptoJS.format.Hex})},{"./cipher-core":50,"./core":51}],57:[function(require,module,exports){(function(root,factory){if(typeof exports==="object"){module.exports=exports=factory(require("./core"))}else if(typeof define==="function"&&define.amd){define(["./core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var Base=C_lib.Base;var C_enc=C.enc;var Utf8=C_enc.Utf8;var C_algo=C.algo;var HMAC=C_algo.HMAC=Base.extend({init:function(hasher,key){hasher=this._hasher=new hasher.init;if(typeof key=="string"){key=Utf8.parse(key)}var hasherBlockSize=hasher.blockSize;var hasherBlockSizeBytes=hasherBlockSize*4;if(key.sigBytes>hasherBlockSizeBytes){key=hasher.finalize(key)}key.clamp();var oKey=this._oKey=key.clone();var iKey=this._iKey=key.clone();var oKeyWords=oKey.words;var iKeyWords=iKey.words;for(var i=0;i<hasherBlockSize;i++){oKeyWords[i]^=1549556828;iKeyWords[i]^=909522486}oKey.sigBytes=iKey.sigBytes=hasherBlockSizeBytes;this.reset()},reset:function(){var hasher=this._hasher;hasher.reset();hasher.update(this._iKey)},update:function(messageUpdate){this._hasher.update(messageUpdate);return this},finalize:function(messageUpdate){var hasher=this._hasher;var innerHash=hasher.finalize(messageUpdate);hasher.reset();var hmac=hasher.finalize(this._oKey.clone().concat(innerHash));return hmac}})})()})},{"./core":51}],58:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./x64-core"),require("./lib-typedarrays"),require("./enc-utf16"),require("./enc-base64"),require("./enc-base64url"),require("./md5"),require("./sha1"),require("./sha256"),require("./sha224"),require("./sha512"),require("./sha384"),require("./sha3"),require("./ripemd160"),require("./hmac"),require("./pbkdf2"),require("./evpkdf"),require("./cipher-core"),require("./mode-cfb"),require("./mode-ctr"),require("./mode-ctr-gladman"),require("./mode-ofb"),require("./mode-ecb"),require("./pad-ansix923"),require("./pad-iso10126"),require("./pad-iso97971"),require("./pad-zeropadding"),require("./pad-nopadding"),require("./format-hex"),require("./aes"),require("./tripledes"),require("./rc4"),require("./rabbit"),require("./rabbit-legacy"),require("./blowfish"))}else if(typeof define==="function"&&define.amd){define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],factory)}else{root.CryptoJS=factory(root.CryptoJS)}})(this,function(CryptoJS){return CryptoJS})},{"./aes":48,"./blowfish":49,"./cipher-core":50,"./core":51,"./enc-base64":52,"./enc-base64url":53,"./enc-utf16":54,"./evpkdf":55,"./format-hex":56,"./hmac":57,"./lib-typedarrays":59,"./md5":60,"./mode-cfb":61,"./mode-ctr":63,"./mode-ctr-gladman":62,"./mode-ecb":64,"./mode-ofb":65,"./pad-ansix923":66,"./pad-iso10126":67,"./pad-iso97971":68,"./pad-nopadding":69,"./pad-zeropadding":70,"./pbkdf2":71,"./rabbit":73,"./rabbit-legacy":72,"./rc4":74,"./ripemd160":75,"./sha1":76,"./sha224":77,"./sha256":78,"./sha3":79,"./sha384":80,"./sha512":81,"./tripledes":82,"./x64-core":83}],59:[function(require,module,exports){(function(root,factory){if(typeof exports==="object"){module.exports=exports=factory(require("./core"))}else if(typeof define==="function"&&define.amd){define(["./core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(){if(typeof ArrayBuffer!="function"){return}var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var superInit=WordArray.init;var subInit=WordArray.init=function(typedArray){if(typedArray instanceof ArrayBuffer){typedArray=new Uint8Array(typedArray)}if(typedArray instanceof Int8Array||typeof Uint8ClampedArray!=="undefined"&&typedArray instanceof Uint8ClampedArray||typedArray instanceof Int16Array||typedArray instanceof Uint16Array||typedArray instanceof Int32Array||typedArray instanceof Uint32Array||typedArray instanceof Float32Array||typedArray instanceof Float64Array){typedArray=new Uint8Array(typedArray.buffer,typedArray.byteOffset,typedArray.byteLength)}if(typedArray instanceof Uint8Array){var typedArrayByteLength=typedArray.byteLength;var words=[];for(var i=0;i<typedArrayByteLength;i++){words[i>>>2]|=typedArray[i]<<24-i%4*8}superInit.call(this,words,typedArrayByteLength)}else{superInit.apply(this,arguments)}};subInit.prototype=WordArray})();return CryptoJS.lib.WordArray})},{"./core":51}],60:[function(require,module,exports){(function(root,factory){if(typeof exports==="object"){module.exports=exports=factory(require("./core"))}else if(typeof define==="function"&&define.amd){define(["./core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(Math){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var Hasher=C_lib.Hasher;var C_algo=C.algo;var T=[];(function(){for(var i=0;i<64;i++){T[i]=Math.abs(Math.sin(i+1))*4294967296|0}})();var MD5=C_algo.MD5=Hasher.extend({_doReset:function(){this._hash=new WordArray.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(M,offset){for(var i=0;i<16;i++){var offset_i=offset+i;var M_offset_i=M[offset_i];M[offset_i]=(M_offset_i<<8|M_offset_i>>>24)&16711935|(M_offset_i<<24|M_offset_i>>>8)&4278255360}var H=this._hash.words;var M_offset_0=M[offset+0];var M_offset_1=M[offset+1];var M_offset_2=M[offset+2];var M_offset_3=M[offset+3];var M_offset_4=M[offset+4];var M_offset_5=M[offset+5];var M_offset_6=M[offset+6];var M_offset_7=M[offset+7];var M_offset_8=M[offset+8];var M_offset_9=M[offset+9];var M_offset_10=M[offset+10];var M_offset_11=M[offset+11];var M_offset_12=M[offset+12];var M_offset_13=M[offset+13];var M_offset_14=M[offset+14];var M_offset_15=M[offset+15];var a=H[0];var b=H[1];var c=H[2];var d=H[3];a=FF(a,b,c,d,M_offset_0,7,T[0]);d=FF(d,a,b,c,M_offset_1,12,T[1]);c=FF(c,d,a,b,M_offset_2,17,T[2]);b=FF(b,c,d,a,M_offset_3,22,T[3]);a=FF(a,b,c,d,M_offset_4,7,T[4]);d=FF(d,a,b,c,M_offset_5,12,T[5]);c=FF(c,d,a,b,M_offset_6,17,T[6]);b=FF(b,c,d,a,M_offset_7,22,T[7]);a=FF(a,b,c,d,M_offset_8,7,T[8]);d=FF(d,a,b,c,M_offset_9,12,T[9]);c=FF(c,d,a,b,M_offset_10,17,T[10]);b=FF(b,c,d,a,M_offset_11,22,T[11]);a=FF(a,b,c,d,M_offset_12,7,T[12]);d=FF(d,a,b,c,M_offset_13,12,T[13]);c=FF(c,d,a,b,M_offset_14,17,T[14]);b=FF(b,c,d,a,M_offset_15,22,T[15]);a=GG(a,b,c,d,M_offset_1,5,T[16]);d=GG(d,a,b,c,M_offset_6,9,T[17]);c=GG(c,d,a,b,M_offset_11,14,T[18]);b=GG(b,c,d,a,M_offset_0,20,T[19]);a=GG(a,b,c,d,M_offset_5,5,T[20]);d=GG(d,a,b,c,M_offset_10,9,T[21]);c=GG(c,d,a,b,M_offset_15,14,T[22]);b=GG(b,c,d,a,M_offset_4,20,T[23]);a=GG(a,b,c,d,M_offset_9,5,T[24]);d=GG(d,a,b,c,M_offset_14,9,T[25]);c=GG(c,d,a,b,M_offset_3,14,T[26]);b=GG(b,c,d,a,M_offset_8,20,T[27]);a=GG(a,b,c,d,M_offset_13,5,T[28]);d=GG(d,a,b,c,M_offset_2,9,T[29]);c=GG(c,d,a,b,M_offset_7,14,T[30]);b=GG(b,c,d,a,M_offset_12,20,T[31]);a=HH(a,b,c,d,M_offset_5,4,T[32]);d=HH(d,a,b,c,M_offset_8,11,T[33]);c=HH(c,d,a,b,M_offset_11,16,T[34]);b=HH(b,c,d,a,M_offset_14,23,T[35]);a=HH(a,b,c,d,M_offset_1,4,T[36]);d=HH(d,a,b,c,M_offset_4,11,T[37]);c=HH(c,d,a,b,M_offset_7,16,T[38]);b=HH(b,c,d,a,M_offset_10,23,T[39]);a=HH(a,b,c,d,M_offset_13,4,T[40]);d=HH(d,a,b,c,M_offset_0,11,T[41]);c=HH(c,d,a,b,M_offset_3,16,T[42]);b=HH(b,c,d,a,M_offset_6,23,T[43]);a=HH(a,b,c,d,M_offset_9,4,T[44]);d=HH(d,a,b,c,M_offset_12,11,T[45]);c=HH(c,d,a,b,M_offset_15,16,T[46]);b=HH(b,c,d,a,M_offset_2,23,T[47]);a=II(a,b,c,d,M_offset_0,6,T[48]);d=II(d,a,b,c,M_offset_7,10,T[49]);c=II(c,d,a,b,M_offset_14,15,T[50]);b=II(b,c,d,a,M_offset_5,21,T[51]);a=II(a,b,c,d,M_offset_12,6,T[52]);d=II(d,a,b,c,M_offset_3,10,T[53]);c=II(c,d,a,b,M_offset_10,15,T[54]);b=II(b,c,d,a,M_offset_1,21,T[55]);a=II(a,b,c,d,M_offset_8,6,T[56]);d=II(d,a,b,c,M_offset_15,10,T[57]);c=II(c,d,a,b,M_offset_6,15,T[58]);b=II(b,c,d,a,M_offset_13,21,T[59]);a=II(a,b,c,d,M_offset_4,6,T[60]);d=II(d,a,b,c,M_offset_11,10,T[61]);c=II(c,d,a,b,M_offset_2,15,T[62]);b=II(b,c,d,a,M_offset_9,21,T[63]);H[0]=H[0]+a|0;H[1]=H[1]+b|0;H[2]=H[2]+c|0;H[3]=H[3]+d|0},_doFinalize:function(){var data=this._data;var dataWords=data.words;var nBitsTotal=this._nDataBytes*8;var nBitsLeft=data.sigBytes*8;dataWords[nBitsLeft>>>5]|=128<<24-nBitsLeft%32;var nBitsTotalH=Math.floor(nBitsTotal/4294967296);var nBitsTotalL=nBitsTotal;dataWords[(nBitsLeft+64>>>9<<4)+15]=(nBitsTotalH<<8|nBitsTotalH>>>24)&16711935|(nBitsTotalH<<24|nBitsTotalH>>>8)&4278255360;dataWords[(nBitsLeft+64>>>9<<4)+14]=(nBitsTotalL<<8|nBitsTotalL>>>24)&16711935|(nBitsTotalL<<24|nBitsTotalL>>>8)&4278255360;data.sigBytes=(dataWords.length+1)*4;this._process();var hash=this._hash;var H=hash.words;for(var i=0;i<4;i++){var H_i=H[i];H[i]=(H_i<<8|H_i>>>24)&16711935|(H_i<<24|H_i>>>8)&4278255360}return hash},clone:function(){var clone=Hasher.clone.call(this);clone._hash=this._hash.clone();return clone}});function FF(a,b,c,d,x,s,t){var n=a+(b&c|~b&d)+x+t;return(n<<s|n>>>32-s)+b}function GG(a,b,c,d,x,s,t){var n=a+(b&d|c&~d)+x+t;return(n<<s|n>>>32-s)+b}function HH(a,b,c,d,x,s,t){var n=a+(b^c^d)+x+t;return(n<<s|n>>>32-s)+b}function II(a,b,c,d,x,s,t){var n=a+(c^(b|~d))+x+t;return(n<<s|n>>>32-s)+b}C.MD5=Hasher._createHelper(MD5);C.HmacMD5=Hasher._createHmacHelper(MD5)})(Math);return CryptoJS.MD5})},{"./core":51}],61:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){CryptoJS.mode.CFB=function(){var CFB=CryptoJS.lib.BlockCipherMode.extend();CFB.Encryptor=CFB.extend({processBlock:function(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;generateKeystreamAndEncrypt.call(this,words,offset,blockSize,cipher);this._prevBlock=words.slice(offset,offset+blockSize)}});CFB.Decryptor=CFB.extend({processBlock:function(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;var thisBlock=words.slice(offset,offset+blockSize);generateKeystreamAndEncrypt.call(this,words,offset,blockSize,cipher);this._prevBlock=thisBlock}});function generateKeystreamAndEncrypt(words,offset,blockSize,cipher){var keystream;var iv=this._iv;if(iv){keystream=iv.slice(0);this._iv=undefined}else{keystream=this._prevBlock}cipher.encryptBlock(keystream,0);for(var i=0;i<blockSize;i++){words[offset+i]^=keystream[i]}}return CFB}();return CryptoJS.mode.CFB})},{"./cipher-core":50,"./core":51}],62:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){
/** @preserve
	 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
	 * derived from CryptoJS.mode.CTR
	 * Jan Hruby jhruby.web@gmail.com
	 */
CryptoJS.mode.CTRGladman=function(){var CTRGladman=CryptoJS.lib.BlockCipherMode.extend();function incWord(word){if((word>>24&255)===255){var b1=word>>16&255;var b2=word>>8&255;var b3=word&255;if(b1===255){b1=0;if(b2===255){b2=0;if(b3===255){b3=0}else{++b3}}else{++b2}}else{++b1}word=0;word+=b1<<16;word+=b2<<8;word+=b3}else{word+=1<<24}return word}function incCounter(counter){if((counter[0]=incWord(counter[0]))===0){counter[1]=incWord(counter[1])}return counter}var Encryptor=CTRGladman.Encryptor=CTRGladman.extend({processBlock:function(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;var iv=this._iv;var counter=this._counter;if(iv){counter=this._counter=iv.slice(0);this._iv=undefined}incCounter(counter);var keystream=counter.slice(0);cipher.encryptBlock(keystream,0);for(var i=0;i<blockSize;i++){words[offset+i]^=keystream[i]}}});CTRGladman.Decryptor=Encryptor;return CTRGladman}();return CryptoJS.mode.CTRGladman})},{"./cipher-core":50,"./core":51}],63:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){CryptoJS.mode.CTR=function(){var CTR=CryptoJS.lib.BlockCipherMode.extend();var Encryptor=CTR.Encryptor=CTR.extend({processBlock:function(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;var iv=this._iv;var counter=this._counter;if(iv){counter=this._counter=iv.slice(0);this._iv=undefined}var keystream=counter.slice(0);cipher.encryptBlock(keystream,0);counter[blockSize-1]=counter[blockSize-1]+1|0;for(var i=0;i<blockSize;i++){words[offset+i]^=keystream[i]}}});CTR.Decryptor=Encryptor;return CTR}();return CryptoJS.mode.CTR})},{"./cipher-core":50,"./core":51}],64:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){CryptoJS.mode.ECB=function(){var ECB=CryptoJS.lib.BlockCipherMode.extend();ECB.Encryptor=ECB.extend({processBlock:function(words,offset){this._cipher.encryptBlock(words,offset)}});ECB.Decryptor=ECB.extend({processBlock:function(words,offset){this._cipher.decryptBlock(words,offset)}});return ECB}();return CryptoJS.mode.ECB})},{"./cipher-core":50,"./core":51}],65:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){CryptoJS.mode.OFB=function(){var OFB=CryptoJS.lib.BlockCipherMode.extend();var Encryptor=OFB.Encryptor=OFB.extend({processBlock:function(words,offset){var cipher=this._cipher;var blockSize=cipher.blockSize;var iv=this._iv;var keystream=this._keystream;if(iv){keystream=this._keystream=iv.slice(0);this._iv=undefined}cipher.encryptBlock(keystream,0);for(var i=0;i<blockSize;i++){words[offset+i]^=keystream[i]}}});OFB.Decryptor=Encryptor;return OFB}();return CryptoJS.mode.OFB})},{"./cipher-core":50,"./core":51}],66:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){CryptoJS.pad.AnsiX923={pad:function(data,blockSize){var dataSigBytes=data.sigBytes;var blockSizeBytes=blockSize*4;var nPaddingBytes=blockSizeBytes-dataSigBytes%blockSizeBytes;var lastBytePos=dataSigBytes+nPaddingBytes-1;data.clamp();data.words[lastBytePos>>>2]|=nPaddingBytes<<24-lastBytePos%4*8;data.sigBytes+=nPaddingBytes},unpad:function(data){var nPaddingBytes=data.words[data.sigBytes-1>>>2]&255;data.sigBytes-=nPaddingBytes}};return CryptoJS.pad.Ansix923})},{"./cipher-core":50,"./core":51}],67:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){CryptoJS.pad.Iso10126={pad:function(data,blockSize){var blockSizeBytes=blockSize*4;var nPaddingBytes=blockSizeBytes-data.sigBytes%blockSizeBytes;data.concat(CryptoJS.lib.WordArray.random(nPaddingBytes-1)).concat(CryptoJS.lib.WordArray.create([nPaddingBytes<<24],1))},unpad:function(data){var nPaddingBytes=data.words[data.sigBytes-1>>>2]&255;data.sigBytes-=nPaddingBytes}};return CryptoJS.pad.Iso10126})},{"./cipher-core":50,"./core":51}],68:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){CryptoJS.pad.Iso97971={pad:function(data,blockSize){data.concat(CryptoJS.lib.WordArray.create([2147483648],1));CryptoJS.pad.ZeroPadding.pad(data,blockSize)},unpad:function(data){CryptoJS.pad.ZeroPadding.unpad(data);data.sigBytes--}};return CryptoJS.pad.Iso97971})},{"./cipher-core":50,"./core":51}],69:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){CryptoJS.pad.NoPadding={pad:function(){},unpad:function(){}};return CryptoJS.pad.NoPadding})},{"./cipher-core":50,"./core":51}],70:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./cipher-core"))}else if(typeof define==="function"&&define.amd){define(["./core","./cipher-core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){CryptoJS.pad.ZeroPadding={pad:function(data,blockSize){var blockSizeBytes=blockSize*4;data.clamp();data.sigBytes+=blockSizeBytes-(data.sigBytes%blockSizeBytes||blockSizeBytes)},unpad:function(data){var dataWords=data.words;var i=data.sigBytes-1;for(var i=data.sigBytes-1;i>=0;i--){if(dataWords[i>>>2]>>>24-i%4*8&255){data.sigBytes=i+1;break}}}};return CryptoJS.pad.ZeroPadding})},{"./cipher-core":50,"./core":51}],71:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./sha256"),require("./hmac"))}else if(typeof define==="function"&&define.amd){define(["./core","./sha256","./hmac"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var Base=C_lib.Base;var WordArray=C_lib.WordArray;var C_algo=C.algo;var SHA256=C_algo.SHA256;var HMAC=C_algo.HMAC;var PBKDF2=C_algo.PBKDF2=Base.extend({cfg:Base.extend({keySize:128/32,hasher:SHA256,iterations:25e4}),init:function(cfg){this.cfg=this.cfg.extend(cfg)},compute:function(password,salt){var cfg=this.cfg;var hmac=HMAC.create(cfg.hasher,password);var derivedKey=WordArray.create();var blockIndex=WordArray.create([1]);var derivedKeyWords=derivedKey.words;var blockIndexWords=blockIndex.words;var keySize=cfg.keySize;var iterations=cfg.iterations;while(derivedKeyWords.length<keySize){var block=hmac.update(salt).finalize(blockIndex);hmac.reset();var blockWords=block.words;var blockWordsLength=blockWords.length;var intermediate=block;for(var i=1;i<iterations;i++){intermediate=hmac.finalize(intermediate);hmac.reset();var intermediateWords=intermediate.words;for(var j=0;j<blockWordsLength;j++){blockWords[j]^=intermediateWords[j]}}derivedKey.concat(block);blockIndexWords[0]++}derivedKey.sigBytes=keySize*4;return derivedKey}});C.PBKDF2=function(password,salt,cfg){return PBKDF2.create(cfg).compute(password,salt)}})();return CryptoJS.PBKDF2})},{"./core":51,"./hmac":57,"./sha256":78}],72:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./enc-base64"),require("./md5"),require("./evpkdf"),require("./cipher-core"))}else if(typeof define==="function"&&define.amd){define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var StreamCipher=C_lib.StreamCipher;var C_algo=C.algo;var S=[];var C_=[];var G=[];var RabbitLegacy=C_algo.RabbitLegacy=StreamCipher.extend({_doReset:function(){var K=this._key.words;var iv=this.cfg.iv;var X=this._X=[K[0],K[3]<<16|K[2]>>>16,K[1],K[0]<<16|K[3]>>>16,K[2],K[1]<<16|K[0]>>>16,K[3],K[2]<<16|K[1]>>>16];var C=this._C=[K[2]<<16|K[2]>>>16,K[0]&4294901760|K[1]&65535,K[3]<<16|K[3]>>>16,K[1]&4294901760|K[2]&65535,K[0]<<16|K[0]>>>16,K[2]&4294901760|K[3]&65535,K[1]<<16|K[1]>>>16,K[3]&4294901760|K[0]&65535];this._b=0;for(var i=0;i<4;i++){nextState.call(this)}for(var i=0;i<8;i++){C[i]^=X[i+4&7]}if(iv){var IV=iv.words;var IV_0=IV[0];var IV_1=IV[1];var i0=(IV_0<<8|IV_0>>>24)&16711935|(IV_0<<24|IV_0>>>8)&4278255360;var i2=(IV_1<<8|IV_1>>>24)&16711935|(IV_1<<24|IV_1>>>8)&4278255360;var i1=i0>>>16|i2&4294901760;var i3=i2<<16|i0&65535;C[0]^=i0;C[1]^=i1;C[2]^=i2;C[3]^=i3;C[4]^=i0;C[5]^=i1;C[6]^=i2;C[7]^=i3;for(var i=0;i<4;i++){nextState.call(this)}}},_doProcessBlock:function(M,offset){var X=this._X;nextState.call(this);S[0]=X[0]^X[5]>>>16^X[3]<<16;S[1]=X[2]^X[7]>>>16^X[5]<<16;S[2]=X[4]^X[1]>>>16^X[7]<<16;S[3]=X[6]^X[3]>>>16^X[1]<<16;for(var i=0;i<4;i++){S[i]=(S[i]<<8|S[i]>>>24)&16711935|(S[i]<<24|S[i]>>>8)&4278255360;M[offset+i]^=S[i]}},blockSize:128/32,ivSize:64/32});function nextState(){var X=this._X;var C=this._C;for(var i=0;i<8;i++){C_[i]=C[i]}C[0]=C[0]+1295307597+this._b|0;C[1]=C[1]+3545052371+(C[0]>>>0<C_[0]>>>0?1:0)|0;C[2]=C[2]+886263092+(C[1]>>>0<C_[1]>>>0?1:0)|0;C[3]=C[3]+1295307597+(C[2]>>>0<C_[2]>>>0?1:0)|0;C[4]=C[4]+3545052371+(C[3]>>>0<C_[3]>>>0?1:0)|0;C[5]=C[5]+886263092+(C[4]>>>0<C_[4]>>>0?1:0)|0;C[6]=C[6]+1295307597+(C[5]>>>0<C_[5]>>>0?1:0)|0;C[7]=C[7]+3545052371+(C[6]>>>0<C_[6]>>>0?1:0)|0;this._b=C[7]>>>0<C_[7]>>>0?1:0;for(var i=0;i<8;i++){var gx=X[i]+C[i];var ga=gx&65535;var gb=gx>>>16;var gh=((ga*ga>>>17)+ga*gb>>>15)+gb*gb;var gl=((gx&4294901760)*gx|0)+((gx&65535)*gx|0);G[i]=gh^gl}X[0]=G[0]+(G[7]<<16|G[7]>>>16)+(G[6]<<16|G[6]>>>16)|0;X[1]=G[1]+(G[0]<<8|G[0]>>>24)+G[7]|0;X[2]=G[2]+(G[1]<<16|G[1]>>>16)+(G[0]<<16|G[0]>>>16)|0;X[3]=G[3]+(G[2]<<8|G[2]>>>24)+G[1]|0;X[4]=G[4]+(G[3]<<16|G[3]>>>16)+(G[2]<<16|G[2]>>>16)|0;X[5]=G[5]+(G[4]<<8|G[4]>>>24)+G[3]|0;X[6]=G[6]+(G[5]<<16|G[5]>>>16)+(G[4]<<16|G[4]>>>16)|0;X[7]=G[7]+(G[6]<<8|G[6]>>>24)+G[5]|0}C.RabbitLegacy=StreamCipher._createHelper(RabbitLegacy)})();return CryptoJS.RabbitLegacy})},{"./cipher-core":50,"./core":51,"./enc-base64":52,"./evpkdf":55,"./md5":60}],73:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./enc-base64"),require("./md5"),require("./evpkdf"),require("./cipher-core"))}else if(typeof define==="function"&&define.amd){define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var StreamCipher=C_lib.StreamCipher;var C_algo=C.algo;var S=[];var C_=[];var G=[];var Rabbit=C_algo.Rabbit=StreamCipher.extend({_doReset:function(){var K=this._key.words;var iv=this.cfg.iv;for(var i=0;i<4;i++){K[i]=(K[i]<<8|K[i]>>>24)&16711935|(K[i]<<24|K[i]>>>8)&4278255360}var X=this._X=[K[0],K[3]<<16|K[2]>>>16,K[1],K[0]<<16|K[3]>>>16,K[2],K[1]<<16|K[0]>>>16,K[3],K[2]<<16|K[1]>>>16];var C=this._C=[K[2]<<16|K[2]>>>16,K[0]&4294901760|K[1]&65535,K[3]<<16|K[3]>>>16,K[1]&4294901760|K[2]&65535,K[0]<<16|K[0]>>>16,K[2]&4294901760|K[3]&65535,K[1]<<16|K[1]>>>16,K[3]&4294901760|K[0]&65535];this._b=0;for(var i=0;i<4;i++){nextState.call(this)}for(var i=0;i<8;i++){C[i]^=X[i+4&7]}if(iv){var IV=iv.words;var IV_0=IV[0];var IV_1=IV[1];var i0=(IV_0<<8|IV_0>>>24)&16711935|(IV_0<<24|IV_0>>>8)&4278255360;var i2=(IV_1<<8|IV_1>>>24)&16711935|(IV_1<<24|IV_1>>>8)&4278255360;var i1=i0>>>16|i2&4294901760;var i3=i2<<16|i0&65535;C[0]^=i0;C[1]^=i1;C[2]^=i2;C[3]^=i3;C[4]^=i0;C[5]^=i1;C[6]^=i2;C[7]^=i3;for(var i=0;i<4;i++){nextState.call(this)}}},_doProcessBlock:function(M,offset){var X=this._X;nextState.call(this);S[0]=X[0]^X[5]>>>16^X[3]<<16;S[1]=X[2]^X[7]>>>16^X[5]<<16;S[2]=X[4]^X[1]>>>16^X[7]<<16;S[3]=X[6]^X[3]>>>16^X[1]<<16;for(var i=0;i<4;i++){S[i]=(S[i]<<8|S[i]>>>24)&16711935|(S[i]<<24|S[i]>>>8)&4278255360;M[offset+i]^=S[i]}},blockSize:128/32,ivSize:64/32});function nextState(){var X=this._X;var C=this._C;for(var i=0;i<8;i++){C_[i]=C[i]}C[0]=C[0]+1295307597+this._b|0;C[1]=C[1]+3545052371+(C[0]>>>0<C_[0]>>>0?1:0)|0;C[2]=C[2]+886263092+(C[1]>>>0<C_[1]>>>0?1:0)|0;C[3]=C[3]+1295307597+(C[2]>>>0<C_[2]>>>0?1:0)|0;C[4]=C[4]+3545052371+(C[3]>>>0<C_[3]>>>0?1:0)|0;C[5]=C[5]+886263092+(C[4]>>>0<C_[4]>>>0?1:0)|0;C[6]=C[6]+1295307597+(C[5]>>>0<C_[5]>>>0?1:0)|0;C[7]=C[7]+3545052371+(C[6]>>>0<C_[6]>>>0?1:0)|0;this._b=C[7]>>>0<C_[7]>>>0?1:0;for(var i=0;i<8;i++){var gx=X[i]+C[i];var ga=gx&65535;var gb=gx>>>16;var gh=((ga*ga>>>17)+ga*gb>>>15)+gb*gb;var gl=((gx&4294901760)*gx|0)+((gx&65535)*gx|0);G[i]=gh^gl}X[0]=G[0]+(G[7]<<16|G[7]>>>16)+(G[6]<<16|G[6]>>>16)|0;X[1]=G[1]+(G[0]<<8|G[0]>>>24)+G[7]|0;X[2]=G[2]+(G[1]<<16|G[1]>>>16)+(G[0]<<16|G[0]>>>16)|0;X[3]=G[3]+(G[2]<<8|G[2]>>>24)+G[1]|0;X[4]=G[4]+(G[3]<<16|G[3]>>>16)+(G[2]<<16|G[2]>>>16)|0;X[5]=G[5]+(G[4]<<8|G[4]>>>24)+G[3]|0;X[6]=G[6]+(G[5]<<16|G[5]>>>16)+(G[4]<<16|G[4]>>>16)|0;X[7]=G[7]+(G[6]<<8|G[6]>>>24)+G[5]|0}C.Rabbit=StreamCipher._createHelper(Rabbit)})();return CryptoJS.Rabbit})},{"./cipher-core":50,"./core":51,"./enc-base64":52,"./evpkdf":55,"./md5":60}],74:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./enc-base64"),require("./md5"),require("./evpkdf"),require("./cipher-core"))}else if(typeof define==="function"&&define.amd){define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var StreamCipher=C_lib.StreamCipher;var C_algo=C.algo;var RC4=C_algo.RC4=StreamCipher.extend({_doReset:function(){var key=this._key;var keyWords=key.words;var keySigBytes=key.sigBytes;var S=this._S=[];for(var i=0;i<256;i++){S[i]=i}for(var i=0,j=0;i<256;i++){var keyByteIndex=i%keySigBytes;var keyByte=keyWords[keyByteIndex>>>2]>>>24-keyByteIndex%4*8&255;j=(j+S[i]+keyByte)%256;var t=S[i];S[i]=S[j];S[j]=t}this._i=this._j=0},_doProcessBlock:function(M,offset){M[offset]^=generateKeystreamWord.call(this)},keySize:256/32,ivSize:0});function generateKeystreamWord(){var S=this._S;var i=this._i;var j=this._j;var keystreamWord=0;for(var n=0;n<4;n++){i=(i+1)%256;j=(j+S[i])%256;var t=S[i];S[i]=S[j];S[j]=t;keystreamWord|=S[(S[i]+S[j])%256]<<24-n*8}this._i=i;this._j=j;return keystreamWord}C.RC4=StreamCipher._createHelper(RC4);var RC4Drop=C_algo.RC4Drop=RC4.extend({cfg:RC4.cfg.extend({drop:192}),_doReset:function(){RC4._doReset.call(this);for(var i=this.cfg.drop;i>0;i--){generateKeystreamWord.call(this)}}});C.RC4Drop=StreamCipher._createHelper(RC4Drop)})();return CryptoJS.RC4})},{"./cipher-core":50,"./core":51,"./enc-base64":52,"./evpkdf":55,"./md5":60}],75:[function(require,module,exports){(function(root,factory){if(typeof exports==="object"){module.exports=exports=factory(require("./core"))}else if(typeof define==="function"&&define.amd){define(["./core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){
/** @preserve
	(c) 2012 by Cdric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
(function(Math){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var Hasher=C_lib.Hasher;var C_algo=C.algo;var _zl=WordArray.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]);var _zr=WordArray.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]);var _sl=WordArray.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]);var _sr=WordArray.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]);var _hl=WordArray.create([0,1518500249,1859775393,2400959708,2840853838]);var _hr=WordArray.create([1352829926,1548603684,1836072691,2053994217,0]);var RIPEMD160=C_algo.RIPEMD160=Hasher.extend({_doReset:function(){this._hash=WordArray.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(M,offset){for(var i=0;i<16;i++){var offset_i=offset+i;var M_offset_i=M[offset_i];M[offset_i]=(M_offset_i<<8|M_offset_i>>>24)&16711935|(M_offset_i<<24|M_offset_i>>>8)&4278255360}var H=this._hash.words;var hl=_hl.words;var hr=_hr.words;var zl=_zl.words;var zr=_zr.words;var sl=_sl.words;var sr=_sr.words;var al,bl,cl,dl,el;var ar,br,cr,dr,er;ar=al=H[0];br=bl=H[1];cr=cl=H[2];dr=dl=H[3];er=el=H[4];var t;for(var i=0;i<80;i+=1){t=al+M[offset+zl[i]]|0;if(i<16){t+=f1(bl,cl,dl)+hl[0]}else if(i<32){t+=f2(bl,cl,dl)+hl[1]}else if(i<48){t+=f3(bl,cl,dl)+hl[2]}else if(i<64){t+=f4(bl,cl,dl)+hl[3]}else{t+=f5(bl,cl,dl)+hl[4]}t=t|0;t=rotl(t,sl[i]);t=t+el|0;al=el;el=dl;dl=rotl(cl,10);cl=bl;bl=t;t=ar+M[offset+zr[i]]|0;if(i<16){t+=f5(br,cr,dr)+hr[0]}else if(i<32){t+=f4(br,cr,dr)+hr[1]}else if(i<48){t+=f3(br,cr,dr)+hr[2]}else if(i<64){t+=f2(br,cr,dr)+hr[3]}else{t+=f1(br,cr,dr)+hr[4]}t=t|0;t=rotl(t,sr[i]);t=t+er|0;ar=er;er=dr;dr=rotl(cr,10);cr=br;br=t}t=H[1]+cl+dr|0;H[1]=H[2]+dl+er|0;H[2]=H[3]+el+ar|0;H[3]=H[4]+al+br|0;H[4]=H[0]+bl+cr|0;H[0]=t},_doFinalize:function(){var data=this._data;var dataWords=data.words;var nBitsTotal=this._nDataBytes*8;var nBitsLeft=data.sigBytes*8;dataWords[nBitsLeft>>>5]|=128<<24-nBitsLeft%32;dataWords[(nBitsLeft+64>>>9<<4)+14]=(nBitsTotal<<8|nBitsTotal>>>24)&16711935|(nBitsTotal<<24|nBitsTotal>>>8)&4278255360;data.sigBytes=(dataWords.length+1)*4;this._process();var hash=this._hash;var H=hash.words;for(var i=0;i<5;i++){var H_i=H[i];H[i]=(H_i<<8|H_i>>>24)&16711935|(H_i<<24|H_i>>>8)&4278255360}return hash},clone:function(){var clone=Hasher.clone.call(this);clone._hash=this._hash.clone();return clone}});function f1(x,y,z){return x^y^z}function f2(x,y,z){return x&y|~x&z}function f3(x,y,z){return(x|~y)^z}function f4(x,y,z){return x&z|y&~z}function f5(x,y,z){return x^(y|~z)}function rotl(x,n){return x<<n|x>>>32-n}C.RIPEMD160=Hasher._createHelper(RIPEMD160);C.HmacRIPEMD160=Hasher._createHmacHelper(RIPEMD160)})(Math);return CryptoJS.RIPEMD160})},{"./core":51}],76:[function(require,module,exports){(function(root,factory){if(typeof exports==="object"){module.exports=exports=factory(require("./core"))}else if(typeof define==="function"&&define.amd){define(["./core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var Hasher=C_lib.Hasher;var C_algo=C.algo;var W=[];var SHA1=C_algo.SHA1=Hasher.extend({_doReset:function(){this._hash=new WordArray.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(M,offset){var H=this._hash.words;var a=H[0];var b=H[1];var c=H[2];var d=H[3];var e=H[4];for(var i=0;i<80;i++){if(i<16){W[i]=M[offset+i]|0}else{var n=W[i-3]^W[i-8]^W[i-14]^W[i-16];W[i]=n<<1|n>>>31}var t=(a<<5|a>>>27)+e+W[i];if(i<20){t+=(b&c|~b&d)+1518500249}else if(i<40){t+=(b^c^d)+1859775393}else if(i<60){t+=(b&c|b&d|c&d)-1894007588}else{t+=(b^c^d)-899497514}e=d;d=c;c=b<<30|b>>>2;b=a;a=t}H[0]=H[0]+a|0;H[1]=H[1]+b|0;H[2]=H[2]+c|0;H[3]=H[3]+d|0;H[4]=H[4]+e|0},_doFinalize:function(){var data=this._data;var dataWords=data.words;var nBitsTotal=this._nDataBytes*8;var nBitsLeft=data.sigBytes*8;dataWords[nBitsLeft>>>5]|=128<<24-nBitsLeft%32;dataWords[(nBitsLeft+64>>>9<<4)+14]=Math.floor(nBitsTotal/4294967296);dataWords[(nBitsLeft+64>>>9<<4)+15]=nBitsTotal;data.sigBytes=dataWords.length*4;this._process();return this._hash},clone:function(){var clone=Hasher.clone.call(this);clone._hash=this._hash.clone();return clone}});C.SHA1=Hasher._createHelper(SHA1);C.HmacSHA1=Hasher._createHmacHelper(SHA1)})();return CryptoJS.SHA1})},{"./core":51}],77:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./sha256"))}else if(typeof define==="function"&&define.amd){define(["./core","./sha256"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var C_algo=C.algo;var SHA256=C_algo.SHA256;var SHA224=C_algo.SHA224=SHA256.extend({_doReset:function(){this._hash=new WordArray.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var hash=SHA256._doFinalize.call(this);hash.sigBytes-=4;return hash}});C.SHA224=SHA256._createHelper(SHA224);C.HmacSHA224=SHA256._createHmacHelper(SHA224)})();return CryptoJS.SHA224})},{"./core":51,"./sha256":78}],78:[function(require,module,exports){(function(root,factory){if(typeof exports==="object"){module.exports=exports=factory(require("./core"))}else if(typeof define==="function"&&define.amd){define(["./core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(Math){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var Hasher=C_lib.Hasher;var C_algo=C.algo;var H=[];var K=[];(function(){function isPrime(n){var sqrtN=Math.sqrt(n);for(var factor=2;factor<=sqrtN;factor++){if(!(n%factor)){return false}}return true}function getFractionalBits(n){return(n-(n|0))*4294967296|0}var n=2;var nPrime=0;while(nPrime<64){if(isPrime(n)){if(nPrime<8){H[nPrime]=getFractionalBits(Math.pow(n,1/2))}K[nPrime]=getFractionalBits(Math.pow(n,1/3));nPrime++}n++}})();var W=[];var SHA256=C_algo.SHA256=Hasher.extend({_doReset:function(){this._hash=new WordArray.init(H.slice(0))},_doProcessBlock:function(M,offset){var H=this._hash.words;var a=H[0];var b=H[1];var c=H[2];var d=H[3];var e=H[4];var f=H[5];var g=H[6];var h=H[7];for(var i=0;i<64;i++){if(i<16){W[i]=M[offset+i]|0}else{var gamma0x=W[i-15];var gamma0=(gamma0x<<25|gamma0x>>>7)^(gamma0x<<14|gamma0x>>>18)^gamma0x>>>3;var gamma1x=W[i-2];var gamma1=(gamma1x<<15|gamma1x>>>17)^(gamma1x<<13|gamma1x>>>19)^gamma1x>>>10;W[i]=gamma0+W[i-7]+gamma1+W[i-16]}var ch=e&f^~e&g;var maj=a&b^a&c^b&c;var sigma0=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22);var sigma1=(e<<26|e>>>6)^(e<<21|e>>>11)^(e<<7|e>>>25);var t1=h+sigma1+ch+K[i]+W[i];var t2=sigma0+maj;h=g;g=f;f=e;e=d+t1|0;d=c;c=b;b=a;a=t1+t2|0}H[0]=H[0]+a|0;H[1]=H[1]+b|0;H[2]=H[2]+c|0;H[3]=H[3]+d|0;H[4]=H[4]+e|0;H[5]=H[5]+f|0;H[6]=H[6]+g|0;H[7]=H[7]+h|0},_doFinalize:function(){var data=this._data;var dataWords=data.words;var nBitsTotal=this._nDataBytes*8;var nBitsLeft=data.sigBytes*8;dataWords[nBitsLeft>>>5]|=128<<24-nBitsLeft%32;dataWords[(nBitsLeft+64>>>9<<4)+14]=Math.floor(nBitsTotal/4294967296);dataWords[(nBitsLeft+64>>>9<<4)+15]=nBitsTotal;data.sigBytes=dataWords.length*4;this._process();return this._hash},clone:function(){var clone=Hasher.clone.call(this);clone._hash=this._hash.clone();return clone}});C.SHA256=Hasher._createHelper(SHA256);C.HmacSHA256=Hasher._createHmacHelper(SHA256)})(Math);return CryptoJS.SHA256})},{"./core":51}],79:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./x64-core"))}else if(typeof define==="function"&&define.amd){define(["./core","./x64-core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(Math){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var Hasher=C_lib.Hasher;var C_x64=C.x64;var X64Word=C_x64.Word;var C_algo=C.algo;var RHO_OFFSETS=[];var PI_INDEXES=[];var ROUND_CONSTANTS=[];(function(){var x=1,y=0;for(var t=0;t<24;t++){RHO_OFFSETS[x+5*y]=(t+1)*(t+2)/2%64;var newX=y%5;var newY=(2*x+3*y)%5;x=newX;y=newY}for(var x=0;x<5;x++){for(var y=0;y<5;y++){PI_INDEXES[x+5*y]=y+(2*x+3*y)%5*5}}var LFSR=1;for(var i=0;i<24;i++){var roundConstantMsw=0;var roundConstantLsw=0;for(var j=0;j<7;j++){if(LFSR&1){var bitPosition=(1<<j)-1;if(bitPosition<32){roundConstantLsw^=1<<bitPosition}else{roundConstantMsw^=1<<bitPosition-32}}if(LFSR&128){LFSR=LFSR<<1^113}else{LFSR<<=1}}ROUND_CONSTANTS[i]=X64Word.create(roundConstantMsw,roundConstantLsw)}})();var T=[];(function(){for(var i=0;i<25;i++){T[i]=X64Word.create()}})();var SHA3=C_algo.SHA3=Hasher.extend({cfg:Hasher.cfg.extend({outputLength:512}),_doReset:function(){var state=this._state=[];for(var i=0;i<25;i++){state[i]=new X64Word.init}this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(M,offset){var state=this._state;var nBlockSizeLanes=this.blockSize/2;for(var i=0;i<nBlockSizeLanes;i++){var M2i=M[offset+2*i];var M2i1=M[offset+2*i+1];M2i=(M2i<<8|M2i>>>24)&16711935|(M2i<<24|M2i>>>8)&4278255360;M2i1=(M2i1<<8|M2i1>>>24)&16711935|(M2i1<<24|M2i1>>>8)&4278255360;var lane=state[i];lane.high^=M2i1;lane.low^=M2i}for(var round=0;round<24;round++){for(var x=0;x<5;x++){var tMsw=0,tLsw=0;for(var y=0;y<5;y++){var lane=state[x+5*y];tMsw^=lane.high;tLsw^=lane.low}var Tx=T[x];Tx.high=tMsw;Tx.low=tLsw}for(var x=0;x<5;x++){var Tx4=T[(x+4)%5];var Tx1=T[(x+1)%5];var Tx1Msw=Tx1.high;var Tx1Lsw=Tx1.low;var tMsw=Tx4.high^(Tx1Msw<<1|Tx1Lsw>>>31);var tLsw=Tx4.low^(Tx1Lsw<<1|Tx1Msw>>>31);for(var y=0;y<5;y++){var lane=state[x+5*y];lane.high^=tMsw;lane.low^=tLsw}}for(var laneIndex=1;laneIndex<25;laneIndex++){var tMsw;var tLsw;var lane=state[laneIndex];var laneMsw=lane.high;var laneLsw=lane.low;var rhoOffset=RHO_OFFSETS[laneIndex];if(rhoOffset<32){tMsw=laneMsw<<rhoOffset|laneLsw>>>32-rhoOffset;tLsw=laneLsw<<rhoOffset|laneMsw>>>32-rhoOffset}else{tMsw=laneLsw<<rhoOffset-32|laneMsw>>>64-rhoOffset;tLsw=laneMsw<<rhoOffset-32|laneLsw>>>64-rhoOffset}var TPiLane=T[PI_INDEXES[laneIndex]];TPiLane.high=tMsw;TPiLane.low=tLsw}var T0=T[0];var state0=state[0];T0.high=state0.high;T0.low=state0.low;for(var x=0;x<5;x++){for(var y=0;y<5;y++){var laneIndex=x+5*y;var lane=state[laneIndex];var TLane=T[laneIndex];var Tx1Lane=T[(x+1)%5+5*y];var Tx2Lane=T[(x+2)%5+5*y];lane.high=TLane.high^~Tx1Lane.high&Tx2Lane.high;lane.low=TLane.low^~Tx1Lane.low&Tx2Lane.low}}var lane=state[0];var roundConstant=ROUND_CONSTANTS[round];lane.high^=roundConstant.high;lane.low^=roundConstant.low}},_doFinalize:function(){var data=this._data;var dataWords=data.words;var nBitsTotal=this._nDataBytes*8;var nBitsLeft=data.sigBytes*8;var blockSizeBits=this.blockSize*32;dataWords[nBitsLeft>>>5]|=1<<24-nBitsLeft%32;dataWords[(Math.ceil((nBitsLeft+1)/blockSizeBits)*blockSizeBits>>>5)-1]|=128;data.sigBytes=dataWords.length*4;this._process();var state=this._state;var outputLengthBytes=this.cfg.outputLength/8;var outputLengthLanes=outputLengthBytes/8;var hashWords=[];for(var i=0;i<outputLengthLanes;i++){var lane=state[i];var laneMsw=lane.high;var laneLsw=lane.low;laneMsw=(laneMsw<<8|laneMsw>>>24)&16711935|(laneMsw<<24|laneMsw>>>8)&4278255360;laneLsw=(laneLsw<<8|laneLsw>>>24)&16711935|(laneLsw<<24|laneLsw>>>8)&4278255360;hashWords.push(laneLsw);hashWords.push(laneMsw)}return new WordArray.init(hashWords,outputLengthBytes)},clone:function(){var clone=Hasher.clone.call(this);var state=clone._state=this._state.slice(0);for(var i=0;i<25;i++){state[i]=state[i].clone()}return clone}});C.SHA3=Hasher._createHelper(SHA3);C.HmacSHA3=Hasher._createHmacHelper(SHA3)})(Math);return CryptoJS.SHA3})},{"./core":51,"./x64-core":83}],80:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./x64-core"),require("./sha512"))}else if(typeof define==="function"&&define.amd){define(["./core","./x64-core","./sha512"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_x64=C.x64;var X64Word=C_x64.Word;var X64WordArray=C_x64.WordArray;var C_algo=C.algo;var SHA512=C_algo.SHA512;var SHA384=C_algo.SHA384=SHA512.extend({_doReset:function(){this._hash=new X64WordArray.init([new X64Word.init(3418070365,3238371032),new X64Word.init(1654270250,914150663),new X64Word.init(2438529370,812702999),new X64Word.init(355462360,4144912697),new X64Word.init(1731405415,4290775857),new X64Word.init(2394180231,1750603025),new X64Word.init(3675008525,1694076839),new X64Word.init(1203062813,3204075428)])},_doFinalize:function(){var hash=SHA512._doFinalize.call(this);hash.sigBytes-=16;return hash}});C.SHA384=SHA512._createHelper(SHA384);C.HmacSHA384=SHA512._createHmacHelper(SHA384)})();return CryptoJS.SHA384})},{"./core":51,"./sha512":81,"./x64-core":83}],81:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./x64-core"))}else if(typeof define==="function"&&define.amd){define(["./core","./x64-core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var Hasher=C_lib.Hasher;var C_x64=C.x64;var X64Word=C_x64.Word;var X64WordArray=C_x64.WordArray;var C_algo=C.algo;function X64Word_create(){return X64Word.create.apply(X64Word,arguments)}var K=[X64Word_create(1116352408,3609767458),X64Word_create(1899447441,602891725),X64Word_create(3049323471,3964484399),X64Word_create(3921009573,2173295548),X64Word_create(961987163,4081628472),X64Word_create(1508970993,3053834265),X64Word_create(2453635748,2937671579),X64Word_create(2870763221,3664609560),X64Word_create(3624381080,2734883394),X64Word_create(310598401,1164996542),X64Word_create(607225278,1323610764),X64Word_create(1426881987,3590304994),X64Word_create(1925078388,4068182383),X64Word_create(2162078206,991336113),X64Word_create(2614888103,633803317),X64Word_create(3248222580,3479774868),X64Word_create(3835390401,2666613458),X64Word_create(4022224774,944711139),X64Word_create(264347078,2341262773),X64Word_create(604807628,2007800933),X64Word_create(770255983,1495990901),X64Word_create(1249150122,1856431235),X64Word_create(1555081692,3175218132),X64Word_create(1996064986,2198950837),X64Word_create(2554220882,3999719339),X64Word_create(2821834349,766784016),X64Word_create(2952996808,2566594879),X64Word_create(3210313671,3203337956),X64Word_create(3336571891,1034457026),X64Word_create(3584528711,2466948901),X64Word_create(113926993,3758326383),X64Word_create(338241895,168717936),X64Word_create(666307205,1188179964),X64Word_create(773529912,1546045734),X64Word_create(1294757372,1522805485),X64Word_create(1396182291,2643833823),X64Word_create(1695183700,2343527390),X64Word_create(1986661051,1014477480),X64Word_create(2177026350,1206759142),X64Word_create(2456956037,344077627),X64Word_create(2730485921,1290863460),X64Word_create(2820302411,3158454273),X64Word_create(3259730800,3505952657),X64Word_create(3345764771,106217008),X64Word_create(3516065817,3606008344),X64Word_create(3600352804,1432725776),X64Word_create(4094571909,1467031594),X64Word_create(275423344,851169720),X64Word_create(430227734,3100823752),X64Word_create(506948616,1363258195),X64Word_create(659060556,3750685593),X64Word_create(883997877,3785050280),X64Word_create(958139571,3318307427),X64Word_create(1322822218,3812723403),X64Word_create(1537002063,2003034995),X64Word_create(1747873779,3602036899),X64Word_create(1955562222,1575990012),X64Word_create(2024104815,1125592928),X64Word_create(2227730452,2716904306),X64Word_create(2361852424,442776044),X64Word_create(2428436474,593698344),X64Word_create(2756734187,3733110249),X64Word_create(3204031479,2999351573),X64Word_create(3329325298,3815920427),X64Word_create(3391569614,3928383900),X64Word_create(3515267271,566280711),X64Word_create(3940187606,3454069534),X64Word_create(4118630271,4000239992),X64Word_create(116418474,1914138554),X64Word_create(174292421,2731055270),X64Word_create(289380356,3203993006),X64Word_create(460393269,320620315),X64Word_create(685471733,587496836),X64Word_create(852142971,1086792851),X64Word_create(1017036298,365543100),X64Word_create(1126000580,2618297676),X64Word_create(1288033470,3409855158),X64Word_create(1501505948,4234509866),X64Word_create(1607167915,987167468),X64Word_create(1816402316,1246189591)];var W=[];(function(){for(var i=0;i<80;i++){W[i]=X64Word_create()}})();var SHA512=C_algo.SHA512=Hasher.extend({_doReset:function(){this._hash=new X64WordArray.init([new X64Word.init(1779033703,4089235720),new X64Word.init(3144134277,2227873595),new X64Word.init(1013904242,4271175723),new X64Word.init(2773480762,1595750129),new X64Word.init(1359893119,2917565137),new X64Word.init(2600822924,725511199),new X64Word.init(528734635,4215389547),new X64Word.init(1541459225,327033209)])},_doProcessBlock:function(M,offset){var H=this._hash.words;var H0=H[0];var H1=H[1];var H2=H[2];var H3=H[3];var H4=H[4];var H5=H[5];var H6=H[6];var H7=H[7];var H0h=H0.high;var H0l=H0.low;var H1h=H1.high;var H1l=H1.low;var H2h=H2.high;var H2l=H2.low;var H3h=H3.high;var H3l=H3.low;var H4h=H4.high;var H4l=H4.low;var H5h=H5.high;var H5l=H5.low;var H6h=H6.high;var H6l=H6.low;var H7h=H7.high;var H7l=H7.low;var ah=H0h;var al=H0l;var bh=H1h;var bl=H1l;var ch=H2h;var cl=H2l;var dh=H3h;var dl=H3l;var eh=H4h;var el=H4l;var fh=H5h;var fl=H5l;var gh=H6h;var gl=H6l;var hh=H7h;var hl=H7l;for(var i=0;i<80;i++){var Wil;var Wih;var Wi=W[i];if(i<16){Wih=Wi.high=M[offset+i*2]|0;Wil=Wi.low=M[offset+i*2+1]|0}else{var gamma0x=W[i-15];var gamma0xh=gamma0x.high;var gamma0xl=gamma0x.low;var gamma0h=(gamma0xh>>>1|gamma0xl<<31)^(gamma0xh>>>8|gamma0xl<<24)^gamma0xh>>>7;var gamma0l=(gamma0xl>>>1|gamma0xh<<31)^(gamma0xl>>>8|gamma0xh<<24)^(gamma0xl>>>7|gamma0xh<<25);var gamma1x=W[i-2];var gamma1xh=gamma1x.high;var gamma1xl=gamma1x.low;var gamma1h=(gamma1xh>>>19|gamma1xl<<13)^(gamma1xh<<3|gamma1xl>>>29)^gamma1xh>>>6;var gamma1l=(gamma1xl>>>19|gamma1xh<<13)^(gamma1xl<<3|gamma1xh>>>29)^(gamma1xl>>>6|gamma1xh<<26);var Wi7=W[i-7];var Wi7h=Wi7.high;var Wi7l=Wi7.low;var Wi16=W[i-16];var Wi16h=Wi16.high;var Wi16l=Wi16.low;Wil=gamma0l+Wi7l;Wih=gamma0h+Wi7h+(Wil>>>0<gamma0l>>>0?1:0);Wil=Wil+gamma1l;Wih=Wih+gamma1h+(Wil>>>0<gamma1l>>>0?1:0);Wil=Wil+Wi16l;Wih=Wih+Wi16h+(Wil>>>0<Wi16l>>>0?1:0);Wi.high=Wih;Wi.low=Wil}var chh=eh&fh^~eh&gh;var chl=el&fl^~el&gl;var majh=ah&bh^ah&ch^bh&ch;var majl=al&bl^al&cl^bl&cl;var sigma0h=(ah>>>28|al<<4)^(ah<<30|al>>>2)^(ah<<25|al>>>7);var sigma0l=(al>>>28|ah<<4)^(al<<30|ah>>>2)^(al<<25|ah>>>7);var sigma1h=(eh>>>14|el<<18)^(eh>>>18|el<<14)^(eh<<23|el>>>9);var sigma1l=(el>>>14|eh<<18)^(el>>>18|eh<<14)^(el<<23|eh>>>9);var Ki=K[i];var Kih=Ki.high;var Kil=Ki.low;var t1l=hl+sigma1l;var t1h=hh+sigma1h+(t1l>>>0<hl>>>0?1:0);var t1l=t1l+chl;var t1h=t1h+chh+(t1l>>>0<chl>>>0?1:0);var t1l=t1l+Kil;var t1h=t1h+Kih+(t1l>>>0<Kil>>>0?1:0);var t1l=t1l+Wil;var t1h=t1h+Wih+(t1l>>>0<Wil>>>0?1:0);var t2l=sigma0l+majl;var t2h=sigma0h+majh+(t2l>>>0<sigma0l>>>0?1:0);hh=gh;hl=gl;gh=fh;gl=fl;fh=eh;fl=el;el=dl+t1l|0;eh=dh+t1h+(el>>>0<dl>>>0?1:0)|0;dh=ch;dl=cl;ch=bh;cl=bl;bh=ah;bl=al;al=t1l+t2l|0;ah=t1h+t2h+(al>>>0<t1l>>>0?1:0)|0}H0l=H0.low=H0l+al;H0.high=H0h+ah+(H0l>>>0<al>>>0?1:0);H1l=H1.low=H1l+bl;H1.high=H1h+bh+(H1l>>>0<bl>>>0?1:0);H2l=H2.low=H2l+cl;H2.high=H2h+ch+(H2l>>>0<cl>>>0?1:0);H3l=H3.low=H3l+dl;H3.high=H3h+dh+(H3l>>>0<dl>>>0?1:0);H4l=H4.low=H4l+el;H4.high=H4h+eh+(H4l>>>0<el>>>0?1:0);H5l=H5.low=H5l+fl;H5.high=H5h+fh+(H5l>>>0<fl>>>0?1:0);H6l=H6.low=H6l+gl;H6.high=H6h+gh+(H6l>>>0<gl>>>0?1:0);H7l=H7.low=H7l+hl;H7.high=H7h+hh+(H7l>>>0<hl>>>0?1:0)},_doFinalize:function(){var data=this._data;var dataWords=data.words;var nBitsTotal=this._nDataBytes*8;var nBitsLeft=data.sigBytes*8;dataWords[nBitsLeft>>>5]|=128<<24-nBitsLeft%32;dataWords[(nBitsLeft+128>>>10<<5)+30]=Math.floor(nBitsTotal/4294967296);dataWords[(nBitsLeft+128>>>10<<5)+31]=nBitsTotal;data.sigBytes=dataWords.length*4;this._process();var hash=this._hash.toX32();return hash},clone:function(){var clone=Hasher.clone.call(this);clone._hash=this._hash.clone();return clone},blockSize:1024/32});C.SHA512=Hasher._createHelper(SHA512);C.HmacSHA512=Hasher._createHmacHelper(SHA512)})();return CryptoJS.SHA512})},{"./core":51,"./x64-core":83}],82:[function(require,module,exports){(function(root,factory,undef){if(typeof exports==="object"){module.exports=exports=factory(require("./core"),require("./enc-base64"),require("./md5"),require("./evpkdf"),require("./cipher-core"))}else if(typeof define==="function"&&define.amd){define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var BlockCipher=C_lib.BlockCipher;var C_algo=C.algo;var PC1=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4];var PC2=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32];var BIT_SHIFTS=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28];var SBOX_P=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}];var SBOX_MASK=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679];var DES=C_algo.DES=BlockCipher.extend({_doReset:function(){var key=this._key;var keyWords=key.words;var keyBits=[];for(var i=0;i<56;i++){var keyBitPos=PC1[i]-1;keyBits[i]=keyWords[keyBitPos>>>5]>>>31-keyBitPos%32&1}var subKeys=this._subKeys=[];for(var nSubKey=0;nSubKey<16;nSubKey++){var subKey=subKeys[nSubKey]=[];var bitShift=BIT_SHIFTS[nSubKey];for(var i=0;i<24;i++){subKey[i/6|0]|=keyBits[(PC2[i]-1+bitShift)%28]<<31-i%6;subKey[4+(i/6|0)]|=keyBits[28+(PC2[i+24]-1+bitShift)%28]<<31-i%6}subKey[0]=subKey[0]<<1|subKey[0]>>>31;for(var i=1;i<7;i++){subKey[i]=subKey[i]>>>(i-1)*4+3}subKey[7]=subKey[7]<<5|subKey[7]>>>27}var invSubKeys=this._invSubKeys=[];for(var i=0;i<16;i++){invSubKeys[i]=subKeys[15-i]}},encryptBlock:function(M,offset){this._doCryptBlock(M,offset,this._subKeys)},decryptBlock:function(M,offset){this._doCryptBlock(M,offset,this._invSubKeys)},_doCryptBlock:function(M,offset,subKeys){this._lBlock=M[offset];this._rBlock=M[offset+1];exchangeLR.call(this,4,252645135);exchangeLR.call(this,16,65535);exchangeRL.call(this,2,858993459);exchangeRL.call(this,8,16711935);exchangeLR.call(this,1,1431655765);for(var round=0;round<16;round++){var subKey=subKeys[round];var lBlock=this._lBlock;var rBlock=this._rBlock;var f=0;for(var i=0;i<8;i++){f|=SBOX_P[i][((rBlock^subKey[i])&SBOX_MASK[i])>>>0]}this._lBlock=rBlock;this._rBlock=lBlock^f}var t=this._lBlock;this._lBlock=this._rBlock;this._rBlock=t;exchangeLR.call(this,1,1431655765);exchangeRL.call(this,8,16711935);exchangeRL.call(this,2,858993459);exchangeLR.call(this,16,65535);exchangeLR.call(this,4,252645135);M[offset]=this._lBlock;M[offset+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function exchangeLR(offset,mask){var t=(this._lBlock>>>offset^this._rBlock)&mask;this._rBlock^=t;this._lBlock^=t<<offset}function exchangeRL(offset,mask){var t=(this._rBlock>>>offset^this._lBlock)&mask;this._lBlock^=t;this._rBlock^=t<<offset}C.DES=BlockCipher._createHelper(DES);var TripleDES=C_algo.TripleDES=BlockCipher.extend({_doReset:function(){var key=this._key;var keyWords=key.words;if(keyWords.length!==2&&keyWords.length!==4&&keyWords.length<6){throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.")}var key1=keyWords.slice(0,2);var key2=keyWords.length<4?keyWords.slice(0,2):keyWords.slice(2,4);var key3=keyWords.length<6?keyWords.slice(0,2):keyWords.slice(4,6);this._des1=DES.createEncryptor(WordArray.create(key1));this._des2=DES.createEncryptor(WordArray.create(key2));this._des3=DES.createEncryptor(WordArray.create(key3))},encryptBlock:function(M,offset){this._des1.encryptBlock(M,offset);this._des2.decryptBlock(M,offset);this._des3.encryptBlock(M,offset)},decryptBlock:function(M,offset){this._des3.decryptBlock(M,offset);this._des2.encryptBlock(M,offset);this._des1.decryptBlock(M,offset)},keySize:192/32,ivSize:64/32,blockSize:64/32});C.TripleDES=BlockCipher._createHelper(TripleDES)})();return CryptoJS.TripleDES})},{"./cipher-core":50,"./core":51,"./enc-base64":52,"./evpkdf":55,"./md5":60}],83:[function(require,module,exports){(function(root,factory){if(typeof exports==="object"){module.exports=exports=factory(require("./core"))}else if(typeof define==="function"&&define.amd){define(["./core"],factory)}else{factory(root.CryptoJS)}})(this,function(CryptoJS){(function(undefined){var C=CryptoJS;var C_lib=C.lib;var Base=C_lib.Base;var X32WordArray=C_lib.WordArray;var C_x64=C.x64={};var X64Word=C_x64.Word=Base.extend({init:function(high,low){this.high=high;this.low=low}});var X64WordArray=C_x64.WordArray=Base.extend({init:function(words,sigBytes){words=this.words=words||[];if(sigBytes!=undefined){this.sigBytes=sigBytes}else{this.sigBytes=words.length*8}},toX32:function(){var x64Words=this.words;var x64WordsLength=x64Words.length;var x32Words=[];for(var i=0;i<x64WordsLength;i++){var x64Word=x64Words[i];x32Words.push(x64Word.high);x32Words.push(x64Word.low)}return X32WordArray.create(x32Words,this.sigBytes)},clone:function(){var clone=Base.clone.call(this);var words=clone.words=this.words.slice(0);var wordsLength=words.length;for(var i=0;i<wordsLength;i++){words[i]=words[i].clone()}return clone}})})();return CryptoJS})},{"./core":51}],84:[function(require,module,exports){"use strict";var isValue=require("type/value/is"),isPlainFunction=require("type/plain-function/is"),assign=require("es5-ext/object/assign"),normalizeOpts=require("es5-ext/object/normalize-options"),contains=require("es5-ext/string/#/contains");var d=module.exports=function(dscr,value){var c,e,w,options,desc;if(arguments.length<2||typeof dscr!=="string"){options=value;value=dscr;dscr=null}else{options=arguments[2]}if(isValue(dscr)){c=contains.call(dscr,"c");e=contains.call(dscr,"e");w=contains.call(dscr,"w")}else{c=w=true;e=false}desc={value:value,configurable:c,enumerable:e,writable:w};return!options?desc:assign(normalizeOpts(options),desc)};d.gs=function(dscr,get,set){var c,e,options,desc;if(typeof dscr!=="string"){options=set;set=get;get=dscr;dscr=null}else{options=arguments[3]}if(!isValue(get)){get=undefined}else if(!isPlainFunction(get)){options=get;get=set=undefined}else if(!isValue(set)){set=undefined}else if(!isPlainFunction(set)){options=set;set=undefined}if(isValue(dscr)){c=contains.call(dscr,"c");e=contains.call(dscr,"e")}else{c=true;e=false}desc={get:get,set:set,configurable:c,enumerable:e};return!options?desc:assign(normalizeOpts(options),desc)}},{"es5-ext/object/assign":130,"es5-ext/object/normalize-options":141,"es5-ext/string/#/contains":148,"type/plain-function/is":348,"type/value/is":353}],85:[function(require,module,exports){"use strict";var isPlainFunction=require("type/plain-function/is"),ensureValue=require("type/value/ensure"),isValue=require("type/value/is"),map=require("es5-ext/object/map"),contains=require("es5-ext/string/#/contains");var call=Function.prototype.call,defineProperty=Object.defineProperty,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf=Object.getPrototypeOf,hasOwnProperty=Object.prototype.hasOwnProperty,cacheDesc={configurable:false,enumerable:false,writable:false,value:null},define;define=function(name,options){var value,dgs,cacheName,desc,writable=false,resolvable,flat;options=Object(ensureValue(options));cacheName=options.cacheName;flat=options.flat;if(!isValue(cacheName))cacheName=name;delete options.cacheName;value=options.value;resolvable=isPlainFunction(value);delete options.value;dgs={configurable:Boolean(options.configurable),enumerable:Boolean(options.enumerable)};if(name!==cacheName){dgs.get=function(){if(hasOwnProperty.call(this,cacheName))return this[cacheName];cacheDesc.value=resolvable?call.call(value,this,options):value;cacheDesc.writable=writable;defineProperty(this,cacheName,cacheDesc);cacheDesc.value=null;if(desc)defineProperty(this,name,desc);return this[cacheName]}}else if(!flat){dgs.get=function self(){var ownDesc;if(hasOwnProperty.call(this,name)){ownDesc=getOwnPropertyDescriptor(this,name);if(ownDesc){if(ownDesc.hasOwnProperty("value"))return ownDesc.value;if(typeof ownDesc.get==="function"&&ownDesc.get!==self){return ownDesc.get.call(this)}return value}}desc.value=resolvable?call.call(value,this,options):value;defineProperty(this,name,desc);desc.value=null;return this[name]}}else{dgs.get=function self(){var base=this,ownDesc;if(hasOwnProperty.call(this,name)){ownDesc=getOwnPropertyDescriptor(this,name);if(ownDesc.hasOwnProperty("value"))return ownDesc.value;if(typeof ownDesc.get==="function"&&ownDesc.get!==self){return ownDesc.get.call(this)}}while(!hasOwnProperty.call(base,name))base=getPrototypeOf(base);desc.value=resolvable?call.call(value,base,options):value;defineProperty(base,name,desc);desc.value=null;return base[name]}}dgs.set=function(value){if(hasOwnProperty.call(this,name)){throw new TypeError("Cannot assign to lazy defined '"+name+"' property of "+this)}dgs.get.call(this);this[cacheName]=value};if(options.desc){desc={configurable:contains.call(options.desc,"c"),enumerable:contains.call(options.desc,"e")};if(cacheName===name){desc.writable=contains.call(options.desc,"w");desc.value=null}else{writable=contains.call(options.desc,"w");desc.get=dgs.get;desc.set=dgs.set}delete options.desc}else if(cacheName===name){desc={configurable:Boolean(options.configurable),enumerable:Boolean(options.enumerable),writable:Boolean(options.writable),value:null}}delete options.configurable;delete options.enumerable;delete options.writable;return dgs};module.exports=function(props){return map(props,function(desc,name){return define(name,desc)})}},{"es5-ext/object/map":140,"es5-ext/string/#/contains":148,"type/plain-function/is":348,"type/value/ensure":352,"type/value/is":353}],86:[function(require,module,exports){module.exports=Delegator;function Delegator(proto,target){if(!(this instanceof Delegator))return new Delegator(proto,target);this.proto=proto;this.target=target;this.methods=[];this.getters=[];this.setters=[];this.fluents=[]}Delegator.prototype.method=function(name){var proto=this.proto;var target=this.target;this.methods.push(name);proto[name]=function(){return this[target][name].apply(this[target],arguments)};return this};Delegator.prototype.access=function(name){return this.getter(name).setter(name)};Delegator.prototype.getter=function(name){var proto=this.proto;var target=this.target;this.getters.push(name);proto.__defineGetter__(name,function(){return this[target][name]});return this};Delegator.prototype.setter=function(name){var proto=this.proto;var target=this.target;this.setters.push(name);proto.__defineSetter__(name,function(val){return this[target][name]=val});return this};Delegator.prototype.fluent=function(name){var proto=this.proto;var target=this.target;this.fluents.push(name);proto[name]=function(val){if("undefined"!=typeof val){this[target][name]=val;return this}else{return this[target][name]}};return this}},{}],87:[function(require,module,exports){"use strict";function Denque(array,options){var options=options||{};this._head=0;this._tail=0;this._capacity=options.capacity;this._capacityMask=3;this._list=new Array(4);if(Array.isArray(array)){this._fromArray(array)}}Denque.prototype.peekAt=function peekAt(index){var i=index;if(i!==(i|0)){return void 0}var len=this.size();if(i>=len||i<-len)return undefined;if(i<0)i+=len;i=this._head+i&this._capacityMask;return this._list[i]};Denque.prototype.get=function get(i){return this.peekAt(i)};Denque.prototype.peek=function peek(){if(this._head===this._tail)return undefined;return this._list[this._head]};Denque.prototype.peekFront=function peekFront(){return this.peek()};Denque.prototype.peekBack=function peekBack(){return this.peekAt(-1)};Object.defineProperty(Denque.prototype,"length",{get:function length(){return this.size()}});Denque.prototype.size=function size(){if(this._head===this._tail)return 0;if(this._head<this._tail)return this._tail-this._head;else return this._capacityMask+1-(this._head-this._tail)};Denque.prototype.unshift=function unshift(item){if(item===undefined)return this.size();var len=this._list.length;this._head=this._head-1+len&this._capacityMask;this._list[this._head]=item;if(this._tail===this._head)this._growArray();if(this._capacity&&this.size()>this._capacity)this.pop();if(this._head<this._tail)return this._tail-this._head;else return this._capacityMask+1-(this._head-this._tail)};Denque.prototype.shift=function shift(){var head=this._head;if(head===this._tail)return undefined;var item=this._list[head];this._list[head]=undefined;this._head=head+1&this._capacityMask;if(head<2&&this._tail>1e4&&this._tail<=this._list.length>>>2)this._shrinkArray();return item};Denque.prototype.push=function push(item){if(item===undefined)return this.size();var tail=this._tail;this._list[tail]=item;this._tail=tail+1&this._capacityMask;if(this._tail===this._head){this._growArray()}if(this._capacity&&this.size()>this._capacity){this.shift()}if(this._head<this._tail)return this._tail-this._head;else return this._capacityMask+1-(this._head-this._tail)};Denque.prototype.pop=function pop(){var tail=this._tail;if(tail===this._head)return undefined;var len=this._list.length;this._tail=tail-1+len&this._capacityMask;var item=this._list[this._tail];this._list[this._tail]=undefined;if(this._head<2&&tail>1e4&&tail<=len>>>2)this._shrinkArray();return item};Denque.prototype.removeOne=function removeOne(index){var i=index;if(i!==(i|0)){return void 0}if(this._head===this._tail)return void 0;var size=this.size();var len=this._list.length;if(i>=size||i<-size)return void 0;if(i<0)i+=size;i=this._head+i&this._capacityMask;var item=this._list[i];var k;if(index<size/2){for(k=index;k>0;k--){this._list[i]=this._list[i=i-1+len&this._capacityMask]}this._list[i]=void 0;this._head=this._head+1+len&this._capacityMask}else{for(k=size-1-index;k>0;k--){this._list[i]=this._list[i=i+1+len&this._capacityMask]}this._list[i]=void 0;this._tail=this._tail-1+len&this._capacityMask}return item};Denque.prototype.remove=function remove(index,count){var i=index;var removed;var del_count=count;if(i!==(i|0)){return void 0}if(this._head===this._tail)return void 0;var size=this.size();var len=this._list.length;if(i>=size||i<-size||count<1)return void 0;if(i<0)i+=size;if(count===1||!count){removed=new Array(1);removed[0]=this.removeOne(i);return removed}if(i===0&&i+count>=size){removed=this.toArray();this.clear();return removed}if(i+count>size)count=size-i;var k;removed=new Array(count);for(k=0;k<count;k++){removed[k]=this._list[this._head+i+k&this._capacityMask]}i=this._head+i&this._capacityMask;if(index+count===size){this._tail=this._tail-count+len&this._capacityMask;for(k=count;k>0;k--){this._list[i=i+1+len&this._capacityMask]=void 0}return removed}if(index===0){this._head=this._head+count+len&this._capacityMask;for(k=count-1;k>0;k--){this._list[i=i+1+len&this._capacityMask]=void 0}return removed}if(i<size/2){this._head=this._head+index+count+len&this._capacityMask;for(k=index;k>0;k--){this.unshift(this._list[i=i-1+len&this._capacityMask])}i=this._head-1+len&this._capacityMask;while(del_count>0){this._list[i=i-1+len&this._capacityMask]=void 0;del_count--}if(index<0)this._tail=i}else{this._tail=i;i=i+count+len&this._capacityMask;for(k=size-(count+index);k>0;k--){this.push(this._list[i++])}i=this._tail;while(del_count>0){this._list[i=i+1+len&this._capacityMask]=void 0;del_count--}}if(this._head<2&&this._tail>1e4&&this._tail<=len>>>2)this._shrinkArray();return removed};Denque.prototype.splice=function splice(index,count){var i=index;if(i!==(i|0)){return void 0}var size=this.size();if(i<0)i+=size;if(i>size)return void 0;if(arguments.length>2){var k;var temp;var removed;var arg_len=arguments.length;var len=this._list.length;var arguments_index=2;if(!size||i<size/2){temp=new Array(i);for(k=0;k<i;k++){temp[k]=this._list[this._head+k&this._capacityMask]}if(count===0){removed=[];if(i>0){this._head=this._head+i+len&this._capacityMask}}else{removed=this.remove(i,count);this._head=this._head+i+len&this._capacityMask}while(arg_len>arguments_index){this.unshift(arguments[--arg_len])}for(k=i;k>0;k--){this.unshift(temp[k-1])}}else{temp=new Array(size-(i+count));var leng=temp.length;for(k=0;k<leng;k++){temp[k]=this._list[this._head+i+count+k&this._capacityMask]}if(count===0){removed=[];if(i!=size){this._tail=this._head+i+len&this._capacityMask}}else{removed=this.remove(i,count);this._tail=this._tail-leng+len&this._capacityMask}while(arguments_index<arg_len){this.push(arguments[arguments_index++])}for(k=0;k<leng;k++){this.push(temp[k])}}return removed}else{return this.remove(i,count)}};Denque.prototype.clear=function clear(){this._head=0;this._tail=0};Denque.prototype.isEmpty=function isEmpty(){return this._head===this._tail};Denque.prototype.toArray=function toArray(){return this._copyArray(false)};Denque.prototype._fromArray=function _fromArray(array){for(var i=0;i<array.length;i++)this.push(array[i])};Denque.prototype._copyArray=function _copyArray(fullCopy){var newArray=[];var list=this._list;var len=list.length;var i;if(fullCopy||this._head>this._tail){for(i=this._head;i<len;i++)newArray.push(list[i]);for(i=0;i<this._tail;i++)newArray.push(list[i])}else{for(i=this._head;i<this._tail;i++)newArray.push(list[i])}return newArray};Denque.prototype._growArray=function _growArray(){if(this._head){this._list=this._copyArray(true);this._head=0}this._tail=this._list.length;this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1};Denque.prototype._shrinkArray=function _shrinkArray(){this._list.length>>>=1;this._capacityMask>>>=1};module.exports=Denque},{}],88:[function(require,module,exports){"use strict";const childProcess=require("child_process");const{isLinux:isLinux,getReport:getReport}=require("./process");const{LDD_PATH:LDD_PATH,readFile:readFile,readFileSync:readFileSync}=require("./filesystem");let cachedFamilyFilesystem;let cachedVersionFilesystem;const command="getconf GNU_LIBC_VERSION 2>&1 || true; ldd --version 2>&1 || true";let commandOut="";const safeCommand=()=>{if(!commandOut){return new Promise(resolve=>{childProcess.exec(command,(err,out)=>{commandOut=err?" ":out;resolve(commandOut)})})}return commandOut};const safeCommandSync=()=>{if(!commandOut){try{commandOut=childProcess.execSync(command,{encoding:"utf8"})}catch(_err){commandOut=" "}}return commandOut};const GLIBC="glibc";const RE_GLIBC_VERSION=/LIBC[a-z0-9 \-).]*?(\d+\.\d+)/i;const MUSL="musl";const isFileMusl=f=>f.includes("libc.musl-")||f.includes("ld-musl-");const familyFromReport=()=>{const report=getReport();if(report.header&&report.header.glibcVersionRuntime){return GLIBC}if(Array.isArray(report.sharedObjects)){if(report.sharedObjects.some(isFileMusl)){return MUSL}}return null};const familyFromCommand=out=>{const[getconf,ldd1]=out.split(/[\r\n]+/);if(getconf&&getconf.includes(GLIBC)){return GLIBC}if(ldd1&&ldd1.includes(MUSL)){return MUSL}return null};const getFamilyFromLddContent=content=>{if(content.includes("musl")){return MUSL}if(content.includes("GNU C Library")){return GLIBC}return null};const familyFromFilesystem=async()=>{if(cachedFamilyFilesystem!==undefined){return cachedFamilyFilesystem}cachedFamilyFilesystem=null;try{const lddContent=await readFile(LDD_PATH);cachedFamilyFilesystem=getFamilyFromLddContent(lddContent)}catch(e){}return cachedFamilyFilesystem};const familyFromFilesystemSync=()=>{if(cachedFamilyFilesystem!==undefined){return cachedFamilyFilesystem}cachedFamilyFilesystem=null;try{const lddContent=readFileSync(LDD_PATH);cachedFamilyFilesystem=getFamilyFromLddContent(lddContent)}catch(e){}return cachedFamilyFilesystem};const family=async()=>{let family=null;if(isLinux()){family=await familyFromFilesystem();if(!family){family=familyFromReport()}if(!family){const out=await safeCommand();family=familyFromCommand(out)}}return family};const familySync=()=>{let family=null;if(isLinux()){family=familyFromFilesystemSync();if(!family){family=familyFromReport()}if(!family){const out=safeCommandSync();family=familyFromCommand(out)}}return family};const isNonGlibcLinux=async()=>isLinux()&&await family()!==GLIBC;const isNonGlibcLinuxSync=()=>isLinux()&&familySync()!==GLIBC;const versionFromFilesystem=async()=>{if(cachedVersionFilesystem!==undefined){return cachedVersionFilesystem}cachedVersionFilesystem=null;try{const lddContent=await readFile(LDD_PATH);const versionMatch=lddContent.match(RE_GLIBC_VERSION);if(versionMatch){cachedVersionFilesystem=versionMatch[1]}}catch(e){}return cachedVersionFilesystem};const versionFromFilesystemSync=()=>{if(cachedVersionFilesystem!==undefined){return cachedVersionFilesystem}cachedVersionFilesystem=null;try{const lddContent=readFileSync(LDD_PATH);const versionMatch=lddContent.match(RE_GLIBC_VERSION);if(versionMatch){cachedVersionFilesystem=versionMatch[1]}}catch(e){}return cachedVersionFilesystem};const versionFromReport=()=>{const report=getReport();if(report.header&&report.header.glibcVersionRuntime){return report.header.glibcVersionRuntime}return null};const versionSuffix=s=>s.trim().split(/\s+/)[1];const versionFromCommand=out=>{const[getconf,ldd1,ldd2]=out.split(/[\r\n]+/);if(getconf&&getconf.includes(GLIBC)){return versionSuffix(getconf)}if(ldd1&&ldd2&&ldd1.includes(MUSL)){return versionSuffix(ldd2)}return null};const version=async()=>{let version=null;if(isLinux()){version=await versionFromFilesystem();if(!version){version=versionFromReport()}if(!version){const out=await safeCommand();version=versionFromCommand(out)}}return version};const versionSync=()=>{let version=null;if(isLinux()){version=versionFromFilesystemSync();if(!version){version=versionFromReport()}if(!version){const out=safeCommandSync();version=versionFromCommand(out)}}return version};module.exports={GLIBC:GLIBC,MUSL:MUSL,family:family,familySync:familySync,isNonGlibcLinux:isNonGlibcLinux,isNonGlibcLinuxSync:isNonGlibcLinuxSync,version:version,versionSync:versionSync}},{"./filesystem":89,"./process":90,child_process:undefined}],89:[function(require,module,exports){"use strict";const fs=require("fs");const LDD_PATH="/usr/bin/ldd";const readFileSync=path=>fs.readFileSync(path,"utf-8");const readFile=path=>new Promise((resolve,reject)=>{fs.readFile(path,"utf-8",(err,data)=>{if(err){reject(err)}else{resolve(data)}})});module.exports={LDD_PATH:LDD_PATH,readFileSync:readFileSync,readFile:readFile}},{fs:undefined}],90:[function(require,module,exports){"use strict";const isLinux=()=>process.platform==="linux";let report=null;const getReport=()=>{if(!report){if(isLinux()&&process.report){const orig=process.report.excludeNetwork;process.report.excludeNetwork=true;report=process.report.getReport();process.report.excludeNetwork=orig}else{report={}}}return report};module.exports={isLinux:isLinux,getReport:getReport}},{}],91:[function(require,module,exports){
/*!
 * ee-first
 * Copyright(c) 2014 Jonathan Ong
 * MIT Licensed
 */
"use strict";module.exports=first;function first(stuff,done){if(!Array.isArray(stuff))throw new TypeError("arg must be an array of [ee, events...] arrays");var cleanups=[];for(var i=0;i<stuff.length;i++){var arr=stuff[i];if(!Array.isArray(arr)||arr.length<2)throw new TypeError("each array member must be [ee, events...]");var ee=arr[0];for(var j=1;j<arr.length;j++){var event=arr[j];var fn=listener(event,callback);ee.on(event,fn);cleanups.push({ee:ee,event:event,fn:fn})}}function callback(){cleanup();done.apply(null,arguments)}function cleanup(){var x;for(var i=0;i<cleanups.length;i++){x=cleanups[i];x.ee.removeListener(x.event,x.fn)}}function thunk(fn){done=fn}thunk.cancel=cleanup;return thunk}function listener(event,done){return function onevent(arg1){var args=new Array(arguments.length);var ee=this;var err=event==="error"?arg1:null;for(var i=0;i<args.length;i++){args[i]=arguments[i]}done(err,ee,event,args)}}},{}],92:[function(require,module,exports){"use strict";module.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}},{}],93:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ERROR_PACKET=exports.PACKET_TYPES_REVERSE=exports.PACKET_TYPES=void 0;const PACKET_TYPES=Object.create(null);exports.PACKET_TYPES=PACKET_TYPES;PACKET_TYPES["open"]="0";PACKET_TYPES["close"]="1";PACKET_TYPES["ping"]="2";PACKET_TYPES["pong"]="3";PACKET_TYPES["message"]="4";PACKET_TYPES["upgrade"]="5";PACKET_TYPES["noop"]="6";const PACKET_TYPES_REVERSE=Object.create(null);exports.PACKET_TYPES_REVERSE=PACKET_TYPES_REVERSE;Object.keys(PACKET_TYPES).forEach(key=>{PACKET_TYPES_REVERSE[PACKET_TYPES[key]]=key});const ERROR_PACKET={type:"error",data:"parser error"};exports.ERROR_PACKET=ERROR_PACKET},{}],94:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.decodePacket=void 0;const commons_js_1=require("./commons.js");const decodePacket=(encodedPacket,binaryType)=>{if(typeof encodedPacket!=="string"){return{type:"message",data:mapBinary(encodedPacket,binaryType)}}const type=encodedPacket.charAt(0);if(type==="b"){const buffer=Buffer.from(encodedPacket.substring(1),"base64");return{type:"message",data:mapBinary(buffer,binaryType)}}if(!commons_js_1.PACKET_TYPES_REVERSE[type]){return commons_js_1.ERROR_PACKET}return encodedPacket.length>1?{type:commons_js_1.PACKET_TYPES_REVERSE[type],data:encodedPacket.substring(1)}:{type:commons_js_1.PACKET_TYPES_REVERSE[type]}};exports.decodePacket=decodePacket;const mapBinary=(data,binaryType)=>{switch(binaryType){case"arraybuffer":if(data instanceof ArrayBuffer){return data}else if(Buffer.isBuffer(data)){return data.buffer.slice(data.byteOffset,data.byteOffset+data.byteLength)}else{return data.buffer}case"nodebuffer":default:if(Buffer.isBuffer(data)){return data}else{return Buffer.from(data)}}}},{"./commons.js":93}],95:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.encodePacket=void 0;exports.encodePacketToBinary=encodePacketToBinary;const commons_js_1=require("./commons.js");const encodePacket=({type:type,data:data},supportsBinary,callback)=>{if(data instanceof ArrayBuffer||ArrayBuffer.isView(data)){return callback(supportsBinary?data:"b"+toBuffer(data,true).toString("base64"))}return callback(commons_js_1.PACKET_TYPES[type]+(data||""))};exports.encodePacket=encodePacket;const toBuffer=(data,forceBufferConversion)=>{if(Buffer.isBuffer(data)||data instanceof Uint8Array&&!forceBufferConversion){return data}else if(data instanceof ArrayBuffer){return Buffer.from(data)}else{return Buffer.from(data.buffer,data.byteOffset,data.byteLength)}};let TEXT_ENCODER;function encodePacketToBinary(packet,callback){if(packet.data instanceof ArrayBuffer||ArrayBuffer.isView(packet.data)){return callback(toBuffer(packet.data,false))}(0,exports.encodePacket)(packet,true,encoded=>{if(!TEXT_ENCODER){TEXT_ENCODER=new TextEncoder}callback(TEXT_ENCODER.encode(encoded))})}},{"./commons.js":93}],96:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.decodePayload=exports.decodePacket=exports.encodePayload=exports.encodePacket=exports.protocol=void 0;exports.createPacketEncoderStream=createPacketEncoderStream;exports.createPacketDecoderStream=createPacketDecoderStream;const encodePacket_js_1=require("./encodePacket.js");Object.defineProperty(exports,"encodePacket",{enumerable:true,get:function(){return encodePacket_js_1.encodePacket}});const decodePacket_js_1=require("./decodePacket.js");Object.defineProperty(exports,"decodePacket",{enumerable:true,get:function(){return decodePacket_js_1.decodePacket}});const commons_js_1=require("./commons.js");const SEPARATOR=String.fromCharCode(30);const encodePayload=(packets,callback)=>{const length=packets.length;const encodedPackets=new Array(length);let count=0;packets.forEach((packet,i)=>{(0,encodePacket_js_1.encodePacket)(packet,false,encodedPacket=>{encodedPackets[i]=encodedPacket;if(++count===length){callback(encodedPackets.join(SEPARATOR))}})})};exports.encodePayload=encodePayload;const decodePayload=(encodedPayload,binaryType)=>{const encodedPackets=encodedPayload.split(SEPARATOR);const packets=[];for(let i=0;i<encodedPackets.length;i++){const decodedPacket=(0,decodePacket_js_1.decodePacket)(encodedPackets[i],binaryType);packets.push(decodedPacket);if(decodedPacket.type==="error"){break}}return packets};exports.decodePayload=decodePayload;function createPacketEncoderStream(){return new TransformStream({transform(packet,controller){(0,encodePacket_js_1.encodePacketToBinary)(packet,encodedPacket=>{const payloadLength=encodedPacket.length;let header;if(payloadLength<126){header=new Uint8Array(1);new DataView(header.buffer).setUint8(0,payloadLength)}else if(payloadLength<65536){header=new Uint8Array(3);const view=new DataView(header.buffer);view.setUint8(0,126);view.setUint16(1,payloadLength)}else{header=new Uint8Array(9);const view=new DataView(header.buffer);view.setUint8(0,127);view.setBigUint64(1,BigInt(payloadLength))}if(packet.data&&typeof packet.data!=="string"){header[0]|=128}controller.enqueue(header);controller.enqueue(encodedPacket)})}})}let TEXT_DECODER;function totalLength(chunks){return chunks.reduce((acc,chunk)=>acc+chunk.length,0)}function concatChunks(chunks,size){if(chunks[0].length===size){return chunks.shift()}const buffer=new Uint8Array(size);let j=0;for(let i=0;i<size;i++){buffer[i]=chunks[0][j++];if(j===chunks[0].length){chunks.shift();j=0}}if(chunks.length&&j<chunks[0].length){chunks[0]=chunks[0].slice(j)}return buffer}function createPacketDecoderStream(maxPayload,binaryType){if(!TEXT_DECODER){TEXT_DECODER=new TextDecoder}const chunks=[];let state=0;let expectedLength=-1;let isBinary=false;return new TransformStream({transform(chunk,controller){chunks.push(chunk);while(true){if(state===0){if(totalLength(chunks)<1){break}const header=concatChunks(chunks,1);isBinary=(header[0]&128)===128;expectedLength=header[0]&127;if(expectedLength<126){state=3}else if(expectedLength===126){state=1}else{state=2}}else if(state===1){if(totalLength(chunks)<2){break}const headerArray=concatChunks(chunks,2);expectedLength=new DataView(headerArray.buffer,headerArray.byteOffset,headerArray.length).getUint16(0);state=3}else if(state===2){if(totalLength(chunks)<8){break}const headerArray=concatChunks(chunks,8);const view=new DataView(headerArray.buffer,headerArray.byteOffset,headerArray.length);const n=view.getUint32(0);if(n>Math.pow(2,53-32)-1){controller.enqueue(commons_js_1.ERROR_PACKET);break}expectedLength=n*Math.pow(2,32)+view.getUint32(4);state=3}else{if(totalLength(chunks)<expectedLength){break}const data=concatChunks(chunks,expectedLength);controller.enqueue((0,decodePacket_js_1.decodePacket)(isBinary?data:TEXT_DECODER.decode(data),binaryType));state=0}if(expectedLength===0||expectedLength>maxPayload){controller.enqueue(commons_js_1.ERROR_PACKET);break}}}})}exports.protocol=4},{"./commons.js":93,"./decodePacket.js":94,"./encodePacket.js":95}],97:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.protocol=exports.Transport=exports.Socket=exports.uServer=exports.parser=exports.transports=exports.Server=void 0;exports.listen=listen;exports.attach=attach;const http_1=require("http");const server_1=require("./server");Object.defineProperty(exports,"Server",{enumerable:true,get:function(){return server_1.Server}});const index_1=require("./transports/index");exports.transports=index_1.default;const parser=require("engine.io-parser");exports.parser=parser;var userver_1=require("./userver");Object.defineProperty(exports,"uServer",{enumerable:true,get:function(){return userver_1.uServer}});var socket_1=require("./socket");Object.defineProperty(exports,"Socket",{enumerable:true,get:function(){return socket_1.Socket}});var transport_1=require("./transport");Object.defineProperty(exports,"Transport",{enumerable:true,get:function(){return transport_1.Transport}});exports.protocol=parser.protocol;function listen(port,options,fn){if("function"===typeof options){fn=options;options={}}const server=(0,http_1.createServer)(function(req,res){res.writeHead(501);res.end("Not Implemented")});const engine=attach(server,options);engine.httpServer=server;server.listen(port,fn);return engine}function attach(server,options){const engine=new server_1.Server(options);engine.attach(server,options);return engine}},{"./server":100,"./socket":101,"./transport":102,"./transports/index":106,"./userver":111,"engine.io-parser":96,http:undefined}],98:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.packets=exports.protocol=void 0;exports.encodePacket=encodePacket;exports.encodeBase64Packet=encodeBase64Packet;exports.decodePacket=decodePacket;exports.decodeBase64Packet=decodeBase64Packet;exports.encodePayload=encodePayload;exports.decodePayload=decodePayload;exports.encodePayloadAsBinary=encodePayloadAsBinary;exports.decodePayloadAsBinary=decodePayloadAsBinary;var utf8=require("./utf8");exports.protocol=3;const hasBinary=packets=>{for(const packet of packets){if(packet.data instanceof ArrayBuffer||ArrayBuffer.isView(packet.data)){return true}}return false};exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6};var packetslist=Object.keys(exports.packets);var err={type:"error",data:"parser error"};const EMPTY_BUFFER=Buffer.concat([]);function encodePacket(packet,supportsBinary,utf8encode,callback){if(typeof supportsBinary==="function"){callback=supportsBinary;supportsBinary=null}if(typeof utf8encode==="function"){callback=utf8encode;utf8encode=null}if(Buffer.isBuffer(packet.data)){return encodeBuffer(packet,supportsBinary,callback)}else if(packet.data&&(packet.data.buffer||packet.data)instanceof ArrayBuffer){return encodeBuffer({type:packet.type,data:arrayBufferToBuffer(packet.data)},supportsBinary,callback)}var encoded=exports.packets[packet.type];if(undefined!==packet.data){encoded+=utf8encode?utf8.encode(String(packet.data),{strict:false}):String(packet.data)}return callback(""+encoded)}function encodeBuffer(packet,supportsBinary,callback){if(!supportsBinary){return encodeBase64Packet(packet,callback)}var data=packet.data;var typeBuffer=Buffer.allocUnsafe(1);typeBuffer[0]=exports.packets[packet.type];return callback(Buffer.concat([typeBuffer,data]))}function encodeBase64Packet(packet,callback){var data=Buffer.isBuffer(packet.data)?packet.data:arrayBufferToBuffer(packet.data);var message="b"+exports.packets[packet.type];message+=data.toString("base64");return callback(message)}function decodePacket(data,binaryType,utf8decode){if(data===undefined){return err}var type;if(typeof data==="string"){type=data.charAt(0);if(type==="b"){return decodeBase64Packet(data.slice(1),binaryType)}if(utf8decode){data=tryDecode(data);if(data===false){return err}}if(Number(type)!=type||!packetslist[type]){return err}if(data.length>1){return{type:packetslist[type],data:data.slice(1)}}else{return{type:packetslist[type]}}}if(binaryType==="arraybuffer"){var intArray=new Uint8Array(data);type=intArray[0];return{type:packetslist[type],data:intArray.buffer.slice(1)}}if(data instanceof ArrayBuffer){data=arrayBufferToBuffer(data)}type=data[0];return{type:packetslist[type],data:data.slice(1)}}function tryDecode(data){try{data=utf8.decode(data,{strict:false})}catch(e){return false}return data}function decodeBase64Packet(msg,binaryType){var type=packetslist[msg.charAt(0)];var data=Buffer.from(msg.slice(1),"base64");if(binaryType==="arraybuffer"){var abv=new Uint8Array(data.length);for(var i=0;i<abv.length;i++){abv[i]=data[i]}data=abv.buffer}return{type:type,data:data}}function encodePayload(packets,supportsBinary,callback){if(typeof supportsBinary==="function"){callback=supportsBinary;supportsBinary=null}if(supportsBinary&&hasBinary(packets)){return encodePayloadAsBinary(packets,callback)}if(!packets.length){return callback("0:")}function encodeOne(packet,doneCallback){encodePacket(packet,supportsBinary,false,function(message){doneCallback(null,setLengthHeader(message))})}map(packets,encodeOne,function(err,results){return callback(results.join(""))})}function setLengthHeader(message){return message.length+":"+message}function map(ary,each,done){const results=new Array(ary.length);let count=0;for(let i=0;i<ary.length;i++){each(ary[i],(error,msg)=>{results[i]=msg;if(++count===ary.length){done(null,results)}})}}function decodePayload(data,binaryType,callback){if(typeof data!=="string"){return decodePayloadAsBinary(data,binaryType,callback)}if(typeof binaryType==="function"){callback=binaryType;binaryType=null}if(data===""){return callback(err,0,1)}var length="",n,msg,packet;for(var i=0,l=data.length;i<l;i++){var chr=data.charAt(i);if(chr!==":"){length+=chr;continue}if(length===""||length!=(n=Number(length))){return callback(err,0,1)}msg=data.slice(i+1,i+1+n);if(length!=msg.length){return callback(err,0,1)}if(msg.length){packet=decodePacket(msg,binaryType,false);if(err.type===packet.type&&err.data===packet.data){return callback(err,0,1)}var more=callback(packet,i+n,l);if(false===more)return}i+=n;length=""}if(length!==""){return callback(err,0,1)}}function bufferToString(buffer){var str="";for(var i=0,l=buffer.length;i<l;i++){str+=String.fromCharCode(buffer[i])}return str}function stringToBuffer(string){var buf=Buffer.allocUnsafe(string.length);for(var i=0,l=string.length;i<l;i++){buf.writeUInt8(string.charCodeAt(i),i)}return buf}function arrayBufferToBuffer(data){var length=data.byteLength||data.length;var offset=data.byteOffset||0;return Buffer.from(data.buffer||data,offset,length)}function encodePayloadAsBinary(packets,callback){if(!packets.length){return callback(EMPTY_BUFFER)}map(packets,encodeOneBinaryPacket,function(err,results){return callback(Buffer.concat(results))})}function encodeOneBinaryPacket(p,doneCallback){function onBinaryPacketEncode(packet){var encodingLength=""+packet.length;var sizeBuffer;if(typeof packet==="string"){sizeBuffer=Buffer.allocUnsafe(encodingLength.length+2);sizeBuffer[0]=0;for(var i=0;i<encodingLength.length;i++){sizeBuffer[i+1]=parseInt(encodingLength[i],10)}sizeBuffer[sizeBuffer.length-1]=255;return doneCallback(null,Buffer.concat([sizeBuffer,stringToBuffer(packet)]))}sizeBuffer=Buffer.allocUnsafe(encodingLength.length+2);sizeBuffer[0]=1;for(var i=0;i<encodingLength.length;i++){sizeBuffer[i+1]=parseInt(encodingLength[i],10)}sizeBuffer[sizeBuffer.length-1]=255;doneCallback(null,Buffer.concat([sizeBuffer,packet]))}encodePacket(p,true,true,onBinaryPacketEncode)}function decodePayloadAsBinary(data,binaryType,callback){if(typeof binaryType==="function"){callback=binaryType;binaryType=null}var bufferTail=data;var buffers=[];var i;while(bufferTail.length>0){var strLen="";var isString=bufferTail[0]===0;for(i=1;;i++){if(bufferTail[i]===255)break;if(strLen.length>310){return callback(err,0,1)}strLen+=""+bufferTail[i]}bufferTail=bufferTail.slice(strLen.length+1);var msgLength=parseInt(strLen,10);var msg=bufferTail.slice(1,msgLength+1);if(isString)msg=bufferToString(msg);buffers.push(msg);bufferTail=bufferTail.slice(msgLength+1)}var total=buffers.length;for(i=0;i<total;i++){var buffer=buffers[i];callback(decodePacket(buffer,binaryType,true),i,total)}}},{"./utf8":99}],99:[function(require,module,exports){
/*! https://mths.be/utf8js v2.1.2 by @mathias */
var stringFromCharCode=String.fromCharCode;function ucs2decode(string){var output=[];var counter=0;var length=string.length;var value;var extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){var length=array.length;var index=-1;var value;var output="";while(++index<length){value=array[index];if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value)}return output}function checkScalarValue(codePoint,strict){if(codePoint>=55296&&codePoint<=57343){if(strict){throw Error("Lone surrogate U+"+codePoint.toString(16).toUpperCase()+" is not a scalar value")}return false}return true}function createByte(codePoint,shift){return stringFromCharCode(codePoint>>shift&63|128)}function encodeCodePoint(codePoint,strict){if((codePoint&4294967168)==0){return stringFromCharCode(codePoint)}var symbol="";if((codePoint&4294965248)==0){symbol=stringFromCharCode(codePoint>>6&31|192)}else if((codePoint&4294901760)==0){if(!checkScalarValue(codePoint,strict)){codePoint=65533}symbol=stringFromCharCode(codePoint>>12&15|224);symbol+=createByte(codePoint,6)}else if((codePoint&4292870144)==0){symbol=stringFromCharCode(codePoint>>18&7|240);symbol+=createByte(codePoint,12);symbol+=createByte(codePoint,6)}symbol+=stringFromCharCode(codePoint&63|128);return symbol}function utf8encode(string,opts){opts=opts||{};var strict=false!==opts.strict;var codePoints=ucs2decode(string);var length=codePoints.length;var index=-1;var codePoint;var byteString="";while(++index<length){codePoint=codePoints[index];byteString+=encodeCodePoint(codePoint,strict)}return byteString}function readContinuationByte(){if(byteIndex>=byteCount){throw Error("Invalid byte index")}var continuationByte=byteArray[byteIndex]&255;byteIndex++;if((continuationByte&192)==128){return continuationByte&63}throw Error("Invalid continuation byte")}function decodeSymbol(strict){var byte1;var byte2;var byte3;var byte4;var codePoint;if(byteIndex>byteCount){throw Error("Invalid byte index")}if(byteIndex==byteCount){return false}byte1=byteArray[byteIndex]&255;byteIndex++;if((byte1&128)==0){return byte1}if((byte1&224)==192){byte2=readContinuationByte();codePoint=(byte1&31)<<6|byte2;if(codePoint>=128){return codePoint}else{throw Error("Invalid continuation byte")}}if((byte1&240)==224){byte2=readContinuationByte();byte3=readContinuationByte();codePoint=(byte1&15)<<12|byte2<<6|byte3;if(codePoint>=2048){return checkScalarValue(codePoint,strict)?codePoint:65533}else{throw Error("Invalid continuation byte")}}if((byte1&248)==240){byte2=readContinuationByte();byte3=readContinuationByte();byte4=readContinuationByte();codePoint=(byte1&7)<<18|byte2<<12|byte3<<6|byte4;if(codePoint>=65536&&codePoint<=1114111){return codePoint}}throw Error("Invalid UTF-8 detected")}var byteArray;var byteCount;var byteIndex;function utf8decode(byteString,opts){opts=opts||{};var strict=false!==opts.strict;byteArray=ucs2decode(byteString);byteCount=byteArray.length;byteIndex=0;var codePoints=[];var tmp;while((tmp=decodeSymbol(strict))!==false){codePoints.push(tmp)}return ucs2encode(codePoints)}module.exports={version:"2.1.2",encode:utf8encode,decode:utf8decode}},{}],100:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Server=exports.BaseServer=void 0;const qs=require("querystring");const url_1=require("url");const base64id=require("base64id");const transports_1=require("./transports");const events_1=require("events");const socket_1=require("./socket");const debug_1=require("debug");const cookie_1=require("cookie");const ws_1=require("ws");const webtransport_1=require("./transports/webtransport");const engine_io_parser_1=require("engine.io-parser");const debug=(0,debug_1.default)("engine");const kResponseHeaders=Symbol("responseHeaders");function parseSessionId(data){try{const parsed=JSON.parse(data);if(typeof parsed.sid==="string"){return parsed.sid}}catch(e){}}class BaseServer extends events_1.EventEmitter{constructor(opts={}){super();this.middlewares=[];this.clients={};this.clientsCount=0;this.opts=Object.assign({wsEngine:ws_1.Server,pingTimeout:2e4,pingInterval:25e3,upgradeTimeout:1e4,maxHttpBufferSize:1e6,transports:["polling","websocket"],allowUpgrades:true,httpCompression:{threshold:1024},cors:false,allowEIO3:false},opts);if(opts.cookie){this.opts.cookie=Object.assign({name:"io",path:"/",httpOnly:opts.cookie.path!==false,sameSite:"lax"},opts.cookie)}if(this.opts.cors){this.use(require("cors")(this.opts.cors))}if(opts.perMessageDeflate){this.opts.perMessageDeflate=Object.assign({threshold:1024},opts.perMessageDeflate)}this.init()}_computePath(options){let path=(options.path||"/engine.io").replace(/\/$/,"");if(options.addTrailingSlash!==false){path+="/"}return path}upgrades(transport){if(!this.opts.allowUpgrades)return[];return transports_1.default[transport].upgradesTo||[]}verify(req,upgrade,fn){const transport=req._query.transport;if(!~this.opts.transports.indexOf(transport)||transport==="webtransport"){debug('unknown transport "%s"',transport);return fn(Server.errors.UNKNOWN_TRANSPORT,{transport:transport})}const isOriginInvalid=checkInvalidHeaderChar(req.headers.origin);if(isOriginInvalid){const origin=req.headers.origin;req.headers.origin=null;debug("origin header invalid");return fn(Server.errors.BAD_REQUEST,{name:"INVALID_ORIGIN",origin:origin})}const sid=req._query.sid;if(sid){if(!this.clients.hasOwnProperty(sid)){debug('unknown sid "%s"',sid);return fn(Server.errors.UNKNOWN_SID,{sid:sid})}const previousTransport=this.clients[sid].transport.name;if(!upgrade&&previousTransport!==transport){debug("bad request: unexpected transport without upgrade");return fn(Server.errors.BAD_REQUEST,{name:"TRANSPORT_MISMATCH",transport:transport,previousTransport:previousTransport})}}else{if("GET"!==req.method){return fn(Server.errors.BAD_HANDSHAKE_METHOD,{method:req.method})}if(transport==="websocket"&&!upgrade){debug("invalid transport upgrade");return fn(Server.errors.BAD_REQUEST,{name:"TRANSPORT_HANDSHAKE_ERROR"})}if(!this.opts.allowRequest)return fn();return this.opts.allowRequest(req,(message,success)=>{if(!success){return fn(Server.errors.FORBIDDEN,{message:message})}fn()})}fn()}use(fn){this.middlewares.push(fn)}_applyMiddlewares(req,res,callback){if(this.middlewares.length===0){debug("no middleware to apply, skipping");return callback()}const apply=i=>{debug("applying middleware n%d",i+1);this.middlewares[i](req,res,err=>{if(err){return callback(err)}if(i+1<this.middlewares.length){apply(i+1)}else{callback()}})};apply(0)}close(){debug("closing all open clients");for(let i in this.clients){if(this.clients.hasOwnProperty(i)){this.clients[i].close(true)}}this.cleanup();return this}generateId(req){return base64id.generateId()}async handshake(transportName,req,closeConnection){const protocol=req._query.EIO==="4"?4:3;if(protocol===3&&!this.opts.allowEIO3){debug("unsupported protocol version");this.emit("connection_error",{req:req,code:Server.errors.UNSUPPORTED_PROTOCOL_VERSION,message:Server.errorMessages[Server.errors.UNSUPPORTED_PROTOCOL_VERSION],context:{protocol:protocol}});closeConnection(Server.errors.UNSUPPORTED_PROTOCOL_VERSION);return}let id;try{id=await this.generateId(req)}catch(e){debug("error while generating an id");this.emit("connection_error",{req:req,code:Server.errors.BAD_REQUEST,message:Server.errorMessages[Server.errors.BAD_REQUEST],context:{name:"ID_GENERATION_ERROR",error:e}});closeConnection(Server.errors.BAD_REQUEST);return}debug('handshaking client "%s"',id);try{var transport=this.createTransport(transportName,req);if("polling"===transportName){transport.maxHttpBufferSize=this.opts.maxHttpBufferSize;transport.httpCompression=this.opts.httpCompression}else if("websocket"===transportName){transport.perMessageDeflate=this.opts.perMessageDeflate}}catch(e){debug('error handshaking to transport "%s"',transportName);this.emit("connection_error",{req:req,code:Server.errors.BAD_REQUEST,message:Server.errorMessages[Server.errors.BAD_REQUEST],context:{name:"TRANSPORT_HANDSHAKE_ERROR",error:e}});closeConnection(Server.errors.BAD_REQUEST);return}const socket=new socket_1.Socket(id,this,transport,req,protocol);transport.on("headers",(headers,req)=>{const isInitialRequest=!req._query.sid;if(isInitialRequest){if(this.opts.cookie){headers["Set-Cookie"]=[(0,cookie_1.serialize)(this.opts.cookie.name,id,this.opts.cookie)]}this.emit("initial_headers",headers,req)}this.emit("headers",headers,req)});transport.onRequest(req);this.clients[id]=socket;this.clientsCount++;socket.once("close",()=>{delete this.clients[id];this.clientsCount--});this.emit("connection",socket);return transport}async onWebTransportSession(session){const timeout=setTimeout(()=>{debug("the client failed to establish a bidirectional stream in the given period");session.close()},this.opts.upgradeTimeout);const streamReader=session.incomingBidirectionalStreams.getReader();const result=await streamReader.read();if(result.done){debug("session is closed");return}const stream=result.value;const transformStream=(0,engine_io_parser_1.createPacketDecoderStream)(this.opts.maxHttpBufferSize,"nodebuffer");const reader=stream.readable.pipeThrough(transformStream).getReader();const{value:value,done:done}=await reader.read();if(done){debug("stream is closed");return}clearTimeout(timeout);if(value.type!=="open"){debug("invalid WebTransport handshake");return session.close()}if(value.data===undefined){const transport=new webtransport_1.WebTransport(session,stream,reader);const id=base64id.generateId();debug('handshaking client "%s" (WebTransport)',id);const socket=new socket_1.Socket(id,this,transport,null,4);this.clients[id]=socket;this.clientsCount++;socket.once("close",()=>{delete this.clients[id];this.clientsCount--});this.emit("connection",socket);return}const sid=parseSessionId(value.data);if(!sid){debug("invalid WebTransport handshake");return session.close()}const client=this.clients[sid];if(!client){debug("upgrade attempt for closed client");session.close()}else if(client.upgrading){debug("transport has already been trying to upgrade");session.close()}else if(client.upgraded){debug("transport had already been upgraded");session.close()}else{debug("upgrading existing transport");const transport=new webtransport_1.WebTransport(session,stream,reader);client._maybeUpgrade(transport)}}}exports.BaseServer=BaseServer;BaseServer.errors={UNKNOWN_TRANSPORT:0,UNKNOWN_SID:1,BAD_HANDSHAKE_METHOD:2,BAD_REQUEST:3,FORBIDDEN:4,UNSUPPORTED_PROTOCOL_VERSION:5};BaseServer.errorMessages={0:"Transport unknown",1:"Session ID unknown",2:"Bad handshake method",3:"Bad request",4:"Forbidden",5:"Unsupported protocol version"};class WebSocketResponse{constructor(req,socket){this.req=req;this.socket=socket;req[kResponseHeaders]={}}setHeader(name,value){this.req[kResponseHeaders][name]=value}getHeader(name){return this.req[kResponseHeaders][name]}removeHeader(name){delete this.req[kResponseHeaders][name]}write(){}writeHead(){}end(){this.socket.destroy()}}class Server extends BaseServer{init(){if(!~this.opts.transports.indexOf("websocket"))return;if(this.ws)this.ws.close();this.ws=new this.opts.wsEngine({noServer:true,clientTracking:false,perMessageDeflate:this.opts.perMessageDeflate,maxPayload:this.opts.maxHttpBufferSize});if(typeof this.ws.on==="function"){this.ws.on("headers",(headersArray,req)=>{const additionalHeaders=req[kResponseHeaders]||{};delete req[kResponseHeaders];const isInitialRequest=!req._query.sid;if(isInitialRequest){this.emit("initial_headers",additionalHeaders,req)}this.emit("headers",additionalHeaders,req);debug("writing headers: %j",additionalHeaders);Object.keys(additionalHeaders).forEach(key=>{headersArray.push(`${key}: ${additionalHeaders[key]}`)})})}}cleanup(){if(this.ws){debug("closing webSocketServer");this.ws.close()}}prepare(req){if(!req._query){req._query=~req.url.indexOf("?")?qs.parse((0,url_1.parse)(req.url).query):{}}}createTransport(transportName,req){return new transports_1.default[transportName](req)}handleRequest(req,res){debug('handling "%s" http request "%s"',req.method,req.url);this.prepare(req);req.res=res;const callback=(errorCode,errorContext)=>{if(errorCode!==undefined){this.emit("connection_error",{req:req,code:errorCode,message:Server.errorMessages[errorCode],context:errorContext});abortRequest(res,errorCode,errorContext);return}if(req._query.sid){debug("setting new request for existing client");this.clients[req._query.sid].transport.onRequest(req)}else{const closeConnection=(errorCode,errorContext)=>abortRequest(res,errorCode,errorContext);this.handshake(req._query.transport,req,closeConnection)}};this._applyMiddlewares(req,res,err=>{if(err){callback(Server.errors.BAD_REQUEST,{name:"MIDDLEWARE_FAILURE"})}else{this.verify(req,false,callback)}})}handleUpgrade(req,socket,upgradeHead){this.prepare(req);const res=new WebSocketResponse(req,socket);const callback=(errorCode,errorContext)=>{if(errorCode!==undefined){this.emit("connection_error",{req:req,code:errorCode,message:Server.errorMessages[errorCode],context:errorContext});abortUpgrade(socket,errorCode,errorContext);return}const head=Buffer.from(upgradeHead);upgradeHead=null;res.writeHead();this.ws.handleUpgrade(req,socket,head,websocket=>{this.onWebSocket(req,socket,websocket)})};this._applyMiddlewares(req,res,err=>{if(err){callback(Server.errors.BAD_REQUEST,{name:"MIDDLEWARE_FAILURE"})}else{this.verify(req,true,callback)}})}onWebSocket(req,socket,websocket){websocket.on("error",onUpgradeError);if(transports_1.default[req._query.transport]!==undefined&&!transports_1.default[req._query.transport].prototype.handlesUpgrades){debug("transport doesnt handle upgraded requests");websocket.close();return}const id=req._query.sid;req.websocket=websocket;if(id){const client=this.clients[id];if(!client){debug("upgrade attempt for closed client");websocket.close()}else if(client.upgrading){debug("transport has already been trying to upgrade");websocket.close()}else if(client.upgraded){debug("transport had already been upgraded");websocket.close()}else{debug("upgrading existing transport");websocket.removeListener("error",onUpgradeError);const transport=this.createTransport(req._query.transport,req);transport.perMessageDeflate=this.opts.perMessageDeflate;client._maybeUpgrade(transport)}}else{const closeConnection=(errorCode,errorContext)=>abortUpgrade(socket,errorCode,errorContext);this.handshake(req._query.transport,req,closeConnection)}function onUpgradeError(){debug("websocket error before upgrade")}}attach(server,options={}){const path=this._computePath(options);const destroyUpgradeTimeout=options.destroyUpgradeTimeout||1e3;function check(req){return path===req.url.slice(0,path.length)}const listeners=server.listeners("request").slice(0);server.removeAllListeners("request");server.on("close",this.close.bind(this));server.on("listening",this.init.bind(this));server.on("request",(req,res)=>{if(check(req)){debug('intercepting request for path "%s"',path);this.handleRequest(req,res)}else{let i=0;const l=listeners.length;for(;i<l;i++){listeners[i].call(server,req,res)}}});if(~this.opts.transports.indexOf("websocket")){server.on("upgrade",(req,socket,head)=>{if(check(req)){this.handleUpgrade(req,socket,head)}else if(false!==options.destroyUpgrade){setTimeout(function(){if(socket.writable&&socket.bytesWritten<=0){socket.on("error",e=>{debug("error while destroying upgrade: %s",e.message)});return socket.end()}},destroyUpgradeTimeout)}})}}}exports.Server=Server;function abortRequest(res,errorCode,errorContext){const statusCode=errorCode===Server.errors.FORBIDDEN?403:400;const message=errorContext&&errorContext.message?errorContext.message:Server.errorMessages[errorCode];res.writeHead(statusCode,{"Content-Type":"application/json"});res.end(JSON.stringify({code:errorCode,message:message}))}function abortUpgrade(socket,errorCode,errorContext={}){socket.on("error",()=>{debug("ignoring error from closed connection")});if(socket.writable){const message=errorContext.message||Server.errorMessages[errorCode];const length=Buffer.byteLength(message);socket.write("HTTP/1.1 400 Bad Request\r\n"+"Connection: close\r\n"+"Content-type: text/html\r\n"+"Content-Length: "+length+"\r\n"+"\r\n"+message)}socket.destroy()}const validHdrChars=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];function checkInvalidHeaderChar(val){val+="";if(val.length<1)return false;if(!validHdrChars[val.charCodeAt(0)]){debug('invalid header, index 0, char "%s"',val.charCodeAt(0));return true}if(val.length<2)return false;if(!validHdrChars[val.charCodeAt(1)]){debug('invalid header, index 1, char "%s"',val.charCodeAt(1));return true}if(val.length<3)return false;if(!validHdrChars[val.charCodeAt(2)]){debug('invalid header, index 2, char "%s"',val.charCodeAt(2));return true}if(val.length<4)return false;if(!validHdrChars[val.charCodeAt(3)]){debug('invalid header, index 3, char "%s"',val.charCodeAt(3));return true}for(let i=4;i<val.length;++i){if(!validHdrChars[val.charCodeAt(i)]){debug('invalid header, index "%i", char "%s"',i,val.charCodeAt(i));return true}}return false}},{"./socket":101,"./transports":106,"./transports/webtransport":110,base64id:33,cookie:112,cors:47,debug:115,"engine.io-parser":96,events:undefined,querystring:undefined,url:undefined,ws:364}],101:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Socket=void 0;const events_1=require("events");const debug_1=require("debug");const timers_1=require("timers");const debug=(0,debug_1.default)("engine:socket");class Socket extends events_1.EventEmitter{get readyState(){return this._readyState}set readyState(state){debug("readyState updated from %s to %s",this._readyState,state);this._readyState=state}constructor(id,server,transport,req,protocol){super();this._readyState="opening";this.upgrading=false;this.upgraded=false;this.writeBuffer=[];this.packetsFn=[];this.sentCallbackFn=[];this.cleanupFn=[];this.id=id;this.server=server;this.request=req;this.protocol=protocol;if(req){if(req.websocket&&req.websocket._socket){this.remoteAddress=req.websocket._socket.remoteAddress}else{this.remoteAddress=req.connection.remoteAddress}}else{}this.pingTimeoutTimer=null;this.pingIntervalTimer=null;this.setTransport(transport);this.onOpen()}onOpen(){this.readyState="open";this.transport.sid=this.id;this.sendPacket("open",JSON.stringify({sid:this.id,upgrades:this.getAvailableUpgrades(),pingInterval:this.server.opts.pingInterval,pingTimeout:this.server.opts.pingTimeout,maxPayload:this.server.opts.maxHttpBufferSize}));if(this.server.opts.initialPacket){this.sendPacket("message",this.server.opts.initialPacket)}this.emit("open");if(this.protocol===3){this.resetPingTimeout()}else{this.schedulePing()}}onPacket(packet){if("open"!==this.readyState){return debug("packet received with closed socket")}debug(`received packet ${packet.type}`);this.emit("packet",packet);switch(packet.type){case"ping":if(this.transport.protocol!==3){this.onError(new Error("invalid heartbeat direction"));return}debug("got ping");this.pingTimeoutTimer.refresh();this.sendPacket("pong");this.emit("heartbeat");break;case"pong":if(this.transport.protocol===3){this.onError(new Error("invalid heartbeat direction"));return}debug("got pong");(0,timers_1.clearTimeout)(this.pingTimeoutTimer);this.pingIntervalTimer.refresh();this.emit("heartbeat");break;case"error":this.onClose("parse error");break;case"message":this.emit("data",packet.data);this.emit("message",packet.data);break}}onError(err){debug("transport error");this.onClose("transport error",err)}schedulePing(){this.pingIntervalTimer=(0,timers_1.setTimeout)(()=>{debug("writing ping packet - expecting pong within %sms",this.server.opts.pingTimeout);this.sendPacket("ping");this.resetPingTimeout()},this.server.opts.pingInterval)}resetPingTimeout(){(0,timers_1.clearTimeout)(this.pingTimeoutTimer);this.pingTimeoutTimer=(0,timers_1.setTimeout)(()=>{if(this.readyState==="closed")return;this.onClose("ping timeout")},this.protocol===3?this.server.opts.pingInterval+this.server.opts.pingTimeout:this.server.opts.pingTimeout)}setTransport(transport){const onError=this.onError.bind(this);const onReady=()=>this.flush();const onPacket=this.onPacket.bind(this);const onDrain=this.onDrain.bind(this);const onClose=this.onClose.bind(this,"transport close");this.transport=transport;this.transport.once("error",onError);this.transport.on("ready",onReady);this.transport.on("packet",onPacket);this.transport.on("drain",onDrain);this.transport.once("close",onClose);this.cleanupFn.push(function(){transport.removeListener("error",onError);transport.removeListener("ready",onReady);transport.removeListener("packet",onPacket);transport.removeListener("drain",onDrain);transport.removeListener("close",onClose)})}onDrain(){if(this.sentCallbackFn.length>0){debug("executing batch send callback");const seqFn=this.sentCallbackFn.shift();if(seqFn){for(let i=0;i<seqFn.length;i++){seqFn[i](this.transport)}}}}_maybeUpgrade(transport){debug('might upgrade socket transport from "%s" to "%s"',this.transport.name,transport.name);this.upgrading=true;const upgradeTimeoutTimer=(0,timers_1.setTimeout)(()=>{debug("client did not complete upgrade - closing transport");cleanup();if("open"===transport.readyState){transport.close()}},this.server.opts.upgradeTimeout);let checkIntervalTimer;const onPacket=packet=>{if("ping"===packet.type&&"probe"===packet.data){debug("got probe ping packet, sending pong");transport.send([{type:"pong",data:"probe"}]);this.emit("upgrading",transport);clearInterval(checkIntervalTimer);checkIntervalTimer=setInterval(check,100)}else if("upgrade"===packet.type&&this.readyState!=="closed"){debug("got upgrade packet - upgrading");cleanup();this.transport.discard();this.upgraded=true;this.clearTransport();this.setTransport(transport);this.emit("upgrade",transport);this.flush();if(this.readyState==="closing"){transport.close(()=>{this.onClose("forced close")})}}else{cleanup();transport.close()}};const check=()=>{if("polling"===this.transport.name&&this.transport.writable){debug("writing a noop packet to polling for fast upgrade");this.transport.send([{type:"noop"}])}};const cleanup=()=>{this.upgrading=false;clearInterval(checkIntervalTimer);(0,timers_1.clearTimeout)(upgradeTimeoutTimer);transport.removeListener("packet",onPacket);transport.removeListener("close",onTransportClose);transport.removeListener("error",onError);this.removeListener("close",onClose)};const onError=err=>{debug("client did not complete upgrade - %s",err);cleanup();transport.close();transport=null};const onTransportClose=()=>{onError("transport closed")};const onClose=()=>{onError("socket closed")};transport.on("packet",onPacket);transport.once("close",onTransportClose);transport.once("error",onError);this.once("close",onClose)}clearTransport(){let cleanup;const toCleanUp=this.cleanupFn.length;for(let i=0;i<toCleanUp;i++){cleanup=this.cleanupFn.shift();cleanup()}this.transport.on("error",function(){debug("error triggered by discarded transport")});this.transport.close();(0,timers_1.clearTimeout)(this.pingTimeoutTimer)}onClose(reason,description){if("closed"!==this.readyState){this.readyState="closed";(0,timers_1.clearTimeout)(this.pingIntervalTimer);(0,timers_1.clearTimeout)(this.pingTimeoutTimer);process.nextTick(()=>{this.writeBuffer=[]});this.packetsFn=[];this.sentCallbackFn=[];this.clearTransport();this.emit("close",reason,description)}}send(data,options,callback){this.sendPacket("message",data,options,callback);return this}write(data,options,callback){this.sendPacket("message",data,options,callback);return this}sendPacket(type,data,options={},callback){if("function"===typeof options){callback=options;options={}}if("closing"!==this.readyState&&"closed"!==this.readyState){debug('sending packet "%s" (%s)',type,data);options.compress=options.compress!==false;const packet={type:type,options:options};if(data)packet.data=data;this.emit("packetCreate",packet);this.writeBuffer.push(packet);if("function"===typeof callback)this.packetsFn.push(callback);this.flush()}}flush(){if("closed"!==this.readyState&&this.transport.writable&&this.writeBuffer.length){debug("flushing buffer to transport");this.emit("flush",this.writeBuffer);this.server.emit("flush",this,this.writeBuffer);const wbuf=this.writeBuffer;this.writeBuffer=[];if(this.packetsFn.length){this.sentCallbackFn.push(this.packetsFn);this.packetsFn=[]}else{this.sentCallbackFn.push(null)}this.transport.send(wbuf);this.emit("drain");this.server.emit("drain",this)}}getAvailableUpgrades(){const availableUpgrades=[];const allUpgrades=this.server.upgrades(this.transport.name);for(let i=0;i<allUpgrades.length;++i){const upg=allUpgrades[i];if(this.server.opts.transports.indexOf(upg)!==-1){availableUpgrades.push(upg)}}return availableUpgrades}close(discard){if(discard&&(this.readyState==="open"||this.readyState==="closing")){return this.closeTransport(discard)}if("open"!==this.readyState)return;this.readyState="closing";if(this.writeBuffer.length){debug("there are %d remaining packets in the buffer, waiting for the 'drain' event",this.writeBuffer.length);this.once("drain",()=>{debug("all packets have been sent, closing the transport");this.closeTransport(discard)});return}debug("the buffer is empty, closing the transport right away");this.closeTransport(discard)}closeTransport(discard){debug("closing the transport (discard? %s)",!!discard);if(discard)this.transport.discard();this.transport.close(this.onClose.bind(this,"forced close"))}}exports.Socket=Socket},{debug:115,events:undefined,timers:undefined}],102:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Transport=void 0;const events_1=require("events");const parser_v4=require("engine.io-parser");const parser_v3=require("./parser-v3/index");const debug_1=require("debug");const debug=(0,debug_1.default)("engine:transport");function noop(){}class Transport extends events_1.EventEmitter{get readyState(){return this._readyState}set readyState(state){debug("readyState updated from %s to %s (%s)",this._readyState,state,this.name);this._readyState=state}constructor(req){super();this.writable=false;this._readyState="open";this.discarded=false;this.protocol=req._query.EIO==="4"?4:3;this.parser=this.protocol===4?parser_v4:parser_v3;this.supportsBinary=!(req._query&&req._query.b64)}discard(){this.discarded=true}onRequest(req){}close(fn){if("closed"===this.readyState||"closing"===this.readyState)return;this.readyState="closing";this.doClose(fn||noop)}onError(msg,desc){if(this.listeners("error").length){const err=new Error(msg);err.type="TransportError";err.description=desc;this.emit("error",err)}else{debug("ignored transport error %s (%s)",msg,desc)}}onPacket(packet){this.emit("packet",packet)}onData(data){this.onPacket(this.parser.decodePacket(data))}onClose(){this.readyState="closed";this.emit("close")}}exports.Transport=Transport},{"./parser-v3/index":98,debug:115,"engine.io-parser":96,events:undefined}],103:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const polling_1=require("./polling");const websocket_1=require("./websocket");exports.default={polling:polling_1.Polling,websocket:websocket_1.WebSocket}},{"./polling":104,"./websocket":105}],104:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Polling=void 0;const transport_1=require("../transport");const zlib_1=require("zlib");const accepts=require("accepts");const debug_1=require("debug");const debug=(0,debug_1.default)("engine:polling");const compressionMethods={gzip:zlib_1.createGzip,deflate:zlib_1.createDeflate};class Polling extends transport_1.Transport{constructor(req){super(req);this.closeTimeout=30*1e3}get name(){return"polling"}onRequest(req){const res=req.res;req.res=null;if(req.getMethod()==="get"){this.onPollRequest(req,res)}else if(req.getMethod()==="post"){this.onDataRequest(req,res)}else{res.writeStatus("500 Internal Server Error");res.end()}}onPollRequest(req,res){if(this.req){debug("request overlap");this.onError("overlap from client");res.writeStatus("500 Internal Server Error");res.end();return}debug("setting request");this.req=req;this.res=res;const onClose=()=>{this.writable=false;this.onError("poll connection closed prematurely")};const cleanup=()=>{this.req=this.res=null};req.cleanup=cleanup;res.onAborted(onClose);this.writable=true;this.emit("ready");if(this.writable&&this.shouldClose){debug("triggering empty send to append close packet");this.send([{type:"noop"}])}}onDataRequest(req,res){if(this.dataReq){this.onError("data request overlap from client");res.writeStatus("500 Internal Server Error");res.end();return}const expectedContentLength=Number(req.headers["content-length"]);if(!expectedContentLength){this.onError("content-length header required");res.writeStatus("411 Length Required").end();return}if(expectedContentLength>this.maxHttpBufferSize){this.onError("payload too large");res.writeStatus("413 Payload Too Large").end();return}const isBinary="application/octet-stream"===req.headers["content-type"];if(isBinary&&this.protocol===4){return this.onError("invalid content")}this.dataReq=req;this.dataRes=res;let buffer;let offset=0;const headers={"Content-Type":"text/html"};this.headers(req,headers);for(let key in headers){res.writeHeader(key,String(headers[key]))}const onEnd=buffer=>{this.onData(buffer.toString());this.onDataRequestCleanup();res.cork(()=>{res.end("ok")})};res.onAborted(()=>{this.onDataRequestCleanup();this.onError("data request connection closed prematurely")});res.onData((arrayBuffer,isLast)=>{const totalLength=offset+arrayBuffer.byteLength;if(totalLength>expectedContentLength){this.onError("content-length mismatch");res.close();return}if(!buffer){if(isLast){onEnd(Buffer.from(arrayBuffer));return}buffer=Buffer.allocUnsafe(expectedContentLength)}Buffer.from(arrayBuffer).copy(buffer,offset);if(isLast){if(totalLength!=expectedContentLength){this.onError("content-length mismatch");res.writeStatus("400 Content-Length Mismatch").end();this.onDataRequestCleanup();return}onEnd(buffer);return}offset=totalLength})}onDataRequestCleanup(){this.dataReq=this.dataRes=null}onData(data){debug('received "%s"',data);const callback=packet=>{if("close"===packet.type){debug("got xhr close packet");this.onClose();return false}this.onPacket(packet)};if(this.protocol===3){this.parser.decodePayload(data,callback)}else{this.parser.decodePayload(data).forEach(callback)}}onClose(){if(this.writable){this.send([{type:"noop"}])}super.onClose()}send(packets){this.writable=false;if(this.shouldClose){debug("appending close packet to payload");packets.push({type:"close"});this.shouldClose();this.shouldClose=null}const doWrite=data=>{const compress=packets.some(packet=>packet.options&&packet.options.compress);this.write(data,{compress:compress})};if(this.protocol===3){this.parser.encodePayload(packets,this.supportsBinary,doWrite)}else{this.parser.encodePayload(packets,doWrite)}}write(data,options){debug('writing "%s"',data);this.doWrite(data,options,()=>{this.req.cleanup();this.emit("drain")})}doWrite(data,options,callback){const isString=typeof data==="string";const contentType=isString?"text/plain; charset=UTF-8":"application/octet-stream";const headers={"Content-Type":contentType};const respond=data=>{this.headers(this.req,headers);this.res.cork(()=>{Object.keys(headers).forEach(key=>{this.res.writeHeader(key,String(headers[key]))});this.res.end(data)});callback()};if(!this.httpCompression||!options.compress){respond(data);return}const len=isString?Buffer.byteLength(data):data.length;if(len<this.httpCompression.threshold){respond(data);return}const encoding=accepts(this.req).encodings(["gzip","deflate"]);if(!encoding){respond(data);return}this.compress(data,encoding,(err,data)=>{if(err){this.res.writeStatus("500 Internal Server Error");this.res.end();callback(err);return}headers["Content-Encoding"]=encoding;respond(data)})}compress(data,encoding,callback){debug("compressing");const buffers=[];let nread=0;compressionMethods[encoding](this.httpCompression).on("error",callback).on("data",function(chunk){buffers.push(chunk);nread+=chunk.length}).on("end",function(){callback(null,Buffer.concat(buffers,nread))}).end(data)}doClose(fn){debug("closing");let closeTimeoutTimer;const onClose=()=>{clearTimeout(closeTimeoutTimer);fn();this.onClose()};if(this.writable){debug("transport writable - closing right away");this.send([{type:"close"}]);onClose()}else if(this.discarded){debug("transport discarded - closing right away");onClose()}else{debug("transport not writable - buffering orderly close");this.shouldClose=onClose;closeTimeoutTimer=setTimeout(onClose,this.closeTimeout)}}headers(req,headers){headers=headers||{};const ua=req.headers["user-agent"];if(ua&&(~ua.indexOf(";MSIE")||~ua.indexOf("Trident/"))){headers["X-XSS-Protection"]="0"}headers["cache-control"]="no-store";this.emit("headers",headers,req);return headers}}exports.Polling=Polling},{"../transport":102,accepts:24,debug:115,zlib:undefined}],105:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WebSocket=void 0;const transport_1=require("../transport");const debug_1=require("debug");const debug=(0,debug_1.default)("engine:ws");class WebSocket extends transport_1.Transport{constructor(req){super(req);this.writable=false;this.perMessageDeflate=null}get name(){return"websocket"}get handlesUpgrades(){return true}send(packets){this.writable=false;for(let i=0;i<packets.length;i++){const packet=packets[i];const isLast=i+1===packets.length;const send=data=>{const isBinary=typeof data!=="string";const compress=this.perMessageDeflate&&Buffer.byteLength(data)>this.perMessageDeflate.threshold;debug('writing "%s"',data);this.socket.send(data,isBinary,compress);if(isLast){this.emit("drain");this.writable=true;this.emit("ready")}};if(packet.options&&typeof packet.options.wsPreEncoded==="string"){send(packet.options.wsPreEncoded)}else{this.parser.encodePacket(packet,this.supportsBinary,send)}}}doClose(fn){debug("closing");fn&&fn();this.socket.end()}}exports.WebSocket=WebSocket},{"../transport":102,debug:115}],106:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const polling_1=require("./polling");const polling_jsonp_1=require("./polling-jsonp");const websocket_1=require("./websocket");const webtransport_1=require("./webtransport");exports.default={polling:polling,websocket:websocket_1.WebSocket,webtransport:webtransport_1.WebTransport};function polling(req){if("string"===typeof req._query.j){return new polling_jsonp_1.JSONP(req)}else{return new polling_1.Polling(req)}}polling.upgradesTo=["websocket","webtransport"]},{"./polling":108,"./polling-jsonp":107,"./websocket":109,"./webtransport":110}],107:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JSONP=void 0;const polling_1=require("./polling");const qs=require("querystring");const rDoubleSlashes=/\\\\n/g;const rSlashes=/(\\)?\\n/g;class JSONP extends polling_1.Polling{constructor(req){super(req);this.head="___eio["+(req._query.j||"").replace(/[^0-9]/g,"")+"](";this.foot=");"}onData(data){data=qs.parse(data).d;if("string"===typeof data){data=data.replace(rSlashes,function(match,slashes){return slashes?match:"\n"});super.onData(data.replace(rDoubleSlashes,"\\n"))}}doWrite(data,options,callback){const js=JSON.stringify(data).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029");data=this.head+js+this.foot;super.doWrite(data,options,callback)}}exports.JSONP=JSONP},{"./polling":108,querystring:undefined}],108:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Polling=void 0;const transport_1=require("../transport");const zlib_1=require("zlib");const accepts=require("accepts");const debug_1=require("debug");const debug=(0,debug_1.default)("engine:polling");const compressionMethods={gzip:zlib_1.createGzip,deflate:zlib_1.createDeflate};class Polling extends transport_1.Transport{constructor(req){super(req);this.closeTimeout=30*1e3}get name(){return"polling"}onRequest(req){const res=req.res;req.res=null;if("GET"===req.method){this.onPollRequest(req,res)}else if("POST"===req.method){this.onDataRequest(req,res)}else{res.writeHead(500);res.end()}}onPollRequest(req,res){if(this.req){debug("request overlap");this.onError("overlap from client");res.writeHead(400);res.end();return}debug("setting request");this.req=req;this.res=res;const onClose=()=>{this.onError("poll connection closed prematurely")};const cleanup=()=>{req.removeListener("close",onClose);this.req=this.res=null};req.cleanup=cleanup;req.on("close",onClose);this.writable=true;this.emit("ready");if(this.writable&&this.shouldClose){debug("triggering empty send to append close packet");this.send([{type:"noop"}])}}onDataRequest(req,res){if(this.dataReq){this.onError("data request overlap from client");res.writeHead(400);res.end();return}const isBinary="application/octet-stream"===req.headers["content-type"];if(isBinary&&this.protocol===4){return this.onError("invalid content")}this.dataReq=req;this.dataRes=res;let chunks=isBinary?Buffer.concat([]):"";const cleanup=()=>{req.removeListener("data",onData);req.removeListener("end",onEnd);req.removeListener("close",onClose);this.dataReq=this.dataRes=chunks=null};const onClose=()=>{cleanup();this.onError("data request connection closed prematurely")};const onData=data=>{let contentLength;if(isBinary){chunks=Buffer.concat([chunks,data]);contentLength=chunks.length}else{chunks+=data;contentLength=Buffer.byteLength(chunks)}if(contentLength>this.maxHttpBufferSize){res.writeHead(413).end();cleanup()}};const onEnd=()=>{this.onData(chunks);const headers={"Content-Type":"text/html","Content-Length":"2"};res.writeHead(200,this.headers(req,headers));res.end("ok");cleanup()};req.on("close",onClose);if(!isBinary)req.setEncoding("utf8");req.on("data",onData);req.on("end",onEnd)}onData(data){debug('received "%s"',data);const callback=packet=>{if("close"===packet.type){debug("got xhr close packet");this.onClose();return false}this.onPacket(packet)};if(this.protocol===3){this.parser.decodePayload(data,callback)}else{this.parser.decodePayload(data).forEach(callback)}}onClose(){if(this.writable){this.send([{type:"noop"}])}super.onClose()}send(packets){this.writable=false;if(this.shouldClose){debug("appending close packet to payload");packets.push({type:"close"});this.shouldClose();this.shouldClose=null}const doWrite=data=>{const compress=packets.some(packet=>packet.options&&packet.options.compress);this.write(data,{compress:compress})};if(this.protocol===3){this.parser.encodePayload(packets,this.supportsBinary,doWrite)}else{this.parser.encodePayload(packets,doWrite)}}write(data,options){debug('writing "%s"',data);this.doWrite(data,options,()=>{this.req.cleanup();this.emit("drain")})}doWrite(data,options,callback){const isString=typeof data==="string";const contentType=isString?"text/plain; charset=UTF-8":"application/octet-stream";const headers={"Content-Type":contentType};const respond=data=>{headers["Content-Length"]="string"===typeof data?Buffer.byteLength(data):data.length;this.res.writeHead(200,this.headers(this.req,headers));this.res.end(data);callback()};if(!this.httpCompression||!options.compress){respond(data);return}const len=isString?Buffer.byteLength(data):data.length;if(len<this.httpCompression.threshold){respond(data);return}const encoding=accepts(this.req).encodings(["gzip","deflate"]);if(!encoding){respond(data);return}this.compress(data,encoding,(err,data)=>{if(err){this.res.writeHead(500);this.res.end();callback(err);return}headers["Content-Encoding"]=encoding;respond(data)})}compress(data,encoding,callback){debug("compressing");const buffers=[];let nread=0;compressionMethods[encoding](this.httpCompression).on("error",callback).on("data",function(chunk){buffers.push(chunk);nread+=chunk.length}).on("end",function(){callback(null,Buffer.concat(buffers,nread))}).end(data)}doClose(fn){debug("closing");let closeTimeoutTimer;if(this.dataReq){debug("aborting ongoing data request");this.dataReq.destroy()}const onClose=()=>{clearTimeout(closeTimeoutTimer);fn();this.onClose()};if(this.writable){debug("transport writable - closing right away");this.send([{type:"close"}]);onClose()}else if(this.discarded){debug("transport discarded - closing right away");onClose()}else{debug("transport not writable - buffering orderly close");this.shouldClose=onClose;closeTimeoutTimer=setTimeout(onClose,this.closeTimeout)}}headers(req,headers={}){const ua=req.headers["user-agent"];if(ua&&(~ua.indexOf(";MSIE")||~ua.indexOf("Trident/"))){headers["X-XSS-Protection"]="0"}headers["cache-control"]="no-store";this.emit("headers",headers,req);return headers}}exports.Polling=Polling},{"../transport":102,accepts:24,debug:115,zlib:undefined}],109:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WebSocket=void 0;const transport_1=require("../transport");const debug_1=require("debug");const debug=(0,debug_1.default)("engine:ws");class WebSocket extends transport_1.Transport{constructor(req){super(req);this._doSend=data=>{this.socket.send(data,this._onSent)};this._doSendLast=data=>{this.socket.send(data,this._onSentLast)};this._onSent=err=>{if(err){this.onError("write error",err.stack)}};this._onSentLast=err=>{if(err){this.onError("write error",err.stack)}else{this.emit("drain");this.writable=true;this.emit("ready")}};this.socket=req.websocket;this.socket.on("message",(data,isBinary)=>{const message=isBinary?data:data.toString();debug('received "%s"',message);super.onData(message)});this.socket.once("close",this.onClose.bind(this));this.socket.on("error",this.onError.bind(this));this.writable=true;this.perMessageDeflate=null}get name(){return"websocket"}get handlesUpgrades(){return true}send(packets){this.writable=false;for(let i=0;i<packets.length;i++){const packet=packets[i];const isLast=i+1===packets.length;if(this._canSendPreEncodedFrame(packet)){this.socket._sender.sendFrame(packet.options.wsPreEncodedFrame,isLast?this._onSentLast:this._onSent)}else{this.parser.encodePacket(packet,this.supportsBinary,isLast?this._doSendLast:this._doSend)}}}_canSendPreEncodedFrame(packet){var _a,_b,_c;return!this.perMessageDeflate&&typeof((_b=(_a=this.socket)===null||_a===void 0?void 0:_a._sender)===null||_b===void 0?void 0:_b.sendFrame)==="function"&&((_c=packet.options)===null||_c===void 0?void 0:_c.wsPreEncodedFrame)!==undefined}doClose(fn){debug("closing");this.socket.close();fn&&fn()}}exports.WebSocket=WebSocket},{"../transport":102,debug:115}],110:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WebTransport=void 0;const transport_1=require("../transport");const debug_1=require("debug");const engine_io_parser_1=require("engine.io-parser");const debug=(0,debug_1.default)("engine:webtransport");class WebTransport extends transport_1.Transport{constructor(session,stream,reader){super({_query:{EIO:"4"}});this.session=session;const transformStream=(0,engine_io_parser_1.createPacketEncoderStream)();transformStream.readable.pipeTo(stream.writable).catch(()=>{debug("the stream was closed")});this.writer=transformStream.writable.getWriter();(async()=>{try{while(true){const{value:value,done:done}=await reader.read();if(done){debug("session is closed");break}debug("received chunk: %o",value);this.onPacket(value)}}catch(e){debug("error while reading: %s",e.message)}})();session.closed.then(()=>this.onClose());this.writable=true}get name(){return"webtransport"}async send(packets){this.writable=false;try{for(let i=0;i<packets.length;i++){const packet=packets[i];await this.writer.write(packet)}}catch(e){debug("error while writing: %s",e.message)}this.emit("drain");this.writable=true;this.emit("ready")}doClose(fn){debug("closing WebTransport session");this.session.close();fn&&fn()}}exports.WebTransport=WebTransport},{"../transport":102,debug:115,"engine.io-parser":96}],111:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.uServer=void 0;const debug_1=require("debug");const server_1=require("./server");const transports_uws_1=require("./transports-uws");const debug=(0,debug_1.default)("engine:uws");class uServer extends server_1.BaseServer{init(){}cleanup(){}prepare(req,res){req.method=req.getMethod().toUpperCase();req.url=req.getUrl();const params=new URLSearchParams(req.getQuery());req._query=Object.fromEntries(params.entries());req.headers={};req.forEach((key,value)=>{req.headers[key]=value});req.connection={remoteAddress:Buffer.from(res.getRemoteAddressAsText()).toString()};res.onAborted(()=>{debug("response has been aborted")})}createTransport(transportName,req){return new transports_uws_1.default[transportName](req)}attach(app,options={}){const path=this._computePath(options);app.any(path,this.handleRequest.bind(this)).ws(path,{compression:options.compression,idleTimeout:options.idleTimeout,maxBackpressure:options.maxBackpressure,maxPayloadLength:this.opts.maxHttpBufferSize,upgrade:this.handleUpgrade.bind(this),open:ws=>{const transport=ws.getUserData().transport;transport.socket=ws;transport.writable=true;transport.emit("ready")},message:(ws,message,isBinary)=>{ws.getUserData().transport.onData(isBinary?message:Buffer.from(message).toString())},close:(ws,code,message)=>{ws.getUserData().transport.onClose(code,message)}})}_applyMiddlewares(req,res,callback){if(this.middlewares.length===0){return callback()}req.res=new ResponseWrapper(res);super._applyMiddlewares(req,req.res,err=>{req.res.writeHead();callback(err)})}handleRequest(res,req){debug('handling "%s" http request "%s"',req.getMethod(),req.getUrl());this.prepare(req,res);req.res=res;const callback=(errorCode,errorContext)=>{if(errorCode!==undefined){this.emit("connection_error",{req:req,code:errorCode,message:server_1.Server.errorMessages[errorCode],context:errorContext});this.abortRequest(req.res,errorCode,errorContext);return}if(req._query.sid){debug("setting new request for existing client");this.clients[req._query.sid].transport.onRequest(req)}else{const closeConnection=(errorCode,errorContext)=>this.abortRequest(res,errorCode,errorContext);this.handshake(req._query.transport,req,closeConnection)}};this._applyMiddlewares(req,res,err=>{if(err){callback(server_1.Server.errors.BAD_REQUEST,{name:"MIDDLEWARE_FAILURE"})}else{this.verify(req,false,callback)}})}handleUpgrade(res,req,context){debug("on upgrade");this.prepare(req,res);req.res=res;const callback=async(errorCode,errorContext)=>{if(errorCode!==undefined){this.emit("connection_error",{req:req,code:errorCode,message:server_1.Server.errorMessages[errorCode],context:errorContext});this.abortRequest(res,errorCode,errorContext);return}const id=req._query.sid;let transport;if(id){const client=this.clients[id];if(!client){debug("upgrade attempt for closed client");return res.close()}else if(client.upgrading){debug("transport has already been trying to upgrade");return res.close()}else if(client.upgraded){debug("transport had already been upgraded");return res.close()}else{debug("upgrading existing transport");transport=this.createTransport(req._query.transport,req);client._maybeUpgrade(transport)}}else{transport=await this.handshake(req._query.transport,req,(errorCode,errorContext)=>this.abortRequest(res,errorCode,errorContext));if(!transport){return}}req.res.writeStatus("101 Switching Protocols");res.upgrade({transport:transport},req.getHeader("sec-websocket-key"),req.getHeader("sec-websocket-protocol"),req.getHeader("sec-websocket-extensions"),context)};this._applyMiddlewares(req,res,err=>{if(err){callback(server_1.Server.errors.BAD_REQUEST,{name:"MIDDLEWARE_FAILURE"})}else{this.verify(req,true,callback)}})}abortRequest(res,errorCode,errorContext){const statusCode=errorCode===server_1.Server.errors.FORBIDDEN?"403 Forbidden":"400 Bad Request";const message=errorContext&&errorContext.message?errorContext.message:server_1.Server.errorMessages[errorCode];res.writeStatus(statusCode);res.writeHeader("Content-Type","application/json");res.end(JSON.stringify({code:errorCode,message:message}))}}exports.uServer=uServer;class ResponseWrapper{constructor(res){this.res=res;this.statusWritten=false;this.headers=[];this.isAborted=false}set statusCode(status){if(!status){return}this.writeStatus(status===200?"200 OK":"204 No Content")}writeHead(status){this.statusCode=status}setHeader(key,value){if(Array.isArray(value)){value.forEach(val=>{this.writeHeader(key,val)})}else{this.writeHeader(key,value)}}removeHeader(){}getHeader(){}writeStatus(status){if(this.isAborted)return;this.res.writeStatus(status);this.statusWritten=true;this.writeBufferedHeaders();return this}writeHeader(key,value){if(this.isAborted)return;if(key==="Content-Length"){return}if(this.statusWritten){this.res.writeHeader(key,value)}else{this.headers.push([key,value])}}writeBufferedHeaders(){this.headers.forEach(([key,value])=>{this.res.writeHeader(key,value)})}end(data){if(this.isAborted)return;this.res.cork(()=>{if(!this.statusWritten){this.writeBufferedHeaders()}this.res.end(data)})}onData(fn){if(this.isAborted)return;this.res.onData(fn)}onAborted(fn){if(this.isAborted)return;this.res.onAborted(()=>{this.isAborted=true;fn()})}cork(fn){if(this.isAborted)return;this.res.cork(fn)}}},{"./server":100,"./transports-uws":103,debug:115}],112:[function(require,module,exports){
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
"use strict";exports.parse=parse;exports.serialize=serialize;var __toString=Object.prototype.toString;var __hasOwnProperty=Object.prototype.hasOwnProperty;var cookieNameRegExp=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/;var cookieValueRegExp=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/;var domainValueRegExp=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i;var pathValueRegExp=/^[\u0020-\u003A\u003D-\u007E]*$/;function parse(str,opt){if(typeof str!=="string"){throw new TypeError("argument str must be a string")}var obj={};var len=str.length;if(len<2)return obj;var dec=opt&&opt.decode||decode;var index=0;var eqIdx=0;var endIdx=0;do{eqIdx=str.indexOf("=",index);if(eqIdx===-1)break;endIdx=str.indexOf(";",index);if(endIdx===-1){endIdx=len}else if(eqIdx>endIdx){index=str.lastIndexOf(";",eqIdx-1)+1;continue}var keyStartIdx=startIndex(str,index,eqIdx);var keyEndIdx=endIndex(str,eqIdx,keyStartIdx);var key=str.slice(keyStartIdx,keyEndIdx);if(!__hasOwnProperty.call(obj,key)){var valStartIdx=startIndex(str,eqIdx+1,endIdx);var valEndIdx=endIndex(str,endIdx,valStartIdx);if(str.charCodeAt(valStartIdx)===34&&str.charCodeAt(valEndIdx-1)===34){valStartIdx++;valEndIdx--}var val=str.slice(valStartIdx,valEndIdx);obj[key]=tryDecode(val,dec)}index=endIdx+1}while(index<len);return obj}function startIndex(str,index,max){do{var code=str.charCodeAt(index);if(code!==32&&code!==9)return index}while(++index<max);return max}function endIndex(str,index,min){while(index>min){var code=str.charCodeAt(--index);if(code!==32&&code!==9)return index+1}return min}function serialize(name,val,opt){var enc=opt&&opt.encode||encodeURIComponent;if(typeof enc!=="function"){throw new TypeError("option encode is invalid")}if(!cookieNameRegExp.test(name)){throw new TypeError("argument name is invalid")}var value=enc(val);if(!cookieValueRegExp.test(value)){throw new TypeError("argument val is invalid")}var str=name+"="+value;if(!opt)return str;if(null!=opt.maxAge){var maxAge=Math.floor(opt.maxAge);if(!isFinite(maxAge)){throw new TypeError("option maxAge is invalid")}str+="; Max-Age="+maxAge}if(opt.domain){if(!domainValueRegExp.test(opt.domain)){throw new TypeError("option domain is invalid")}str+="; Domain="+opt.domain}if(opt.path){if(!pathValueRegExp.test(opt.path)){throw new TypeError("option path is invalid")}str+="; Path="+opt.path}if(opt.expires){var expires=opt.expires;if(!isDate(expires)||isNaN(expires.valueOf())){throw new TypeError("option expires is invalid")}str+="; Expires="+expires.toUTCString()}if(opt.httpOnly){str+="; HttpOnly"}if(opt.secure){str+="; Secure"}if(opt.partitioned){str+="; Partitioned"}if(opt.priority){var priority=typeof opt.priority==="string"?opt.priority.toLowerCase():opt.priority;switch(priority){case"low":str+="; Priority=Low";break;case"medium":str+="; Priority=Medium";break;case"high":str+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(opt.sameSite){var sameSite=typeof opt.sameSite==="string"?opt.sameSite.toLowerCase():opt.sameSite;switch(sameSite){case true:str+="; SameSite=Strict";break;case"lax":str+="; SameSite=Lax";break;case"strict":str+="; SameSite=Strict";break;case"none":str+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return str}function decode(str){return str.indexOf("%")!==-1?decodeURIComponent(str):str}function isDate(val){return __toString.call(val)==="[object Date]"}function tryDecode(str,decode){try{return decode(str)}catch(e){return str}}},{}],113:[function(require,module,exports){exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage=localstorage();exports.destroy=(()=>{let warned=false;return()=>{if(!warned){warned=true;console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}}})();exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function useColors(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)){return true}if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false}let m;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&(m=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(m[1],10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function formatArgs(args){args[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+args[0]+(this.useColors?"%c ":" ")+"+"+module.exports.humanize(this.diff);if(!this.useColors){return}const c="color: "+this.color;args.splice(1,0,c,"color: inherit");let index=0;let lastC=0;args[0].replace(/%[a-zA-Z%]/g,match=>{if(match==="%%"){return}index++;if(match==="%c"){lastC=index}});args.splice(lastC,0,c)}exports.log=console.debug||console.log||(()=>{});function save(namespaces){try{if(namespaces){exports.storage.setItem("debug",namespaces)}else{exports.storage.removeItem("debug")}}catch(error){}}function load(){let r;try{r=exports.storage.getItem("debug")}catch(error){}if(!r&&typeof process!=="undefined"&&"env"in process){r=process.env.DEBUG}return r}function localstorage(){try{return localStorage}catch(error){}}module.exports=require("./common")(exports);const{formatters:formatters}=module.exports;formatters.j=function(v){try{return JSON.stringify(v)}catch(error){return"[UnexpectedJSONParseError]: "+error.message}}},{"./common":114}],114:[function(require,module,exports){function setup(env){createDebug.debug=createDebug;createDebug.default=createDebug;createDebug.coerce=coerce;createDebug.disable=disable;createDebug.enable=enable;createDebug.enabled=enabled;createDebug.humanize=require("ms");createDebug.destroy=destroy;Object.keys(env).forEach(key=>{createDebug[key]=env[key]});createDebug.names=[];createDebug.skips=[];createDebug.formatters={};function selectColor(namespace){let hash=0;for(let i=0;i<namespace.length;i++){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0}return createDebug.colors[Math.abs(hash)%createDebug.colors.length]}createDebug.selectColor=selectColor;function createDebug(namespace){let prevTime;let enableOverride=null;let namespacesCache;let enabledCache;function debug(...args){if(!debug.enabled){return}const self=debug;const curr=Number(new Date);const ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;args[0]=createDebug.coerce(args[0]);if(typeof args[0]!=="string"){args.unshift("%O")}let index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,(match,format)=>{if(match==="%%"){return"%"}index++;const formatter=createDebug.formatters[format];if(typeof formatter==="function"){const val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});createDebug.formatArgs.call(self,args);const logFn=self.log||createDebug.log;logFn.apply(self,args)}debug.namespace=namespace;debug.useColors=createDebug.useColors();debug.color=createDebug.selectColor(namespace);debug.extend=extend;debug.destroy=createDebug.destroy;Object.defineProperty(debug,"enabled",{enumerable:true,configurable:false,get:()=>{if(enableOverride!==null){return enableOverride}if(namespacesCache!==createDebug.namespaces){namespacesCache=createDebug.namespaces;enabledCache=createDebug.enabled(namespace)}return enabledCache},set:v=>{enableOverride=v}});if(typeof createDebug.init==="function"){createDebug.init(debug)}return debug}function extend(namespace,delimiter){const newDebug=createDebug(this.namespace+(typeof delimiter==="undefined"?":":delimiter)+namespace);newDebug.log=this.log;return newDebug}function enable(namespaces){createDebug.save(namespaces);createDebug.namespaces=namespaces;createDebug.names=[];createDebug.skips=[];let i;const split=(typeof namespaces==="string"?namespaces:"").split(/[\s,]+/);const len=split.length;for(i=0;i<len;i++){if(!split[i]){continue}namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){createDebug.skips.push(new RegExp("^"+namespaces.slice(1)+"$"))}else{createDebug.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){const namespaces=[...createDebug.names.map(toNamespace),...createDebug.skips.map(toNamespace).map(namespace=>"-"+namespace)].join(",");createDebug.enable("");return namespaces}function enabled(name){if(name[name.length-1]==="*"){return true}let i;let len;for(i=0,len=createDebug.skips.length;i<len;i++){if(createDebug.skips[i].test(name)){return false}}for(i=0,len=createDebug.names.length;i<len;i++){if(createDebug.names[i].test(name)){return true}}return false}function toNamespace(regexp){return regexp.toString().substring(2,regexp.toString().length-2).replace(/\.\*\?$/,"*")}function coerce(val){if(val instanceof Error){return val.stack||val.message}return val}function destroy(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}createDebug.enable(createDebug.load());return createDebug}module.exports=setup},{ms:212}],115:[function(require,module,exports){if(typeof process==="undefined"||process.type==="renderer"||process.browser===true||process.__nwjs){module.exports=require("./browser.js")}else{module.exports=require("./node.js")}},{"./browser.js":113,"./node.js":116}],116:[function(require,module,exports){const tty=require("tty");const util=require("util");exports.init=init;exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.destroy=util.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");exports.colors=[6,2,3,4,5,1];try{const supportsColor=require("supports-color");if(supportsColor&&(supportsColor.stderr||supportsColor).level>=2){exports.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}}catch(error){}exports.inspectOpts=Object.keys(process.env).filter(key=>/^debug_/i.test(key)).reduce((obj,key)=>{const prop=key.substring(6).toLowerCase().replace(/_([a-z])/g,(_,k)=>k.toUpperCase());let val=process.env[key];if(/^(yes|on|true|enabled)$/i.test(val)){val=true}else if(/^(no|off|false|disabled)$/i.test(val)){val=false}else if(val==="null"){val=null}else{val=Number(val)}obj[prop]=val;return obj},{});function useColors(){return"colors"in exports.inspectOpts?Boolean(exports.inspectOpts.colors):tty.isatty(process.stderr.fd)}function formatArgs(args){const{namespace:name,useColors:useColors}=this;if(useColors){const c=this.color;const colorCode="[3"+(c<8?c:"8;5;"+c);const prefix=`  ${colorCode};1m${name} [0m`;args[0]=prefix+args[0].split("\n").join("\n"+prefix);args.push(colorCode+"m+"+module.exports.humanize(this.diff)+"[0m")}else{args[0]=getDate()+name+" "+args[0]}}function getDate(){if(exports.inspectOpts.hideDate){return""}return(new Date).toISOString()+" "}function log(...args){return process.stderr.write(util.formatWithOptions(exports.inspectOpts,...args)+"\n")}function save(namespaces){if(namespaces){process.env.DEBUG=namespaces}else{delete process.env.DEBUG}}function load(){return process.env.DEBUG}function init(debug){debug.inspectOpts={};const keys=Object.keys(exports.inspectOpts);for(let i=0;i<keys.length;i++){debug.inspectOpts[keys[i]]=exports.inspectOpts[keys[i]]}}module.exports=require("./common")(exports);const{formatters:formatters}=module.exports;formatters.o=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts).split("\n").map(str=>str.trim()).join(" ")};formatters.O=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts)}},{"./common":114,"supports-color":341,tty:undefined,util:undefined}],117:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Array.from:require("./shim")},{"./is-implemented":118,"./shim":119}],118:[function(require,module,exports){"use strict";module.exports=function(){var from=Array.from,arr,result;if(typeof from!=="function")return false;arr=["raz","dwa"];result=from(arr);return Boolean(result&&result!==arr&&result[1]==="dwa")}},{}],119:[function(require,module,exports){"use strict";var iteratorSymbol=require("es6-symbol").iterator,isArguments=require("../../function/is-arguments"),isFunction=require("../../function/is-function"),toPosInt=require("../../number/to-pos-integer"),callable=require("../../object/valid-callable"),validValue=require("../../object/valid-value"),isValue=require("../../object/is-value"),isString=require("../../string/is-string"),isArray=Array.isArray,call=Function.prototype.call,desc={configurable:true,enumerable:true,writable:true,value:null},defineProperty=Object.defineProperty;module.exports=function(arrayLike){var mapFn=arguments[1],thisArg=arguments[2],Context,i,j,arr,length,code,iterator,result,getIterator,value;arrayLike=Object(validValue(arrayLike));if(isValue(mapFn))callable(mapFn);if(!this||this===Array||!isFunction(this)){if(!mapFn){if(isArguments(arrayLike)){length=arrayLike.length;if(length!==1)return Array.apply(null,arrayLike);arr=new Array(1);arr[0]=arrayLike[0];return arr}if(isArray(arrayLike)){arr=new Array(length=arrayLike.length);for(i=0;i<length;++i)arr[i]=arrayLike[i];return arr}}arr=[]}else{Context=this}if(!isArray(arrayLike)){if((getIterator=arrayLike[iteratorSymbol])!==undefined){iterator=callable(getIterator).call(arrayLike);if(Context)arr=new Context;result=iterator.next();i=0;while(!result.done){value=mapFn?call.call(mapFn,thisArg,result.value,i):result.value;if(Context){desc.value=value;defineProperty(arr,i,desc)}else{arr[i]=value}result=iterator.next();++i}length=i}else if(isString(arrayLike)){length=arrayLike.length;if(Context)arr=new Context;for(i=0,j=0;i<length;++i){value=arrayLike[i];if(i+1<length){code=value.charCodeAt(0);if(code>=55296&&code<=56319)value+=arrayLike[++i]}value=mapFn?call.call(mapFn,thisArg,value,j):value;if(Context){desc.value=value;defineProperty(arr,j,desc)}else{arr[j]=value}++j}length=j}}if(length===undefined){length=toPosInt(arrayLike.length);if(Context)arr=new Context(length);for(i=0;i<length;++i){value=mapFn?call.call(mapFn,thisArg,arrayLike[i],i):arrayLike[i];if(Context){desc.value=value;defineProperty(arr,i,desc)}else{arr[i]=value}}}if(Context){desc.value=null;arr.length=length}return arr}},{"../../function/is-arguments":121,"../../function/is-function":122,"../../number/to-pos-integer":128,"../../object/is-value":136,"../../object/valid-callable":146,"../../object/valid-value":147,"../../string/is-string":151,"es6-symbol":152}],120:[function(require,module,exports){"use strict";module.exports=function(value){return value}},{}],121:[function(require,module,exports){"use strict";var objToString=Object.prototype.toString,id=objToString.call(function(){return arguments}());module.exports=function(value){return objToString.call(value)===id}},{}],122:[function(require,module,exports){"use strict";var objToString=Object.prototype.toString,isFunctionStringTag=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);module.exports=function(value){return typeof value==="function"&&isFunctionStringTag(objToString.call(value))}},{}],123:[function(require,module,exports){"use strict";module.exports=function(){}},{}],124:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Math.sign:require("./shim")},{"./is-implemented":125,"./shim":126}],125:[function(require,module,exports){"use strict";module.exports=function(){var sign=Math.sign;if(typeof sign!=="function")return false;return sign(10)===1&&sign(-20)===-1}},{}],126:[function(require,module,exports){"use strict";module.exports=function(value){value=Number(value);if(isNaN(value)||value===0)return value;return value>0?1:-1}},{}],127:[function(require,module,exports){"use strict";var sign=require("../math/sign"),abs=Math.abs,floor=Math.floor;module.exports=function(value){if(isNaN(value))return 0;value=Number(value);if(value===0||!isFinite(value))return value;return sign(value)*floor(abs(value))}},{"../math/sign":124}],128:[function(require,module,exports){"use strict";var toInteger=require("./to-integer"),max=Math.max;module.exports=function(value){return max(0,toInteger(value))}},{"./to-integer":127}],129:[function(require,module,exports){"use strict";var callable=require("./valid-callable"),value=require("./valid-value"),bind=Function.prototype.bind,call=Function.prototype.call,keys=Object.keys,objPropertyIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=function(method,defVal){return function(obj,cb){var list,thisArg=arguments[2],compareFn=arguments[3];obj=Object(value(obj));callable(cb);list=keys(obj);if(compareFn){list.sort(typeof compareFn==="function"?bind.call(compareFn,obj):undefined)}if(typeof method!=="function")method=list[method];return call.call(method,list,function(key,index){if(!objPropertyIsEnumerable.call(obj,key))return defVal;return call.call(cb,thisArg,obj[key],key,obj,index)})}}},{"./valid-callable":146,"./valid-value":147}],130:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Object.assign:require("./shim")},{"./is-implemented":131,"./shim":132}],131:[function(require,module,exports){"use strict";module.exports=function(){var assign=Object.assign,obj;if(typeof assign!=="function")return false;obj={foo:"raz"};assign(obj,{bar:"dwa"},{trzy:"trzy"});return obj.foo+obj.bar+obj.trzy==="razdwatrzy"}},{}],132:[function(require,module,exports){"use strict";var keys=require("../keys"),value=require("../valid-value"),max=Math.max;module.exports=function(dest,src){var error,i,length=max(arguments.length,2),assign;dest=Object(value(dest));assign=function(key){try{dest[key]=src[key]}catch(e){if(!error)error=e}};for(i=1;i<length;++i){src=arguments[i];keys(src).forEach(assign)}if(error!==undefined)throw error;return dest}},{"../keys":137,"../valid-value":147}],133:[function(require,module,exports){"use strict";var create=Object.create,shim;if(!require("./set-prototype-of/is-implemented")()){shim=require("./set-prototype-of/shim")}module.exports=function(){var nullObject,polyProps,desc;if(!shim)return create;if(shim.level!==1)return create;nullObject={};polyProps={};desc={configurable:false,enumerable:false,writable:true,value:undefined};Object.getOwnPropertyNames(Object.prototype).forEach(function(name){if(name==="__proto__"){polyProps[name]={configurable:true,enumerable:false,writable:true,value:undefined};return}polyProps[name]=desc});Object.defineProperties(nullObject,polyProps);Object.defineProperty(shim,"nullPolyfill",{configurable:false,enumerable:false,writable:false,value:nullObject});return function(prototype,props){return create(prototype===null?nullObject:prototype,props)}}()},{"./set-prototype-of/is-implemented":143,"./set-prototype-of/shim":144}],134:[function(require,module,exports){"use strict";module.exports=require("./_iterate")("forEach")},{"./_iterate":129}],135:[function(require,module,exports){"use strict";var isValue=require("./is-value");var map={function:true,object:true};module.exports=function(value){return isValue(value)&&map[typeof value]||false}},{"./is-value":136}],136:[function(require,module,exports){"use strict";var _undefined=require("../function/noop")();module.exports=function(val){return val!==_undefined&&val!==null}},{"../function/noop":123}],137:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Object.keys:require("./shim")},{"./is-implemented":138,"./shim":139}],138:[function(require,module,exports){"use strict";module.exports=function(){try{Object.keys("primitive");return true}catch(e){return false}}},{}],139:[function(require,module,exports){"use strict";var isValue=require("../is-value");var keys=Object.keys;module.exports=function(object){return keys(isValue(object)?Object(object):object)}},{"../is-value":136}],140:[function(require,module,exports){"use strict";var callable=require("./valid-callable"),forEach=require("./for-each"),call=Function.prototype.call;module.exports=function(obj,cb){var result={},thisArg=arguments[2];callable(cb);forEach(obj,function(value,key,targetObj,index){result[key]=call.call(cb,thisArg,value,key,targetObj,index)});return result}},{"./for-each":134,"./valid-callable":146}],141:[function(require,module,exports){"use strict";var isValue=require("./is-value");var forEach=Array.prototype.forEach,create=Object.create;var process=function(src,obj){var key;for(key in src)obj[key]=src[key]};module.exports=function(opts1){var result=create(null);forEach.call(arguments,function(options){if(!isValue(options))return;process(Object(options),result)});return result}},{"./is-value":136}],142:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Object.setPrototypeOf:require("./shim")},{"./is-implemented":143,"./shim":144}],143:[function(require,module,exports){"use strict";var create=Object.create,getPrototypeOf=Object.getPrototypeOf,plainObject={};module.exports=function(){var setPrototypeOf=Object.setPrototypeOf,customCreate=arguments[0]||create;if(typeof setPrototypeOf!=="function")return false;return getPrototypeOf(setPrototypeOf(customCreate(null),plainObject))===plainObject}},{}],144:[function(require,module,exports){"use strict";var isObject=require("../is-object"),value=require("../valid-value"),objIsPrototypeOf=Object.prototype.isPrototypeOf,defineProperty=Object.defineProperty,nullDesc={configurable:true,enumerable:false,writable:true,value:undefined},validate;validate=function(obj,prototype){value(obj);if(prototype===null||isObject(prototype))return obj;throw new TypeError("Prototype must be null or an object")};module.exports=function(status){var fn,set;if(!status)return null;if(status.level===2){if(status.set){set=status.set;fn=function(obj,prototype){set.call(validate(obj,prototype),prototype);return obj}}else{fn=function(obj,prototype){validate(obj,prototype).__proto__=prototype;return obj}}}else{fn=function self(obj,prototype){var isNullBase;validate(obj,prototype);isNullBase=objIsPrototypeOf.call(self.nullPolyfill,obj);if(isNullBase)delete self.nullPolyfill.__proto__;if(prototype===null)prototype=self.nullPolyfill;obj.__proto__=prototype;if(isNullBase)defineProperty(self.nullPolyfill,"__proto__",nullDesc);return obj}}return Object.defineProperty(fn,"level",{configurable:false,enumerable:false,writable:false,value:status.level})}(function(){var tmpObj1=Object.create(null),tmpObj2={},set,desc=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(desc){try{set=desc.set;set.call(tmpObj1,tmpObj2)}catch(ignore){}if(Object.getPrototypeOf(tmpObj1)===tmpObj2)return{set:set,level:2}}tmpObj1.__proto__=tmpObj2;if(Object.getPrototypeOf(tmpObj1)===tmpObj2)return{level:2};tmpObj1={};tmpObj1.__proto__=tmpObj2;if(Object.getPrototypeOf(tmpObj1)===tmpObj2)return{level:1};return false}());require("../create")},{"../create":133,"../is-object":135,"../valid-value":147}],145:[function(require,module,exports){"use strict";var callable=require("./valid-callable"),isValue=require("./is-value"),forEach=require("./for-each"),call=Function.prototype.call,defaultCb=function(value,key){return[key,value]};module.exports=function(obj){var a=[],cb=arguments[1],thisArg=arguments[2];cb=isValue(cb)?callable(cb):defaultCb;forEach(obj,function(value,key,targetObj,index){a.push(call.call(cb,thisArg,value,key,this,index))},obj,arguments[3]);return a}},{"./for-each":134,"./is-value":136,"./valid-callable":146}],146:[function(require,module,exports){"use strict";module.exports=function(fn){if(typeof fn!=="function")throw new TypeError(fn+" is not a function");return fn}},{}],147:[function(require,module,exports){"use strict";var isValue=require("./is-value");module.exports=function(value){if(!isValue(value))throw new TypeError("Cannot use null or undefined");return value}},{"./is-value":136}],148:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?String.prototype.contains:require("./shim")},{"./is-implemented":149,"./shim":150}],149:[function(require,module,exports){"use strict";var str="razdwatrzy";module.exports=function(){if(typeof str.contains!=="function")return false;return str.contains("dwa")===true&&str.contains("foo")===false}},{}],150:[function(require,module,exports){"use strict";var indexOf=String.prototype.indexOf;module.exports=function(searchString){return indexOf.call(this,searchString,arguments[1])>-1}},{}],151:[function(require,module,exports){"use strict";var objToString=Object.prototype.toString,id=objToString.call("");module.exports=function(value){return typeof value==="string"||value&&typeof value==="object"&&(value instanceof String||objToString.call(value)===id)||false}},{}],152:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?require("ext/global-this").Symbol:require("./polyfill")},{"./is-implemented":153,"./polyfill":158,"ext/global-this":163}],153:[function(require,module,exports){"use strict";var global=require("ext/global-this"),validTypes={object:true,symbol:true};module.exports=function(){var Symbol=global.Symbol;var symbol;if(typeof Symbol!=="function")return false;symbol=Symbol("test symbol");try{String(symbol)}catch(e){return false}if(!validTypes[typeof Symbol.iterator])return false;if(!validTypes[typeof Symbol.toPrimitive])return false;if(!validTypes[typeof Symbol.toStringTag])return false;return true}},{"ext/global-this":163}],154:[function(require,module,exports){"use strict";module.exports=function(value){if(!value)return false;if(typeof value==="symbol")return true;if(!value.constructor)return false;if(value.constructor.name!=="Symbol")return false;return value[value.constructor.toStringTag]==="Symbol"}},{}],155:[function(require,module,exports){"use strict";var d=require("d");var create=Object.create,defineProperty=Object.defineProperty,objPrototype=Object.prototype;var created=create(null);module.exports=function(desc){var postfix=0,name,ie11BugWorkaround;while(created[desc+(postfix||"")])++postfix;desc+=postfix||"";created[desc]=true;name="@@"+desc;defineProperty(objPrototype,name,d.gs(null,function(value){if(ie11BugWorkaround)return;ie11BugWorkaround=true;defineProperty(this,name,d(value));ie11BugWorkaround=false}));return name}},{d:84}],156:[function(require,module,exports){"use strict";var d=require("d"),NativeSymbol=require("ext/global-this").Symbol;module.exports=function(SymbolPolyfill){return Object.defineProperties(SymbolPolyfill,{hasInstance:d("",NativeSymbol&&NativeSymbol.hasInstance||SymbolPolyfill("hasInstance")),isConcatSpreadable:d("",NativeSymbol&&NativeSymbol.isConcatSpreadable||SymbolPolyfill("isConcatSpreadable")),iterator:d("",NativeSymbol&&NativeSymbol.iterator||SymbolPolyfill("iterator")),match:d("",NativeSymbol&&NativeSymbol.match||SymbolPolyfill("match")),replace:d("",NativeSymbol&&NativeSymbol.replace||SymbolPolyfill("replace")),search:d("",NativeSymbol&&NativeSymbol.search||SymbolPolyfill("search")),species:d("",NativeSymbol&&NativeSymbol.species||SymbolPolyfill("species")),split:d("",NativeSymbol&&NativeSymbol.split||SymbolPolyfill("split")),toPrimitive:d("",NativeSymbol&&NativeSymbol.toPrimitive||SymbolPolyfill("toPrimitive")),toStringTag:d("",NativeSymbol&&NativeSymbol.toStringTag||SymbolPolyfill("toStringTag")),unscopables:d("",NativeSymbol&&NativeSymbol.unscopables||SymbolPolyfill("unscopables"))})}},{d:84,"ext/global-this":163}],157:[function(require,module,exports){"use strict";var d=require("d"),validateSymbol=require("../../../validate-symbol");var registry=Object.create(null);module.exports=function(SymbolPolyfill){return Object.defineProperties(SymbolPolyfill,{for:d(function(key){if(registry[key])return registry[key];return registry[key]=SymbolPolyfill(String(key))}),keyFor:d(function(symbol){var key;validateSymbol(symbol);for(key in registry){if(registry[key]===symbol)return key}return undefined})})}},{"../../../validate-symbol":159,d:84}],158:[function(require,module,exports){"use strict";var d=require("d"),validateSymbol=require("./validate-symbol"),NativeSymbol=require("ext/global-this").Symbol,generateName=require("./lib/private/generate-name"),setupStandardSymbols=require("./lib/private/setup/standard-symbols"),setupSymbolRegistry=require("./lib/private/setup/symbol-registry");var create=Object.create,defineProperties=Object.defineProperties,defineProperty=Object.defineProperty;var SymbolPolyfill,HiddenSymbol,isNativeSafe;if(typeof NativeSymbol==="function"){try{String(NativeSymbol());isNativeSafe=true}catch(ignore){}}else{NativeSymbol=null}HiddenSymbol=function Symbol(description){if(this instanceof HiddenSymbol)throw new TypeError("Symbol is not a constructor");return SymbolPolyfill(description)};module.exports=SymbolPolyfill=function Symbol(description){var symbol;if(this instanceof Symbol)throw new TypeError("Symbol is not a constructor");if(isNativeSafe)return NativeSymbol(description);symbol=create(HiddenSymbol.prototype);description=description===undefined?"":String(description);return defineProperties(symbol,{__description__:d("",description),__name__:d("",generateName(description))})};setupStandardSymbols(SymbolPolyfill);setupSymbolRegistry(SymbolPolyfill);defineProperties(HiddenSymbol.prototype,{constructor:d(SymbolPolyfill),toString:d("",function(){return this.__name__})});defineProperties(SymbolPolyfill.prototype,{toString:d(function(){return"Symbol ("+validateSymbol(this).__description__+")"}),valueOf:d(function(){return validateSymbol(this)})});defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toPrimitive,d("",function(){var symbol=validateSymbol(this);if(typeof symbol==="symbol")return symbol;return symbol.toString()}));defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toStringTag,d("c","Symbol"));defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toStringTag,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toStringTag]));defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toPrimitive,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toPrimitive]))},{"./lib/private/generate-name":155,"./lib/private/setup/standard-symbols":156,"./lib/private/setup/symbol-registry":157,"./validate-symbol":159,d:84,"ext/global-this":163}],159:[function(require,module,exports){"use strict";var isSymbol=require("./is-symbol");module.exports=function(value){if(!isSymbol(value))throw new TypeError(value+" is not a symbol");return value}},{"./is-symbol":154}],160:[function(require,module,exports){
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */
"use strict";var matchHtmlRegExp=/["'&<>]/;module.exports=escapeHtml;function escapeHtml(string){var str=""+string;var match=matchHtmlRegExp.exec(str);if(!match){return str}var escape;var html="";var index=0;var lastIndex=0;for(index=match.index;index<str.length;index++){switch(str.charCodeAt(index)){case 34:escape="&quot;";break;case 38:escape="&amp;";break;case 39:escape="&#39;";break;case 60:escape="&lt;";break;case 62:escape="&gt;";break;default:continue}if(lastIndex!==index){html+=str.substring(lastIndex,index)}lastIndex=index+1;html+=escape}return lastIndex!==index?html+str.substring(lastIndex,index):html}},{}],161:[function(require,module,exports){"use strict";var d=require("d"),callable=require("es5-ext/object/valid-callable"),apply=Function.prototype.apply,call=Function.prototype.call,create=Object.create,defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,hasOwnProperty=Object.prototype.hasOwnProperty,descriptor={configurable:true,enumerable:false,writable:true},on,once,off,emit,methods,descriptors,base;on=function(type,listener){var data;callable(listener);if(!hasOwnProperty.call(this,"__ee__")){data=descriptor.value=create(null);defineProperty(this,"__ee__",descriptor);descriptor.value=null}else{data=this.__ee__}if(!data[type])data[type]=listener;else if(typeof data[type]==="object")data[type].push(listener);else data[type]=[data[type],listener];return this};once=function(type,listener){var once,self;callable(listener);self=this;on.call(this,type,once=function(){off.call(self,type,once);apply.call(listener,this,arguments)});once.__eeOnceListener__=listener;return this};off=function(type,listener){var data,listeners,candidate,i;callable(listener);if(!hasOwnProperty.call(this,"__ee__"))return this;data=this.__ee__;if(!data[type])return this;listeners=data[type];if(typeof listeners==="object"){for(i=0;candidate=listeners[i];++i){if(candidate===listener||candidate.__eeOnceListener__===listener){if(listeners.length===2)data[type]=listeners[i?0:1];else listeners.splice(i,1)}}}else{if(listeners===listener||listeners.__eeOnceListener__===listener){delete data[type]}}return this};emit=function(type){var i,l,listener,listeners,args;if(!hasOwnProperty.call(this,"__ee__"))return;listeners=this.__ee__[type];if(!listeners)return;if(typeof listeners==="object"){l=arguments.length;args=new Array(l-1);for(i=1;i<l;++i)args[i-1]=arguments[i];listeners=listeners.slice();for(i=0;listener=listeners[i];++i){apply.call(listener,this,args)}}else{switch(arguments.length){case 1:call.call(listeners,this);break;case 2:call.call(listeners,this,arguments[1]);break;case 3:call.call(listeners,this,arguments[1],arguments[2]);break;default:l=arguments.length;args=new Array(l-1);for(i=1;i<l;++i){args[i-1]=arguments[i]}apply.call(listeners,this,args)}}};methods={on:on,once:once,off:off,emit:emit};descriptors={on:d(on),once:d(once),off:d(off),emit:d(emit)};base=defineProperties({},descriptors);module.exports=exports=function(o){return o==null?create(base):defineProperties(Object(o),descriptors)};exports.methods=methods},{d:84,"es5-ext/object/valid-callable":146}],162:[function(require,module,exports){var naiveFallback=function(){if(typeof self==="object"&&self)return self;if(typeof window==="object"&&window)return window;throw new Error("Unable to resolve global `this`")};module.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:true})}catch(error){return naiveFallback()}try{if(!__global__)return naiveFallback();return __global__}finally{delete Object.prototype.__global__}}()},{}],163:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?globalThis:require("./implementation")},{"./implementation":162,"./is-implemented":164}],164:[function(require,module,exports){"use strict";module.exports=function(){if(typeof globalThis!=="object")return false;if(!globalThis)return false;return globalThis.Array===Array}},{}],165:[function(require,module,exports){
/*!
 * finalhandler
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */
"use strict";var debug=require("debug")("finalhandler");var encodeUrl=require("encodeurl");var escapeHtml=require("escape-html");var onFinished=require("on-finished");var parseUrl=require("parseurl");var statuses=require("statuses");var unpipe=require("unpipe");var DOUBLE_SPACE_REGEXP=/\x20{2}/g;var NEWLINE_REGEXP=/\n/g;var defer=typeof setImmediate==="function"?setImmediate:function(fn){process.nextTick(fn.bind.apply(fn,arguments))};var isFinished=onFinished.isFinished;function createHtmlDocument(message){var body=escapeHtml(message).replace(NEWLINE_REGEXP,"<br>").replace(DOUBLE_SPACE_REGEXP," &nbsp;");return"<!DOCTYPE html>\n"+'<html lang="en">\n'+"<head>\n"+'<meta charset="utf-8">\n'+"<title>Error</title>\n"+"</head>\n"+"<body>\n"+"<pre>"+body+"</pre>\n"+"</body>\n"+"</html>\n"}module.exports=finalhandler;function finalhandler(req,res,options){var opts=options||{};var env=opts.env||process.env.NODE_ENV||"development";var onerror=opts.onerror;return function(err){var headers;var msg;var status;if(!err&&headersSent(res)){debug("cannot 404 after headers sent");return}if(err){status=getErrorStatusCode(err);if(status===undefined){status=getResponseStatusCode(res)}else{headers=getErrorHeaders(err)}msg=getErrorMessage(err,status,env)}else{status=404;msg="Cannot "+req.method+" "+encodeUrl(getResourceName(req))}debug("default %s",status);if(err&&onerror){defer(onerror,err,req,res)}if(headersSent(res)){debug("cannot %d after headers sent",status);req.socket.destroy();return}send(req,res,status,headers,msg)}}function getErrorHeaders(err){if(!err.headers||typeof err.headers!=="object"){return undefined}var headers=Object.create(null);var keys=Object.keys(err.headers);for(var i=0;i<keys.length;i++){var key=keys[i];headers[key]=err.headers[key]}return headers}function getErrorMessage(err,status,env){var msg;if(env!=="production"){msg=err.stack;if(!msg&&typeof err.toString==="function"){msg=err.toString()}}return msg||statuses[status]}function getErrorStatusCode(err){if(typeof err.status==="number"&&err.status>=400&&err.status<600){return err.status}if(typeof err.statusCode==="number"&&err.statusCode>=400&&err.statusCode<600){return err.statusCode}return undefined}function getResourceName(req){try{return parseUrl.original(req).pathname}catch(e){return"resource"}}function getResponseStatusCode(res){var status=res.statusCode;if(typeof status!=="number"||status<400||status>599){status=500}return status}function headersSent(res){return typeof res.headersSent!=="boolean"?Boolean(res._header):res.headersSent}function send(req,res,status,headers,message){function write(){var body=createHtmlDocument(message);res.statusCode=status;res.statusMessage=statuses[status];setHeaders(res,headers);res.setHeader("Content-Security-Policy","default-src 'none'");res.setHeader("X-Content-Type-Options","nosniff");res.setHeader("Content-Type","text/html; charset=utf-8");res.setHeader("Content-Length",Buffer.byteLength(body,"utf8"));if(req.method==="HEAD"){res.end();return}res.end(body,"utf8")}if(isFinished(req)){write();return}unpipe(req);onFinished(req,write);req.resume()}function setHeaders(res,headers){if(!headers){return}var keys=Object.keys(headers);for(var i=0;i<keys.length;i++){var key=keys[i];res.setHeader(key,headers[key])}}},{debug:168,encodeurl:170,"escape-html":160,"on-finished":172,parseurl:222,statuses:174,unpipe:358}],166:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"./debug":167,dup:41}],167:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{dup:42,ms:171}],168:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./browser.js":166,"./node.js":169,dup:43}],169:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{"./debug":167,dup:44,fs:undefined,net:undefined,tty:undefined,util:undefined}],170:[function(require,module,exports){
/*!
 * encodeurl
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */
"use strict";module.exports=encodeUrl;var ENCODE_CHARS_REGEXP=/(?:[^\x21\x25\x26-\x3B\x3D\x3F-\x5B\x5D\x5F\x61-\x7A\x7E]|%(?:[^0-9A-Fa-f]|[0-9A-Fa-f][^0-9A-Fa-f]|$))+/g;var UNMATCHED_SURROGATE_PAIR_REGEXP=/(^|[^\uD800-\uDBFF])[\uDC00-\uDFFF]|[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/g;var UNMATCHED_SURROGATE_PAIR_REPLACE="$1$2";function encodeUrl(url){return String(url).replace(UNMATCHED_SURROGATE_PAIR_REGEXP,UNMATCHED_SURROGATE_PAIR_REPLACE).replace(ENCODE_CHARS_REGEXP,encodeURI)}},{}],171:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],172:[function(require,module,exports){
/*!
 * on-finished
 * Copyright(c) 2013 Jonathan Ong
 * Copyright(c) 2014 Douglas Christopher Wilson
 * MIT Licensed
 */
"use strict";module.exports=onFinished;module.exports.isFinished=isFinished;var first=require("ee-first");var defer=typeof setImmediate==="function"?setImmediate:function(fn){process.nextTick(fn.bind.apply(fn,arguments))};function onFinished(msg,listener){if(isFinished(msg)!==false){defer(listener,null,msg);return msg}attachListener(msg,listener);return msg}function isFinished(msg){var socket=msg.socket;if(typeof msg.finished==="boolean"){return Boolean(msg.finished||socket&&!socket.writable)}if(typeof msg.complete==="boolean"){return Boolean(msg.upgrade||!socket||!socket.readable||msg.complete&&!msg.readable)}return undefined}function attachFinishedListener(msg,callback){var eeMsg;var eeSocket;var finished=false;function onFinish(error){eeMsg.cancel();eeSocket.cancel();finished=true;callback(error)}eeMsg=eeSocket=first([[msg,"end","finish"]],onFinish);function onSocket(socket){msg.removeListener("socket",onSocket);if(finished)return;if(eeMsg!==eeSocket)return;eeSocket=first([[socket,"error","close"]],onFinish)}if(msg.socket){onSocket(msg.socket);return}msg.on("socket",onSocket);if(msg.socket===undefined){patchAssignSocket(msg,onSocket)}}function attachListener(msg,listener){var attached=msg.__onFinished;if(!attached||!attached.queue){attached=msg.__onFinished=createListener(msg);attachFinishedListener(msg,attached)}attached.queue.push(listener)}function createListener(msg){function listener(err){if(msg.__onFinished===listener)msg.__onFinished=null;if(!listener.queue)return;var queue=listener.queue;listener.queue=null;for(var i=0;i<queue.length;i++){queue[i](err,msg)}}listener.queue=[];return listener}function patchAssignSocket(res,callback){var assignSocket=res.assignSocket;if(typeof assignSocket!=="function")return;res.assignSocket=function _assignSocket(socket){assignSocket.call(this,socket);callback(socket)}}},{"ee-first":91}],173:[function(require,module,exports){module.exports={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"(Unused)",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],174:[function(require,module,exports){
/*!
 * statuses
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */
"use strict";var codes=require("./codes.json");module.exports=status;status.STATUS_CODES=codes;status.codes=populateStatusesMap(status,codes);status.redirect={300:true,301:true,302:true,303:true,305:true,307:true,308:true};status.empty={204:true,205:true,304:true};status.retry={502:true,503:true,504:true};function populateStatusesMap(statuses,codes){var arr=[];Object.keys(codes).forEach(function forEachCode(code){var message=codes[code];var status=Number(code);statuses[status]=message;statuses[message]=status;statuses[message.toLowerCase()]=status;arr.push(status)});return arr}function status(code){if(typeof code==="number"){if(!status[code])throw new Error("invalid status code: "+code);return code}if(typeof code!=="string"){throw new TypeError("code must be a number or string")}var n=parseInt(code,10);if(!isNaN(n)){if(!status[n])throw new Error("invalid status code: "+n);return n}n=status[code.toLowerCase()];if(!n)throw new Error('invalid status message: "'+code+'"');return n}},{"./codes.json":173}],175:[function(require,module,exports){module.exports=realpath;realpath.realpath=realpath;realpath.sync=realpathSync;realpath.realpathSync=realpathSync;realpath.monkeypatch=monkeypatch;realpath.unmonkeypatch=unmonkeypatch;var fs=require("fs");var origRealpath=fs.realpath;var origRealpathSync=fs.realpathSync;var version=process.version;var ok=/^v[0-5]\./.test(version);var old=require("./old.js");function newError(er){return er&&er.syscall==="realpath"&&(er.code==="ELOOP"||er.code==="ENOMEM"||er.code==="ENAMETOOLONG")}function realpath(p,cache,cb){if(ok){return origRealpath(p,cache,cb)}if(typeof cache==="function"){cb=cache;cache=null}origRealpath(p,cache,function(er,result){if(newError(er)){old.realpath(p,cache,cb)}else{cb(er,result)}})}function realpathSync(p,cache){if(ok){return origRealpathSync(p,cache)}try{return origRealpathSync(p,cache)}catch(er){if(newError(er)){return old.realpathSync(p,cache)}else{throw er}}}function monkeypatch(){fs.realpath=realpath;fs.realpathSync=realpathSync}function unmonkeypatch(){fs.realpath=origRealpath;fs.realpathSync=origRealpathSync}},{"./old.js":176,fs:undefined}],176:[function(require,module,exports){var pathModule=require("path");var isWindows=process.platform==="win32";var fs=require("fs");var DEBUG=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function rethrow(){var callback;if(DEBUG){var backtrace=new Error;callback=debugCallback}else callback=missingCallback;return callback;function debugCallback(err){if(err){backtrace.message=err.message;err=backtrace;missingCallback(err)}}function missingCallback(err){if(err){if(process.throwDeprecation)throw err;else if(!process.noDeprecation){var msg="fs: missing callback "+(err.stack||err.message);if(process.traceDeprecation)console.trace(msg);else console.error(msg)}}}}function maybeCallback(cb){return typeof cb==="function"?cb:rethrow()}var normalize=pathModule.normalize;if(isWindows){var nextPartRe=/(.*?)(?:[\/\\]+|$)/g}else{var nextPartRe=/(.*?)(?:[\/]+|$)/g}if(isWindows){var splitRootRe=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/}else{var splitRootRe=/^[\/]*/}exports.realpathSync=function realpathSync(p,cache){p=pathModule.resolve(p);if(cache&&Object.prototype.hasOwnProperty.call(cache,p)){return cache[p]}var original=p,seenLinks={},knownHard={};var pos;var current;var base;var previous;start();function start(){var m=splitRootRe.exec(p);pos=m[0].length;current=m[0];base=m[0];previous="";if(isWindows&&!knownHard[base]){fs.lstatSync(base);knownHard[base]=true}}while(pos<p.length){nextPartRe.lastIndex=pos;var result=nextPartRe.exec(p);previous=current;current+=result[0];base=previous+result[1];pos=nextPartRe.lastIndex;if(knownHard[base]||cache&&cache[base]===base){continue}var resolvedLink;if(cache&&Object.prototype.hasOwnProperty.call(cache,base)){resolvedLink=cache[base]}else{var stat=fs.lstatSync(base);if(!stat.isSymbolicLink()){knownHard[base]=true;if(cache)cache[base]=base;continue}var linkTarget=null;if(!isWindows){var id=stat.dev.toString(32)+":"+stat.ino.toString(32);if(seenLinks.hasOwnProperty(id)){linkTarget=seenLinks[id]}}if(linkTarget===null){fs.statSync(base);linkTarget=fs.readlinkSync(base)}resolvedLink=pathModule.resolve(previous,linkTarget);if(cache)cache[base]=resolvedLink;if(!isWindows)seenLinks[id]=linkTarget}p=pathModule.resolve(resolvedLink,p.slice(pos));start()}if(cache)cache[original]=p;return p};exports.realpath=function realpath(p,cache,cb){if(typeof cb!=="function"){cb=maybeCallback(cache);cache=null}p=pathModule.resolve(p);if(cache&&Object.prototype.hasOwnProperty.call(cache,p)){return process.nextTick(cb.bind(null,null,cache[p]))}var original=p,seenLinks={},knownHard={};var pos;var current;var base;var previous;start();function start(){var m=splitRootRe.exec(p);pos=m[0].length;current=m[0];base=m[0];previous="";if(isWindows&&!knownHard[base]){fs.lstat(base,function(err){if(err)return cb(err);knownHard[base]=true;LOOP()})}else{process.nextTick(LOOP)}}function LOOP(){if(pos>=p.length){if(cache)cache[original]=p;return cb(null,p)}nextPartRe.lastIndex=pos;var result=nextPartRe.exec(p);previous=current;current+=result[0];base=previous+result[1];pos=nextPartRe.lastIndex;if(knownHard[base]||cache&&cache[base]===base){return process.nextTick(LOOP)}if(cache&&Object.prototype.hasOwnProperty.call(cache,base)){return gotResolvedLink(cache[base])}return fs.lstat(base,gotStat)}function gotStat(err,stat){if(err)return cb(err);if(!stat.isSymbolicLink()){knownHard[base]=true;if(cache)cache[base]=base;return process.nextTick(LOOP)}if(!isWindows){var id=stat.dev.toString(32)+":"+stat.ino.toString(32);if(seenLinks.hasOwnProperty(id)){return gotTarget(null,seenLinks[id],base)}}fs.stat(base,function(err){if(err)return cb(err);fs.readlink(base,function(err,target){if(!isWindows)seenLinks[id]=target;gotTarget(err,target)})})}function gotTarget(err,target,base){if(err)return cb(err);var resolvedLink=pathModule.resolve(previous,target);if(cache)cache[base]=resolvedLink;gotResolvedLink(resolvedLink)}function gotResolvedLink(resolvedLink){p=pathModule.resolve(resolvedLink,p.slice(pos));start()}}},{fs:undefined,path:undefined}],177:[function(require,module,exports){"use strict";var spin=require("./spin.js");var progressBar=require("./progress-bar.js");module.exports={activityIndicator:function(values,theme,width){if(values.spun==null)return;return spin(theme,values.spun)},progressbar:function(values,theme,width){if(values.completed==null)return;return progressBar(theme,width,values.completed)}}},{"./progress-bar.js":183,"./spin.js":187}],178:[function(require,module,exports){"use strict";var util=require("util");var User=exports.User=function User(msg){var err=new Error(msg);Error.captureStackTrace(err,User);err.code="EGAUGE";return err};exports.MissingTemplateValue=function MissingTemplateValue(item,values){var err=new User(util.format('Missing template value "%s"',item.type));Error.captureStackTrace(err,MissingTemplateValue);err.template=item;err.values=values;return err};exports.Internal=function Internal(msg){var err=new Error(msg);Error.captureStackTrace(err,Internal);err.code="EGAUGEINTERNAL";return err}},{util:undefined}],179:[function(require,module,exports){"use strict";var colorSupport=require("color-support");module.exports=colorSupport().hasBasic},{"color-support":38}],180:[function(require,module,exports){"use strict";var Plumbing=require("./plumbing.js");var hasUnicode=require("has-unicode");var hasColor=require("./has-color.js");var onExit=require("signal-exit");var defaultThemes=require("./themes");var setInterval=require("./set-interval.js");var process=require("./process.js");var setImmediate=require("./set-immediate");module.exports=Gauge;function callWith(obj,method){return function(){return method.call(obj)}}function Gauge(arg1,arg2){var options,writeTo;if(arg1&&arg1.write){writeTo=arg1;options=arg2||{}}else if(arg2&&arg2.write){writeTo=arg2;options=arg1||{}}else{writeTo=process.stderr;options=arg1||arg2||{}}this._status={spun:0,section:"",subsection:""};this._paused=false;this._disabled=true;this._showing=false;this._onScreen=false;this._needsRedraw=false;this._hideCursor=options.hideCursor==null?true:options.hideCursor;this._fixedFramerate=options.fixedFramerate==null?!/^v0\.8\./.test(process.version):options.fixedFramerate;this._lastUpdateAt=null;this._updateInterval=options.updateInterval==null?50:options.updateInterval;this._themes=options.themes||defaultThemes;this._theme=options.theme;var theme=this._computeTheme(options.theme);var template=options.template||[{type:"progressbar",length:20},{type:"activityIndicator",kerning:1,length:1},{type:"section",kerning:1,default:""},{type:"subsection",kerning:1,default:""}];this.setWriteTo(writeTo,options.tty);var PlumbingClass=options.Plumbing||Plumbing;this._gauge=new PlumbingClass(theme,template,this.getWidth());this._$$doRedraw=callWith(this,this._doRedraw);this._$$handleSizeChange=callWith(this,this._handleSizeChange);this._cleanupOnExit=options.cleanupOnExit==null||options.cleanupOnExit;this._removeOnExit=null;if(options.enabled||options.enabled==null&&this._tty&&this._tty.isTTY){this.enable()}else{this.disable()}}Gauge.prototype={};Gauge.prototype.isEnabled=function(){return!this._disabled};Gauge.prototype.setTemplate=function(template){this._gauge.setTemplate(template);if(this._showing)this._requestRedraw()};Gauge.prototype._computeTheme=function(theme){if(!theme)theme={};if(typeof theme==="string"){theme=this._themes.getTheme(theme)}else if(theme&&(Object.keys(theme).length===0||theme.hasUnicode!=null||theme.hasColor!=null)){var useUnicode=theme.hasUnicode==null?hasUnicode():theme.hasUnicode;var useColor=theme.hasColor==null?hasColor:theme.hasColor;theme=this._themes.getDefault({hasUnicode:useUnicode,hasColor:useColor,platform:theme.platform})}return theme};Gauge.prototype.setThemeset=function(themes){this._themes=themes;this.setTheme(this._theme)};Gauge.prototype.setTheme=function(theme){this._gauge.setTheme(this._computeTheme(theme));if(this._showing)this._requestRedraw();this._theme=theme};Gauge.prototype._requestRedraw=function(){this._needsRedraw=true;if(!this._fixedFramerate)this._doRedraw()};Gauge.prototype.getWidth=function(){return(this._tty&&this._tty.columns||80)-1};Gauge.prototype.setWriteTo=function(writeTo,tty){var enabled=!this._disabled;if(enabled)this.disable();this._writeTo=writeTo;this._tty=tty||writeTo===process.stderr&&process.stdout.isTTY&&process.stdout||writeTo.isTTY&&writeTo||this._tty;if(this._gauge)this._gauge.setWidth(this.getWidth());if(enabled)this.enable()};Gauge.prototype.enable=function(){if(!this._disabled)return;this._disabled=false;if(this._tty)this._enableEvents();if(this._showing)this.show()};Gauge.prototype.disable=function(){if(this._disabled)return;if(this._showing){this._lastUpdateAt=null;this._showing=false;this._doRedraw();this._showing=true}this._disabled=true;if(this._tty)this._disableEvents()};Gauge.prototype._enableEvents=function(){if(this._cleanupOnExit){this._removeOnExit=onExit(callWith(this,this.disable))}this._tty.on("resize",this._$$handleSizeChange);if(this._fixedFramerate){this.redrawTracker=setInterval(this._$$doRedraw,this._updateInterval);if(this.redrawTracker.unref)this.redrawTracker.unref()}};Gauge.prototype._disableEvents=function(){this._tty.removeListener("resize",this._$$handleSizeChange);if(this._fixedFramerate)clearInterval(this.redrawTracker);if(this._removeOnExit)this._removeOnExit()};Gauge.prototype.hide=function(cb){if(this._disabled)return cb&&process.nextTick(cb);if(!this._showing)return cb&&process.nextTick(cb);this._showing=false;this._doRedraw();cb&&setImmediate(cb)};Gauge.prototype.show=function(section,completed){this._showing=true;if(typeof section==="string"){this._status.section=section}else if(typeof section==="object"){var sectionKeys=Object.keys(section);for(var ii=0;ii<sectionKeys.length;++ii){var key=sectionKeys[ii];this._status[key]=section[key]}}if(completed!=null)this._status.completed=completed;if(this._disabled)return;this._requestRedraw()};Gauge.prototype.pulse=function(subsection){this._status.subsection=subsection||"";this._status.spun++;if(this._disabled)return;if(!this._showing)return;this._requestRedraw()};Gauge.prototype._handleSizeChange=function(){this._gauge.setWidth(this._tty.columns-1);this._requestRedraw()};Gauge.prototype._doRedraw=function(){if(this._disabled||this._paused)return;if(!this._fixedFramerate){var now=Date.now();if(this._lastUpdateAt&&now-this._lastUpdateAt<this._updateInterval)return;this._lastUpdateAt=now}if(!this._showing&&this._onScreen){this._onScreen=false;var result=this._gauge.hide();if(this._hideCursor){result+=this._gauge.showCursor()}return this._writeTo.write(result)}if(!this._showing&&!this._onScreen)return;if(this._showing&&!this._onScreen){this._onScreen=true;this._needsRedraw=true;if(this._hideCursor){this._writeTo.write(this._gauge.hideCursor())}}if(!this._needsRedraw)return;if(!this._writeTo.write(this._gauge.show(this._status))){this._paused=true;this._writeTo.on("drain",callWith(this,function(){this._paused=false;this._doRedraw()}))}}},{"./has-color.js":179,"./plumbing.js":181,"./process.js":182,"./set-immediate":185,"./set-interval.js":186,"./themes":190,"has-unicode":196,"signal-exit":307}],181:[function(require,module,exports){"use strict";var consoleControl=require("console-control-strings");var renderTemplate=require("./render-template.js");var validate=require("aproba");var Plumbing=module.exports=function(theme,template,width){if(!width)width=80;validate("OAN",[theme,template,width]);this.showing=false;this.theme=theme;this.width=width;this.template=template};Plumbing.prototype={};Plumbing.prototype.setTheme=function(theme){validate("O",[theme]);this.theme=theme};Plumbing.prototype.setTemplate=function(template){validate("A",[template]);this.template=template};Plumbing.prototype.setWidth=function(width){validate("N",[width]);this.width=width};Plumbing.prototype.hide=function(){return consoleControl.gotoSOL()+consoleControl.eraseLine()};Plumbing.prototype.hideCursor=consoleControl.hideCursor;Plumbing.prototype.showCursor=consoleControl.showCursor;Plumbing.prototype.show=function(status){var values=Object.create(this.theme);for(var key in status){values[key]=status[key]}return renderTemplate(this.width,this.template,values).trim()+consoleControl.color("reset")+consoleControl.eraseLine()+consoleControl.gotoSOL()}},{"./render-template.js":184,aproba:26,"console-control-strings":46}],182:[function(require,module,exports){"use strict";module.exports=process},{}],183:[function(require,module,exports){"use strict";var validate=require("aproba");var renderTemplate=require("./render-template.js");var wideTruncate=require("./wide-truncate");var stringWidth=require("string-width");module.exports=function(theme,width,completed){validate("ONN",[theme,width,completed]);if(completed<0)completed=0;if(completed>1)completed=1;if(width<=0)return"";var sofar=Math.round(width*completed);var rest=width-sofar;var template=[{type:"complete",value:repeat(theme.complete,sofar),length:sofar},{type:"remaining",value:repeat(theme.remaining,rest),length:rest}];return renderTemplate(width,template,theme)};function repeat(string,width){var result="";var n=width;do{if(n%2){result+=string}n=Math.floor(n/2);string+=string}while(n&&stringWidth(result)<width);return wideTruncate(result,width)}},{"./render-template.js":184,"./wide-truncate":191,aproba:26,"string-width":338}],184:[function(require,module,exports){"use strict";var align=require("wide-align");var validate=require("aproba");var wideTruncate=require("./wide-truncate");var error=require("./error");var TemplateItem=require("./template-item");function renderValueWithValues(values){return function(item){return renderValue(item,values)}}var renderTemplate=module.exports=function(width,template,values){var items=prepareItems(width,template,values);var rendered=items.map(renderValueWithValues(values)).join("");return align.left(wideTruncate(rendered,width),width)};function preType(item){var cappedTypeName=item.type[0].toUpperCase()+item.type.slice(1);return"pre"+cappedTypeName}function postType(item){var cappedTypeName=item.type[0].toUpperCase()+item.type.slice(1);return"post"+cappedTypeName}function hasPreOrPost(item,values){if(!item.type)return;return values[preType(item)]||values[postType(item)]}function generatePreAndPost(baseItem,parentValues){var item=Object.assign({},baseItem);var values=Object.create(parentValues);var template=[];var pre=preType(item);var post=postType(item);if(values[pre]){template.push({value:values[pre]});values[pre]=null}item.minLength=null;item.length=null;item.maxLength=null;template.push(item);values[item.type]=values[item.type];if(values[post]){template.push({value:values[post]});values[post]=null}return function($1,$2,length){return renderTemplate(length,template,values)}}function prepareItems(width,template,values){function cloneAndObjectify(item,index,arr){var cloned=new TemplateItem(item,width);var type=cloned.type;if(cloned.value==null){if(!(type in values)){if(cloned.default==null){throw new error.MissingTemplateValue(cloned,values)}else{cloned.value=cloned.default}}else{cloned.value=values[type]}}if(cloned.value==null||cloned.value==="")return null;cloned.index=index;cloned.first=index===0;cloned.last=index===arr.length-1;if(hasPreOrPost(cloned,values))cloned.value=generatePreAndPost(cloned,values);return cloned}var output=template.map(cloneAndObjectify).filter(function(item){return item!=null});var remainingSpace=width;var variableCount=output.length;function consumeSpace(length){if(length>remainingSpace)length=remainingSpace;remainingSpace-=length}function finishSizing(item,length){if(item.finished)throw new error.Internal("Tried to finish template item that was already finished");if(length===Infinity)throw new error.Internal("Length of template item cannot be infinity");if(length!=null)item.length=length;item.minLength=null;item.maxLength=null;--variableCount;item.finished=true;if(item.length==null)item.length=item.getBaseLength();if(item.length==null)throw new error.Internal("Finished template items must have a length");consumeSpace(item.getLength())}output.forEach(function(item){if(!item.kerning)return;var prevPadRight=item.first?0:output[item.index-1].padRight;if(!item.first&&prevPadRight<item.kerning)item.padLeft=item.kerning-prevPadRight;if(!item.last)item.padRight=item.kerning});output.forEach(function(item){if(item.getBaseLength()==null)return;finishSizing(item)});var resized=0;var resizing;var hunkSize;do{resizing=false;hunkSize=Math.round(remainingSpace/variableCount);output.forEach(function(item){if(item.finished)return;if(!item.maxLength)return;if(item.getMaxLength()<hunkSize){finishSizing(item,item.maxLength);resizing=true}})}while(resizing&&resized++<output.length);if(resizing)throw new error.Internal("Resize loop iterated too many times while determining maxLength");resized=0;do{resizing=false;hunkSize=Math.round(remainingSpace/variableCount);output.forEach(function(item){if(item.finished)return;if(!item.minLength)return;if(item.getMinLength()>=hunkSize){finishSizing(item,item.minLength);resizing=true}})}while(resizing&&resized++<output.length);if(resizing)throw new error.Internal("Resize loop iterated too many times while determining minLength");hunkSize=Math.round(remainingSpace/variableCount);output.forEach(function(item){if(item.finished)return;finishSizing(item,hunkSize)});return output}function renderFunction(item,values,length){validate("OON",arguments);if(item.type){return item.value(values,values[item.type+"Theme"]||{},length)}else{return item.value(values,{},length)}}function renderValue(item,values){var length=item.getBaseLength();var value=typeof item.value==="function"?renderFunction(item,values,length):item.value;if(value==null||value==="")return"";var alignWith=align[item.align]||align.left;var leftPadding=item.padLeft?align.left("",item.padLeft):"";var rightPadding=item.padRight?align.right("",item.padRight):"";var truncated=wideTruncate(String(value),length);var aligned=alignWith(truncated,length);return leftPadding+aligned+rightPadding}},{"./error":178,"./template-item":188,"./wide-truncate":191,aproba:26,"wide-align":362}],185:[function(require,module,exports){"use strict";var process=require("./process");try{module.exports=setImmediate}catch(ex){module.exports=process.nextTick}},{"./process":182}],186:[function(require,module,exports){"use strict";module.exports=setInterval},{}],187:[function(require,module,exports){"use strict";module.exports=function spin(spinstr,spun){return spinstr[spun%spinstr.length]}},{}],188:[function(require,module,exports){"use strict";var stringWidth=require("string-width");module.exports=TemplateItem;function isPercent(num){if(typeof num!=="string")return false;return num.slice(-1)==="%"}function percent(num){return Number(num.slice(0,-1))/100}function TemplateItem(values,outputLength){this.overallOutputLength=outputLength;this.finished=false;this.type=null;this.value=null;this.length=null;this.maxLength=null;this.minLength=null;this.kerning=null;this.align="left";this.padLeft=0;this.padRight=0;this.index=null;this.first=null;this.last=null;if(typeof values==="string"){this.value=values}else{for(var prop in values)this[prop]=values[prop]}if(isPercent(this.length)){this.length=Math.round(this.overallOutputLength*percent(this.length))}if(isPercent(this.minLength)){this.minLength=Math.round(this.overallOutputLength*percent(this.minLength))}if(isPercent(this.maxLength)){this.maxLength=Math.round(this.overallOutputLength*percent(this.maxLength))}return this}TemplateItem.prototype={};TemplateItem.prototype.getBaseLength=function(){var length=this.length;if(length==null&&typeof this.value==="string"&&this.maxLength==null&&this.minLength==null){length=stringWidth(this.value)}return length};TemplateItem.prototype.getLength=function(){var length=this.getBaseLength();if(length==null)return null;return length+this.padLeft+this.padRight};TemplateItem.prototype.getMaxLength=function(){if(this.maxLength==null)return null;return this.maxLength+this.padLeft+this.padRight};TemplateItem.prototype.getMinLength=function(){if(this.minLength==null)return null;return this.minLength+this.padLeft+this.padRight}},{"string-width":338}],189:[function(require,module,exports){"use strict";var objectAssign=require("object-assign");module.exports=function(){return ThemeSetProto.newThemeSet()};var ThemeSetProto={};ThemeSetProto.baseTheme=require("./base-theme.js");ThemeSetProto.newTheme=function(parent,theme){if(!theme){theme=parent;parent=this.baseTheme}return objectAssign({},parent,theme)};ThemeSetProto.getThemeNames=function(){return Object.keys(this.themes)};ThemeSetProto.addTheme=function(name,parent,theme){this.themes[name]=this.newTheme(parent,theme)};ThemeSetProto.addToAllThemes=function(theme){var themes=this.themes;Object.keys(themes).forEach(function(name){objectAssign(themes[name],theme)});objectAssign(this.baseTheme,theme)};ThemeSetProto.getTheme=function(name){if(!this.themes[name])throw this.newMissingThemeError(name);return this.themes[name]};ThemeSetProto.setDefault=function(opts,name){if(name==null){name=opts;opts={}}var platform=opts.platform==null?"fallback":opts.platform;var hasUnicode=!!opts.hasUnicode;var hasColor=!!opts.hasColor;if(!this.defaults[platform])this.defaults[platform]={true:{},false:{}};this.defaults[platform][hasUnicode][hasColor]=name};ThemeSetProto.getDefault=function(opts){if(!opts)opts={};var platformName=opts.platform||process.platform;var platform=this.defaults[platformName]||this.defaults.fallback;var hasUnicode=!!opts.hasUnicode;var hasColor=!!opts.hasColor;if(!platform)throw this.newMissingDefaultThemeError(platformName,hasUnicode,hasColor);if(!platform[hasUnicode][hasColor]){if(hasUnicode&&hasColor&&platform[!hasUnicode][hasColor]){hasUnicode=false}else if(hasUnicode&&hasColor&&platform[hasUnicode][!hasColor]){hasColor=false}else if(hasUnicode&&hasColor&&platform[!hasUnicode][!hasColor]){hasUnicode=false;hasColor=false}else if(hasUnicode&&!hasColor&&platform[!hasUnicode][hasColor]){hasUnicode=false}else if(!hasUnicode&&hasColor&&platform[hasUnicode][!hasColor]){hasColor=false}else if(platform===this.defaults.fallback){throw this.newMissingDefaultThemeError(platformName,hasUnicode,hasColor)}}if(platform[hasUnicode][hasColor]){return this.getTheme(platform[hasUnicode][hasColor])}else{return this.getDefault(objectAssign({},opts,{platform:"fallback"}))}};ThemeSetProto.newMissingThemeError=function newMissingThemeError(name){var err=new Error('Could not find a gauge theme named "'+name+'"');Error.captureStackTrace.call(err,newMissingThemeError);err.theme=name;err.code="EMISSINGTHEME";return err};ThemeSetProto.newMissingDefaultThemeError=function newMissingDefaultThemeError(platformName,hasUnicode,hasColor){var err=new Error("Could not find a gauge theme for your platform/unicode/color use combo:\n"+"    platform = "+platformName+"\n"+"    hasUnicode = "+hasUnicode+"\n"+"    hasColor = "+hasColor);Error.captureStackTrace.call(err,newMissingDefaultThemeError);err.platform=platformName;err.hasUnicode=hasUnicode;err.hasColor=hasColor;err.code="EMISSINGTHEME";return err};ThemeSetProto.newThemeSet=function(){var themeset=function(opts){return themeset.getDefault(opts)};return objectAssign(themeset,ThemeSetProto,{themes:objectAssign({},this.themes),baseTheme:objectAssign({},this.baseTheme),defaults:JSON.parse(JSON.stringify(this.defaults||{}))})}},{"./base-theme.js":177,"object-assign":220}],190:[function(require,module,exports){"use strict";var color=require("console-control-strings").color;var ThemeSet=require("./theme-set.js");var themes=module.exports=new ThemeSet;themes.addTheme("ASCII",{preProgressbar:"[",postProgressbar:"]",progressbarTheme:{complete:"#",remaining:"."},activityIndicatorTheme:"-\\|/",preSubsection:">"});themes.addTheme("colorASCII",themes.getTheme("ASCII"),{progressbarTheme:{preComplete:color("bgBrightWhite","brightWhite"),complete:"#",postComplete:color("reset"),preRemaining:color("bgBrightBlack","brightBlack"),remaining:".",postRemaining:color("reset")}});themes.addTheme("brailleSpinner",{preProgressbar:"",postProgressbar:"",progressbarTheme:{complete:"#",remaining:""},activityIndicatorTheme:"",preSubsection:">"});themes.addTheme("colorBrailleSpinner",themes.getTheme("brailleSpinner"),{progressbarTheme:{preComplete:color("bgBrightWhite","brightWhite"),complete:"#",postComplete:color("reset"),preRemaining:color("bgBrightBlack","brightBlack"),remaining:"",postRemaining:color("reset")}});themes.setDefault({},"ASCII");themes.setDefault({hasColor:true},"colorASCII");themes.setDefault({platform:"darwin",hasUnicode:true},"brailleSpinner");themes.setDefault({platform:"darwin",hasUnicode:true,hasColor:true},"colorBrailleSpinner");themes.setDefault({platform:"linux",hasUnicode:true},"brailleSpinner");themes.setDefault({platform:"linux",hasUnicode:true,hasColor:true},"colorBrailleSpinner")},{"./theme-set.js":189,"console-control-strings":46}],191:[function(require,module,exports){"use strict";var stringWidth=require("string-width");var stripAnsi=require("strip-ansi");module.exports=wideTruncate;function wideTruncate(str,target){if(stringWidth(str)===0)return str;if(target<=0)return"";if(stringWidth(str)<=target)return str;var noAnsi=stripAnsi(str);var ansiSize=str.length+noAnsi.length;var truncated=str.slice(0,target+ansiSize);while(stringWidth(truncated)>target){truncated=truncated.slice(0,-1)}return truncated}},{"string-width":338,"strip-ansi":340}],192:[function(require,module,exports){exports.setopts=setopts;exports.ownProp=ownProp;exports.makeAbs=makeAbs;exports.finish=finish;exports.mark=mark;exports.isIgnored=isIgnored;exports.childrenIgnored=childrenIgnored;function ownProp(obj,field){return Object.prototype.hasOwnProperty.call(obj,field)}var fs=require("fs");var path=require("path");var minimatch=require("minimatch");var isAbsolute=require("path-is-absolute");var Minimatch=minimatch.Minimatch;function alphasort(a,b){return a.localeCompare(b,"en")}function setupIgnores(self,options){self.ignore=options.ignore||[];if(!Array.isArray(self.ignore))self.ignore=[self.ignore];if(self.ignore.length){self.ignore=self.ignore.map(ignoreMap)}}function ignoreMap(pattern){var gmatcher=null;if(pattern.slice(-3)==="/**"){var gpattern=pattern.replace(/(\/\*\*)+$/,"");gmatcher=new Minimatch(gpattern,{dot:true})}return{matcher:new Minimatch(pattern,{dot:true}),gmatcher:gmatcher}}function setopts(self,pattern,options){if(!options)options={};if(options.matchBase&&-1===pattern.indexOf("/")){if(options.noglobstar){throw new Error("base matching requires globstar")}pattern="**/"+pattern}self.silent=!!options.silent;self.pattern=pattern;self.strict=options.strict!==false;self.realpath=!!options.realpath;self.realpathCache=options.realpathCache||Object.create(null);self.follow=!!options.follow;self.dot=!!options.dot;self.mark=!!options.mark;self.nodir=!!options.nodir;if(self.nodir)self.mark=true;self.sync=!!options.sync;self.nounique=!!options.nounique;self.nonull=!!options.nonull;self.nosort=!!options.nosort;self.nocase=!!options.nocase;self.stat=!!options.stat;self.noprocess=!!options.noprocess;self.absolute=!!options.absolute;self.fs=options.fs||fs;self.maxLength=options.maxLength||Infinity;self.cache=options.cache||Object.create(null);self.statCache=options.statCache||Object.create(null);self.symlinks=options.symlinks||Object.create(null);setupIgnores(self,options);self.changedCwd=false;var cwd=process.cwd();if(!ownProp(options,"cwd"))self.cwd=cwd;else{self.cwd=path.resolve(options.cwd);self.changedCwd=self.cwd!==cwd}self.root=options.root||path.resolve(self.cwd,"/");self.root=path.resolve(self.root);if(process.platform==="win32")self.root=self.root.replace(/\\/g,"/");self.cwdAbs=isAbsolute(self.cwd)?self.cwd:makeAbs(self,self.cwd);if(process.platform==="win32")self.cwdAbs=self.cwdAbs.replace(/\\/g,"/");self.nomount=!!options.nomount;options.nonegate=true;options.nocomment=true;options.allowWindowsEscape=false;self.minimatch=new Minimatch(pattern,options);self.options=self.minimatch.options}function finish(self){var nou=self.nounique;var all=nou?[]:Object.create(null);for(var i=0,l=self.matches.length;i<l;i++){var matches=self.matches[i];if(!matches||Object.keys(matches).length===0){if(self.nonull){var literal=self.minimatch.globSet[i];if(nou)all.push(literal);else all[literal]=true}}else{var m=Object.keys(matches);if(nou)all.push.apply(all,m);else m.forEach(function(m){all[m]=true})}}if(!nou)all=Object.keys(all);if(!self.nosort)all=all.sort(alphasort);if(self.mark){for(var i=0;i<all.length;i++){all[i]=self._mark(all[i])}if(self.nodir){all=all.filter(function(e){var notDir=!/\/$/.test(e);var c=self.cache[e]||self.cache[makeAbs(self,e)];if(notDir&&c)notDir=c!=="DIR"&&!Array.isArray(c);return notDir})}}if(self.ignore.length)all=all.filter(function(m){return!isIgnored(self,m)});self.found=all}function mark(self,p){var abs=makeAbs(self,p);var c=self.cache[abs];var m=p;if(c){var isDir=c==="DIR"||Array.isArray(c);var slash=p.slice(-1)==="/";if(isDir&&!slash)m+="/";else if(!isDir&&slash)m=m.slice(0,-1);if(m!==p){var mabs=makeAbs(self,m);self.statCache[mabs]=self.statCache[abs];self.cache[mabs]=self.cache[abs]}}return m}function makeAbs(self,f){var abs=f;if(f.charAt(0)==="/"){abs=path.join(self.root,f)}else if(isAbsolute(f)||f===""){abs=f}else if(self.changedCwd){abs=path.resolve(self.cwd,f)}else{abs=path.resolve(f)}if(process.platform==="win32")abs=abs.replace(/\\/g,"/");return abs}function isIgnored(self,path){if(!self.ignore.length)return false;return self.ignore.some(function(item){return item.matcher.match(path)||!!(item.gmatcher&&item.gmatcher.match(path))})}function childrenIgnored(self,path){if(!self.ignore.length)return false;return self.ignore.some(function(item){return!!(item.gmatcher&&item.gmatcher.match(path))})}},{fs:undefined,minimatch:211,path:undefined,"path-is-absolute":223}],193:[function(require,module,exports){module.exports=glob;var rp=require("fs.realpath");var minimatch=require("minimatch");var Minimatch=minimatch.Minimatch;var inherits=require("inherits");var EE=require("events").EventEmitter;var path=require("path");var assert=require("assert");var isAbsolute=require("path-is-absolute");var globSync=require("./sync.js");var common=require("./common.js");var setopts=common.setopts;var ownProp=common.ownProp;var inflight=require("inflight");var util=require("util");var childrenIgnored=common.childrenIgnored;var isIgnored=common.isIgnored;var once=require("once");function glob(pattern,options,cb){if(typeof options==="function")cb=options,options={};if(!options)options={};if(options.sync){if(cb)throw new TypeError("callback provided to sync glob");return globSync(pattern,options)}return new Glob(pattern,options,cb)}glob.sync=globSync;var GlobSync=glob.GlobSync=globSync.GlobSync;glob.glob=glob;function extend(origin,add){if(add===null||typeof add!=="object"){return origin}var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin}glob.hasMagic=function(pattern,options_){var options=extend({},options_);options.noprocess=true;var g=new Glob(pattern,options);var set=g.minimatch.set;if(!pattern)return false;if(set.length>1)return true;for(var j=0;j<set[0].length;j++){if(typeof set[0][j]!=="string")return true}return false};glob.Glob=Glob;inherits(Glob,EE);function Glob(pattern,options,cb){if(typeof options==="function"){cb=options;options=null}if(options&&options.sync){if(cb)throw new TypeError("callback provided to sync glob");return new GlobSync(pattern,options)}if(!(this instanceof Glob))return new Glob(pattern,options,cb);setopts(this,pattern,options);this._didRealPath=false;var n=this.minimatch.set.length;this.matches=new Array(n);if(typeof cb==="function"){cb=once(cb);this.on("error",cb);this.on("end",function(matches){cb(null,matches)})}var self=this;this._processing=0;this._emitQueue=[];this._processQueue=[];this.paused=false;if(this.noprocess)return this;if(n===0)return done();var sync=true;for(var i=0;i<n;i++){this._process(this.minimatch.set[i],i,false,done)}sync=false;function done(){--self._processing;if(self._processing<=0){if(sync){process.nextTick(function(){self._finish()})}else{self._finish()}}}}Glob.prototype._finish=function(){assert(this instanceof Glob);if(this.aborted)return;if(this.realpath&&!this._didRealpath)return this._realpath();common.finish(this);this.emit("end",this.found)};Glob.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=true;var n=this.matches.length;if(n===0)return this._finish();var self=this;for(var i=0;i<this.matches.length;i++)this._realpathSet(i,next);function next(){if(--n===0)self._finish()}};Glob.prototype._realpathSet=function(index,cb){var matchset=this.matches[index];if(!matchset)return cb();var found=Object.keys(matchset);var self=this;var n=found.length;if(n===0)return cb();var set=this.matches[index]=Object.create(null);found.forEach(function(p,i){p=self._makeAbs(p);rp.realpath(p,self.realpathCache,function(er,real){if(!er)set[real]=true;else if(er.syscall==="stat")set[p]=true;else self.emit("error",er);if(--n===0){self.matches[index]=set;cb()}})})};Glob.prototype._mark=function(p){return common.mark(this,p)};Glob.prototype._makeAbs=function(f){return common.makeAbs(this,f)};Glob.prototype.abort=function(){this.aborted=true;this.emit("abort")};Glob.prototype.pause=function(){if(!this.paused){this.paused=true;this.emit("pause")}};Glob.prototype.resume=function(){if(this.paused){this.emit("resume");this.paused=false;if(this._emitQueue.length){var eq=this._emitQueue.slice(0);this._emitQueue.length=0;for(var i=0;i<eq.length;i++){var e=eq[i];this._emitMatch(e[0],e[1])}}if(this._processQueue.length){var pq=this._processQueue.slice(0);this._processQueue.length=0;for(var i=0;i<pq.length;i++){var p=pq[i];this._processing--;this._process(p[0],p[1],p[2],p[3])}}}};Glob.prototype._process=function(pattern,index,inGlobStar,cb){assert(this instanceof Glob);assert(typeof cb==="function");if(this.aborted)return;this._processing++;if(this.paused){this._processQueue.push([pattern,index,inGlobStar,cb]);return}var n=0;while(typeof pattern[n]==="string"){n++}var prefix;switch(n){case pattern.length:this._processSimple(pattern.join("/"),index,cb);return;case 0:prefix=null;break;default:prefix=pattern.slice(0,n).join("/");break}var remain=pattern.slice(n);var read;if(prefix===null)read=".";else if(isAbsolute(prefix)||isAbsolute(pattern.map(function(p){return typeof p==="string"?p:"[*]"}).join("/"))){if(!prefix||!isAbsolute(prefix))prefix="/"+prefix;read=prefix}else read=prefix;var abs=this._makeAbs(read);if(childrenIgnored(this,read))return cb();var isGlobStar=remain[0]===minimatch.GLOBSTAR;if(isGlobStar)this._processGlobStar(prefix,read,abs,remain,index,inGlobStar,cb);else this._processReaddir(prefix,read,abs,remain,index,inGlobStar,cb)};Glob.prototype._processReaddir=function(prefix,read,abs,remain,index,inGlobStar,cb){var self=this;this._readdir(abs,inGlobStar,function(er,entries){return self._processReaddir2(prefix,read,abs,remain,index,inGlobStar,entries,cb)})};Glob.prototype._processReaddir2=function(prefix,read,abs,remain,index,inGlobStar,entries,cb){if(!entries)return cb();var pn=remain[0];var negate=!!this.minimatch.negate;var rawGlob=pn._glob;var dotOk=this.dot||rawGlob.charAt(0)===".";var matchedEntries=[];for(var i=0;i<entries.length;i++){var e=entries[i];if(e.charAt(0)!=="."||dotOk){var m;if(negate&&!prefix){m=!e.match(pn)}else{m=e.match(pn)}if(m)matchedEntries.push(e)}}var len=matchedEntries.length;if(len===0)return cb();if(remain.length===1&&!this.mark&&!this.stat){if(!this.matches[index])this.matches[index]=Object.create(null);for(var i=0;i<len;i++){var e=matchedEntries[i];if(prefix){if(prefix!=="/")e=prefix+"/"+e;else e=prefix+e}if(e.charAt(0)==="/"&&!this.nomount){e=path.join(this.root,e)}this._emitMatch(index,e)}return cb()}remain.shift();for(var i=0;i<len;i++){var e=matchedEntries[i];var newPattern;if(prefix){if(prefix!=="/")e=prefix+"/"+e;else e=prefix+e}this._process([e].concat(remain),index,inGlobStar,cb)}cb()};Glob.prototype._emitMatch=function(index,e){if(this.aborted)return;if(isIgnored(this,e))return;if(this.paused){this._emitQueue.push([index,e]);return}var abs=isAbsolute(e)?e:this._makeAbs(e);if(this.mark)e=this._mark(e);if(this.absolute)e=abs;if(this.matches[index][e])return;if(this.nodir){var c=this.cache[abs];if(c==="DIR"||Array.isArray(c))return}this.matches[index][e]=true;var st=this.statCache[abs];if(st)this.emit("stat",e,st);this.emit("match",e)};Glob.prototype._readdirInGlobStar=function(abs,cb){if(this.aborted)return;if(this.follow)return this._readdir(abs,false,cb);var lstatkey="lstat\0"+abs;var self=this;var lstatcb=inflight(lstatkey,lstatcb_);if(lstatcb)self.fs.lstat(abs,lstatcb);function lstatcb_(er,lstat){if(er&&er.code==="ENOENT")return cb();var isSym=lstat&&lstat.isSymbolicLink();self.symlinks[abs]=isSym;if(!isSym&&lstat&&!lstat.isDirectory()){self.cache[abs]="FILE";cb()}else self._readdir(abs,false,cb)}};Glob.prototype._readdir=function(abs,inGlobStar,cb){if(this.aborted)return;cb=inflight("readdir\0"+abs+"\0"+inGlobStar,cb);if(!cb)return;if(inGlobStar&&!ownProp(this.symlinks,abs))return this._readdirInGlobStar(abs,cb);if(ownProp(this.cache,abs)){var c=this.cache[abs];if(!c||c==="FILE")return cb();if(Array.isArray(c))return cb(null,c)}var self=this;self.fs.readdir(abs,readdirCb(this,abs,cb))};function readdirCb(self,abs,cb){return function(er,entries){if(er)self._readdirError(abs,er,cb);else self._readdirEntries(abs,entries,cb)}}Glob.prototype._readdirEntries=function(abs,entries,cb){if(this.aborted)return;if(!this.mark&&!this.stat){for(var i=0;i<entries.length;i++){var e=entries[i];if(abs==="/")e=abs+e;else e=abs+"/"+e;this.cache[e]=true}}this.cache[abs]=entries;return cb(null,entries)};Glob.prototype._readdirError=function(f,er,cb){if(this.aborted)return;switch(er.code){case"ENOTSUP":case"ENOTDIR":var abs=this._makeAbs(f);this.cache[abs]="FILE";if(abs===this.cwdAbs){var error=new Error(er.code+" invalid cwd "+this.cwd);error.path=this.cwd;error.code=er.code;this.emit("error",error);this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(f)]=false;break;default:this.cache[this._makeAbs(f)]=false;if(this.strict){this.emit("error",er);this.abort()}if(!this.silent)console.error("glob error",er);break}return cb()};Glob.prototype._processGlobStar=function(prefix,read,abs,remain,index,inGlobStar,cb){var self=this;this._readdir(abs,inGlobStar,function(er,entries){self._processGlobStar2(prefix,read,abs,remain,index,inGlobStar,entries,cb)})};Glob.prototype._processGlobStar2=function(prefix,read,abs,remain,index,inGlobStar,entries,cb){if(!entries)return cb();var remainWithoutGlobStar=remain.slice(1);var gspref=prefix?[prefix]:[];var noGlobStar=gspref.concat(remainWithoutGlobStar);this._process(noGlobStar,index,false,cb);var isSym=this.symlinks[abs];var len=entries.length;if(isSym&&inGlobStar)return cb();for(var i=0;i<len;i++){var e=entries[i];if(e.charAt(0)==="."&&!this.dot)continue;var instead=gspref.concat(entries[i],remainWithoutGlobStar);this._process(instead,index,true,cb);var below=gspref.concat(entries[i],remain);this._process(below,index,true,cb)}cb()};Glob.prototype._processSimple=function(prefix,index,cb){var self=this;this._stat(prefix,function(er,exists){self._processSimple2(prefix,index,er,exists,cb)})};Glob.prototype._processSimple2=function(prefix,index,er,exists,cb){if(!this.matches[index])this.matches[index]=Object.create(null);if(!exists)return cb();if(prefix&&isAbsolute(prefix)&&!this.nomount){var trail=/[\/\\]$/.test(prefix);if(prefix.charAt(0)==="/"){prefix=path.join(this.root,prefix)}else{prefix=path.resolve(this.root,prefix);if(trail)prefix+="/"}}if(process.platform==="win32")prefix=prefix.replace(/\\/g,"/");this._emitMatch(index,prefix);cb()};Glob.prototype._stat=function(f,cb){var abs=this._makeAbs(f);var needDir=f.slice(-1)==="/";if(f.length>this.maxLength)return cb();if(!this.stat&&ownProp(this.cache,abs)){var c=this.cache[abs];if(Array.isArray(c))c="DIR";if(!needDir||c==="DIR")return cb(null,c);if(needDir&&c==="FILE")return cb()}var exists;var stat=this.statCache[abs];if(stat!==undefined){if(stat===false)return cb(null,stat);else{var type=stat.isDirectory()?"DIR":"FILE";if(needDir&&type==="FILE")return cb();else return cb(null,type,stat)}}var self=this;var statcb=inflight("stat\0"+abs,lstatcb_);if(statcb)self.fs.lstat(abs,statcb);function lstatcb_(er,lstat){if(lstat&&lstat.isSymbolicLink()){return self.fs.stat(abs,function(er,stat){if(er)self._stat2(f,abs,null,lstat,cb);else self._stat2(f,abs,er,stat,cb)})}else{self._stat2(f,abs,er,lstat,cb)}}};Glob.prototype._stat2=function(f,abs,er,stat,cb){if(er&&(er.code==="ENOENT"||er.code==="ENOTDIR")){this.statCache[abs]=false;return cb()}var needDir=f.slice(-1)==="/";this.statCache[abs]=stat;if(abs.slice(-1)==="/"&&stat&&!stat.isDirectory())return cb(null,false,stat);var c=true;if(stat)c=stat.isDirectory()?"DIR":"FILE";this.cache[abs]=this.cache[abs]||c;if(needDir&&c==="FILE")return cb();return cb(null,c,stat)}},{"./common.js":192,"./sync.js":194,assert:undefined,events:undefined,"fs.realpath":175,inflight:197,inherits:198,minimatch:211,once:221,path:undefined,"path-is-absolute":223,util:undefined}],194:[function(require,module,exports){module.exports=globSync;globSync.GlobSync=GlobSync;var rp=require("fs.realpath");var minimatch=require("minimatch");var Minimatch=minimatch.Minimatch;var Glob=require("./glob.js").Glob;var util=require("util");var path=require("path");var assert=require("assert");var isAbsolute=require("path-is-absolute");var common=require("./common.js");var setopts=common.setopts;var ownProp=common.ownProp;var childrenIgnored=common.childrenIgnored;var isIgnored=common.isIgnored;function globSync(pattern,options){if(typeof options==="function"||arguments.length===3)throw new TypeError("callback provided to sync glob\n"+"See: https://github.com/isaacs/node-glob/issues/167");return new GlobSync(pattern,options).found}function GlobSync(pattern,options){if(!pattern)throw new Error("must provide pattern");if(typeof options==="function"||arguments.length===3)throw new TypeError("callback provided to sync glob\n"+"See: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof GlobSync))return new GlobSync(pattern,options);setopts(this,pattern,options);if(this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var i=0;i<n;i++){this._process(this.minimatch.set[i],i,false)}this._finish()}GlobSync.prototype._finish=function(){assert.ok(this instanceof GlobSync);if(this.realpath){var self=this;this.matches.forEach(function(matchset,index){var set=self.matches[index]=Object.create(null);for(var p in matchset){try{p=self._makeAbs(p);var real=rp.realpathSync(p,self.realpathCache);set[real]=true}catch(er){if(er.syscall==="stat")set[self._makeAbs(p)]=true;else throw er}}})}common.finish(this)};GlobSync.prototype._process=function(pattern,index,inGlobStar){assert.ok(this instanceof GlobSync);var n=0;while(typeof pattern[n]==="string"){n++}var prefix;switch(n){case pattern.length:this._processSimple(pattern.join("/"),index);return;case 0:prefix=null;break;default:prefix=pattern.slice(0,n).join("/");break}var remain=pattern.slice(n);var read;if(prefix===null)read=".";else if(isAbsolute(prefix)||isAbsolute(pattern.map(function(p){return typeof p==="string"?p:"[*]"}).join("/"))){if(!prefix||!isAbsolute(prefix))prefix="/"+prefix;read=prefix}else read=prefix;var abs=this._makeAbs(read);if(childrenIgnored(this,read))return;var isGlobStar=remain[0]===minimatch.GLOBSTAR;if(isGlobStar)this._processGlobStar(prefix,read,abs,remain,index,inGlobStar);else this._processReaddir(prefix,read,abs,remain,index,inGlobStar)};GlobSync.prototype._processReaddir=function(prefix,read,abs,remain,index,inGlobStar){var entries=this._readdir(abs,inGlobStar);if(!entries)return;var pn=remain[0];var negate=!!this.minimatch.negate;var rawGlob=pn._glob;var dotOk=this.dot||rawGlob.charAt(0)===".";var matchedEntries=[];for(var i=0;i<entries.length;i++){var e=entries[i];if(e.charAt(0)!=="."||dotOk){var m;if(negate&&!prefix){m=!e.match(pn)}else{m=e.match(pn)}if(m)matchedEntries.push(e)}}var len=matchedEntries.length;if(len===0)return;if(remain.length===1&&!this.mark&&!this.stat){if(!this.matches[index])this.matches[index]=Object.create(null);for(var i=0;i<len;i++){var e=matchedEntries[i];if(prefix){if(prefix.slice(-1)!=="/")e=prefix+"/"+e;else e=prefix+e}if(e.charAt(0)==="/"&&!this.nomount){e=path.join(this.root,e)}this._emitMatch(index,e)}return}remain.shift();for(var i=0;i<len;i++){var e=matchedEntries[i];var newPattern;if(prefix)newPattern=[prefix,e];else newPattern=[e];this._process(newPattern.concat(remain),index,inGlobStar)}};GlobSync.prototype._emitMatch=function(index,e){if(isIgnored(this,e))return;var abs=this._makeAbs(e);if(this.mark)e=this._mark(e);if(this.absolute){e=abs}if(this.matches[index][e])return;if(this.nodir){var c=this.cache[abs];if(c==="DIR"||Array.isArray(c))return}this.matches[index][e]=true;if(this.stat)this._stat(e)};GlobSync.prototype._readdirInGlobStar=function(abs){if(this.follow)return this._readdir(abs,false);var entries;var lstat;var stat;try{lstat=this.fs.lstatSync(abs)}catch(er){if(er.code==="ENOENT"){return null}}var isSym=lstat&&lstat.isSymbolicLink();this.symlinks[abs]=isSym;if(!isSym&&lstat&&!lstat.isDirectory())this.cache[abs]="FILE";else entries=this._readdir(abs,false);return entries};GlobSync.prototype._readdir=function(abs,inGlobStar){var entries;if(inGlobStar&&!ownProp(this.symlinks,abs))return this._readdirInGlobStar(abs);if(ownProp(this.cache,abs)){var c=this.cache[abs];if(!c||c==="FILE")return null;if(Array.isArray(c))return c}try{return this._readdirEntries(abs,this.fs.readdirSync(abs))}catch(er){this._readdirError(abs,er);return null}};GlobSync.prototype._readdirEntries=function(abs,entries){if(!this.mark&&!this.stat){for(var i=0;i<entries.length;i++){var e=entries[i];if(abs==="/")e=abs+e;else e=abs+"/"+e;this.cache[e]=true}}this.cache[abs]=entries;return entries};GlobSync.prototype._readdirError=function(f,er){switch(er.code){case"ENOTSUP":case"ENOTDIR":var abs=this._makeAbs(f);this.cache[abs]="FILE";if(abs===this.cwdAbs){var error=new Error(er.code+" invalid cwd "+this.cwd);error.path=this.cwd;error.code=er.code;throw error}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(f)]=false;break;default:this.cache[this._makeAbs(f)]=false;if(this.strict)throw er;if(!this.silent)console.error("glob error",er);break}};GlobSync.prototype._processGlobStar=function(prefix,read,abs,remain,index,inGlobStar){var entries=this._readdir(abs,inGlobStar);if(!entries)return;var remainWithoutGlobStar=remain.slice(1);var gspref=prefix?[prefix]:[];var noGlobStar=gspref.concat(remainWithoutGlobStar);this._process(noGlobStar,index,false);var len=entries.length;var isSym=this.symlinks[abs];if(isSym&&inGlobStar)return;for(var i=0;i<len;i++){var e=entries[i];if(e.charAt(0)==="."&&!this.dot)continue;var instead=gspref.concat(entries[i],remainWithoutGlobStar);this._process(instead,index,true);var below=gspref.concat(entries[i],remain);this._process(below,index,true)}};GlobSync.prototype._processSimple=function(prefix,index){var exists=this._stat(prefix);if(!this.matches[index])this.matches[index]=Object.create(null);if(!exists)return;if(prefix&&isAbsolute(prefix)&&!this.nomount){var trail=/[\/\\]$/.test(prefix);if(prefix.charAt(0)==="/"){prefix=path.join(this.root,prefix)}else{prefix=path.resolve(this.root,prefix);if(trail)prefix+="/"}}if(process.platform==="win32")prefix=prefix.replace(/\\/g,"/");this._emitMatch(index,prefix)};GlobSync.prototype._stat=function(f){var abs=this._makeAbs(f);var needDir=f.slice(-1)==="/";if(f.length>this.maxLength)return false;if(!this.stat&&ownProp(this.cache,abs)){var c=this.cache[abs];if(Array.isArray(c))c="DIR";if(!needDir||c==="DIR")return c;if(needDir&&c==="FILE")return false}var exists;var stat=this.statCache[abs];if(!stat){var lstat;try{lstat=this.fs.lstatSync(abs)}catch(er){if(er&&(er.code==="ENOENT"||er.code==="ENOTDIR")){this.statCache[abs]=false;return false}}if(lstat&&lstat.isSymbolicLink()){try{stat=this.fs.statSync(abs)}catch(er){stat=lstat}}else{stat=lstat}}this.statCache[abs]=stat;var c=true;if(stat)c=stat.isDirectory()?"DIR":"FILE";this.cache[abs]=this.cache[abs]||c;if(needDir&&c==="FILE")return false;return c};GlobSync.prototype._mark=function(p){return common.mark(this,p)};GlobSync.prototype._makeAbs=function(f){return common.makeAbs(this,f)}},{"./common.js":192,"./glob.js":193,assert:undefined,"fs.realpath":175,minimatch:211,path:undefined,"path-is-absolute":223,util:undefined}],195:[function(require,module,exports){"use strict";module.exports=(flag,argv=process.argv)=>{const prefix=flag.startsWith("-")?"":flag.length===1?"-":"--";const position=argv.indexOf(prefix+flag);const terminatorPosition=argv.indexOf("--");return position!==-1&&(terminatorPosition===-1||position<terminatorPosition)}},{}],196:[function(require,module,exports){"use strict";var os=require("os");var hasUnicode=module.exports=function(){if(os.type()=="Windows_NT"){return false}var isUTF8=/UTF-?8$/i;var ctype=process.env.LC_ALL||process.env.LC_CTYPE||process.env.LANG;return isUTF8.test(ctype)}},{os:undefined}],197:[function(require,module,exports){var wrappy=require("wrappy");var reqs=Object.create(null);var once=require("once");module.exports=wrappy(inflight);function inflight(key,cb){if(reqs[key]){reqs[key].push(cb);return null}else{reqs[key]=[cb];return makeres(key)}}function makeres(key){return once(function RES(){var cbs=reqs[key];var len=cbs.length;var args=slice(arguments);try{for(var i=0;i<len;i++){cbs[i].apply(null,args)}}finally{if(cbs.length>len){cbs.splice(0,len);process.nextTick(function(){RES.apply(null,args)})}else{delete reqs[key]}}})}function slice(args){var length=args.length;var array=[];for(var i=0;i<length;i++)array[i]=args[i];return array}},{once:221,wrappy:363}],198:[function(require,module,exports){try{var util=require("util");if(typeof util.inherits!=="function")throw"";module.exports=util.inherits}catch(e){module.exports=require("./inherits_browser.js")}},{"./inherits_browser.js":199,util:undefined}],199:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}}else{module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}}},{}],200:[function(require,module,exports){"use strict";const isFullwidthCodePoint=codePoint=>{if(Number.isNaN(codePoint)){return false}if(codePoint>=4352&&(codePoint<=4447||codePoint===9001||codePoint===9002||11904<=codePoint&&codePoint<=12871&&codePoint!==12351||12880<=codePoint&&codePoint<=19903||19968<=codePoint&&codePoint<=42182||43360<=codePoint&&codePoint<=43388||44032<=codePoint&&codePoint<=55203||63744<=codePoint&&codePoint<=64255||65040<=codePoint&&codePoint<=65049||65072<=codePoint&&codePoint<=65131||65281<=codePoint&&codePoint<=65376||65504<=codePoint&&codePoint<=65510||110592<=codePoint&&codePoint<=110593||127488<=codePoint&&codePoint<=127569||131072<=codePoint&&codePoint<=262141)){return true}return false};module.exports=isFullwidthCodePoint;module.exports.default=isFullwidthCodePoint},{}],201:[function(require,module,exports){"use strict";var loggerPrototype=require("./lib/private/logger-prototype");module.exports=loggerPrototype._createLevel("info")},{"./lib/private/logger-prototype":206}],202:[function(require,module,exports){module.exports=["error","warning","notice","info","debug"]},{}],203:[function(require,module,exports){"use strict";var uniGlobal=require("uni-global")("medikoo/log/202110");if(uniGlobal.emitter){module.exports=uniGlobal.emitter;return}var ee=require("event-emitter");module.exports=uniGlobal.emitter=ee()},{"event-emitter":161,"uni-global":355}],204:[function(require,module,exports){"use strict";module.exports=RegExp.prototype.test.bind(/^[a-z0-9-]+$/)},{}],205:[function(require,module,exports){"use strict";var noop=require("es5-ext/function/noop"),objForEach=require("es5-ext/object/for-each"),d=require("d");module.exports={isEnabled:d("ew",true),enable:d(function(){return this._setEnabledState(true)}),disable:d(function(){return this._setEnabledState(false)}),_setEnabledState:d(function(state){var cache=[];this._setEnabledStateRecursively(state,cache);var result={restore:function(){cache.forEach(function(data){if(data.hasDirectSetting)data.logger.isEnabled=!state;else delete data.logger.isEnabled});result.restore=noop}};return result}),_setEnabledStateRecursively:d(function(newState,cache){if(this.isEnabled!==newState){cache.push({logger:this,hasDirectSetting:hasOwnProperty.call(this,"isEnabled")});this.isEnabled=newState}objForEach(this._childNamespaceLoggers,function(namespacedLogger){namespacedLogger._setEnabledStateRecursively(newState,cache)})})}},{d:84,"es5-ext/function/noop":123,"es5-ext/object/for-each":134}],206:[function(require,module,exports){"use strict";var ensureString=require("type/string/ensure"),aFrom=require("es5-ext/array/from"),assign=require("es5-ext/object/assign"),setPrototypeOf=require("es5-ext/object/set-prototype-of"),d=require("d"),lazy=require("d/lazy"),levelNames=require("../../../levels"),emitter=require("../../emitter"),enableDisableProps=require("./enable-disable-props"),namespaceProps=require("./namespace-props");var levelLoggers=Object.create(null);var loggerPrototype=Object.create(Function.prototype,assign({isLevelInitialized:d("e",function(level){level=ensureString(level);if(this.level===level)return true;var logger=levelLoggers[level];if(!logger)return false;if(!this.namespace)return true;return logger.isNamespaceInitialized(this.namespace)}),getAllInitializedLevels:d("e",function(){return Object.keys(levelLoggers).filter(function(level){return this.isLevelInitialized(level)},this).map(function(level){return this._getLevelLogger(level)},this)}),_createLogger:d(function(){return setPrototypeOf(function self(msgItemIgnored){emitter.emit("log",{logger:self,messageTokens:aFrom(arguments)})},this)}),_createLevel:d(function(levelName){if(levelLoggers[levelName])return levelLoggers[levelName];var logger=loggerPrototype._createLogger();Object.defineProperties(logger,{level:d("e",levelName),levelIndex:d("e",levelNames.indexOf(levelName)),levelRoot:d("e",logger)});levelLoggers[levelName]=logger;emitter.emit("init",{logger:logger});return logger}),_getLevelLogger:d(function(newLevel){if(this.level===newLevel)return this;var levelLogger=this._createLevel(newLevel);return this.namespaceTokens.reduce(function(currentLogger,token){return currentLogger._createNamespace(token)},levelLogger)})},lazy(assign(levelNames.reduce(function(descriptors,level){descriptors[level]=d("e",function(){return this._getLevelLogger(level)},{cacheName:"_"+level});return descriptors},{}),{warn:d(function(){return this._getLevelLogger("warning")},{cacheName:"_warning"})})),namespaceProps,enableDisableProps));module.exports=loggerPrototype},{"../../../levels":202,"../../emitter":203,"./enable-disable-props":205,"./namespace-props":207,d:84,"d/lazy":85,"es5-ext/array/from":117,"es5-ext/object/assign":130,"es5-ext/object/set-prototype-of":142,"type/string/ensure":351}],207:[function(require,module,exports){"use strict";var ensureString=require("type/string/ensure"),toShortString=require("type/lib/to-short-string"),identity=require("es5-ext/function/identity"),assign=require("es5-ext/object/assign"),objToArray=require("es5-ext/object/to-array"),d=require("d"),lazy=require("d/lazy"),emitter=require("../../emitter"),isNamespaceToken=require("../is-namespace-token");module.exports=assign({get:d(function(namespace){namespace=ensureString(namespace);var namespaceTokens=namespace.split(":");namespaceTokens.forEach(function(namespaceToken){if(!isNamespaceToken(namespaceToken)){throw new TypeError(toShortString(namespace)+" is not a valid namespace string "+"(only 'a-z0-9-' chars are allowed and ':' as delimiter)")}});return namespaceTokens.reduce(function(currentLogger,token){return currentLogger._createNamespace(token)},this)}),isNamespaceInitialized:d("e",function(namespace){var namespaceTokens=ensureString(namespace).split(":");var currentLogger=this;return namespaceTokens.every(function(nsToken){return currentLogger=currentLogger._childNamespaceLoggers[nsToken]})}),getAllInitializedNamespaces:d("e",function(){return objToArray(this._childNamespaceLoggers,identity)}),_createNamespace:d(function(namespaceToken){if(this._childNamespaceLoggers[namespaceToken]){return this._childNamespaceLoggers[namespaceToken]}var logger=Object.defineProperties(this._createLogger(),{_namespaceToken:d("",namespaceToken)});this._childNamespaceLoggers[namespaceToken]=logger;emitter.emit("init",{logger:logger});return logger}),_namespaceToken:d("",null)},lazy({namespace:d("e",function(){return this.namespaceTokens.join(":")||null},{cacheName:"_namespace"}),namespaceTokens:d("e",function(){return this._namespaceToken?Object.getPrototypeOf(this).namespaceTokens.concat(this._namespaceToken):[]},{cacheName:"_namespaceTokens"}),_childNamespaceLoggers:d("",function(){return Object.create(null)},{cacheName:"__childNamespaceLoggers"})}))},{"../../emitter":203,"../is-namespace-token":204,d:84,"d/lazy":85,"es5-ext/function/identity":120,"es5-ext/object/assign":130,"es5-ext/object/to-array":145,"type/lib/to-short-string":346,"type/string/ensure":351}],208:[function(require,module,exports){module.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:true},"application/3gpp-ims+xml":{source:"iana",compressible:true},"application/3gpphal+json":{source:"iana",compressible:true},"application/3gpphalforms+json":{source:"iana",compressible:true},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:true},"application/alto-costmap+json":{source:"iana",compressible:true},"application/alto-costmapfilter+json":{source:"iana",compressible:true},"application/alto-directory+json":{source:"iana",compressible:true},"application/alto-endpointcost+json":{source:"iana",compressible:true},"application/alto-endpointcostparams+json":{source:"iana",compressible:true},"application/alto-endpointprop+json":{source:"iana",compressible:true},"application/alto-endpointpropparams+json":{source:"iana",compressible:true},"application/alto-error+json":{source:"iana",compressible:true},"application/alto-networkmap+json":{source:"iana",compressible:true},"application/alto-networkmapfilter+json":{source:"iana",compressible:true},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:true},"application/alto-updatestreamparams+json":{source:"iana",compressible:true},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:true,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:true,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:true,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:true,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:true,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:true,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:true},"application/atsc-rsat+xml":{source:"iana",compressible:true,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:true},"application/bacnet-xdd+zip":{source:"iana",compressible:false},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:false,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:true},"application/calendar+json":{source:"iana",compressible:true},"application/calendar+xml":{source:"iana",compressible:true,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:true},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:true},"application/ccxml+xml":{source:"iana",compressible:true,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:true,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:true},"application/cellml+xml":{source:"iana",compressible:true},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:true},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:true},"application/clue_info+xml":{source:"iana",compressible:true},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:true},"application/coap-group+json":{source:"iana",compressible:true},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:true},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:true,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:true},"application/cstadata+xml":{source:"iana",compressible:true},"application/csvm+json":{source:"iana",compressible:true},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:true},"application/dash+xml":{source:"iana",compressible:true,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:true,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:true,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:true},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:true},"application/dicom+xml":{source:"iana",compressible:true},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:true},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:true,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:true},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:true,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:true,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:false},"application/edifact":{source:"iana",compressible:false},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:true},"application/elm+xml":{source:"iana",compressible:true},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:true},"application/emergencycalldata.comment+xml":{source:"iana",compressible:true},"application/emergencycalldata.control+xml":{source:"iana",compressible:true},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:true},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:true},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:true},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:true},"application/emergencycalldata.veds+xml":{source:"iana",compressible:true},"application/emma+xml":{source:"iana",compressible:true,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:true,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:true},"application/epub+zip":{source:"iana",compressible:false,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:true},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:true,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:true},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:true},"application/fido.trusted-apps+json":{compressible:true},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:false},"application/framework-attributes+xml":{source:"iana",compressible:true},"application/geo+json":{source:"iana",compressible:true,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:true},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:true,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:true,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:false,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:true},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:true},"application/ibe-pkg-reply+xml":{source:"iana",compressible:true},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:true},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:true,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:true,extensions:["its"]},"application/java-archive":{source:"apache",compressible:false,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:false,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:false,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:true,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:true},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:true},"application/jrd+json":{source:"iana",compressible:true},"application/jscalendar+json":{source:"iana",compressible:true},"application/json":{source:"iana",charset:"UTF-8",compressible:true,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:true},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:true,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:true},"application/jwk-set+json":{source:"iana",compressible:true},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:true},"application/kpml-response+xml":{source:"iana",compressible:true},"application/ld+json":{source:"iana",compressible:true,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:true,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:true},"application/lost+xml":{source:"iana",compressible:true,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:true},"application/lpf+zip":{source:"iana",compressible:false},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:true,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:true,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:true,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:true,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:true},"application/mathml-presentation+xml":{source:"iana",compressible:true},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:true},"application/mbms-deregister+xml":{source:"iana",compressible:true},"application/mbms-envelope+xml":{source:"iana",compressible:true},"application/mbms-msk+xml":{source:"iana",compressible:true},"application/mbms-msk-response+xml":{source:"iana",compressible:true},"application/mbms-protection-description+xml":{source:"iana",compressible:true},"application/mbms-reception-report+xml":{source:"iana",compressible:true},"application/mbms-register+xml":{source:"iana",compressible:true},"application/mbms-register-response+xml":{source:"iana",compressible:true},"application/mbms-schedule+xml":{source:"iana",compressible:true},"application/mbms-user-service-description+xml":{source:"iana",compressible:true},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:true,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:true},"application/mediaservercontrol+xml":{source:"iana",compressible:true,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:true},"application/metalink+xml":{source:"apache",compressible:true,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:true,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:true,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:true,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:true,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:true,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:true},"application/mrb-publish+xml":{source:"iana",compressible:true},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:true},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:true},"application/msword":{source:"iana",compressible:false,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:true},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:true},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:false,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:true},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:true,extensions:["opf"]},"application/ogg":{source:"iana",compressible:false,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:true,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:true},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:false},"application/p2p-overlay+xml":{source:"iana",compressible:true,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:true,extensions:["xer"]},"application/pdf":{source:"iana",compressible:false,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:false,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:true},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:true},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:true,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:true},"application/postscript":{source:"iana",compressible:true,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:true},"application/problem+json":{source:"iana",compressible:true},"application/problem+xml":{source:"iana",compressible:true},"application/provenance+xml":{source:"iana",compressible:true,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:false},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:true},"application/pskc+xml":{source:"iana",compressible:true,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:true},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:true,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:true},"application/rdf+xml":{source:"iana",compressible:true,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:true,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:true},"application/resource-lists+xml":{source:"iana",compressible:true,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:true,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:true},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:true},"application/rls-services+xml":{source:"iana",compressible:true,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:true,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:true,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:true,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:true,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:true,extensions:["rss"]},"application/rtf":{source:"iana",compressible:true,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:true},"application/samlmetadata+xml":{source:"iana",compressible:true},"application/sarif+json":{source:"iana",compressible:true},"application/sarif-external-properties+json":{source:"iana",compressible:true},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:true,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:true},"application/scim+json":{source:"iana",compressible:true},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:true},"application/senml+xml":{source:"iana",compressible:true,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:true},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:true},"application/sensml+xml":{source:"iana",compressible:true,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:true},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:true,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:true},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:true,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:true},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:true,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:true},"application/spirits-event+xml":{source:"iana",compressible:true},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:true,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:true,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:true,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:true,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:true},"application/swid+xml":{source:"iana",compressible:true,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:true},"application/taxii+json":{source:"iana",compressible:true},"application/td+json":{source:"iana",compressible:true},"application/tei+xml":{source:"iana",compressible:true,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:true,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:true},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:true,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:true,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:false,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:true},"application/urc-ressheet+xml":{source:"iana",compressible:true,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:true,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:true},"application/vcard+json":{source:"iana",compressible:true},"application/vcard+xml":{source:"iana",compressible:true},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:true,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:true},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:true},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:true},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:true},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:true},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:true},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:true},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:true},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:true},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:true},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:true},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:true},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:true},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:false,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:true,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:true},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:true},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:false,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:true},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:true},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:true},"application/vnd.apple.installer+xml":{source:"iana",compressible:true,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:false,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:true},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:true},"application/vnd.avistar+xml":{source:"iana",compressible:true},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:true,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:true},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:true},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:true},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:true},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:true},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:true,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:true,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:true},"application/vnd.collection.doc+json":{source:"iana",compressible:true},"application/vnd.collection.next+json":{source:"iana",compressible:true},"application/vnd.comicbook+zip":{source:"iana",compressible:false},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:true},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:true,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:true},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:true},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:true},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:true},"application/vnd.cyclonedx+xml":{source:"iana",compressible:true},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:false},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:true,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:true},"application/vnd.dataresource+json":{source:"iana",compressible:true},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:true,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:true},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:true},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:true},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:true},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:true},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:true},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:true},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:true},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:true},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:true},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:true},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:true},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:true},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:true},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:false},"application/vnd.eszigno3+xml":{source:"iana",compressible:true,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:true},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:false},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:false},"application/vnd.etsi.cug+xml":{source:"iana",compressible:true},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:true},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:true},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:true},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:true},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:true},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:true},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:true},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:true},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:true},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:true},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:true},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:true},"application/vnd.etsi.sci+xml":{source:"iana",compressible:true},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:true},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:true},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:true},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:false},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:false},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:false},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:true},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:true},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:true},"application/vnd.geo+json":{source:"iana",compressible:true},"application/vnd.geocube+xml":{source:"iana",compressible:true},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:false,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:false,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:false,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:true,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:false,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:true},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:false},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:true},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:true},"application/vnd.hal+xml":{source:"iana",compressible:true,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:true,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:true},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:true},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:true},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:true},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:true},"application/vnd.hyper-item+json":{source:"iana",compressible:true},"application/vnd.hyperdrive+json":{source:"iana",compressible:true},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:false},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:false},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:true},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:true},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:true},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:true},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:true},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:true},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:true},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:true},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:true},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:true},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:true},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:true},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:true},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:true},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:true},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:true,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:false},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:true},"application/vnd.las.las+xml":{source:"iana",compressible:true,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:true},"application/vnd.liberty-request+xml":{source:"iana",compressible:true},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:true,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:false},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:true},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:true},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:true},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:true},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:false},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:true},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:true},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:true,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:false,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:true,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:true},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:true},"application/vnd.ms-outlook":{compressible:false,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:true},"application/vnd.ms-powerpoint":{source:"iana",compressible:false,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:true},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:true},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:true},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:false,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:true},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:true},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:true},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:true},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:true},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:true},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:true,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:true},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:false,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:false,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:false,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:false,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:true},"application/vnd.oftn.l10n+json":{source:"iana",compressible:true},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:true},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:true},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:true},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:true},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:true},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:true},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:true},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:true},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:true},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:true},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:true},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:true},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:true},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:true},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:true},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:true},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:true},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:true},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:true},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:true},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:true},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:true,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:true},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:true},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:true},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:true},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:true},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:true},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:true},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:true},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:true},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:true},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:true},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:true},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:true},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:true},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:true,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:true,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:false,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:false,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:false,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:true},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:true},"application/vnd.oracle.resource+json":{source:"iana",compressible:true},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:true},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:true},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:true},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:true},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:true},"application/vnd.radisys.msml+xml":{source:"iana",compressible:true},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:true},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:true},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:true},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:true},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:true},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:true},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:true},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:true},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:true},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:true},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:true},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:true},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:true},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:true,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:true},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:true,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:true},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:true},"application/vnd.shopkick+json":{source:"iana",compressible:true},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:true},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:true,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:true,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:true,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:true},"application/vnd.syft+json":{source:"iana",compressible:true},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:true,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:true,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:true,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:true},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:true},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:true},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:true},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:true,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:true},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:true},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:true},"application/vnd.wv.ssp+xml":{source:"iana",compressible:true},"application/vnd.xacml+json":{source:"iana",compressible:true},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:true},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:true,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:true,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:true,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:true},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:true,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:true,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:true},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:true,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:true,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:false,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:false,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:false,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:false,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:false,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:false},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:true,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:true,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:true,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:false,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:true,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:false,extensions:["jnlp"]},"application/x-javascript":{compressible:true},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:false,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:false},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:true,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:false,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:false,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:true,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:false,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:false,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:true,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:true,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:true,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:true,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:true,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:false,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:true,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:true,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:true,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:true,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:true},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:true,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:false,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:true},"application/xaml+xml":{source:"apache",compressible:true,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:true,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:true,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:true,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:true,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:true},"application/xcap-ns+xml":{source:"iana",compressible:true,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:true},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:true},"application/xenc+xml":{source:"iana",compressible:true,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:true,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:true},"application/xliff+xml":{source:"iana",compressible:true,extensions:["xlf"]},"application/xml":{source:"iana",compressible:true,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:true,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:true},"application/xmpp+xml":{source:"iana",compressible:true},"application/xop+xml":{source:"iana",compressible:true,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:true,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:true,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:true,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:true,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:true},"application/yang-data+xml":{source:"iana",compressible:true},"application/yang-patch+json":{source:"iana",compressible:true},"application/yang-patch+xml":{source:"iana",compressible:true},"application/yin+xml":{source:"iana",compressible:true,extensions:["yin"]},"application/zip":{source:"iana",compressible:false,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:false,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:false,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:false},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:false,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:false,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:false,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:false,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:false},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:false},"audio/vorbis":{source:"iana",compressible:false},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:false,extensions:["wav"]},"audio/wave":{compressible:false,extensions:["wav"]},"audio/webm":{source:"apache",compressible:false,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:false,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:false,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:true,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:true,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:false,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:false,extensions:["avif"]},"image/bmp":{source:"iana",compressible:true,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:false,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:false,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:false,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:false,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:false,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:false},"image/png":{source:"iana",compressible:false,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:true,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:false,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:true,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:true,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:true,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:true,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:true,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:false},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:false},"message/imdn+xml":{source:"iana",compressible:true},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:false},"message/rfc822":{source:"iana",compressible:true,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:true,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:true,extensions:["glb"]},"model/iges":{source:"iana",compressible:false,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:false,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:true,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:false,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:false,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:true,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:true},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:false,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:false,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:false,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:false,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:true,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:false},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:false},"multipart/form-data":{source:"iana",compressible:false},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:false},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:false},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:true,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:true},"text/cmd":{compressible:true},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:true,extensions:["css"]},"text/csv":{source:"iana",compressible:true,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:true,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:true},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:true,extensions:["jsx"]},"text/less":{compressible:true,extensions:["less"]},"text/markdown":{source:"iana",compressible:true,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:true,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:true,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:true,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:true,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:true,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:true,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:true,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:true,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:true,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:true},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:true},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:true,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:true,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:true,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:true,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:true,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:true,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:false,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:false,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:false,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:false,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:false,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:false,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:false,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:false,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:true},"x-shader/x-vertex":{compressible:true}}},{}],209:[function(require,module,exports){
/*!
 * mime-db
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015-2022 Douglas Christopher Wilson
 * MIT Licensed
 */
module.exports=require("./db.json")},{"./db.json":208}],210:[function(require,module,exports){
/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
"use strict";var db=require("mime-db");var extname=require("path").extname;var EXTRACT_TYPE_REGEXP=/^\s*([^;\s]*)(?:;|\s|$)/;var TEXT_TYPE_REGEXP=/^text\//i;exports.charset=charset;exports.charsets={lookup:charset};exports.contentType=contentType;exports.extension=extension;exports.extensions=Object.create(null);exports.lookup=lookup;exports.types=Object.create(null);populateMaps(exports.extensions,exports.types);function charset(type){if(!type||typeof type!=="string"){return false}var match=EXTRACT_TYPE_REGEXP.exec(type);var mime=match&&db[match[1].toLowerCase()];if(mime&&mime.charset){return mime.charset}if(match&&TEXT_TYPE_REGEXP.test(match[1])){return"UTF-8"}return false}function contentType(str){if(!str||typeof str!=="string"){return false}var mime=str.indexOf("/")===-1?exports.lookup(str):str;if(!mime){return false}if(mime.indexOf("charset")===-1){var charset=exports.charset(mime);if(charset)mime+="; charset="+charset.toLowerCase()}return mime}function extension(type){if(!type||typeof type!=="string"){return false}var match=EXTRACT_TYPE_REGEXP.exec(type);var exts=match&&exports.extensions[match[1].toLowerCase()];if(!exts||!exts.length){return false}return exts[0]}function lookup(path){if(!path||typeof path!=="string"){return false}var extension=extname("x."+path).toLowerCase().substr(1);if(!extension){return false}return exports.types[extension]||false}function populateMaps(extensions,types){var preference=["nginx","apache",undefined,"iana"];Object.keys(db).forEach(function forEachMimeType(type){var mime=db[type];var exts=mime.extensions;if(!exts||!exts.length){return}extensions[type]=exts;for(var i=0;i<exts.length;i++){var extension=exts[i];if(types[extension]){var from=preference.indexOf(db[types[extension]].source);var to=preference.indexOf(mime.source);if(types[extension]!=="application/octet-stream"&&(from>to||from===to&&types[extension].substr(0,12)==="application/")){continue}}types[extension]=type}})}},{"mime-db":209,path:undefined}],211:[function(require,module,exports){module.exports=minimatch;minimatch.Minimatch=Minimatch;var path=function(){try{return require("path")}catch(e){}}()||{sep:"/"};minimatch.sep=path.sep;var GLOBSTAR=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={};var expand=require("brace-expansion");var plTypes={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}};var qmark="[^/]";var star=qmark+"*?";var twoStarDot="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?";var twoStarNoDot="(?:(?!(?:\\/|^)\\.).)*?";var reSpecials=charSet("().*{}+?[]^$\\!");function charSet(s){return s.split("").reduce(function(set,c){set[c]=true;return set},{})}var slashSplit=/\/+/;minimatch.filter=filter;function filter(pattern,options){options=options||{};return function(p,i,list){return minimatch(p,pattern,options)}}function ext(a,b){b=b||{};var t={};Object.keys(a).forEach(function(k){t[k]=a[k]});Object.keys(b).forEach(function(k){t[k]=b[k]});return t}minimatch.defaults=function(def){if(!def||typeof def!=="object"||!Object.keys(def).length){return minimatch}var orig=minimatch;var m=function minimatch(p,pattern,options){return orig(p,pattern,ext(def,options))};m.Minimatch=function Minimatch(pattern,options){return new orig.Minimatch(pattern,ext(def,options))};m.Minimatch.defaults=function defaults(options){return orig.defaults(ext(def,options)).Minimatch};m.filter=function filter(pattern,options){return orig.filter(pattern,ext(def,options))};m.defaults=function defaults(options){return orig.defaults(ext(def,options))};m.makeRe=function makeRe(pattern,options){return orig.makeRe(pattern,ext(def,options))};m.braceExpand=function braceExpand(pattern,options){return orig.braceExpand(pattern,ext(def,options))};m.match=function(list,pattern,options){return orig.match(list,pattern,ext(def,options))};return m};Minimatch.defaults=function(def){return minimatch.defaults(def).Minimatch};function minimatch(p,pattern,options){assertValidPattern(pattern);if(!options)options={};if(!options.nocomment&&pattern.charAt(0)==="#"){return false}return new Minimatch(pattern,options).match(p)}function Minimatch(pattern,options){if(!(this instanceof Minimatch)){return new Minimatch(pattern,options)}assertValidPattern(pattern);if(!options)options={};pattern=pattern.trim();if(!options.allowWindowsEscape&&path.sep!=="/"){pattern=pattern.split(path.sep).join("/")}this.options=options;this.set=[];this.pattern=pattern;this.regexp=null;this.negate=false;this.comment=false;this.empty=false;this.partial=!!options.partial;this.make()}Minimatch.prototype.debug=function(){};Minimatch.prototype.make=make;function make(){var pattern=this.pattern;var options=this.options;if(!options.nocomment&&pattern.charAt(0)==="#"){this.comment=true;return}if(!pattern){this.empty=true;return}this.parseNegate();var set=this.globSet=this.braceExpand();if(options.debug)this.debug=function debug(){console.error.apply(console,arguments)};this.debug(this.pattern,set);set=this.globParts=set.map(function(s){return s.split(slashSplit)});this.debug(this.pattern,set);set=set.map(function(s,si,set){return s.map(this.parse,this)},this);this.debug(this.pattern,set);set=set.filter(function(s){return s.indexOf(false)===-1});this.debug(this.pattern,set);this.set=set}Minimatch.prototype.parseNegate=parseNegate;function parseNegate(){var pattern=this.pattern;var negate=false;var options=this.options;var negateOffset=0;if(options.nonegate)return;for(var i=0,l=pattern.length;i<l&&pattern.charAt(i)==="!";i++){negate=!negate;negateOffset++}if(negateOffset)this.pattern=pattern.substr(negateOffset);this.negate=negate}minimatch.braceExpand=function(pattern,options){return braceExpand(pattern,options)};Minimatch.prototype.braceExpand=braceExpand;function braceExpand(pattern,options){if(!options){if(this instanceof Minimatch){options=this.options}else{options={}}}pattern=typeof pattern==="undefined"?this.pattern:pattern;assertValidPattern(pattern);if(options.nobrace||!/\{(?:(?!\{).)*\}/.test(pattern)){return[pattern]}return expand(pattern)}var MAX_PATTERN_LENGTH=1024*64;var assertValidPattern=function(pattern){if(typeof pattern!=="string"){throw new TypeError("invalid pattern")}if(pattern.length>MAX_PATTERN_LENGTH){throw new TypeError("pattern is too long")}};Minimatch.prototype.parse=parse;var SUBPARSE={};function parse(pattern,isSub){assertValidPattern(pattern);var options=this.options;if(pattern==="**"){if(!options.noglobstar)return GLOBSTAR;else pattern="*"}if(pattern==="")return"";var re="";var hasMagic=!!options.nocase;var escaping=false;var patternListStack=[];var negativeLists=[];var stateChar;var inClass=false;var reClassStart=-1;var classStart=-1;var patternStart=pattern.charAt(0)==="."?"":options.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)";var self=this;function clearStateChar(){if(stateChar){switch(stateChar){case"*":re+=star;hasMagic=true;break;case"?":re+=qmark;hasMagic=true;break;default:re+="\\"+stateChar;break}self.debug("clearStateChar %j %j",stateChar,re);stateChar=false}}for(var i=0,len=pattern.length,c;i<len&&(c=pattern.charAt(i));i++){this.debug("%s\t%s %s %j",pattern,i,re,c);if(escaping&&reSpecials[c]){re+="\\"+c;escaping=false;continue}switch(c){case"/":{return false}case"\\":clearStateChar();escaping=true;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s\t%s %s %j <-- stateChar",pattern,i,re,c);if(inClass){this.debug("  in class");if(c==="!"&&i===classStart+1)c="^";re+=c;continue}self.debug("call clearStateChar %j",stateChar);clearStateChar();stateChar=c;if(options.noext)clearStateChar();continue;case"(":if(inClass){re+="(";continue}if(!stateChar){re+="\\(";continue}patternListStack.push({type:stateChar,start:i-1,reStart:re.length,open:plTypes[stateChar].open,close:plTypes[stateChar].close});re+=stateChar==="!"?"(?:(?!(?:":"(?:";this.debug("plType %j %j",stateChar,re);stateChar=false;continue;case")":if(inClass||!patternListStack.length){re+="\\)";continue}clearStateChar();hasMagic=true;var pl=patternListStack.pop();re+=pl.close;if(pl.type==="!"){negativeLists.push(pl)}pl.reEnd=re.length;continue;case"|":if(inClass||!patternListStack.length||escaping){re+="\\|";escaping=false;continue}clearStateChar();re+="|";continue;case"[":clearStateChar();if(inClass){re+="\\"+c;continue}inClass=true;classStart=i;reClassStart=re.length;re+=c;continue;case"]":if(i===classStart+1||!inClass){re+="\\"+c;escaping=false;continue}var cs=pattern.substring(classStart+1,i);try{RegExp("["+cs+"]")}catch(er){var sp=this.parse(cs,SUBPARSE);re=re.substr(0,reClassStart)+"\\["+sp[0]+"\\]";hasMagic=hasMagic||sp[1];inClass=false;continue}hasMagic=true;inClass=false;re+=c;continue;default:clearStateChar();if(escaping){escaping=false}else if(reSpecials[c]&&!(c==="^"&&inClass)){re+="\\"}re+=c}}if(inClass){cs=pattern.substr(classStart+1);sp=this.parse(cs,SUBPARSE);re=re.substr(0,reClassStart)+"\\["+sp[0];hasMagic=hasMagic||sp[1]}for(pl=patternListStack.pop();pl;pl=patternListStack.pop()){var tail=re.slice(pl.reStart+pl.open.length);this.debug("setting tail",re,pl);tail=tail.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(_,$1,$2){if(!$2){$2="\\"}return $1+$1+$2+"|"});this.debug("tail=%j\n   %s",tail,tail,pl,re);var t=pl.type==="*"?star:pl.type==="?"?qmark:"\\"+pl.type;hasMagic=true;re=re.slice(0,pl.reStart)+t+"\\("+tail}clearStateChar();if(escaping){re+="\\\\"}var addPatternStart=false;switch(re.charAt(0)){case"[":case".":case"(":addPatternStart=true}for(var n=negativeLists.length-1;n>-1;n--){var nl=negativeLists[n];var nlBefore=re.slice(0,nl.reStart);var nlFirst=re.slice(nl.reStart,nl.reEnd-8);var nlLast=re.slice(nl.reEnd-8,nl.reEnd);var nlAfter=re.slice(nl.reEnd);nlLast+=nlAfter;var openParensBefore=nlBefore.split("(").length-1;var cleanAfter=nlAfter;for(i=0;i<openParensBefore;i++){cleanAfter=cleanAfter.replace(/\)[+*?]?/,"")}nlAfter=cleanAfter;var dollar="";if(nlAfter===""&&isSub!==SUBPARSE){dollar="$"}var newRe=nlBefore+nlFirst+nlAfter+dollar+nlLast;re=newRe}if(re!==""&&hasMagic){re="(?=.)"+re}if(addPatternStart){re=patternStart+re}if(isSub===SUBPARSE){return[re,hasMagic]}if(!hasMagic){return globUnescape(pattern)}var flags=options.nocase?"i":"";try{var regExp=new RegExp("^"+re+"$",flags)}catch(er){return new RegExp("$.")}regExp._glob=pattern;regExp._src=re;return regExp}minimatch.makeRe=function(pattern,options){return new Minimatch(pattern,options||{}).makeRe()};Minimatch.prototype.makeRe=makeRe;function makeRe(){if(this.regexp||this.regexp===false)return this.regexp;var set=this.set;if(!set.length){this.regexp=false;return this.regexp}var options=this.options;var twoStar=options.noglobstar?star:options.dot?twoStarDot:twoStarNoDot;var flags=options.nocase?"i":"";var re=set.map(function(pattern){return pattern.map(function(p){return p===GLOBSTAR?twoStar:typeof p==="string"?regExpEscape(p):p._src}).join("\\/")}).join("|");re="^(?:"+re+")$";if(this.negate)re="^(?!"+re+").*$";try{this.regexp=new RegExp(re,flags)}catch(ex){this.regexp=false}return this.regexp}minimatch.match=function(list,pattern,options){options=options||{};var mm=new Minimatch(pattern,options);list=list.filter(function(f){return mm.match(f)});if(mm.options.nonull&&!list.length){list.push(pattern)}return list};Minimatch.prototype.match=function match(f,partial){if(typeof partial==="undefined")partial=this.partial;this.debug("match",f,this.pattern);if(this.comment)return false;if(this.empty)return f==="";if(f==="/"&&partial)return true;var options=this.options;if(path.sep!=="/"){f=f.split(path.sep).join("/")}f=f.split(slashSplit);this.debug(this.pattern,"split",f);var set=this.set;this.debug(this.pattern,"set",set);var filename;var i;for(i=f.length-1;i>=0;i--){filename=f[i];if(filename)break}for(i=0;i<set.length;i++){var pattern=set[i];var file=f;if(options.matchBase&&pattern.length===1){file=[filename]}var hit=this.matchOne(file,pattern,partial);if(hit){if(options.flipNegate)return true;return!this.negate}}if(options.flipNegate)return false;return this.negate};Minimatch.prototype.matchOne=function(file,pattern,partial){var options=this.options;this.debug("matchOne",{this:this,file:file,pattern:pattern});this.debug("matchOne",file.length,pattern.length);for(var fi=0,pi=0,fl=file.length,pl=pattern.length;fi<fl&&pi<pl;fi++,pi++){this.debug("matchOne loop");var p=pattern[pi];var f=file[fi];this.debug(pattern,p,f);if(p===false)return false;if(p===GLOBSTAR){this.debug("GLOBSTAR",[pattern,p,f]);var fr=fi;var pr=pi+1;if(pr===pl){this.debug("** at the end");for(;fi<fl;fi++){if(file[fi]==="."||file[fi]===".."||!options.dot&&file[fi].charAt(0)===".")return false}return true}while(fr<fl){var swallowee=file[fr];this.debug("\nglobstar while",file,fr,pattern,pr,swallowee);if(this.matchOne(file.slice(fr),pattern.slice(pr),partial)){this.debug("globstar found match!",fr,fl,swallowee);return true}else{if(swallowee==="."||swallowee===".."||!options.dot&&swallowee.charAt(0)==="."){this.debug("dot detected!",file,fr,pattern,pr);break}this.debug("globstar swallow a segment, and continue");fr++}}if(partial){this.debug("\n>>> no match, partial?",file,fr,pattern,pr);if(fr===fl)return true}return false}var hit;if(typeof p==="string"){hit=f===p;this.debug("string match",p,f,hit)}else{hit=f.match(p);this.debug("pattern match",p,f,hit)}if(!hit)return false}if(fi===fl&&pi===pl){return true}else if(fi===fl){return partial}else if(pi===pl){return fi===fl-1&&file[fi]===""}throw new Error("wtf?")};function globUnescape(s){return s.replace(/\\(.)/g,"$1")}function regExpEscape(s){return s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}},{"brace-expansion":37,path:undefined}],212:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var w=d*7;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==="string"&&val.length>0){return parse(val)}else if(type==="number"&&isFinite(val)){return options.long?fmtLong(val):fmtShort(val)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))};function parse(str){str=String(str);if(str.length>100){return}var match=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);if(!match){return}var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"weeks":case"week":case"w":return n*w;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}function fmtShort(ms){var msAbs=Math.abs(ms);if(msAbs>=d){return Math.round(ms/d)+"d"}if(msAbs>=h){return Math.round(ms/h)+"h"}if(msAbs>=m){return Math.round(ms/m)+"m"}if(msAbs>=s){return Math.round(ms/s)+"s"}return ms+"ms"}function fmtLong(ms){var msAbs=Math.abs(ms);if(msAbs>=d){return plural(ms,msAbs,d,"day")}if(msAbs>=h){return plural(ms,msAbs,h,"hour")}if(msAbs>=m){return plural(ms,msAbs,m,"minute")}if(msAbs>=s){return plural(ms,msAbs,s,"second")}return ms+" ms"}function plural(ms,msAbs,n,name){var isPlural=msAbs>=n*1.5;return Math.round(ms/n)+" "+name+(isPlural?"s":"")}},{}],213:[function(require,module,exports){
/*!
 * negotiator
 * Copyright(c) 2012 Federico Romero
 * Copyright(c) 2012-2014 Isaac Z. Schlueter
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
"use strict";var preferredCharsets=require("./lib/charset");var preferredEncodings=require("./lib/encoding");var preferredLanguages=require("./lib/language");var preferredMediaTypes=require("./lib/mediaType");module.exports=Negotiator;module.exports.Negotiator=Negotiator;function Negotiator(request){if(!(this instanceof Negotiator)){return new Negotiator(request)}this.request=request}Negotiator.prototype.charset=function charset(available){var set=this.charsets(available);return set&&set[0]};Negotiator.prototype.charsets=function charsets(available){return preferredCharsets(this.request.headers["accept-charset"],available)};Negotiator.prototype.encoding=function encoding(available){var set=this.encodings(available);return set&&set[0]};Negotiator.prototype.encodings=function encodings(available){return preferredEncodings(this.request.headers["accept-encoding"],available)};Negotiator.prototype.language=function language(available){var set=this.languages(available);return set&&set[0]};Negotiator.prototype.languages=function languages(available){return preferredLanguages(this.request.headers["accept-language"],available)};Negotiator.prototype.mediaType=function mediaType(available){var set=this.mediaTypes(available);return set&&set[0]};Negotiator.prototype.mediaTypes=function mediaTypes(available){return preferredMediaTypes(this.request.headers.accept,available)};Negotiator.prototype.preferredCharset=Negotiator.prototype.charset;Negotiator.prototype.preferredCharsets=Negotiator.prototype.charsets;Negotiator.prototype.preferredEncoding=Negotiator.prototype.encoding;Negotiator.prototype.preferredEncodings=Negotiator.prototype.encodings;Negotiator.prototype.preferredLanguage=Negotiator.prototype.language;Negotiator.prototype.preferredLanguages=Negotiator.prototype.languages;Negotiator.prototype.preferredMediaType=Negotiator.prototype.mediaType;Negotiator.prototype.preferredMediaTypes=Negotiator.prototype.mediaTypes},{"./lib/charset":214,"./lib/encoding":215,"./lib/language":216,"./lib/mediaType":217}],214:[function(require,module,exports){"use strict";module.exports=preferredCharsets;module.exports.preferredCharsets=preferredCharsets;var simpleCharsetRegExp=/^\s*([^\s;]+)\s*(?:;(.*))?$/;function parseAcceptCharset(accept){var accepts=accept.split(",");for(var i=0,j=0;i<accepts.length;i++){var charset=parseCharset(accepts[i].trim(),i);if(charset){accepts[j++]=charset}}accepts.length=j;return accepts}function parseCharset(str,i){var match=simpleCharsetRegExp.exec(str);if(!match)return null;var charset=match[1];var q=1;if(match[2]){var params=match[2].split(";");for(var j=0;j<params.length;j++){var p=params[j].trim().split("=");if(p[0]==="q"){q=parseFloat(p[1]);break}}}return{charset:charset,q:q,i:i}}function getCharsetPriority(charset,accepted,index){var priority={o:-1,q:0,s:0};for(var i=0;i<accepted.length;i++){var spec=specify(charset,accepted[i],index);if(spec&&(priority.s-spec.s||priority.q-spec.q||priority.o-spec.o)<0){priority=spec}}return priority}function specify(charset,spec,index){var s=0;if(spec.charset.toLowerCase()===charset.toLowerCase()){s|=1}else if(spec.charset!=="*"){return null}return{i:index,o:spec.i,q:spec.q,s:s}}function preferredCharsets(accept,provided){var accepts=parseAcceptCharset(accept===undefined?"*":accept||"");if(!provided){return accepts.filter(isQuality).sort(compareSpecs).map(getFullCharset)}var priorities=provided.map(function getPriority(type,index){return getCharsetPriority(type,accepts,index)});return priorities.filter(isQuality).sort(compareSpecs).map(function getCharset(priority){return provided[priorities.indexOf(priority)]})}function compareSpecs(a,b){return b.q-a.q||b.s-a.s||a.o-b.o||a.i-b.i||0}function getFullCharset(spec){return spec.charset}function isQuality(spec){return spec.q>0}},{}],215:[function(require,module,exports){"use strict";module.exports=preferredEncodings;module.exports.preferredEncodings=preferredEncodings;var simpleEncodingRegExp=/^\s*([^\s;]+)\s*(?:;(.*))?$/;function parseAcceptEncoding(accept){var accepts=accept.split(",");var hasIdentity=false;var minQuality=1;for(var i=0,j=0;i<accepts.length;i++){var encoding=parseEncoding(accepts[i].trim(),i);if(encoding){accepts[j++]=encoding;hasIdentity=hasIdentity||specify("identity",encoding);minQuality=Math.min(minQuality,encoding.q||1)}}if(!hasIdentity){accepts[j++]={encoding:"identity",q:minQuality,i:i}}accepts.length=j;return accepts}function parseEncoding(str,i){var match=simpleEncodingRegExp.exec(str);if(!match)return null;var encoding=match[1];var q=1;if(match[2]){var params=match[2].split(";");for(var j=0;j<params.length;j++){var p=params[j].trim().split("=");if(p[0]==="q"){q=parseFloat(p[1]);break}}}return{encoding:encoding,q:q,i:i}}function getEncodingPriority(encoding,accepted,index){var priority={o:-1,q:0,s:0};for(var i=0;i<accepted.length;i++){var spec=specify(encoding,accepted[i],index);if(spec&&(priority.s-spec.s||priority.q-spec.q||priority.o-spec.o)<0){priority=spec}}return priority}function specify(encoding,spec,index){var s=0;if(spec.encoding.toLowerCase()===encoding.toLowerCase()){s|=1}else if(spec.encoding!=="*"){return null}return{i:index,o:spec.i,q:spec.q,s:s}}function preferredEncodings(accept,provided){var accepts=parseAcceptEncoding(accept||"");if(!provided){return accepts.filter(isQuality).sort(compareSpecs).map(getFullEncoding)}var priorities=provided.map(function getPriority(type,index){return getEncodingPriority(type,accepts,index)});return priorities.filter(isQuality).sort(compareSpecs).map(function getEncoding(priority){return provided[priorities.indexOf(priority)]})}function compareSpecs(a,b){return b.q-a.q||b.s-a.s||a.o-b.o||a.i-b.i||0}function getFullEncoding(spec){return spec.encoding}function isQuality(spec){return spec.q>0}},{}],216:[function(require,module,exports){"use strict";module.exports=preferredLanguages;module.exports.preferredLanguages=preferredLanguages;var simpleLanguageRegExp=/^\s*([^\s\-;]+)(?:-([^\s;]+))?\s*(?:;(.*))?$/;function parseAcceptLanguage(accept){var accepts=accept.split(",");for(var i=0,j=0;i<accepts.length;i++){var language=parseLanguage(accepts[i].trim(),i);if(language){accepts[j++]=language}}accepts.length=j;return accepts}function parseLanguage(str,i){var match=simpleLanguageRegExp.exec(str);if(!match)return null;var prefix=match[1];var suffix=match[2];var full=prefix;if(suffix)full+="-"+suffix;var q=1;if(match[3]){var params=match[3].split(";");for(var j=0;j<params.length;j++){var p=params[j].split("=");if(p[0]==="q")q=parseFloat(p[1])}}return{prefix:prefix,suffix:suffix,q:q,i:i,full:full}}function getLanguagePriority(language,accepted,index){var priority={o:-1,q:0,s:0};for(var i=0;i<accepted.length;i++){var spec=specify(language,accepted[i],index);if(spec&&(priority.s-spec.s||priority.q-spec.q||priority.o-spec.o)<0){priority=spec}}return priority}function specify(language,spec,index){var p=parseLanguage(language);if(!p)return null;var s=0;if(spec.full.toLowerCase()===p.full.toLowerCase()){s|=4}else if(spec.prefix.toLowerCase()===p.full.toLowerCase()){s|=2}else if(spec.full.toLowerCase()===p.prefix.toLowerCase()){s|=1}else if(spec.full!=="*"){return null}return{i:index,o:spec.i,q:spec.q,s:s}}function preferredLanguages(accept,provided){var accepts=parseAcceptLanguage(accept===undefined?"*":accept||"");if(!provided){return accepts.filter(isQuality).sort(compareSpecs).map(getFullLanguage)}var priorities=provided.map(function getPriority(type,index){return getLanguagePriority(type,accepts,index)});return priorities.filter(isQuality).sort(compareSpecs).map(function getLanguage(priority){return provided[priorities.indexOf(priority)]})}function compareSpecs(a,b){return b.q-a.q||b.s-a.s||a.o-b.o||a.i-b.i||0}function getFullLanguage(spec){return spec.full}function isQuality(spec){return spec.q>0}},{}],217:[function(require,module,exports){"use strict";module.exports=preferredMediaTypes;module.exports.preferredMediaTypes=preferredMediaTypes;var simpleMediaTypeRegExp=/^\s*([^\s\/;]+)\/([^;\s]+)\s*(?:;(.*))?$/;function parseAccept(accept){var accepts=splitMediaTypes(accept);for(var i=0,j=0;i<accepts.length;i++){var mediaType=parseMediaType(accepts[i].trim(),i);if(mediaType){accepts[j++]=mediaType}}accepts.length=j;return accepts}function parseMediaType(str,i){var match=simpleMediaTypeRegExp.exec(str);if(!match)return null;var params=Object.create(null);var q=1;var subtype=match[2];var type=match[1];if(match[3]){var kvps=splitParameters(match[3]).map(splitKeyValuePair);for(var j=0;j<kvps.length;j++){var pair=kvps[j];var key=pair[0].toLowerCase();var val=pair[1];var value=val&&val[0]==='"'&&val[val.length-1]==='"'?val.substr(1,val.length-2):val;if(key==="q"){q=parseFloat(value);break}params[key]=value}}return{type:type,subtype:subtype,params:params,q:q,i:i}}function getMediaTypePriority(type,accepted,index){var priority={o:-1,q:0,s:0};for(var i=0;i<accepted.length;i++){var spec=specify(type,accepted[i],index);if(spec&&(priority.s-spec.s||priority.q-spec.q||priority.o-spec.o)<0){priority=spec}}return priority}function specify(type,spec,index){var p=parseMediaType(type);var s=0;if(!p){return null}if(spec.type.toLowerCase()==p.type.toLowerCase()){s|=4}else if(spec.type!="*"){return null}if(spec.subtype.toLowerCase()==p.subtype.toLowerCase()){s|=2}else if(spec.subtype!="*"){return null}var keys=Object.keys(spec.params);if(keys.length>0){if(keys.every(function(k){return spec.params[k]=="*"||(spec.params[k]||"").toLowerCase()==(p.params[k]||"").toLowerCase()})){s|=1}else{return null}}return{i:index,o:spec.i,q:spec.q,s:s}}function preferredMediaTypes(accept,provided){var accepts=parseAccept(accept===undefined?"*/*":accept||"");if(!provided){return accepts.filter(isQuality).sort(compareSpecs).map(getFullType)}var priorities=provided.map(function getPriority(type,index){return getMediaTypePriority(type,accepts,index)});return priorities.filter(isQuality).sort(compareSpecs).map(function getType(priority){return provided[priorities.indexOf(priority)]})}function compareSpecs(a,b){return b.q-a.q||b.s-a.s||a.o-b.o||a.i-b.i||0}function getFullType(spec){return spec.type+"/"+spec.subtype}function isQuality(spec){return spec.q>0}function quoteCount(string){var count=0;var index=0;while((index=string.indexOf('"',index))!==-1){count++;index++}return count}function splitKeyValuePair(str){var index=str.indexOf("=");var key;var val;if(index===-1){key=str}else{key=str.substr(0,index);val=str.substr(index+1)}return[key,val]}function splitMediaTypes(accept){var accepts=accept.split(",");for(var i=1,j=0;i<accepts.length;i++){if(quoteCount(accepts[j])%2==0){accepts[++j]=accepts[i]}else{accepts[j]+=","+accepts[i]}}accepts.length=j+1;return accepts}function splitParameters(str){var parameters=str.split(";");for(var i=1,j=0;i<parameters.length;i++){if(quoteCount(parameters[j])%2==0){parameters[++j]=parameters[i]}else{parameters[j]+=";"+parameters[i]}}parameters.length=j+1;for(var i=0;i<parameters.length;i++){parameters[i]=parameters[i].trim()}return parameters}},{}],218:[function(require,module,exports){var debug=process.env.DEBUG_NOPT||process.env.NOPT_DEBUG?function(){console.error.apply(console,arguments)}:function(){};var url=require("url"),path=require("path"),Stream=require("stream").Stream,abbrev=require("abbrev"),os=require("os");module.exports=exports=nopt;exports.clean=clean;exports.typeDefs={String:{type:String,validate:validateString},Boolean:{type:Boolean,validate:validateBoolean},url:{type:url,validate:validateUrl},Number:{type:Number,validate:validateNumber},path:{type:path,validate:validatePath},Stream:{type:Stream,validate:validateStream},Date:{type:Date,validate:validateDate}};function nopt(types,shorthands,args,slice){args=args||process.argv;types=types||{};shorthands=shorthands||{};if(typeof slice!=="number")slice=2;debug(types,shorthands,args,slice);args=args.slice(slice);var data={},key,argv={remain:[],cooked:args,original:args.slice(0)};parse(args,data,argv.remain,types,shorthands);clean(data,types,exports.typeDefs);data.argv=argv;Object.defineProperty(data.argv,"toString",{value:function(){return this.original.map(JSON.stringify).join(" ")},enumerable:false});return data}function clean(data,types,typeDefs){typeDefs=typeDefs||exports.typeDefs;var remove={},typeDefault=[false,true,null,String,Array];Object.keys(data).forEach(function(k){if(k==="argv")return;var val=data[k],isArray=Array.isArray(val),type=types[k];if(!isArray)val=[val];if(!type)type=typeDefault;if(type===Array)type=typeDefault.concat(Array);if(!Array.isArray(type))type=[type];debug("val=%j",val);debug("types=",type);val=val.map(function(val){if(typeof val==="string"){debug("string %j",val);val=val.trim();if(val==="null"&&~type.indexOf(null)||val==="true"&&(~type.indexOf(true)||~type.indexOf(Boolean))||val==="false"&&(~type.indexOf(false)||~type.indexOf(Boolean))){val=JSON.parse(val);debug("jsonable %j",val)}else if(~type.indexOf(Number)&&!isNaN(val)){debug("convert to number",val);val=+val}else if(~type.indexOf(Date)&&!isNaN(Date.parse(val))){debug("convert to date",val);val=new Date(val)}}if(!types.hasOwnProperty(k)){return val}if(val===false&&~type.indexOf(null)&&!(~type.indexOf(false)||~type.indexOf(Boolean))){val=null}var d={};d[k]=val;debug("prevalidated val",d,val,types[k]);if(!validate(d,k,val,types[k],typeDefs)){if(exports.invalidHandler){exports.invalidHandler(k,val,types[k],data)}else if(exports.invalidHandler!==false){debug("invalid: "+k+"="+val,types[k])}return remove}debug("validated val",d,val,types[k]);return d[k]}).filter(function(val){return val!==remove});if(!val.length&&type.indexOf(Array)===-1){debug("VAL HAS NO LENGTH, DELETE IT",val,k,type.indexOf(Array));delete data[k]}else if(isArray){debug(isArray,data[k],val);data[k]=val}else data[k]=val[0];debug("k=%s val=%j",k,val,data[k])})}function validateString(data,k,val){data[k]=String(val)}function validatePath(data,k,val){if(val===true)return false;if(val===null)return true;val=String(val);var isWin=process.platform==="win32",homePattern=isWin?/^~(\/|\\)/:/^~\//,home=os.homedir();if(home&&val.match(homePattern)){data[k]=path.resolve(home,val.substr(2))}else{data[k]=path.resolve(val)}return true}function validateNumber(data,k,val){debug("validate Number %j %j %j",k,val,isNaN(val));if(isNaN(val))return false;data[k]=+val}function validateDate(data,k,val){var s=Date.parse(val);debug("validate Date %j %j %j",k,val,s);if(isNaN(s))return false;data[k]=new Date(val)}function validateBoolean(data,k,val){if(val instanceof Boolean)val=val.valueOf();else if(typeof val==="string"){if(!isNaN(val))val=!!+val;else if(val==="null"||val==="false")val=false;else val=true}else val=!!val;data[k]=val}function validateUrl(data,k,val){val=url.parse(String(val));if(!val.host)return false;data[k]=val.href}function validateStream(data,k,val){if(!(val instanceof Stream))return false;data[k]=val}function validate(data,k,val,type,typeDefs){if(Array.isArray(type)){for(var i=0,l=type.length;i<l;i++){if(type[i]===Array)continue;if(validate(data,k,val,type[i],typeDefs))return true}delete data[k];return false}if(type===Array)return true;if(type!==type){debug("Poison NaN",k,val,type);delete data[k];return false}if(val===type){debug("Explicitly allowed %j",val);data[k]=val;return true}var ok=false,types=Object.keys(typeDefs);for(var i=0,l=types.length;i<l;i++){debug("test type %j %j %j",k,val,types[i]);var t=typeDefs[types[i]];if(t&&(type&&type.name&&t.type&&t.type.name?type.name===t.type.name:type===t.type)){var d={};ok=false!==t.validate(d,k,val);val=d[k];if(ok){data[k]=val;break}}}debug("OK? %j (%j %j %j)",ok,k,val,types[i]);if(!ok)delete data[k];return ok}function parse(args,data,remain,types,shorthands){debug("parse",args,data,remain);var key=null,abbrevs=abbrev(Object.keys(types)),shortAbbr=abbrev(Object.keys(shorthands));for(var i=0;i<args.length;i++){var arg=args[i];debug("arg",arg);if(arg.match(/^-{2,}$/)){remain.push.apply(remain,args.slice(i+1));args[i]="--";break}var hadEq=false;if(arg.charAt(0)==="-"&&arg.length>1){var at=arg.indexOf("=");if(at>-1){hadEq=true;var v=arg.substr(at+1);arg=arg.substr(0,at);args.splice(i,1,arg,v)}var shRes=resolveShort(arg,shorthands,shortAbbr,abbrevs);debug("arg=%j shRes=%j",arg,shRes);if(shRes){debug(arg,shRes);args.splice.apply(args,[i,1].concat(shRes));if(arg!==shRes[0]){i--;continue}}arg=arg.replace(/^-+/,"");var no=null;while(arg.toLowerCase().indexOf("no-")===0){no=!no;arg=arg.substr(3)}if(abbrevs[arg])arg=abbrevs[arg];var argType=types[arg];var isTypeArray=Array.isArray(argType);if(isTypeArray&&argType.length===1){isTypeArray=false;argType=argType[0]}var isArray=argType===Array||isTypeArray&&argType.indexOf(Array)!==-1;if(!types.hasOwnProperty(arg)&&data.hasOwnProperty(arg)){if(!Array.isArray(data[arg]))data[arg]=[data[arg]];isArray=true}var val,la=args[i+1];var isBool=typeof no==="boolean"||argType===Boolean||isTypeArray&&argType.indexOf(Boolean)!==-1||typeof argType==="undefined"&&!hadEq||la==="false"&&(argType===null||isTypeArray&&~argType.indexOf(null));if(isBool){val=!no;if(la==="true"||la==="false"){val=JSON.parse(la);la=null;if(no)val=!val;i++}if(isTypeArray&&la){if(~argType.indexOf(la)){val=la;i++}else if(la==="null"&&~argType.indexOf(null)){val=null;i++}else if(!la.match(/^-{2,}[^-]/)&&!isNaN(la)&&~argType.indexOf(Number)){val=+la;i++}else if(!la.match(/^-[^-]/)&&~argType.indexOf(String)){val=la;i++}}if(isArray)(data[arg]=data[arg]||[]).push(val);else data[arg]=val;continue}if(argType===String){if(la===undefined){la=""}else if(la.match(/^-{1,2}[^-]+/)){la="";i--}}if(la&&la.match(/^-{2,}$/)){la=undefined;i--}val=la===undefined?true:la;if(isArray)(data[arg]=data[arg]||[]).push(val);else data[arg]=val;i++;continue}remain.push(arg)}}function resolveShort(arg,shorthands,shortAbbr,abbrevs){arg=arg.replace(/^-+/,"");if(abbrevs[arg]===arg)return null;if(shorthands[arg]){if(shorthands[arg]&&!Array.isArray(shorthands[arg]))shorthands[arg]=shorthands[arg].split(/\s+/);return shorthands[arg]}var singles=shorthands.___singles;if(!singles){singles=Object.keys(shorthands).filter(function(s){return s.length===1}).reduce(function(l,r){l[r]=true;return l},{});shorthands.___singles=singles;debug("shorthand singles",singles)}var chrs=arg.split("").filter(function(c){return singles[c]});if(chrs.join("")===arg)return chrs.map(function(c){return shorthands[c]}).reduce(function(l,r){return l.concat(r)},[]);if(abbrevs[arg]&&!shorthands[arg])return null;if(shortAbbr[arg])arg=shortAbbr[arg];if(shorthands[arg]&&!Array.isArray(shorthands[arg]))shorthands[arg]=shorthands[arg].split(/\s+/);return shorthands[arg]}},{abbrev:23,os:undefined,path:undefined,stream:undefined,url:undefined}],219:[function(require,module,exports){"use strict";var Progress=require("are-we-there-yet");var Gauge=require("gauge");var EE=require("events").EventEmitter;var log=exports=module.exports=new EE;var util=require("util");var setBlocking=require("set-blocking");var consoleControl=require("console-control-strings");setBlocking(true);var stream=process.stderr;Object.defineProperty(log,"stream",{set:function(newStream){stream=newStream;if(this.gauge){this.gauge.setWriteTo(stream,stream)}},get:function(){return stream}});var colorEnabled;log.useColor=function(){return colorEnabled!=null?colorEnabled:stream.isTTY};log.enableColor=function(){colorEnabled=true;this.gauge.setTheme({hasColor:colorEnabled,hasUnicode:unicodeEnabled})};log.disableColor=function(){colorEnabled=false;this.gauge.setTheme({hasColor:colorEnabled,hasUnicode:unicodeEnabled})};log.level="info";log.gauge=new Gauge(stream,{enabled:false,theme:{hasColor:log.useColor()},template:[{type:"progressbar",length:20},{type:"activityIndicator",kerning:1,length:1},{type:"section",default:""},":",{type:"logline",kerning:1,default:""}]});log.tracker=new Progress.TrackerGroup;log.progressEnabled=log.gauge.isEnabled();var unicodeEnabled;log.enableUnicode=function(){unicodeEnabled=true;this.gauge.setTheme({hasColor:this.useColor(),hasUnicode:unicodeEnabled})};log.disableUnicode=function(){unicodeEnabled=false;this.gauge.setTheme({hasColor:this.useColor(),hasUnicode:unicodeEnabled})};log.setGaugeThemeset=function(themes){this.gauge.setThemeset(themes)};log.setGaugeTemplate=function(template){this.gauge.setTemplate(template)};log.enableProgress=function(){if(this.progressEnabled){return}this.progressEnabled=true;this.tracker.on("change",this.showProgress);if(this._paused){return}this.gauge.enable()};log.disableProgress=function(){if(!this.progressEnabled){return}this.progressEnabled=false;this.tracker.removeListener("change",this.showProgress);this.gauge.disable()};var trackerConstructors=["newGroup","newItem","newStream"];var mixinLog=function(tracker){Object.keys(log).forEach(function(P){if(P[0]==="_"){return}if(trackerConstructors.filter(function(C){return C===P}).length){return}if(tracker[P]){return}if(typeof log[P]!=="function"){return}var func=log[P];tracker[P]=function(){return func.apply(log,arguments)}});if(tracker instanceof Progress.TrackerGroup){trackerConstructors.forEach(function(C){var func=tracker[C];tracker[C]=function(){return mixinLog(func.apply(tracker,arguments))}})}return tracker};trackerConstructors.forEach(function(C){log[C]=function(){return mixinLog(this.tracker[C].apply(this.tracker,arguments))}});log.clearProgress=function(cb){if(!this.progressEnabled){return cb&&process.nextTick(cb)}this.gauge.hide(cb)};log.showProgress=function(name,completed){if(!this.progressEnabled){return}var values={};if(name){values.section=name}var last=log.record[log.record.length-1];if(last){values.subsection=last.prefix;var disp=log.disp[last.level]||last.level;var logline=this._format(disp,log.style[last.level]);if(last.prefix){logline+=" "+this._format(last.prefix,this.prefixStyle)}logline+=" "+last.message.split(/\r?\n/)[0];values.logline=logline}values.completed=completed||this.tracker.completed();this.gauge.show(values)}.bind(log);log.pause=function(){this._paused=true;if(this.progressEnabled){this.gauge.disable()}};log.resume=function(){if(!this._paused){return}this._paused=false;var b=this._buffer;this._buffer=[];b.forEach(function(m){this.emitLog(m)},this);if(this.progressEnabled){this.gauge.enable()}};log._buffer=[];var id=0;log.record=[];log.maxRecordSize=1e4;log.log=function(lvl,prefix,message){var l=this.levels[lvl];if(l===undefined){return this.emit("error",new Error(util.format("Undefined log level: %j",lvl)))}var a=new Array(arguments.length-2);var stack=null;for(var i=2;i<arguments.length;i++){var arg=a[i-2]=arguments[i];if(typeof arg==="object"&&arg instanceof Error&&arg.stack){Object.defineProperty(arg,"stack",{value:stack=arg.stack+"",enumerable:true,writable:true})}}if(stack){a.unshift(stack+"\n")}message=util.format.apply(util,a);var m={id:id++,level:lvl,prefix:String(prefix||""),message:message,messageRaw:a};this.emit("log",m);this.emit("log."+lvl,m);if(m.prefix){this.emit(m.prefix,m)}this.record.push(m);var mrs=this.maxRecordSize;var n=this.record.length-mrs;if(n>mrs/10){var newSize=Math.floor(mrs*.9);this.record=this.record.slice(-1*newSize)}this.emitLog(m)}.bind(log);log.emitLog=function(m){if(this._paused){this._buffer.push(m);return}if(this.progressEnabled){this.gauge.pulse(m.prefix)}var l=this.levels[m.level];if(l===undefined){return}if(l<this.levels[this.level]){return}if(l>0&&!isFinite(l)){return}var disp=log.disp[m.level]!=null?log.disp[m.level]:m.level;this.clearProgress();m.message.split(/\r?\n/).forEach(function(line){if(this.heading){this.write(this.heading,this.headingStyle);this.write(" ")}this.write(disp,log.style[m.level]);var p=m.prefix||"";if(p){this.write(" ")}this.write(p,this.prefixStyle);this.write(" "+line+"\n")},this);this.showProgress()};log._format=function(msg,style){if(!stream){return}var output="";if(this.useColor()){style=style||{};var settings=[];if(style.fg){settings.push(style.fg)}if(style.bg){settings.push("bg"+style.bg[0].toUpperCase()+style.bg.slice(1))}if(style.bold){settings.push("bold")}if(style.underline){settings.push("underline")}if(style.inverse){settings.push("inverse")}if(settings.length){output+=consoleControl.color(settings)}if(style.beep){output+=consoleControl.beep()}}output+=msg;if(this.useColor()){output+=consoleControl.color("reset")}return output};log.write=function(msg,style){if(!stream){return}stream.write(this._format(msg,style))};log.addLevel=function(lvl,n,style,disp){if(disp==null){disp=lvl}this.levels[lvl]=n;this.style[lvl]=style;if(!this[lvl]){this[lvl]=function(){var a=new Array(arguments.length+1);a[0]=lvl;for(var i=0;i<arguments.length;i++){a[i+1]=arguments[i]}return this.log.apply(this,a)}.bind(this)}this.disp[lvl]=disp};log.prefixStyle={fg:"magenta"};log.headingStyle={fg:"white",bg:"black"};log.style={};log.levels={};log.disp={};log.addLevel("silly",-Infinity,{inverse:true},"sill");log.addLevel("verbose",1e3,{fg:"blue",bg:"black"},"verb");log.addLevel("info",2e3,{fg:"green"});log.addLevel("timing",2500,{fg:"green",bg:"black"});log.addLevel("http",3e3,{fg:"green",bg:"black"});log.addLevel("notice",3500,{fg:"blue",bg:"black"});log.addLevel("warn",4e3,{fg:"black",bg:"yellow"},"WARN");log.addLevel("error",5e3,{fg:"red",bg:"black"},"ERR!");log.addLevel("silent",Infinity);log.on("error",function(){})},{"are-we-there-yet":27,"console-control-strings":46,events:undefined,gauge:180,"set-blocking":306,util:undefined}],220:[function(require,module,exports){
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
"use strict";var getOwnPropertySymbols=Object.getOwnPropertySymbols;var hasOwnProperty=Object.prototype.hasOwnProperty;var propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(val===null||val===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(val)}function shouldUseNative(){try{if(!Object.assign){return false}var test1=new String("abc");test1[5]="de";if(Object.getOwnPropertyNames(test1)[0]==="5"){return false}var test2={};for(var i=0;i<10;i++){test2["_"+String.fromCharCode(i)]=i}var order2=Object.getOwnPropertyNames(test2).map(function(n){return test2[n]});if(order2.join("")!=="0123456789"){return false}var test3={};"abcdefghijklmnopqrst".split("").forEach(function(letter){test3[letter]=letter});if(Object.keys(Object.assign({},test3)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(err){return false}}module.exports=shouldUseNative()?Object.assign:function(target,source){var from;var to=toObject(target);var symbols;for(var s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from){if(hasOwnProperty.call(from,key)){to[key]=from[key]}}if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++){if(propIsEnumerable.call(from,symbols[i])){to[symbols[i]]=from[symbols[i]]}}}}return to}},{}],221:[function(require,module,exports){var wrappy=require("wrappy");module.exports=wrappy(once);module.exports.strict=wrappy(onceStrict);once.proto=once(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:true});Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return onceStrict(this)},configurable:true})});function once(fn){var f=function(){if(f.called)return f.value;f.called=true;return f.value=fn.apply(this,arguments)};f.called=false;return f}function onceStrict(fn){var f=function(){if(f.called)throw new Error(f.onceError);f.called=true;return f.value=fn.apply(this,arguments)};var name=fn.name||"Function wrapped with `once`";f.onceError=name+" shouldn't be called more than once";f.called=false;return f}},{wrappy:363}],222:[function(require,module,exports){
/*!
 * parseurl
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */
"use strict";var url=require("url");var parse=url.parse;var Url=url.Url;module.exports=parseurl;module.exports.original=originalurl;function parseurl(req){var url=req.url;if(url===undefined){return undefined}var parsed=req._parsedUrl;if(fresh(url,parsed)){return parsed}parsed=fastparse(url);parsed._raw=url;return req._parsedUrl=parsed}function originalurl(req){var url=req.originalUrl;if(typeof url!=="string"){return parseurl(req)}var parsed=req._parsedOriginalUrl;if(fresh(url,parsed)){return parsed}parsed=fastparse(url);parsed._raw=url;return req._parsedOriginalUrl=parsed}function fastparse(str){if(typeof str!=="string"||str.charCodeAt(0)!==47){return parse(str)}var pathname=str;var query=null;var search=null;for(var i=1;i<str.length;i++){switch(str.charCodeAt(i)){case 63:if(search===null){pathname=str.substring(0,i);query=str.substring(i+1);search=str.substring(i)}break;case 9:case 10:case 12:case 13:case 32:case 35:case 160:case 65279:return parse(str)}}var url=Url!==undefined?new Url:{};url.path=str;url.href=str;url.pathname=pathname;if(search!==null){url.query=query;url.search=search}return url}function fresh(url,parsedUrl){return typeof parsedUrl==="object"&&parsedUrl!==null&&(Url===undefined||parsedUrl instanceof Url)&&parsedUrl._raw===url}},{url:undefined}],223:[function(require,module,exports){"use strict";function posix(path){return path.charAt(0)==="/"}function win32(path){var splitDeviceRe=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/;var result=splitDeviceRe.exec(path);var device=result[1]||"";var isUnc=Boolean(device&&device.charAt(1)!==":");return Boolean(result[2]||isUnc)}module.exports=process.platform==="win32"?win32:posix;module.exports.posix=posix;module.exports.win32=win32},{}],224:[function(require,module,exports){"use strict";const codes={};function createErrorType(code,message,Base){if(!Base){Base=Error}function getMessage(arg1,arg2,arg3){if(typeof message==="string"){return message}else{return message(arg1,arg2,arg3)}}class NodeError extends Base{constructor(arg1,arg2,arg3){super(getMessage(arg1,arg2,arg3))}}NodeError.prototype.name=Base.name;NodeError.prototype.code=code;codes[code]=NodeError}function oneOf(expected,thing){if(Array.isArray(expected)){const len=expected.length;expected=expected.map(i=>String(i));if(len>2){return`one of ${thing} ${expected.slice(0,len-1).join(", ")}, or `+expected[len-1]}else if(len===2){return`one of ${thing} ${expected[0]} or ${expected[1]}`}else{return`of ${thing} ${expected[0]}`}}else{return`of ${thing} ${String(expected)}`}}function startsWith(str,search,pos){return str.substr(!pos||pos<0?0:+pos,search.length)===search}function endsWith(str,search,this_len){if(this_len===undefined||this_len>str.length){this_len=str.length}return str.substring(this_len-search.length,this_len)===search}function includes(str,search,start){if(typeof start!=="number"){start=0}if(start+search.length>str.length){return false}else{return str.indexOf(search,start)!==-1}}createErrorType("ERR_INVALID_OPT_VALUE",function(name,value){return'The value "'+value+'" is invalid for option "'+name+'"'},TypeError);createErrorType("ERR_INVALID_ARG_TYPE",function(name,expected,actual){let determiner;if(typeof expected==="string"&&startsWith(expected,"not ")){determiner="must not be";expected=expected.replace(/^not /,"")}else{determiner="must be"}let msg;if(endsWith(name," argument")){msg=`The ${name} ${determiner} ${oneOf(expected,"type")}`}else{const type=includes(name,".")?"property":"argument";msg=`The "${name}" ${type} ${determiner} ${oneOf(expected,"type")}`}msg+=`. Received type ${typeof actual}`;return msg},TypeError);createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(name){return"The "+name+" method is not implemented"});createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType("ERR_STREAM_DESTROYED",function(name){return"Cannot call "+name+" after a stream was destroyed"});createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType("ERR_UNKNOWN_ENCODING",function(arg){return"Unknown encoding: "+arg},TypeError);createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");module.exports.codes=codes},{}],225:[function(require,module,exports){"use strict";var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};module.exports=Duplex;var Readable=require("./_stream_readable");var Writable=require("./_stream_writable");require("inherits")(Duplex,Readable);{var keys=objectKeys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method]}}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);this.allowHalfOpen=true;if(options){if(options.readable===false)this.readable=false;if(options.writable===false)this.writable=false;if(options.allowHalfOpen===false){this.allowHalfOpen=false;this.once("end",onend)}}}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:false,get:function get(){return this._writableState.highWaterMark}});Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:false,get:function get(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:false,get:function get(){return this._writableState.length}});function onend(){if(this._writableState.ended)return;process.nextTick(onEndNT,this)}function onEndNT(self){self.end()}Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:false,get:function get(){if(this._readableState===undefined||this._writableState===undefined){return false}return this._readableState.destroyed&&this._writableState.destroyed},set:function set(value){if(this._readableState===undefined||this._writableState===undefined){return}this._readableState.destroyed=value;this._writableState.destroyed=value}})},{"./_stream_readable":227,"./_stream_writable":229,inherits:198}],226:[function(require,module,exports){"use strict";module.exports=PassThrough;var Transform=require("./_stream_transform");require("inherits")(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},{"./_stream_transform":228,inherits:198}],227:[function(require,module,exports){"use strict";module.exports=Readable;var Duplex;Readable.ReadableState=ReadableState;var EE=require("events").EventEmitter;var EElistenerCount=function EElistenerCount(emitter,type){return emitter.listeners(type).length};var Stream=require("./internal/streams/stream");var Buffer=require("buffer").Buffer;var OurUint8Array=(typeof global!=="undefined"?global:typeof window!=="undefined"?window:typeof self!=="undefined"?self:{}).Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}var debugUtil=require("util");var debug;if(debugUtil&&debugUtil.debuglog){debug=debugUtil.debuglog("stream")}else{debug=function debug(){}}var BufferList=require("./internal/streams/buffer_list");var destroyImpl=require("./internal/streams/destroy");var _require=require("./internal/streams/state"),getHighWaterMark=_require.getHighWaterMark;var _require$codes=require("../errors").codes,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_STREAM_PUSH_AFTER_EOF=_require$codes.ERR_STREAM_PUSH_AFTER_EOF,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_STREAM_UNSHIFT_AFTER_END_EVENT=_require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;var StringDecoder;var createReadableStreamAsyncIterator;var from;require("inherits")(Readable,Stream);var errorOrDestroy=destroyImpl.errorOrDestroy;var kProxyEvents=["error","close","destroy","pause","resume"];function prependListener(emitter,event,fn){if(typeof emitter.prependListener==="function")return emitter.prependListener(event,fn);if(!emitter._events||!emitter._events[event])emitter.on(event,fn);else if(Array.isArray(emitter._events[event]))emitter._events[event].unshift(fn);else emitter._events[event]=[fn,emitter._events[event]]}function ReadableState(options,stream,isDuplex){Duplex=Duplex||require("./_stream_duplex");options=options||{};if(typeof isDuplex!=="boolean")isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.readableObjectMode;this.highWaterMark=getHighWaterMark(this,options,"readableHighWaterMark",isDuplex);this.buffer=new BufferList;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.paused=true;this.emitClose=options.emitClose!==false;this.autoDestroy=!!options.autoDestroy;this.destroyed=false;this.defaultEncoding=options.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=require("string_decoder/").StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding}}function Readable(options){Duplex=Duplex||require("./_stream_duplex");if(!(this instanceof Readable))return new Readable(options);var isDuplex=this instanceof Duplex;this._readableState=new ReadableState(options,this,isDuplex);this.readable=true;if(options){if(typeof options.read==="function")this._read=options.read;if(typeof options.destroy==="function")this._destroy=options.destroy}Stream.call(this)}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:false,get:function get(){if(this._readableState===undefined){return false}return this._readableState.destroyed},set:function set(value){if(!this._readableState){return}this._readableState.destroyed=value}});Readable.prototype.destroy=destroyImpl.destroy;Readable.prototype._undestroy=destroyImpl.undestroy;Readable.prototype._destroy=function(err,cb){cb(err)};Readable.prototype.push=function(chunk,encoding){var state=this._readableState;var skipChunkCheck;if(!state.objectMode){if(typeof chunk==="string"){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=Buffer.from(chunk,encoding);encoding=""}skipChunkCheck=true}}else{skipChunkCheck=true}return readableAddChunk(this,chunk,encoding,false,skipChunkCheck)};Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,true,false)};function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){debug("readableAddChunk",chunk);var state=stream._readableState;if(chunk===null){state.reading=false;onEofChunk(stream,state)}else{var er;if(!skipChunkCheck)er=chunkInvalid(state,chunk);if(er){errorOrDestroy(stream,er)}else if(state.objectMode||chunk&&chunk.length>0){if(typeof chunk!=="string"&&!state.objectMode&&Object.getPrototypeOf(chunk)!==Buffer.prototype){chunk=_uint8ArrayToBuffer(chunk)}if(addToFront){if(state.endEmitted)errorOrDestroy(stream,new ERR_STREAM_UNSHIFT_AFTER_END_EVENT);else addChunk(stream,state,chunk,true)}else if(state.ended){errorOrDestroy(stream,new ERR_STREAM_PUSH_AFTER_EOF)}else if(state.destroyed){return false}else{state.reading=false;if(state.decoder&&!encoding){chunk=state.decoder.write(chunk);if(state.objectMode||chunk.length!==0)addChunk(stream,state,chunk,false);else maybeReadMore(stream,state)}else{addChunk(stream,state,chunk,false)}}}else if(!addToFront){state.reading=false;maybeReadMore(stream,state)}}return!state.ended&&(state.length<state.highWaterMark||state.length===0)}function addChunk(stream,state,chunk,addToFront){if(state.flowing&&state.length===0&&!state.sync){state.awaitDrain=0;stream.emit("data",chunk)}else{state.length+=state.objectMode?1:chunk.length;if(addToFront)state.buffer.unshift(chunk);else state.buffer.push(chunk);if(state.needReadable)emitReadable(stream)}maybeReadMore(stream,state)}function chunkInvalid(state,chunk){var er;if(!_isUint8Array(chunk)&&typeof chunk!=="string"&&chunk!==undefined&&!state.objectMode){er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer","Uint8Array"],chunk)}return er}Readable.prototype.isPaused=function(){return this._readableState.flowing===false};Readable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=require("string_decoder/").StringDecoder;var decoder=new StringDecoder(enc);this._readableState.decoder=decoder;this._readableState.encoding=this._readableState.decoder.encoding;var p=this._readableState.buffer.head;var content="";while(p!==null){content+=decoder.write(p.data);p=p.next}this._readableState.buffer.clear();if(content!=="")this._readableState.buffer.push(content);this._readableState.length=content.length;return this};var MAX_HWM=1073741824;function computeNewHighWaterMark(n){if(n>=MAX_HWM){n=MAX_HWM}else{n--;n|=n>>>1;n|=n>>>2;n|=n>>>4;n|=n>>>8;n|=n>>>16;n++}return n}function howMuchToRead(n,state){if(n<=0||state.length===0&&state.ended)return 0;if(state.objectMode)return 1;if(n!==n){if(state.flowing&&state.length)return state.buffer.head.data.length;else return state.length}if(n>state.highWaterMark)state.highWaterMark=computeNewHighWaterMark(n);if(n<=state.length)return n;if(!state.ended){state.needReadable=true;return 0}return state.length}Readable.prototype.read=function(n){debug("read",n);n=parseInt(n,10);var state=this._readableState;var nOrig=n;if(n!==0)state.emittedReadable=false;if(n===0&&state.needReadable&&((state.highWaterMark!==0?state.length>=state.highWaterMark:state.length>0)||state.ended)){debug("read: emitReadable",state.length,state.ended);if(state.length===0&&state.ended)endReadable(this);else emitReadable(this);return null}n=howMuchToRead(n,state);if(n===0&&state.ended){if(state.length===0)endReadable(this);return null}var doRead=state.needReadable;debug("need readable",doRead);if(state.length===0||state.length-n<state.highWaterMark){doRead=true;debug("length less than watermark",doRead)}if(state.ended||state.reading){doRead=false;debug("reading or ended",doRead)}else if(doRead){debug("do read");state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false;if(!state.reading)n=howMuchToRead(nOrig,state)}var ret;if(n>0)ret=fromList(n,state);else ret=null;if(ret===null){state.needReadable=state.length<=state.highWaterMark;n=0}else{state.length-=n;state.awaitDrain=0}if(state.length===0){if(!state.ended)state.needReadable=true;if(nOrig!==n&&state.ended)endReadable(this)}if(ret!==null)this.emit("data",ret);return ret};function onEofChunk(stream,state){debug("onEofChunk");if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length}}state.ended=true;if(state.sync){emitReadable(stream)}else{state.needReadable=false;if(!state.emittedReadable){state.emittedReadable=true;emitReadable_(stream)}}}function emitReadable(stream){var state=stream._readableState;debug("emitReadable",state.needReadable,state.emittedReadable);state.needReadable=false;if(!state.emittedReadable){debug("emitReadable",state.flowing);state.emittedReadable=true;process.nextTick(emitReadable_,stream)}}function emitReadable_(stream){var state=stream._readableState;debug("emitReadable_",state.destroyed,state.length,state.ended);if(!state.destroyed&&(state.length||state.ended)){stream.emit("readable");state.emittedReadable=false}state.needReadable=!state.flowing&&!state.ended&&state.length<=state.highWaterMark;flow(stream)}function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;process.nextTick(maybeReadMore_,stream,state)}}function maybeReadMore_(stream,state){while(!state.reading&&!state.ended&&(state.length<state.highWaterMark||state.flowing&&state.length===0)){var len=state.length;debug("maybeReadMore read 0");stream.read(0);if(len===state.length)break}state.readingMore=false}Readable.prototype._read=function(n){errorOrDestroy(this,new ERR_METHOD_NOT_IMPLEMENTED("_read()"))};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break}state.pipesCount+=1;debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:unpipe;if(state.endEmitted)process.nextTick(endFn);else src.once("end",endFn);dest.on("unpipe",onunpipe);function onunpipe(readable,unpipeInfo){debug("onunpipe");if(readable===src){if(unpipeInfo&&unpipeInfo.hasUnpiped===false){unpipeInfo.hasUnpiped=true;cleanup()}}}function onend(){debug("onend");dest.end()}var ondrain=pipeOnDrain(src);dest.on("drain",ondrain);var cleanedUp=false;function cleanup(){debug("cleanup");dest.removeListener("close",onclose);dest.removeListener("finish",onfinish);dest.removeListener("drain",ondrain);dest.removeListener("error",onerror);dest.removeListener("unpipe",onunpipe);src.removeListener("end",onend);src.removeListener("end",unpipe);src.removeListener("data",ondata);cleanedUp=true;if(state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain))ondrain()}src.on("data",ondata);function ondata(chunk){debug("ondata");var ret=dest.write(chunk);debug("dest.write",ret);if(ret===false){if((state.pipesCount===1&&state.pipes===dest||state.pipesCount>1&&indexOf(state.pipes,dest)!==-1)&&!cleanedUp){debug("false write response, pause",state.awaitDrain);state.awaitDrain++}src.pause()}}function onerror(er){debug("onerror",er);unpipe();dest.removeListener("error",onerror);if(EElistenerCount(dest,"error")===0)errorOrDestroy(dest,er)}prependListener(dest,"error",onerror);function onclose(){dest.removeListener("finish",onfinish);unpipe()}dest.once("close",onclose);function onfinish(){debug("onfinish");dest.removeListener("close",onclose);unpipe()}dest.once("finish",onfinish);function unpipe(){debug("unpipe");src.unpipe(dest)}dest.emit("pipe",src);if(!state.flowing){debug("pipe resume");src.resume()}return dest};function pipeOnDrain(src){return function pipeOnDrainFunctionResult(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain);if(state.awaitDrain)state.awaitDrain--;if(state.awaitDrain===0&&EElistenerCount(src,"data")){state.flowing=true;flow(src)}}}Readable.prototype.unpipe=function(dest){var state=this._readableState;var unpipeInfo={hasUnpiped:false};if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;state.flowing=false;if(dest)dest.emit("unpipe",this,unpipeInfo);return this}if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;state.flowing=false;for(var i=0;i<len;i++)dests[i].emit("unpipe",this,{hasUnpiped:false});return this}var index=indexOf(state.pipes,dest);if(index===-1)return this;state.pipes.splice(index,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit("unpipe",this,unpipeInfo);return this};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);var state=this._readableState;if(ev==="data"){state.readableListening=this.listenerCount("readable")>0;if(state.flowing!==false)this.resume()}else if(ev==="readable"){if(!state.endEmitted&&!state.readableListening){state.readableListening=state.needReadable=true;state.flowing=false;state.emittedReadable=false;debug("on readable",state.length,state.reading);if(state.length){emitReadable(this)}else if(!state.reading){process.nextTick(nReadingNextTick,this)}}}return res};Readable.prototype.addListener=Readable.prototype.on;Readable.prototype.removeListener=function(ev,fn){var res=Stream.prototype.removeListener.call(this,ev,fn);if(ev==="readable"){process.nextTick(updateReadableListening,this)}return res};Readable.prototype.removeAllListeners=function(ev){var res=Stream.prototype.removeAllListeners.apply(this,arguments);if(ev==="readable"||ev===undefined){process.nextTick(updateReadableListening,this)}return res};function updateReadableListening(self){var state=self._readableState;state.readableListening=self.listenerCount("readable")>0;if(state.resumeScheduled&&!state.paused){state.flowing=true}else if(self.listenerCount("data")>0){self.resume()}}function nReadingNextTick(self){debug("readable nexttick read 0");self.read(0)}Readable.prototype.resume=function(){var state=this._readableState;if(!state.flowing){debug("resume");state.flowing=!state.readableListening;resume(this,state)}state.paused=false;return this};function resume(stream,state){if(!state.resumeScheduled){state.resumeScheduled=true;process.nextTick(resume_,stream,state)}}function resume_(stream,state){debug("resume",state.reading);if(!state.reading){stream.read(0)}state.resumeScheduled=false;stream.emit("resume");flow(stream);if(state.flowing&&!state.reading)stream.read(0)}Readable.prototype.pause=function(){debug("call pause flowing=%j",this._readableState.flowing);if(this._readableState.flowing!==false){debug("pause");this._readableState.flowing=false;this.emit("pause")}this._readableState.paused=true;return this};function flow(stream){var state=stream._readableState;debug("flow",state.flowing);while(state.flowing&&stream.read()!==null);}Readable.prototype.wrap=function(stream){var _this=this;var state=this._readableState;var paused=false;stream.on("end",function(){debug("wrapped end");if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)_this.push(chunk)}_this.push(null)});stream.on("data",function(chunk){debug("wrapped data");if(state.decoder)chunk=state.decoder.write(chunk);if(state.objectMode&&(chunk===null||chunk===undefined))return;else if(!state.objectMode&&(!chunk||!chunk.length))return;var ret=_this.push(chunk);if(!ret){paused=true;stream.pause()}});for(var i in stream){if(this[i]===undefined&&typeof stream[i]==="function"){this[i]=function methodWrap(method){return function methodWrapReturnFunction(){return stream[method].apply(stream,arguments)}}(i)}}for(var n=0;n<kProxyEvents.length;n++){stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]))}this._read=function(n){debug("wrapped _read",n);if(paused){paused=false;stream.resume()}};return this};if(typeof Symbol==="function"){Readable.prototype[Symbol.asyncIterator]=function(){if(createReadableStreamAsyncIterator===undefined){createReadableStreamAsyncIterator=require("./internal/streams/async_iterator")}return createReadableStreamAsyncIterator(this)}}Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:false,get:function get(){return this._readableState.highWaterMark}});Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:false,get:function get(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:false,get:function get(){return this._readableState.flowing},set:function set(state){if(this._readableState){this._readableState.flowing=state}}});Readable._fromList=fromList;Object.defineProperty(Readable.prototype,"readableLength",{enumerable:false,get:function get(){return this._readableState.length}});function fromList(n,state){if(state.length===0)return null;var ret;if(state.objectMode)ret=state.buffer.shift();else if(!n||n>=state.length){if(state.decoder)ret=state.buffer.join("");else if(state.buffer.length===1)ret=state.buffer.first();else ret=state.buffer.concat(state.length);state.buffer.clear()}else{ret=state.buffer.consume(n,state.decoder)}return ret}function endReadable(stream){var state=stream._readableState;debug("endReadable",state.endEmitted);if(!state.endEmitted){state.ended=true;process.nextTick(endReadableNT,state,stream)}}function endReadableNT(state,stream){debug("endReadableNT",state.endEmitted,state.length);if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit("end");if(state.autoDestroy){var wState=stream._writableState;if(!wState||wState.autoDestroy&&wState.finished){stream.destroy()}}}}if(typeof Symbol==="function"){Readable.from=function(iterable,opts){if(from===undefined){from=require("./internal/streams/from")}return from(Readable,iterable,opts)}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i}return-1}},{"../errors":224,"./_stream_duplex":225,"./internal/streams/async_iterator":230,"./internal/streams/buffer_list":231,"./internal/streams/destroy":232,"./internal/streams/from":234,"./internal/streams/state":236,"./internal/streams/stream":237,buffer:undefined,events:undefined,inherits:198,"string_decoder/":339,util:undefined}],228:[function(require,module,exports){"use strict";module.exports=Transform;var _require$codes=require("../errors").codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes.ERR_TRANSFORM_WITH_LENGTH_0;var Duplex=require("./_stream_duplex");require("inherits")(Transform,Duplex);function afterTransform(er,data){var ts=this._transformState;ts.transforming=false;var cb=ts.writecb;if(cb===null){return this.emit("error",new ERR_MULTIPLE_CALLBACK)}ts.writechunk=null;ts.writecb=null;if(data!=null)this.push(data);cb(er);var rs=this._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){this._read(rs.highWaterMark)}}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);this._transformState={afterTransform:afterTransform.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(options){if(typeof options.transform==="function")this._transform=options.transform;if(typeof options.flush==="function")this._flush=options.flush}this.on("prefinish",prefinish)}function prefinish(){var _this=this;if(typeof this._flush==="function"&&!this._readableState.destroyed){this._flush(function(er,data){done(_this,er,data)})}else{done(this,null,null)}}Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding)};Transform.prototype._transform=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark)}};Transform.prototype._read=function(n){var ts=this._transformState;if(ts.writechunk!==null&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)}else{ts.needTransform=true}};Transform.prototype._destroy=function(err,cb){Duplex.prototype._destroy.call(this,err,function(err2){cb(err2)})};function done(stream,er,data){if(er)return stream.emit("error",er);if(data!=null)stream.push(data);if(stream._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(stream._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return stream.push(null)}},{"../errors":224,"./_stream_duplex":225,inherits:198}],229:[function(require,module,exports){"use strict";module.exports=Writable;function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb;this.next=null}function CorkedRequest(state){var _this=this;this.next=null;this.entry=null;this.finish=function(){onCorkedFinish(_this,state)}}var Duplex;Writable.WritableState=WritableState;var internalUtil={deprecate:require("util-deprecate")};var Stream=require("./internal/streams/stream");var Buffer=require("buffer").Buffer;var OurUint8Array=(typeof global!=="undefined"?global:typeof window!=="undefined"?window:typeof self!=="undefined"?self:{}).Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}var destroyImpl=require("./internal/streams/destroy");var _require=require("./internal/streams/state"),getHighWaterMark=_require.getHighWaterMark;var _require$codes=require("../errors").codes,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE=_require$codes.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES=_require$codes.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END=_require$codes.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING=_require$codes.ERR_UNKNOWN_ENCODING;var errorOrDestroy=destroyImpl.errorOrDestroy;require("inherits")(Writable,Stream);function nop(){}function WritableState(options,stream,isDuplex){Duplex=Duplex||require("./_stream_duplex");options=options||{};if(typeof isDuplex!=="boolean")isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.writableObjectMode;this.highWaterMark=getHighWaterMark(this,options,"writableHighWaterMark",isDuplex);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.emitClose=options.emitClose!==false;this.autoDestroy=!!options.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function getBuffer(){var current=this.bufferedRequest;var out=[];while(current){out.push(current);current=current.next}return out};(function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function writableStateBufferGetter(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(_){}})();var realHasInstance;if(typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function"){realHasInstance=Function.prototype[Symbol.hasInstance];Object.defineProperty(Writable,Symbol.hasInstance,{value:function value(object){if(realHasInstance.call(this,object))return true;if(this!==Writable)return false;return object&&object._writableState instanceof WritableState}})}else{realHasInstance=function realHasInstance(object){return object instanceof this}}function Writable(options){Duplex=Duplex||require("./_stream_duplex");var isDuplex=this instanceof Duplex;if(!isDuplex&&!realHasInstance.call(Writable,this))return new Writable(options);this._writableState=new WritableState(options,this,isDuplex);this.writable=true;if(options){if(typeof options.write==="function")this._write=options.write;if(typeof options.writev==="function")this._writev=options.writev;if(typeof options.destroy==="function")this._destroy=options.destroy;if(typeof options.final==="function")this._final=options.final}Stream.call(this)}Writable.prototype.pipe=function(){errorOrDestroy(this,new ERR_STREAM_CANNOT_PIPE)};function writeAfterEnd(stream,cb){var er=new ERR_STREAM_WRITE_AFTER_END;errorOrDestroy(stream,er);process.nextTick(cb,er)}function validChunk(stream,state,chunk,cb){var er;if(chunk===null){er=new ERR_STREAM_NULL_VALUES}else if(typeof chunk!=="string"&&!state.objectMode){er=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer"],chunk)}if(er){errorOrDestroy(stream,er);process.nextTick(cb,er);return false}return true}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;var isBuf=!state.objectMode&&_isUint8Array(chunk);if(isBuf&&!Buffer.isBuffer(chunk)){chunk=_uint8ArrayToBuffer(chunk)}if(typeof encoding==="function"){cb=encoding;encoding=null}if(isBuf)encoding="buffer";else if(!encoding)encoding=state.defaultEncoding;if(typeof cb!=="function")cb=nop;if(state.ending)writeAfterEnd(this,cb);else if(isBuf||validChunk(this,state,chunk,cb)){state.pendingcb++;ret=writeOrBuffer(this,state,isBuf,chunk,encoding,cb)}return ret};Writable.prototype.cork=function(){this._writableState.corked++};Writable.prototype.uncork=function(){var state=this._writableState;if(state.corked){state.corked--;if(!state.writing&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest)clearBuffer(this,state)}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if(typeof encoding==="string")encoding=encoding.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new ERR_UNKNOWN_ENCODING(encoding);this._writableState.defaultEncoding=encoding;return this};Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:false,get:function get(){return this._writableState&&this._writableState.getBuffer()}});function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&typeof chunk==="string"){chunk=Buffer.from(chunk,encoding)}return chunk}Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:false,get:function get(){return this._writableState.highWaterMark}});function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=decodeChunk(state,chunk,encoding);if(chunk!==newChunk){isBuf=true;encoding="buffer";chunk=newChunk}}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null};if(last){last.next=state.lastBufferedRequest}else{state.bufferedRequest=state.lastBufferedRequest}state.bufferedRequestCount+=1}else{doWrite(stream,state,false,len,chunk,encoding,cb)}return ret}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;if(state.destroyed)state.onwrite(new ERR_STREAM_DESTROYED("write"));else if(writev)stream._writev(chunk,state.onwrite);else stream._write(chunk,encoding,state.onwrite);state.sync=false}function onwriteError(stream,state,sync,er,cb){--state.pendingcb;if(sync){process.nextTick(cb,er);process.nextTick(finishMaybe,stream,state);stream._writableState.errorEmitted=true;errorOrDestroy(stream,er)}else{cb(er);stream._writableState.errorEmitted=true;errorOrDestroy(stream,er);finishMaybe(stream,state)}}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;if(typeof cb!=="function")throw new ERR_MULTIPLE_CALLBACK;onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state)||stream.destroyed;if(!finished&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest){clearBuffer(stream,state)}if(sync){process.nextTick(afterWrite,stream,state,finished,cb)}else{afterWrite(stream,state,finished,cb)}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);state.pendingcb--;cb();finishMaybe(stream,state)}function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit("drain")}}function clearBuffer(stream,state){state.bufferProcessing=true;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount;var buffer=new Array(l);var holder=state.corkedRequestsFree;holder.entry=entry;var count=0;var allBuffers=true;while(entry){buffer[count]=entry;if(!entry.isBuf)allBuffers=false;entry=entry.next;count+=1}buffer.allBuffers=allBuffers;doWrite(stream,state,true,state.length,buffer,"",holder.finish);state.pendingcb++;state.lastBufferedRequest=null;if(holder.next){state.corkedRequestsFree=holder.next;holder.next=null}else{state.corkedRequestsFree=new CorkedRequest(state)}state.bufferedRequestCount=0}else{while(entry){var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,false,len,chunk,encoding,cb);entry=entry.next;state.bufferedRequestCount--;if(state.writing){break}}if(entry===null)state.lastBufferedRequest=null}state.bufferedRequest=entry;state.bufferProcessing=false}Writable.prototype._write=function(chunk,encoding,cb){cb(new ERR_METHOD_NOT_IMPLEMENTED("_write()"))};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(typeof chunk==="function"){cb=chunk;chunk=null;encoding=null}else if(typeof encoding==="function"){cb=encoding;encoding=null}if(chunk!==null&&chunk!==undefined)this.write(chunk,encoding);if(state.corked){state.corked=1;this.uncork()}if(!state.ending)endWritable(this,state,cb);return this};Object.defineProperty(Writable.prototype,"writableLength",{enumerable:false,get:function get(){return this._writableState.length}});function needFinish(state){return state.ending&&state.length===0&&state.bufferedRequest===null&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final(function(err){state.pendingcb--;if(err){errorOrDestroy(stream,err)}state.prefinished=true;stream.emit("prefinish");finishMaybe(stream,state)})}function prefinish(stream,state){if(!state.prefinished&&!state.finalCalled){if(typeof stream._final==="function"&&!state.destroyed){state.pendingcb++;state.finalCalled=true;process.nextTick(callFinal,stream,state)}else{state.prefinished=true;stream.emit("prefinish")}}}function finishMaybe(stream,state){var need=needFinish(state);if(need){prefinish(stream,state);if(state.pendingcb===0){state.finished=true;stream.emit("finish");if(state.autoDestroy){var rState=stream._readableState;if(!rState||rState.autoDestroy&&rState.endEmitted){stream.destroy()}}}}return need}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)process.nextTick(cb);else stream.once("finish",cb)}state.ended=true;stream.writable=false}function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;while(entry){var cb=entry.callback;state.pendingcb--;cb(err);entry=entry.next}state.corkedRequestsFree.next=corkReq}Object.defineProperty(Writable.prototype,"destroyed",{enumerable:false,get:function get(){if(this._writableState===undefined){return false}return this._writableState.destroyed},set:function set(value){if(!this._writableState){return}this._writableState.destroyed=value}});Writable.prototype.destroy=destroyImpl.destroy;Writable.prototype._undestroy=destroyImpl.undestroy;Writable.prototype._destroy=function(err,cb){cb(err)}},{"../errors":224,"./_stream_duplex":225,"./internal/streams/destroy":232,"./internal/streams/state":236,"./internal/streams/stream":237,buffer:undefined,inherits:198,"util-deprecate":359}],230:[function(require,module,exports){"use strict";var _Object$setPrototypeO;function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key==="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(typeof res!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var finished=require("./end-of-stream");var kLastResolve=Symbol("lastResolve");var kLastReject=Symbol("lastReject");var kError=Symbol("error");var kEnded=Symbol("ended");var kLastPromise=Symbol("lastPromise");var kHandlePromise=Symbol("handlePromise");var kStream=Symbol("stream");function createIterResult(value,done){return{value:value,done:done}}function readAndResolve(iter){var resolve=iter[kLastResolve];if(resolve!==null){var data=iter[kStream].read();if(data!==null){iter[kLastPromise]=null;iter[kLastResolve]=null;iter[kLastReject]=null;resolve(createIterResult(data,false))}}}function onReadable(iter){process.nextTick(readAndResolve,iter)}function wrapForNext(lastPromise,iter){return function(resolve,reject){lastPromise.then(function(){if(iter[kEnded]){resolve(createIterResult(undefined,true));return}iter[kHandlePromise](resolve,reject)},reject)}}var AsyncIteratorPrototype=Object.getPrototypeOf(function(){});var ReadableStreamAsyncIteratorPrototype=Object.setPrototypeOf((_Object$setPrototypeO={get stream(){return this[kStream]},next:function next(){var _this=this;var error=this[kError];if(error!==null){return Promise.reject(error)}if(this[kEnded]){return Promise.resolve(createIterResult(undefined,true))}if(this[kStream].destroyed){return new Promise(function(resolve,reject){process.nextTick(function(){if(_this[kError]){reject(_this[kError])}else{resolve(createIterResult(undefined,true))}})})}var lastPromise=this[kLastPromise];var promise;if(lastPromise){promise=new Promise(wrapForNext(lastPromise,this))}else{var data=this[kStream].read();if(data!==null){return Promise.resolve(createIterResult(data,false))}promise=new Promise(this[kHandlePromise])}this[kLastPromise]=promise;return promise}},_defineProperty(_Object$setPrototypeO,Symbol.asyncIterator,function(){return this}),_defineProperty(_Object$setPrototypeO,"return",function _return(){var _this2=this;return new Promise(function(resolve,reject){_this2[kStream].destroy(null,function(err){if(err){reject(err);return}resolve(createIterResult(undefined,true))})})}),_Object$setPrototypeO),AsyncIteratorPrototype);var createReadableStreamAsyncIterator=function createReadableStreamAsyncIterator(stream){var _Object$create;var iterator=Object.create(ReadableStreamAsyncIteratorPrototype,(_Object$create={},_defineProperty(_Object$create,kStream,{value:stream,writable:true}),_defineProperty(_Object$create,kLastResolve,{value:null,writable:true}),_defineProperty(_Object$create,kLastReject,{value:null,writable:true}),_defineProperty(_Object$create,kError,{value:null,writable:true}),_defineProperty(_Object$create,kEnded,{value:stream._readableState.endEmitted,writable:true}),_defineProperty(_Object$create,kHandlePromise,{value:function value(resolve,reject){var data=iterator[kStream].read();if(data){iterator[kLastPromise]=null;iterator[kLastResolve]=null;iterator[kLastReject]=null;resolve(createIterResult(data,false))}else{iterator[kLastResolve]=resolve;iterator[kLastReject]=reject}},writable:true}),_Object$create));iterator[kLastPromise]=null;finished(stream,function(err){if(err&&err.code!=="ERR_STREAM_PREMATURE_CLOSE"){var reject=iterator[kLastReject];if(reject!==null){iterator[kLastPromise]=null;iterator[kLastResolve]=null;iterator[kLastReject]=null;reject(err)}iterator[kError]=err;return}var resolve=iterator[kLastResolve];if(resolve!==null){iterator[kLastPromise]=null;iterator[kLastResolve]=null;iterator[kLastReject]=null;resolve(createIterResult(undefined,true))}iterator[kEnded]=true});stream.on("readable",onReadable.bind(null,iterator));return iterator};module.exports=createReadableStreamAsyncIterator},{"./end-of-stream":233}],231:[function(require,module,exports){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key==="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(typeof res!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var _require=require("buffer"),Buffer=_require.Buffer;var _require2=require("util"),inspect=_require2.inspect;var custom=inspect&&inspect.custom||"inspect";function copyBuffer(src,target,offset){Buffer.prototype.copy.call(src,target,offset)}module.exports=function(){function BufferList(){_classCallCheck(this,BufferList);this.head=null;this.tail=null;this.length=0}_createClass(BufferList,[{key:"push",value:function push(v){var entry={data:v,next:null};if(this.length>0)this.tail.next=entry;else this.head=entry;this.tail=entry;++this.length}},{key:"unshift",value:function unshift(v){var entry={data:v,next:this.head};if(this.length===0)this.tail=entry;this.head=entry;++this.length}},{key:"shift",value:function shift(){if(this.length===0)return;var ret=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return ret}},{key:"clear",value:function clear(){this.head=this.tail=null;this.length=0}},{key:"join",value:function join(s){if(this.length===0)return"";var p=this.head;var ret=""+p.data;while(p=p.next)ret+=s+p.data;return ret}},{key:"concat",value:function concat(n){if(this.length===0)return Buffer.alloc(0);var ret=Buffer.allocUnsafe(n>>>0);var p=this.head;var i=0;while(p){copyBuffer(p.data,ret,i);i+=p.data.length;p=p.next}return ret}},{key:"consume",value:function consume(n,hasStrings){var ret;if(n<this.head.data.length){ret=this.head.data.slice(0,n);this.head.data=this.head.data.slice(n)}else if(n===this.head.data.length){ret=this.shift()}else{ret=hasStrings?this._getString(n):this._getBuffer(n)}return ret}},{key:"first",value:function first(){return this.head.data}},{key:"_getString",value:function _getString(n){var p=this.head;var c=1;var ret=p.data;n-=ret.length;while(p=p.next){var str=p.data;var nb=n>str.length?str.length:n;if(nb===str.length)ret+=str;else ret+=str.slice(0,n);n-=nb;if(n===0){if(nb===str.length){++c;if(p.next)this.head=p.next;else this.head=this.tail=null}else{this.head=p;p.data=str.slice(nb)}break}++c}this.length-=c;return ret}},{key:"_getBuffer",value:function _getBuffer(n){var ret=Buffer.allocUnsafe(n);var p=this.head;var c=1;p.data.copy(ret);n-=p.data.length;while(p=p.next){var buf=p.data;var nb=n>buf.length?buf.length:n;buf.copy(ret,ret.length-n,0,nb);n-=nb;if(n===0){if(nb===buf.length){++c;if(p.next)this.head=p.next;else this.head=this.tail=null}else{this.head=p;p.data=buf.slice(nb)}break}++c}this.length-=c;return ret}},{key:custom,value:function value(_,options){return inspect(this,_objectSpread(_objectSpread({},options),{},{depth:0,customInspect:false}))}}]);return BufferList}()},{buffer:undefined,util:undefined}],232:[function(require,module,exports){"use strict";function destroy(err,cb){var _this=this;var readableDestroyed=this._readableState&&this._readableState.destroyed;var writableDestroyed=this._writableState&&this._writableState.destroyed;if(readableDestroyed||writableDestroyed){if(cb){cb(err)}else if(err){if(!this._writableState){process.nextTick(emitErrorNT,this,err)}else if(!this._writableState.errorEmitted){this._writableState.errorEmitted=true;process.nextTick(emitErrorNT,this,err)}}return this}if(this._readableState){this._readableState.destroyed=true}if(this._writableState){this._writableState.destroyed=true}this._destroy(err||null,function(err){if(!cb&&err){if(!_this._writableState){process.nextTick(emitErrorAndCloseNT,_this,err)}else if(!_this._writableState.errorEmitted){_this._writableState.errorEmitted=true;process.nextTick(emitErrorAndCloseNT,_this,err)}else{process.nextTick(emitCloseNT,_this)}}else if(cb){process.nextTick(emitCloseNT,_this);cb(err)}else{process.nextTick(emitCloseNT,_this)}});return this}function emitErrorAndCloseNT(self,err){emitErrorNT(self,err);emitCloseNT(self)}function emitCloseNT(self){if(self._writableState&&!self._writableState.emitClose)return;if(self._readableState&&!self._readableState.emitClose)return;self.emit("close")}function undestroy(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finalCalled=false;this._writableState.prefinished=false;this._writableState.finished=false;this._writableState.errorEmitted=false}}function emitErrorNT(self,err){self.emit("error",err)}function errorOrDestroy(stream,err){var rState=stream._readableState;var wState=stream._writableState;if(rState&&rState.autoDestroy||wState&&wState.autoDestroy)stream.destroy(err);else stream.emit("error",err)}module.exports={destroy:destroy,undestroy:undestroy,errorOrDestroy:errorOrDestroy}},{}],233:[function(require,module,exports){"use strict";var ERR_STREAM_PREMATURE_CLOSE=require("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function once(callback){var called=false;return function(){if(called)return;called=true;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}callback.apply(this,args)}}function noop(){}function isRequest(stream){return stream.setHeader&&typeof stream.abort==="function"}function eos(stream,opts,callback){if(typeof opts==="function")return eos(stream,null,opts);if(!opts)opts={};callback=once(callback||noop);var readable=opts.readable||opts.readable!==false&&stream.readable;var writable=opts.writable||opts.writable!==false&&stream.writable;var onlegacyfinish=function onlegacyfinish(){if(!stream.writable)onfinish()};var writableEnded=stream._writableState&&stream._writableState.finished;var onfinish=function onfinish(){writable=false;writableEnded=true;if(!readable)callback.call(stream)};var readableEnded=stream._readableState&&stream._readableState.endEmitted;var onend=function onend(){readable=false;readableEnded=true;if(!writable)callback.call(stream)};var onerror=function onerror(err){callback.call(stream,err)};var onclose=function onclose(){var err;if(readable&&!readableEnded){if(!stream._readableState||!stream._readableState.ended)err=new ERR_STREAM_PREMATURE_CLOSE;return callback.call(stream,err)}if(writable&&!writableEnded){if(!stream._writableState||!stream._writableState.ended)err=new ERR_STREAM_PREMATURE_CLOSE;return callback.call(stream,err)}};var onrequest=function onrequest(){stream.req.on("finish",onfinish)};if(isRequest(stream)){stream.on("complete",onfinish);stream.on("abort",onclose);if(stream.req)onrequest();else stream.on("request",onrequest)}else if(writable&&!stream._writableState){stream.on("end",onlegacyfinish);stream.on("close",onlegacyfinish)}stream.on("end",onend);stream.on("finish",onfinish);if(opts.error!==false)stream.on("error",onerror);stream.on("close",onclose);return function(){stream.removeListener("complete",onfinish);stream.removeListener("abort",onclose);stream.removeListener("request",onrequest);if(stream.req)stream.req.removeListener("finish",onfinish);stream.removeListener("end",onlegacyfinish);stream.removeListener("close",onlegacyfinish);stream.removeListener("finish",onfinish);stream.removeListener("end",onend);stream.removeListener("error",onerror);stream.removeListener("close",onclose)}}module.exports=eos},{"../../../errors":224}],234:[function(require,module,exports){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key==="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(typeof res!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}var ERR_INVALID_ARG_TYPE=require("../../../errors").codes.ERR_INVALID_ARG_TYPE;function from(Readable,iterable,opts){var iterator;if(iterable&&typeof iterable.next==="function"){iterator=iterable}else if(iterable&&iterable[Symbol.asyncIterator])iterator=iterable[Symbol.asyncIterator]();else if(iterable&&iterable[Symbol.iterator])iterator=iterable[Symbol.iterator]();else throw new ERR_INVALID_ARG_TYPE("iterable",["Iterable"],iterable);var readable=new Readable(_objectSpread({objectMode:true},opts));var reading=false;readable._read=function(){if(!reading){reading=true;next()}};function next(){return _next2.apply(this,arguments)}function _next2(){_next2=_asyncToGenerator(function*(){try{var _yield$iterator$next=yield iterator.next(),value=_yield$iterator$next.value,done=_yield$iterator$next.done;if(done){readable.push(null)}else if(readable.push(yield value)){next()}else{reading=false}}catch(err){readable.destroy(err)}});return _next2.apply(this,arguments)}return readable}module.exports=from},{"../../../errors":224}],235:[function(require,module,exports){"use strict";var eos;function once(callback){var called=false;return function(){if(called)return;called=true;callback.apply(void 0,arguments)}}var _require$codes=require("../../../errors").codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(err){if(err)throw err}function isRequest(stream){return stream.setHeader&&typeof stream.abort==="function"}function destroyer(stream,reading,writing,callback){callback=once(callback);var closed=false;stream.on("close",function(){closed=true});if(eos===undefined)eos=require("./end-of-stream");eos(stream,{readable:reading,writable:writing},function(err){if(err)return callback(err);closed=true;callback()});var destroyed=false;return function(err){if(closed)return;if(destroyed)return;destroyed=true;if(isRequest(stream))return stream.abort();if(typeof stream.destroy==="function")return stream.destroy();callback(err||new ERR_STREAM_DESTROYED("pipe"))}}function call(fn){fn()}function pipe(from,to){return from.pipe(to)}function popCallback(streams){if(!streams.length)return noop;if(typeof streams[streams.length-1]!=="function")return noop;return streams.pop()}function pipeline(){for(var _len=arguments.length,streams=new Array(_len),_key=0;_key<_len;_key++){streams[_key]=arguments[_key]}var callback=popCallback(streams);if(Array.isArray(streams[0]))streams=streams[0];if(streams.length<2){throw new ERR_MISSING_ARGS("streams")}var error;var destroys=streams.map(function(stream,i){var reading=i<streams.length-1;var writing=i>0;return destroyer(stream,reading,writing,function(err){if(!error)error=err;if(err)destroys.forEach(call);if(reading)return;destroys.forEach(call);callback(error)})});return streams.reduce(pipe)}module.exports=pipeline},{"../../../errors":224,"./end-of-stream":233}],236:[function(require,module,exports){"use strict";var ERR_INVALID_OPT_VALUE=require("../../../errors").codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(options,isDuplex,duplexKey){return options.highWaterMark!=null?options.highWaterMark:isDuplex?options[duplexKey]:null}function getHighWaterMark(state,options,duplexKey,isDuplex){var hwm=highWaterMarkFrom(options,isDuplex,duplexKey);if(hwm!=null){if(!(isFinite(hwm)&&Math.floor(hwm)===hwm)||hwm<0){var name=isDuplex?duplexKey:"highWaterMark";throw new ERR_INVALID_OPT_VALUE(name,hwm)}return Math.floor(hwm)}return state.objectMode?16:16*1024}module.exports={getHighWaterMark:getHighWaterMark}},{"../../../errors":224}],237:[function(require,module,exports){module.exports=require("stream")},{stream:undefined}],238:[function(require,module,exports){var Stream=require("stream");if(process.env.READABLE_STREAM==="disable"&&Stream){module.exports=Stream.Readable;Object.assign(module.exports,Stream);module.exports.Stream=Stream}else{exports=module.exports=require("./lib/_stream_readable.js");exports.Stream=Stream||exports;exports.Readable=exports;exports.Writable=require("./lib/_stream_writable.js");exports.Duplex=require("./lib/_stream_duplex.js");exports.Transform=require("./lib/_stream_transform.js");exports.PassThrough=require("./lib/_stream_passthrough.js");exports.finished=require("./lib/internal/streams/end-of-stream.js");exports.pipeline=require("./lib/internal/streams/pipeline.js")}},{"./lib/_stream_duplex.js":225,"./lib/_stream_passthrough.js":226,"./lib/_stream_readable.js":227,"./lib/_stream_transform.js":228,"./lib/_stream_writable.js":229,"./lib/internal/streams/end-of-stream.js":233,"./lib/internal/streams/pipeline.js":235,stream:undefined}],239:[function(require,module,exports){module.exports={acl:{arity:-2,flags:["admin","noscript","loading","stale","skip_slowlog"],keyStart:0,keyStop:0,step:0},append:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},asking:{arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},auth:{arity:-2,flags:["noscript","loading","stale","skip_monitor","skip_slowlog","fast","no_auth"],keyStart:0,keyStop:0,step:0},bgrewriteaof:{arity:1,flags:["admin","noscript"],keyStart:0,keyStop:0,step:0},bgsave:{arity:-1,flags:["admin","noscript"],keyStart:0,keyStop:0,step:0},bitcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},bitfield:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},bitfield_ro:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},bitop:{arity:-4,flags:["write","denyoom"],keyStart:2,keyStop:-1,step:1},bitpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},blmove:{arity:6,flags:["write","denyoom","noscript"],keyStart:1,keyStop:2,step:1},blpop:{arity:-3,flags:["write","noscript"],keyStart:1,keyStop:-2,step:1},brpop:{arity:-3,flags:["write","noscript"],keyStart:1,keyStop:-2,step:1},brpoplpush:{arity:4,flags:["write","denyoom","noscript"],keyStart:1,keyStop:2,step:1},bzpopmax:{arity:-3,flags:["write","noscript","fast"],keyStart:1,keyStop:-2,step:1},bzpopmin:{arity:-3,flags:["write","noscript","fast"],keyStart:1,keyStop:-2,step:1},client:{arity:-2,flags:["admin","noscript","random","loading","stale"],keyStart:0,keyStop:0,step:0},cluster:{arity:-2,flags:["admin","random","stale"],keyStart:0,keyStop:0,step:0},command:{arity:-1,flags:["random","loading","stale"],keyStart:0,keyStop:0,step:0},config:{arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},copy:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},dbsize:{arity:1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},debug:{arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},decr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},decrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},del:{arity:-2,flags:["write"],keyStart:1,keyStop:-1,step:1},discard:{arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},dump:{arity:2,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},echo:{arity:2,flags:["fast"],keyStart:0,keyStop:0,step:0},eval:{arity:-3,flags:["noscript","may_replicate","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha:{arity:-3,flags:["noscript","may_replicate","movablekeys"],keyStart:0,keyStop:0,step:0},exec:{arity:1,flags:["noscript","loading","stale","skip_monitor","skip_slowlog"],keyStart:0,keyStop:0,step:0},exists:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},expire:{arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expireat:{arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},failover:{arity:-1,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},flushall:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},flushdb:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},geoadd:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},geodist:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},geohash:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},geopos:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadius:{arity:-6,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadius_ro:{arity:-6,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadiusbymember:{arity:-5,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadiusbymember_ro:{arity:-5,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearch:{arity:-7,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearchstore:{arity:-8,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},get:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getbit:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getdel:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getex:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},getset:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hello:{arity:-1,flags:["noscript","loading","stale","skip_monitor","skip_slowlog","fast","no_auth"],keyStart:0,keyStop:0,step:0},hexists:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hget:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hgetall:{arity:2,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},hincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hincrbyfloat:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hkeys:{arity:2,flags:["readonly","sort_for_script"],keyStart:1,keyStop:1,step:1},hlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmget:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},"host:":{arity:-1,flags:["readonly","loading","stale"],keyStart:0,keyStop:0,step:0},hrandfield:{arity:-2,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},hscan:{arity:-3,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},hset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hsetnx:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hstrlen:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hvals:{arity:2,flags:["readonly","sort_for_script"],keyStart:1,keyStop:1,step:1},incr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrbyfloat:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},info:{arity:-1,flags:["random","loading","stale"],keyStart:0,keyStop:0,step:0},keys:{arity:2,flags:["readonly","sort_for_script"],keyStart:0,keyStop:0,step:0},lastsave:{arity:1,flags:["random","loading","stale","fast"],keyStart:0,keyStop:0,step:0},latency:{arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},lindex:{arity:3,flags:["readonly"],keyStart:1,keyStop:1,step:1},linsert:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},llen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},lmove:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},lolwut:{arity:-1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},lpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},lpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},lpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},lrem:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},lset:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},ltrim:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},memory:{arity:-2,flags:["readonly","random","movablekeys"],keyStart:0,keyStop:0,step:0},mget:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},migrate:{arity:-6,flags:["write","random","movablekeys"],keyStart:0,keyStop:0,step:0},module:{arity:-2,flags:["admin","noscript"],keyStart:0,keyStop:0,step:0},monitor:{arity:1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},move:{arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},mset:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},msetnx:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},multi:{arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},object:{arity:-2,flags:["readonly","random"],keyStart:2,keyStop:2,step:1},persist:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpire:{arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpireat:{arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pfadd:{arity:-2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},pfcount:{arity:-2,flags:["readonly","may_replicate"],keyStart:1,keyStop:-1,step:1},pfdebug:{arity:-3,flags:["write","denyoom","admin"],keyStart:2,keyStop:2,step:1},pfmerge:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},pfselftest:{arity:1,flags:["admin"],keyStart:0,keyStop:0,step:0},ping:{arity:-1,flags:["stale","fast"],keyStart:0,keyStop:0,step:0},post:{arity:-1,flags:["readonly","loading","stale"],keyStart:0,keyStop:0,step:0},psetex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},psubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},psync:{arity:-3,flags:["admin","noscript"],keyStart:0,keyStop:0,step:0},pttl:{arity:2,flags:["readonly","random","fast"],keyStart:1,keyStop:1,step:1},publish:{arity:3,flags:["pubsub","loading","stale","fast","may_replicate"],keyStart:0,keyStop:0,step:0},pubsub:{arity:-2,flags:["pubsub","random","loading","stale"],keyStart:0,keyStop:0,step:0},punsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},quit:{arity:1,flags:["loading","stale","readonly"],keyStart:0,keyStop:0,step:0},randomkey:{arity:1,flags:["readonly","random"],keyStart:0,keyStop:0,step:0},readonly:{arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},readwrite:{arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},rename:{arity:3,flags:["write"],keyStart:1,keyStop:2,step:1},renamenx:{arity:3,flags:["write","fast"],keyStart:1,keyStop:2,step:1},replconf:{arity:-1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},replicaof:{arity:3,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},reset:{arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},restore:{arity:-4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},"restore-asking":{arity:-4,flags:["write","denyoom","asking"],keyStart:1,keyStop:1,step:1},role:{arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},rpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},rpoplpush:{arity:3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},rpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},rpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},sadd:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},save:{arity:1,flags:["admin","noscript"],keyStart:0,keyStop:0,step:0},scan:{arity:-2,flags:["readonly","random"],keyStart:0,keyStop:0,step:0},scard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},script:{arity:-2,flags:["noscript","may_replicate"],keyStart:0,keyStop:0,step:0},sdiff:{arity:-2,flags:["readonly","sort_for_script"],keyStart:1,keyStop:-1,step:1},sdiffstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},select:{arity:2,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},set:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setbit:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setnx:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},setrange:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},shutdown:{arity:-1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},sinter:{arity:-2,flags:["readonly","sort_for_script"],keyStart:1,keyStop:-1,step:1},sinterstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sismember:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},slaveof:{arity:3,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},slowlog:{arity:-2,flags:["admin","random","loading","stale"],keyStart:0,keyStop:0,step:0},smembers:{arity:2,flags:["readonly","sort_for_script"],keyStart:1,keyStop:1,step:1},smismember:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},smove:{arity:4,flags:["write","fast"],keyStart:1,keyStop:2,step:1},sort:{arity:-2,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},spop:{arity:-2,flags:["write","random","fast"],keyStart:1,keyStop:1,step:1},srandmember:{arity:-2,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},srem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},sscan:{arity:-3,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},stralgo:{arity:-2,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},strlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},subscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},substr:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},sunion:{arity:-2,flags:["readonly","sort_for_script"],keyStart:1,keyStop:-1,step:1},sunionstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},swapdb:{arity:3,flags:["write","fast"],keyStart:0,keyStop:0,step:0},sync:{arity:1,flags:["admin","noscript"],keyStart:0,keyStop:0,step:0},time:{arity:1,flags:["random","loading","stale","fast"],keyStart:0,keyStop:0,step:0},touch:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},ttl:{arity:2,flags:["readonly","random","fast"],keyStart:1,keyStop:1,step:1},type:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},unlink:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:-1,step:1},unsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},unwatch:{arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},wait:{arity:3,flags:["noscript"],keyStart:0,keyStop:0,step:0},watch:{arity:-2,flags:["noscript","loading","stale","fast"],keyStart:1,keyStop:-1,step:1},xack:{arity:-4,flags:["write","random","fast"],keyStart:1,keyStop:1,step:1},xadd:{arity:-5,flags:["write","denyoom","random","fast"],keyStart:1,keyStop:1,step:1},xautoclaim:{arity:-6,flags:["write","random","fast"],keyStart:1,keyStop:1,step:1},xclaim:{arity:-6,flags:["write","random","fast"],keyStart:1,keyStop:1,step:1},xdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xgroup:{arity:-2,flags:["write","denyoom"],keyStart:2,keyStop:2,step:1},xinfo:{arity:-2,flags:["readonly","random"],keyStart:2,keyStop:2,step:1},xlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},xpending:{arity:-3,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},xrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xread:{arity:-4,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},xreadgroup:{arity:-7,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},xrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xsetid:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xtrim:{arity:-2,flags:["write","random"],keyStart:1,keyStop:1,step:1},zadd:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zcard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zdiff:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zdiffstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zinter:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zinterstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zlexcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zmscore:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zpopmax:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zpopmin:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zrandmember:{arity:-2,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},zrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangestore:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},zrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zrem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zremrangebylex:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyrank:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyscore:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zscan:{arity:-3,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},zscore:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zunion:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zunionstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1}}},{}],240:[function(require,module,exports){"use strict";var commands=require("./commands.json");exports.list=Object.keys(commands);var flags={};exports.list.forEach(function(commandName){flags[commandName]=commands[commandName].flags.reduce(function(flags,flag){flags[flag]=true;return flags},{})});exports.exists=function(commandName){return Boolean(commands[commandName])};exports.hasFlag=function(commandName,flag){if(!flags[commandName]){throw new Error("Unknown command "+commandName)}return Boolean(flags[commandName][flag])};exports.getKeyIndexes=function(commandName,args,options){var command=commands[commandName];if(!command){throw new Error("Unknown command "+commandName)}if(!Array.isArray(args)){throw new Error("Expect args to be an array")}var keys=[];var i,keyStart,keyStop,parseExternalKey;switch(commandName){case"zunionstore":case"zinterstore":keys.push(0);case"eval":case"evalsha":keyStop=Number(args[1])+2;for(i=2;i<keyStop;i++){keys.push(i)}break;case"sort":parseExternalKey=options&&options.parseExternalKey;keys.push(0);for(i=1;i<args.length-1;i++){if(typeof args[i]!=="string"){continue}var directive=args[i].toUpperCase();if(directive==="GET"){i+=1;if(args[i]!=="#"){if(parseExternalKey){keys.push([i,getExternalKeyNameLength(args[i])])}else{keys.push(i)}}}else if(directive==="BY"){i+=1;if(parseExternalKey){keys.push([i,getExternalKeyNameLength(args[i])])}else{keys.push(i)}}else if(directive==="STORE"){i+=1;keys.push(i)}}break;case"migrate":if(args[2]===""){for(i=5;i<args.length-1;i++){if(args[i].toUpperCase()==="KEYS"){for(var j=i+1;j<args.length;j++){keys.push(j)}break}}}else{keys.push(2)}break;case"xreadgroup":case"xread":for(i=commandName==="xread"?0:3;i<args.length-1;i++){if(String(args[i]).toUpperCase()==="STREAMS"){for(j=i+1;j<=i+(args.length-1-i)/2;j++){keys.push(j)}break}}break;default:if(command.step>0){keyStart=command.keyStart-1;keyStop=command.keyStop>0?command.keyStop:args.length+command.keyStop+1;for(i=keyStart;i<keyStop;i+=command.step){keys.push(i)}}break}return keys};function getExternalKeyNameLength(key){if(typeof key!=="string"){key=String(key)}var hashPos=key.indexOf("->");return hashPos===-1?key.length:hashPos}},{"./commands.json":239}],241:[function(require,module,exports){"use strict";const Errors=process.version.charCodeAt(1)<55&&process.version.charCodeAt(2)===46?require("./lib/old"):require("./lib/modern");module.exports=Errors},{"./lib/modern":242,"./lib/old":243}],242:[function(require,module,exports){"use strict";const assert=require("assert");class RedisError extends Error{get name(){return this.constructor.name}}class ParserError extends RedisError{constructor(message,buffer,offset){assert(buffer);assert.strictEqual(typeof offset,"number");const tmp=Error.stackTraceLimit;Error.stackTraceLimit=2;super(message);Error.stackTraceLimit=tmp;this.offset=offset;this.buffer=buffer}get name(){return this.constructor.name}}class ReplyError extends RedisError{constructor(message){const tmp=Error.stackTraceLimit;Error.stackTraceLimit=2;super(message);Error.stackTraceLimit=tmp}get name(){return this.constructor.name}}class AbortError extends RedisError{get name(){return this.constructor.name}}class InterruptError extends AbortError{get name(){return this.constructor.name}}module.exports={RedisError:RedisError,ParserError:ParserError,ReplyError:ReplyError,AbortError:AbortError,InterruptError:InterruptError}},{assert:undefined}],243:[function(require,module,exports){"use strict";const assert=require("assert");const util=require("util");function RedisError(message){Object.defineProperty(this,"message",{value:message||"",configurable:true,writable:true});Error.captureStackTrace(this,this.constructor)}util.inherits(RedisError,Error);Object.defineProperty(RedisError.prototype,"name",{value:"RedisError",configurable:true,writable:true});function ParserError(message,buffer,offset){assert(buffer);assert.strictEqual(typeof offset,"number");Object.defineProperty(this,"message",{value:message||"",configurable:true,writable:true});const tmp=Error.stackTraceLimit;Error.stackTraceLimit=2;Error.captureStackTrace(this,this.constructor);Error.stackTraceLimit=tmp;this.offset=offset;this.buffer=buffer}util.inherits(ParserError,RedisError);Object.defineProperty(ParserError.prototype,"name",{value:"ParserError",configurable:true,writable:true});function ReplyError(message){Object.defineProperty(this,"message",{value:message||"",configurable:true,writable:true});const tmp=Error.stackTraceLimit;Error.stackTraceLimit=2;Error.captureStackTrace(this,this.constructor);Error.stackTraceLimit=tmp}util.inherits(ReplyError,RedisError);Object.defineProperty(ReplyError.prototype,"name",{value:"ReplyError",configurable:true,writable:true});function AbortError(message){Object.defineProperty(this,"message",{value:message||"",configurable:true,writable:true});Error.captureStackTrace(this,this.constructor)}util.inherits(AbortError,RedisError);Object.defineProperty(AbortError.prototype,"name",{value:"AbortError",configurable:true,writable:true});function InterruptError(message){Object.defineProperty(this,"message",{value:message||"",configurable:true,writable:true});Error.captureStackTrace(this,this.constructor)}util.inherits(InterruptError,AbortError);Object.defineProperty(InterruptError.prototype,"name",{value:"InterruptError",configurable:true,writable:true});module.exports={RedisError:RedisError,ParserError:ParserError,ReplyError:ReplyError,AbortError:AbortError,InterruptError:InterruptError}},{assert:undefined,util:undefined}],244:[function(require,module,exports){"use strict";module.exports=require("./lib/parser")},{"./lib/parser":245}],245:[function(require,module,exports){"use strict";const Buffer=require("buffer").Buffer;const StringDecoder=require("string_decoder").StringDecoder;const decoder=new StringDecoder;const errors=require("redis-errors");const ReplyError=errors.ReplyError;const ParserError=errors.ParserError;var bufferPool=Buffer.allocUnsafe(32*1024);var bufferOffset=0;var interval=null;var counter=0;var notDecreased=0;function parseSimpleNumbers(parser){const length=parser.buffer.length-1;var offset=parser.offset;var number=0;var sign=1;if(parser.buffer[offset]===45){sign=-1;offset++}while(offset<length){const c1=parser.buffer[offset++];if(c1===13){parser.offset=offset+1;return sign*number}number=number*10+(c1-48)}}function parseStringNumbers(parser){const length=parser.buffer.length-1;var offset=parser.offset;var number=0;var res="";if(parser.buffer[offset]===45){res+="-";offset++}while(offset<length){var c1=parser.buffer[offset++];if(c1===13){parser.offset=offset+1;if(number!==0){res+=number}return res}else if(number>429496728){res+=number*10+(c1-48);number=0}else if(c1===48&&number===0){res+=0}else{number=number*10+(c1-48)}}}function parseSimpleString(parser){const start=parser.offset;const buffer=parser.buffer;const length=buffer.length-1;var offset=start;while(offset<length){if(buffer[offset++]===13){parser.offset=offset+1;if(parser.optionReturnBuffers===true){return parser.buffer.slice(start,offset-1)}return parser.buffer.toString("utf8",start,offset-1)}}}function parseLength(parser){const length=parser.buffer.length-1;var offset=parser.offset;var number=0;while(offset<length){const c1=parser.buffer[offset++];if(c1===13){parser.offset=offset+1;return number}number=number*10+(c1-48)}}function parseInteger(parser){if(parser.optionStringNumbers===true){return parseStringNumbers(parser)}return parseSimpleNumbers(parser)}function parseBulkString(parser){const length=parseLength(parser);if(length===undefined){return}if(length<0){return null}const offset=parser.offset+length;if(offset+2>parser.buffer.length){parser.bigStrSize=offset+2;parser.totalChunkSize=parser.buffer.length;parser.bufferCache.push(parser.buffer);return}const start=parser.offset;parser.offset=offset+2;if(parser.optionReturnBuffers===true){return parser.buffer.slice(start,offset)}return parser.buffer.toString("utf8",start,offset)}function parseError(parser){var string=parseSimpleString(parser);if(string!==undefined){if(parser.optionReturnBuffers===true){string=string.toString()}return new ReplyError(string)}}function handleError(parser,type){const err=new ParserError("Protocol error, got "+JSON.stringify(String.fromCharCode(type))+" as reply type byte",JSON.stringify(parser.buffer),parser.offset);parser.buffer=null;parser.returnFatalError(err)}function parseArray(parser){const length=parseLength(parser);if(length===undefined){return}if(length<0){return null}const responses=new Array(length);return parseArrayElements(parser,responses,0)}function pushArrayCache(parser,array,pos){parser.arrayCache.push(array);parser.arrayPos.push(pos)}function parseArrayChunks(parser){const tmp=parser.arrayCache.pop();var pos=parser.arrayPos.pop();if(parser.arrayCache.length){const res=parseArrayChunks(parser);if(res===undefined){pushArrayCache(parser,tmp,pos);return}tmp[pos++]=res}return parseArrayElements(parser,tmp,pos)}function parseArrayElements(parser,responses,i){const bufferLength=parser.buffer.length;while(i<responses.length){const offset=parser.offset;if(parser.offset>=bufferLength){pushArrayCache(parser,responses,i);return}const response=parseType(parser,parser.buffer[parser.offset++]);if(response===undefined){if(!(parser.arrayCache.length||parser.bufferCache.length)){parser.offset=offset}pushArrayCache(parser,responses,i);return}responses[i]=response;i++}return responses}function parseType(parser,type){switch(type){case 36:return parseBulkString(parser);case 43:return parseSimpleString(parser);case 42:return parseArray(parser);case 58:return parseInteger(parser);case 45:return parseError(parser);default:return handleError(parser,type)}}function decreaseBufferPool(){if(bufferPool.length>50*1024){if(counter===1||notDecreased>counter*2){const minSliceLen=Math.floor(bufferPool.length/10);const sliceLength=minSliceLen<bufferOffset?bufferOffset:minSliceLen;bufferOffset=0;bufferPool=bufferPool.slice(sliceLength,bufferPool.length)}else{notDecreased++;counter--}}else{clearInterval(interval);counter=0;notDecreased=0;interval=null}}function resizeBuffer(length){if(bufferPool.length<length+bufferOffset){const multiplier=length>1024*1024*75?2:3;if(bufferOffset>1024*1024*111){bufferOffset=1024*1024*50}bufferPool=Buffer.allocUnsafe(length*multiplier+bufferOffset);bufferOffset=0;counter++;if(interval===null){interval=setInterval(decreaseBufferPool,50)}}}function concatBulkString(parser){const list=parser.bufferCache;const oldOffset=parser.offset;var chunks=list.length;var offset=parser.bigStrSize-parser.totalChunkSize;parser.offset=offset;if(offset<=2){if(chunks===2){return list[0].toString("utf8",oldOffset,list[0].length+offset-2)}chunks--;offset=list[list.length-2].length+offset}var res=decoder.write(list[0].slice(oldOffset));for(var i=1;i<chunks-1;i++){res+=decoder.write(list[i])}res+=decoder.end(list[i].slice(0,offset-2));return res}function concatBulkBuffer(parser){const list=parser.bufferCache;const oldOffset=parser.offset;const length=parser.bigStrSize-oldOffset-2;var chunks=list.length;var offset=parser.bigStrSize-parser.totalChunkSize;parser.offset=offset;if(offset<=2){if(chunks===2){return list[0].slice(oldOffset,list[0].length+offset-2)}chunks--;offset=list[list.length-2].length+offset}resizeBuffer(length);const start=bufferOffset;list[0].copy(bufferPool,start,oldOffset,list[0].length);bufferOffset+=list[0].length-oldOffset;for(var i=1;i<chunks-1;i++){list[i].copy(bufferPool,bufferOffset);bufferOffset+=list[i].length}list[i].copy(bufferPool,bufferOffset,0,offset-2);bufferOffset+=offset-2;return bufferPool.slice(start,bufferOffset)}class JavascriptRedisParser{constructor(options){if(!options){throw new TypeError("Options are mandatory.")}if(typeof options.returnError!=="function"||typeof options.returnReply!=="function"){throw new TypeError("The returnReply and returnError options have to be functions.")}this.setReturnBuffers(!!options.returnBuffers);this.setStringNumbers(!!options.stringNumbers);this.returnError=options.returnError;this.returnFatalError=options.returnFatalError||options.returnError;this.returnReply=options.returnReply;this.reset()}reset(){this.offset=0;this.buffer=null;this.bigStrSize=0;this.totalChunkSize=0;this.bufferCache=[];this.arrayCache=[];this.arrayPos=[]}setReturnBuffers(returnBuffers){if(typeof returnBuffers!=="boolean"){throw new TypeError("The returnBuffers argument has to be a boolean")}this.optionReturnBuffers=returnBuffers}setStringNumbers(stringNumbers){if(typeof stringNumbers!=="boolean"){throw new TypeError("The stringNumbers argument has to be a boolean")}this.optionStringNumbers=stringNumbers}execute(buffer){if(this.buffer===null){this.buffer=buffer;this.offset=0}else if(this.bigStrSize===0){const oldLength=this.buffer.length;const remainingLength=oldLength-this.offset;const newBuffer=Buffer.allocUnsafe(remainingLength+buffer.length);this.buffer.copy(newBuffer,0,this.offset,oldLength);buffer.copy(newBuffer,remainingLength,0,buffer.length);this.buffer=newBuffer;this.offset=0;if(this.arrayCache.length){const arr=parseArrayChunks(this);if(arr===undefined){return}this.returnReply(arr)}}else if(this.totalChunkSize+buffer.length>=this.bigStrSize){this.bufferCache.push(buffer);var tmp=this.optionReturnBuffers?concatBulkBuffer(this):concatBulkString(this);this.bigStrSize=0;this.bufferCache=[];this.buffer=buffer;if(this.arrayCache.length){this.arrayCache[0][this.arrayPos[0]++]=tmp;tmp=parseArrayChunks(this);if(tmp===undefined){return}}this.returnReply(tmp)}else{this.bufferCache.push(buffer);this.totalChunkSize+=buffer.length;return}while(this.offset<this.buffer.length){const offset=this.offset;const type=this.buffer[this.offset++];const response=parseType(this,type);if(response===undefined){if(!(this.arrayCache.length||this.bufferCache.length)){this.offset=offset}return}if(type===45){this.returnError(response)}else{this.returnReply(response)}}this.buffer=null}}module.exports=JavascriptRedisParser},{buffer:undefined,"redis-errors":241,string_decoder:undefined}],246:[function(require,module,exports){"use strict";var net=require("net");var tls=require("tls");var util=require("util");var utils=require("./lib/utils");var Command=require("./lib/command");var Queue=require("denque");var errorClasses=require("./lib/customErrors");var EventEmitter=require("events");var Parser=require("redis-parser");var RedisErrors=require("redis-errors");var commands=require("redis-commands");var debug=require("./lib/debug");var unifyOptions=require("./lib/createClient");var SUBSCRIBE_COMMANDS={subscribe:true,unsubscribe:true,psubscribe:true,punsubscribe:true};function noop(){}function handle_detect_buffers_reply(reply,command,buffer_args){if(buffer_args===false||this.message_buffers){reply=utils.reply_to_strings(reply)}if(command==="hgetall"){reply=utils.reply_to_object(reply)}return reply}exports.debug_mode=/\bredis\b/i.test(process.env.NODE_DEBUG);function RedisClient(options,stream){options=utils.clone(options);EventEmitter.call(this);var cnx_options={};var self=this;for(var tls_option in options.tls){cnx_options[tls_option]=options.tls[tls_option];if(tls_option==="port"||tls_option==="host"||tls_option==="path"||tls_option==="family"){options[tls_option]=options.tls[tls_option]}}if(stream){options.stream=stream;this.address='"Private stream"'}else if(options.path){cnx_options.path=options.path;this.address=options.path}else{cnx_options.port=+options.port||6379;cnx_options.host=options.host||"127.0.0.1";cnx_options.family=!options.family&&net.isIP(cnx_options.host)||(options.family==="IPv6"?6:4);this.address=cnx_options.host+":"+cnx_options.port}this.connection_options=cnx_options;this.connection_id=RedisClient.connection_id++;this.connected=false;this.ready=false;if(options.socket_keepalive===undefined){options.socket_keepalive=true}if(options.socket_initial_delay===undefined){options.socket_initial_delay=0}for(var command in options.rename_commands){options.rename_commands[command.toLowerCase()]=options.rename_commands[command]}options.return_buffers=!!options.return_buffers;options.detect_buffers=!!options.detect_buffers;if(options.return_buffers&&options.detect_buffers){self.warn("WARNING: You activated return_buffers and detect_buffers at the same time. The return value is always going to be a buffer.");options.detect_buffers=false}if(options.detect_buffers){this.handle_reply=handle_detect_buffers_reply}this.should_buffer=false;this.command_queue=new Queue;this.offline_queue=new Queue;this.pipeline_queue=new Queue;this.connect_timeout=+options.connect_timeout||36e5;this.enable_offline_queue=options.enable_offline_queue===false?false:true;this.initialize_retry_vars();this.pub_sub_mode=0;this.subscription_set={};this.monitoring=false;this.message_buffers=false;this.closing=false;this.server_info={};this.auth_pass=options.auth_pass||options.password;this.auth_user=options.auth_user||options.user;this.selected_db=options.db;this.fire_strings=true;this.pipeline=false;this.sub_commands_left=0;this.times_connected=0;this.buffers=options.return_buffers||options.detect_buffers;this.options=options;this.reply="ON";this.create_stream();this.on("newListener",function(event){if((event==="message_buffer"||event==="pmessage_buffer"||event==="messageBuffer"||event==="pmessageBuffer")&&!this.buffers&&!this.message_buffers){this.reply_parser.optionReturnBuffers=true;this.message_buffers=true;this.handle_reply=handle_detect_buffers_reply}})}util.inherits(RedisClient,EventEmitter);RedisClient.connection_id=0;function create_parser(self){return new Parser({returnReply:function(data){self.return_reply(data)},returnError:function(err){self.return_error(err)},returnFatalError:function(err){err.message+=". Please report this.";self.ready=false;self.flush_and_error({message:"Fatal error encountered. Command aborted.",code:"NR_FATAL"},{error:err,queues:["command_queue"]});self.emit("error",err);self.create_stream()},returnBuffers:self.buffers||self.message_buffers,stringNumbers:self.options.string_numbers||false})}RedisClient.prototype.create_stream=function(){var self=this;this.reply_parser=create_parser(this);if(this.options.stream){if(this.stream){return}this.stream=this.options.stream}else{if(this.stream){this.stream.removeAllListeners();this.stream.destroy()}if(this.options.tls){this.stream=tls.connect(this.connection_options)}else{this.stream=net.createConnection(this.connection_options)}}if(this.options.connect_timeout){this.stream.setTimeout(this.connect_timeout,function(){self.retry_totaltime=self.connect_timeout;self.connection_gone("timeout")})}var connect_event=this.options.tls?"secureConnect":"connect";this.stream.once(connect_event,function(){this.removeAllListeners("timeout");self.times_connected++;self.on_connect()});this.stream.on("data",function(buffer_from_socket){debug("Net read "+self.address+" id "+self.connection_id);self.reply_parser.execute(buffer_from_socket)});this.stream.on("error",function(err){self.on_error(err)});this.stream.once("close",function(hadError){self.connection_gone("close")});this.stream.once("end",function(){self.connection_gone("end")});this.stream.on("drain",function(){self.drain()});this.stream.setNoDelay();if(this.auth_pass!==undefined){this.ready=true;this.auth(this.auth_pass,this.auth_user,function(err){if(err&&err.code!=="UNCERTAIN_STATE"){self.emit("error",err)}});this.ready=false}};RedisClient.prototype.handle_reply=function(reply,command){if(command==="hgetall"){reply=utils.reply_to_object(reply)}return reply};RedisClient.prototype.cork=noop;RedisClient.prototype.uncork=noop;RedisClient.prototype.initialize_retry_vars=function(){this.retry_timer=null;this.retry_totaltime=0;this.retry_delay=200;this.retry_backoff=1.7;this.attempts=1};RedisClient.prototype.warn=function(msg){var self=this;process.nextTick(function(){if(self.listeners("warning").length!==0){self.emit("warning",msg)}else{console.warn("node_redis:",msg)}})};RedisClient.prototype.flush_and_error=function(error_attributes,options){options=options||{};var aggregated_errors=[];var queue_names=options.queues||["command_queue","offline_queue"];for(var i=0;i<queue_names.length;i++){if(queue_names[i]==="command_queue"){error_attributes.message+=" It might have been processed."}else{error_attributes.message=error_attributes.message.replace(" It might have been processed.","")}for(var command_obj=this[queue_names[i]].shift();command_obj;command_obj=this[queue_names[i]].shift()){var err=new errorClasses.AbortError(error_attributes);if(command_obj.error){err.stack=err.stack+command_obj.error.stack.replace(/^Error.*?\n/,"\n")}err.command=command_obj.command.toUpperCase();if(command_obj.args&&command_obj.args.length){err.args=command_obj.args}if(options.error){err.origin=options.error}if(typeof command_obj.callback==="function"){command_obj.callback(err)}else{aggregated_errors.push(err)}}}if(exports.debug_mode&&aggregated_errors.length){var error;if(aggregated_errors.length===1){error=aggregated_errors[0]}else{error_attributes.message=error_attributes.message.replace("It","They").replace(/command/i,"$&s");error=new errorClasses.AggregateError(error_attributes);error.errors=aggregated_errors}this.emit("error",error)}};RedisClient.prototype.on_error=function(err){if(this.closing){return}err.message="Redis connection to "+this.address+" failed - "+err.message;debug(err.message);this.connected=false;this.ready=false;if(!this.options.retry_strategy){this.emit("error",err)}this.connection_gone("error",err)};RedisClient.prototype.on_connect=function(){debug("Stream connected "+this.address+" id "+this.connection_id);this.connected=true;this.ready=false;this.emitted_end=false;this.stream.setKeepAlive(this.options.socket_keepalive,this.options.socket_initial_delay);this.stream.setTimeout(0);this.emit("connect");this.initialize_retry_vars();if(this.options.no_ready_check){this.on_ready()}else{this.ready_check()}};RedisClient.prototype.on_ready=function(){var self=this;debug("on_ready called "+this.address+" id "+this.connection_id);this.ready=true;this.cork=function(){self.pipeline=true;if(self.stream.cork){self.stream.cork()}};this.uncork=function(){if(self.fire_strings){self.write_strings()}else{self.write_buffers()}self.pipeline=false;self.fire_strings=true;if(self.stream.uncork){self.stream.uncork()}};if(this.selected_db!==undefined){this.internal_send_command(new Command("select",[this.selected_db]))}if(this.monitoring){this.internal_send_command(new Command("monitor",[]))}var callback_count=Object.keys(this.subscription_set).length;if(!this.options.disable_resubscribing&&callback_count){var callback=function(){callback_count--;if(callback_count===0){self.emit("ready")}};debug("Sending pub/sub on_ready commands");for(var key in this.subscription_set){var command=key.slice(0,key.indexOf("_"));var args=this.subscription_set[key];this[command]([args],callback)}this.send_offline_queue();return}this.send_offline_queue();this.emit("ready")};RedisClient.prototype.on_info_cmd=function(err,res){if(err){if(err.message==="ERR unknown command 'info'"){this.on_ready();return}err.message="Ready check failed: "+err.message;this.emit("error",err);return}if(!res){debug("The info command returned without any data.");this.on_ready();return}if(!this.server_info.loading||this.server_info.loading==="0"){if(this.server_info.master_link_status&&this.server_info.master_link_status!=="up"){this.server_info.loading_eta_seconds=.05}else{debug("Redis server ready.");this.on_ready();return}}var retry_time=+this.server_info.loading_eta_seconds*1e3;if(retry_time>1e3){retry_time=1e3}debug("Redis server still loading, trying again in "+retry_time);setTimeout(function(self){self.ready_check()},retry_time,this)};RedisClient.prototype.ready_check=function(){var self=this;debug("Checking server ready state...");this.ready=true;this.info(function(err,res){self.on_info_cmd(err,res)});this.ready=false};RedisClient.prototype.send_offline_queue=function(){for(var command_obj=this.offline_queue.shift();command_obj;command_obj=this.offline_queue.shift()){debug("Sending offline command: "+command_obj.command);this.internal_send_command(command_obj)}this.drain()};var retry_connection=function(self,error){debug("Retrying connection...");var reconnect_params={delay:self.retry_delay,attempt:self.attempts,error:error};if(self.options.camel_case){reconnect_params.totalRetryTime=self.retry_totaltime;reconnect_params.timesConnected=self.times_connected}else{reconnect_params.total_retry_time=self.retry_totaltime;reconnect_params.times_connected=self.times_connected}self.emit("reconnecting",reconnect_params);self.retry_totaltime+=self.retry_delay;self.attempts+=1;self.retry_delay=Math.round(self.retry_delay*self.retry_backoff);self.create_stream();self.retry_timer=null};RedisClient.prototype.connection_gone=function(why,error){if(this.retry_timer){return}error=error||null;debug("Redis connection is gone from "+why+" event.");this.connected=false;this.ready=false;this.cork=noop;this.uncork=noop;this.pipeline=false;this.pub_sub_mode=0;if(!this.emitted_end){this.emit("end");this.emitted_end=true}if(this.closing){debug("Connection ended by quit / end command, not retrying.");this.flush_and_error({message:"Stream connection ended and command aborted.",code:"NR_CLOSED"},{error:error});return}if(typeof this.options.retry_strategy==="function"){var retry_params={attempt:this.attempts,error:error};if(this.options.camel_case){retry_params.totalRetryTime=this.retry_totaltime;retry_params.timesConnected=this.times_connected}else{retry_params.total_retry_time=this.retry_totaltime;retry_params.times_connected=this.times_connected}this.retry_delay=this.options.retry_strategy(retry_params);if(typeof this.retry_delay!=="number"){if(this.retry_delay instanceof Error){error=this.retry_delay}var errorMessage="Redis connection in broken state: retry aborted.";this.flush_and_error({message:errorMessage,code:"CONNECTION_BROKEN"},{error:error});var retryError=new Error(errorMessage);retryError.code="CONNECTION_BROKEN";if(error){retryError.origin=error}this.end(false);this.emit("error",retryError);return}}if(this.retry_totaltime>=this.connect_timeout){var message="Redis connection in broken state: connection timeout exceeded.";this.flush_and_error({message:message,code:"CONNECTION_BROKEN"},{error:error});var err=new Error(message);err.code="CONNECTION_BROKEN";if(error){err.origin=error}this.end(false);this.emit("error",err);return}if(this.options.retry_unfulfilled_commands){this.offline_queue.unshift.apply(this.offline_queue,this.command_queue.toArray());this.command_queue.clear()}else if(this.command_queue.length!==0){this.flush_and_error({message:"Redis connection lost and command aborted.",code:"UNCERTAIN_STATE"},{error:error,queues:["command_queue"]})}if(this.retry_totaltime+this.retry_delay>this.connect_timeout){this.retry_delay=this.connect_timeout-this.retry_totaltime}debug("Retry connection in "+this.retry_delay+" ms");this.retry_timer=setTimeout(retry_connection,this.retry_delay,this,error)};RedisClient.prototype.return_error=function(err){var command_obj=this.command_queue.shift();if(command_obj.error){err.stack=command_obj.error.stack.replace(/^Error.*?\n/,"ReplyError: "+err.message+"\n")}err.command=command_obj.command.toUpperCase();if(command_obj.args&&command_obj.args.length){err.args=command_obj.args}if(this.pub_sub_mode>1){this.pub_sub_mode--}var match=err.message.match(utils.err_code);if(match){err.code=match[1]}utils.callback_or_emit(this,command_obj.callback,err)};RedisClient.prototype.drain=function(){this.should_buffer=false};function normal_reply(self,reply){var command_obj=self.command_queue.shift();if(typeof command_obj.callback==="function"){if(command_obj.command!=="exec"){reply=self.handle_reply(reply,command_obj.command,command_obj.buffer_args)}command_obj.callback(null,reply)}else{debug("No callback for reply")}}function subscribe_unsubscribe(self,reply,type){var command_obj=self.command_queue.get(0);var buffer=self.options.return_buffers||self.options.detect_buffers&&command_obj.buffer_args;var channel=buffer||reply[1]===null?reply[1]:reply[1].toString();var count=+reply[2];debug(type,channel);if(channel!==null){self.emit(type,channel,count);if(type==="subscribe"||type==="psubscribe"){self.subscription_set[type+"_"+channel]=channel}else{type=type==="unsubscribe"?"subscribe":"psubscribe";delete self.subscription_set[type+"_"+channel]}}if(command_obj.args.length===1||self.sub_commands_left===1||command_obj.args.length===0&&(count===0||channel===null)){if(count===0){var running_command;var i=1;self.pub_sub_mode=0;while(running_command=self.command_queue.get(i)){if(SUBSCRIBE_COMMANDS[running_command.command]){self.pub_sub_mode=i;break}i++}}self.command_queue.shift();if(typeof command_obj.callback==="function"){command_obj.callback(null,channel)}self.sub_commands_left=0}else{if(self.sub_commands_left!==0){self.sub_commands_left--}else{self.sub_commands_left=command_obj.args.length?command_obj.args.length-1:count}}}function return_pub_sub(self,reply){var type=reply[0].toString();if(type==="message"){if(!self.options.return_buffers||self.message_buffers){self.emit("message",reply[1].toString(),reply[2].toString());self.emit("message_buffer",reply[1],reply[2]);self.emit("messageBuffer",reply[1],reply[2])}else{self.emit("message",reply[1],reply[2])}}else if(type==="pmessage"){if(!self.options.return_buffers||self.message_buffers){self.emit("pmessage",reply[1].toString(),reply[2].toString(),reply[3].toString());self.emit("pmessage_buffer",reply[1],reply[2],reply[3]);self.emit("pmessageBuffer",reply[1],reply[2],reply[3])}else{self.emit("pmessage",reply[1],reply[2],reply[3])}}else{subscribe_unsubscribe(self,reply,type)}}RedisClient.prototype.return_reply=function(reply){if(this.monitoring){var replyStr;if(this.buffers&&Buffer.isBuffer(reply)){replyStr=reply.toString()}else{replyStr=reply}if(typeof replyStr==="string"&&utils.monitor_regex.test(replyStr)){var timestamp=replyStr.slice(0,replyStr.indexOf(" "));var args=replyStr.slice(replyStr.indexOf('"')+1,-1).split('" "').map(function(elem){return elem.replace(/\\"/g,'"')});this.emit("monitor",timestamp,args,replyStr);return}}if(this.pub_sub_mode===0){normal_reply(this,reply)}else if(this.pub_sub_mode!==1){this.pub_sub_mode--;normal_reply(this,reply)}else if(!(reply instanceof Array)||reply.length<=2){normal_reply(this,reply)}else{return_pub_sub(this,reply)}};function handle_offline_command(self,command_obj){var command=command_obj.command;var err,msg;if(self.closing||!self.enable_offline_queue){command=command.toUpperCase();if(!self.closing){if(self.stream.writable){msg="The connection is not yet established and the offline queue is deactivated."}else{msg="Stream not writeable."}}else{msg="The connection is already closed."}err=new errorClasses.AbortError({message:command+" can't be processed. "+msg,code:"NR_CLOSED",command:command});if(command_obj.args.length){err.args=command_obj.args}utils.reply_in_order(self,command_obj.callback,err)}else{debug("Queueing "+command+" for next server connection.");self.offline_queue.push(command_obj)}self.should_buffer=true}RedisClient.prototype.internal_send_command=function(command_obj){var arg,prefix_keys;var i=0;var command_str="";var args=command_obj.args;var command=command_obj.command;var len=args.length;var big_data=false;var args_copy=new Array(len);if(process.domain&&command_obj.callback){command_obj.callback=process.domain.bind(command_obj.callback)}if(this.ready===false||this.stream.writable===false){handle_offline_command(this,command_obj);return false}for(i=0;i<len;i+=1){if(typeof args[i]==="string"){if(args[i].length>3e4){big_data=true;args_copy[i]=Buffer.from(args[i],"utf8")}else{args_copy[i]=args[i]}}else if(typeof args[i]==="object"){if(args[i]instanceof Date){args_copy[i]=args[i].toString()}else if(Buffer.isBuffer(args[i])){args_copy[i]=args[i];command_obj.buffer_args=true;big_data=true}else{var invalidArgError=new Error("node_redis: The "+command.toUpperCase()+" command contains a invalid argument type.\n"+"Only strings, dates and buffers are accepted. Please update your code to use valid argument types.");invalidArgError.command=command_obj.command.toUpperCase();if(command_obj.args&&command_obj.args.length){invalidArgError.args=command_obj.args}if(command_obj.callback){command_obj.callback(invalidArgError);return false}throw invalidArgError}}else if(typeof args[i]==="undefined"){var undefinedArgError=new Error("node_redis: The "+command.toUpperCase()+' command contains a invalid argument type of "undefined".\n'+"Only strings, dates and buffers are accepted. Please update your code to use valid argument types.");undefinedArgError.command=command_obj.command.toUpperCase();if(command_obj.args&&command_obj.args.length){undefinedArgError.args=command_obj.args}command_obj.callback(undefinedArgError);return false}else{args_copy[i]=""+args[i]}}if(this.options.prefix){prefix_keys=commands.getKeyIndexes(command,args_copy);for(i=prefix_keys.pop();i!==undefined;i=prefix_keys.pop()){args_copy[i]=this.options.prefix+args_copy[i]}}if(this.options.rename_commands&&this.options.rename_commands[command]){command=this.options.rename_commands[command]}command_str="*"+(len+1)+"\r\n$"+command.length+"\r\n"+command+"\r\n";if(big_data===false){for(i=0;i<len;i+=1){arg=args_copy[i];command_str+="$"+Buffer.byteLength(arg)+"\r\n"+arg+"\r\n"}debug("Send "+this.address+" id "+this.connection_id+": "+command_str);this.write(command_str)}else{debug("Send command ("+command_str+") has Buffer arguments");this.fire_strings=false;this.write(command_str);for(i=0;i<len;i+=1){arg=args_copy[i];if(typeof arg==="string"){this.write("$"+Buffer.byteLength(arg)+"\r\n"+arg+"\r\n")}else{this.write("$"+arg.length+"\r\n");this.write(arg);this.write("\r\n")}debug("send_command: buffer send "+arg.length+" bytes")}}if(command_obj.call_on_write){command_obj.call_on_write()}if(this.reply==="ON"){this.command_queue.push(command_obj)}else{if(command_obj.callback){utils.reply_in_order(this,command_obj.callback,null,undefined,this.command_queue)}if(this.reply==="SKIP"){this.reply="SKIP_ONE_MORE"}else if(this.reply==="SKIP_ONE_MORE"){this.reply="ON"}}return!this.should_buffer};RedisClient.prototype.write_strings=function(){var str="";for(var command=this.pipeline_queue.shift();command;command=this.pipeline_queue.shift()){if(str.length+command.length>4*1024*1024){this.should_buffer=!this.stream.write(str);str=""}str+=command}if(str!==""){this.should_buffer=!this.stream.write(str)}};RedisClient.prototype.write_buffers=function(){for(var command=this.pipeline_queue.shift();command;command=this.pipeline_queue.shift()){this.should_buffer=!this.stream.write(command)}};RedisClient.prototype.write=function(data){if(this.pipeline===false){this.should_buffer=!this.stream.write(data);return}this.pipeline_queue.push(data)};Object.defineProperty(exports,"debugMode",{get:function(){return this.debug_mode},set:function(val){this.debug_mode=val}});Object.defineProperty(RedisClient.prototype,"command_queue_length",{get:function(){return this.command_queue.length}});Object.defineProperty(RedisClient.prototype,"offline_queue_length",{get:function(){return this.offline_queue.length}});Object.defineProperty(RedisClient.prototype,"retryDelay",{get:function(){return this.retry_delay}});Object.defineProperty(RedisClient.prototype,"retryBackoff",{get:function(){return this.retry_backoff}});Object.defineProperty(RedisClient.prototype,"commandQueueLength",{get:function(){return this.command_queue.length}});Object.defineProperty(RedisClient.prototype,"offlineQueueLength",{get:function(){return this.offline_queue.length}});Object.defineProperty(RedisClient.prototype,"shouldBuffer",{get:function(){return this.should_buffer}});Object.defineProperty(RedisClient.prototype,"connectionId",{get:function(){return this.connection_id}});Object.defineProperty(RedisClient.prototype,"serverInfo",{get:function(){return this.server_info}});exports.createClient=function(){return new RedisClient(unifyOptions.apply(null,arguments))};exports.RedisClient=RedisClient;exports.print=utils.print;exports.Multi=require("./lib/multi");exports.AbortError=errorClasses.AbortError;exports.RedisError=RedisErrors.RedisError;exports.ParserError=RedisErrors.ParserError;exports.ReplyError=RedisErrors.ReplyError;exports.AggregateError=errorClasses.AggregateError;require("./lib/individualCommands");require("./lib/extendedApi");exports.addCommand=exports.add_command=require("./lib/commands")},{"./lib/command":247,"./lib/commands":248,"./lib/createClient":249,"./lib/customErrors":250,"./lib/debug":251,"./lib/extendedApi":252,"./lib/individualCommands":253,"./lib/multi":254,"./lib/utils":255,denque:87,events:undefined,net:undefined,"redis-commands":240,"redis-errors":241,"redis-parser":244,tls:undefined,util:undefined}],247:[function(require,module,exports){"use strict";var betterStackTraces=/development/i.test(process.env.NODE_ENV)||/\bredis\b/i.test(process.env.NODE_DEBUG);function Command(command,args,callback,call_on_write){this.command=command;this.args=args;this.buffer_args=false;this.callback=callback;this.call_on_write=call_on_write;if(betterStackTraces){this.error=new Error}}module.exports=Command},{}],248:[function(require,module,exports){"use strict";var commands=require("redis-commands");var Multi=require("./multi");var RedisClient=require("../").RedisClient;var Command=require("./command");var addCommand=function(command){var commandName=command.replace(/(?:^([0-9])|[^a-zA-Z0-9_$])/g,"_$1");if(!RedisClient.prototype[command]){RedisClient.prototype[command.toUpperCase()]=RedisClient.prototype[command]=function(){var arr;var len=arguments.length;var callback;var i=0;if(Array.isArray(arguments[0])){arr=arguments[0];if(len===2){callback=arguments[1]}}else if(len>1&&Array.isArray(arguments[1])){if(len===3){callback=arguments[2]}len=arguments[1].length;arr=new Array(len+1);arr[0]=arguments[0];for(;i<len;i+=1){arr[i+1]=arguments[1][i]}}else{if(len!==0&&(typeof arguments[len-1]==="function"||typeof arguments[len-1]==="undefined")){len--;callback=arguments[len]}arr=new Array(len);for(;i<len;i+=1){arr[i]=arguments[i]}}return this.internal_send_command(new Command(command,arr,callback))};if(commandName!==command){RedisClient.prototype[commandName.toUpperCase()]=RedisClient.prototype[commandName]=RedisClient.prototype[command]}Object.defineProperty(RedisClient.prototype[command],"name",{value:commandName})}if(!Multi.prototype[command]){Multi.prototype[command.toUpperCase()]=Multi.prototype[command]=function(){var arr;var len=arguments.length;var callback;var i=0;if(Array.isArray(arguments[0])){arr=arguments[0];if(len===2){callback=arguments[1]}}else if(len>1&&Array.isArray(arguments[1])){if(len===3){callback=arguments[2]}len=arguments[1].length;arr=new Array(len+1);arr[0]=arguments[0];for(;i<len;i+=1){arr[i+1]=arguments[1][i]}}else{if(len!==0&&(typeof arguments[len-1]==="function"||typeof arguments[len-1]==="undefined")){len--;callback=arguments[len]}arr=new Array(len);for(;i<len;i+=1){arr[i]=arguments[i]}}this.queue.push(new Command(command,arr,callback));return this};if(commandName!==command){Multi.prototype[commandName.toUpperCase()]=Multi.prototype[commandName]=Multi.prototype[command]}Object.defineProperty(Multi.prototype[command],"name",{value:commandName})}};commands.list.forEach(addCommand);module.exports=addCommand},{"../":246,"./command":247,"./multi":254,"redis-commands":240}],249:[function(require,module,exports){"use strict";var utils=require("./utils");var URL=require("url");module.exports=function createClient(port_arg,host_arg,options){if(typeof port_arg==="number"||typeof port_arg==="string"&&/^\d+$/.test(port_arg)){var host;if(typeof host_arg==="string"){host=host_arg}else{if(options&&host_arg){throw new TypeError("Unknown type of connection in createClient()")}options=options||host_arg}options=utils.clone(options);options.host=host||options.host;options.port=port_arg}else if(typeof port_arg==="string"||port_arg&&port_arg.url){options=utils.clone(port_arg.url?port_arg:host_arg||options);var url=port_arg.url||port_arg;var parsed=URL.parse(url,true,true);if(parsed.slashes){if(parsed.auth){var columnIndex=parsed.auth.indexOf(":");options.password=parsed.auth.slice(columnIndex+1);if(columnIndex>0){options.user=parsed.auth.slice(0,columnIndex)}}if(parsed.protocol){if(parsed.protocol==="rediss:"){options.tls=options.tls||{}}else if(parsed.protocol!=="redis:"){console.warn('node_redis: WARNING: You passed "'+parsed.protocol.substring(0,parsed.protocol.length-1)+'" as protocol instead of the "redis" protocol!')}}if(parsed.pathname&&parsed.pathname!=="/"){options.db=parsed.pathname.substr(1)}if(parsed.hostname){options.host=parsed.hostname}if(parsed.port){options.port=parsed.port}if(parsed.search!==""){var elem;for(elem in parsed.query){if(elem in options){if(options[elem]===parsed.query[elem]){console.warn("node_redis: WARNING: You passed the "+elem+" option twice!")}else{throw new RangeError("The "+elem+" option is added twice and does not match")}}options[elem]=parsed.query[elem]}}}else if(parsed.hostname){throw new RangeError('The redis url must begin with slashes "//" or contain slashes after the redis protocol')}else{options.path=url}}else if(typeof port_arg==="object"||port_arg===undefined){options=utils.clone(port_arg||options);options.host=options.host||host_arg;if(port_arg&&arguments.length!==1){throw new TypeError("Too many arguments passed to createClient. Please only pass the options object")}}if(!options){throw new TypeError("Unknown type of connection in createClient()")}return options}},{"./utils":255,url:undefined}],250:[function(require,module,exports){"use strict";var util=require("util");var assert=require("assert");var RedisError=require("redis-errors").RedisError;var ADD_STACKTRACE=false;function AbortError(obj,stack){assert(obj,"The options argument is required");assert.strictEqual(typeof obj,"object","The options argument has to be of type object");Object.defineProperty(this,"message",{value:obj.message||"",configurable:true,writable:true});if(stack||stack===undefined){Error.captureStackTrace(this,AbortError)}for(var keys=Object.keys(obj),key=keys.pop();key;key=keys.pop()){this[key]=obj[key]}}function AggregateError(obj){assert(obj,"The options argument is required");assert.strictEqual(typeof obj,"object","The options argument has to be of type object");AbortError.call(this,obj,ADD_STACKTRACE);Object.defineProperty(this,"message",{value:obj.message||"",configurable:true,writable:true});Error.captureStackTrace(this,AggregateError);for(var keys=Object.keys(obj),key=keys.pop();key;key=keys.pop()){this[key]=obj[key]}}util.inherits(AbortError,RedisError);util.inherits(AggregateError,AbortError);Object.defineProperty(AbortError.prototype,"name",{value:"AbortError",configurable:true,writable:true});Object.defineProperty(AggregateError.prototype,"name",{value:"AggregateError",configurable:true,writable:true});module.exports={AbortError:AbortError,AggregateError:AggregateError}},{assert:undefined,"redis-errors":241,util:undefined}],251:[function(require,module,exports){"use strict";var index=require("../");function debug(){if(index.debug_mode){var data=Array.prototype.slice.call(arguments);data.unshift((new Date).toISOString());console.error.apply(null,data)}}module.exports=debug},{"../":246}],252:[function(require,module,exports){"use strict";var utils=require("./utils");var debug=require("./debug");var RedisClient=require("../").RedisClient;var Command=require("./command");var noop=function(){};RedisClient.prototype.send_command=RedisClient.prototype.sendCommand=function(command,args,callback){if(typeof command!=="string"){throw new TypeError('Wrong input type "'+(command!==null&&command!==undefined?command.constructor.name:command)+'" for command name')}command=command.toLowerCase();if(!Array.isArray(args)){if(args===undefined||args===null){args=[]}else if(typeof args==="function"&&callback===undefined){callback=args;args=[]}else{throw new TypeError('Wrong input type "'+args.constructor.name+'" for args')}}if(typeof callback!=="function"&&callback!==undefined){throw new TypeError('Wrong input type "'+(callback!==null?callback.constructor.name:"null")+'" for callback function')}if(command==="multi"||typeof this[command]!=="function"){return this.internal_send_command(new Command(command,args,callback))}if(typeof callback==="function"){args=args.concat([callback])}return this[command].apply(this,args)};RedisClient.prototype.end=function(flush){if(flush){this.flush_and_error({message:"Connection forcefully ended and command aborted.",code:"NR_CLOSED"})}else if(arguments.length===0){this.warn("Using .end() without the flush parameter is deprecated and throws from v.3.0.0 on.\n"+"Please check the doku (https://github.com/NodeRedis/node_redis) and explictly use flush.")}if(this.retry_timer){clearTimeout(this.retry_timer);this.retry_timer=null}this.stream.removeAllListeners();this.stream.on("error",noop);this.connected=false;this.ready=false;this.closing=true;return this.stream.destroySoon()};RedisClient.prototype.unref=function(){if(this.connected){debug("Unref'ing the socket connection");this.stream.unref()}else{debug("Not connected yet, will unref later");this.once("connect",function(){this.unref()})}};RedisClient.prototype.duplicate=function(options,callback){if(typeof options==="function"){callback=options;options=null}var existing_options=utils.clone(this.options);options=utils.clone(options);for(var elem in options){existing_options[elem]=options[elem]}var client=new RedisClient(existing_options);client.selected_db=options.db||this.selected_db;if(typeof callback==="function"){var ready_listener=function(){callback(null,client);client.removeAllListeners(error_listener)};var error_listener=function(err){callback(err);client.end(true)};client.once("ready",ready_listener);client.once("error",error_listener);return}return client}},{"../":246,"./command":247,"./debug":251,"./utils":255}],253:[function(require,module,exports){"use strict";var utils=require("./utils");var debug=require("./debug");var Multi=require("./multi");var Command=require("./command");var no_password_is_set=/no password is set|called without any password configured/;var loading=/LOADING/;var RedisClient=require("../").RedisClient;RedisClient.prototype.multi=RedisClient.prototype.MULTI=function multi(args){var multi=new Multi(this,args);multi.exec=multi.EXEC=multi.exec_transaction;return multi};RedisClient.prototype.batch=RedisClient.prototype.BATCH=function batch(args){return new Multi(this,args)};function select_callback(self,db,callback){return function(err,res){if(err===null){self.selected_db=db}utils.callback_or_emit(self,callback,err,res)}}RedisClient.prototype.select=RedisClient.prototype.SELECT=function select(db,callback){return this.internal_send_command(new Command("select",[db],select_callback(this,db,callback)))};Multi.prototype.select=Multi.prototype.SELECT=function select(db,callback){this.queue.push(new Command("select",[db],select_callback(this._client,db,callback)));return this};RedisClient.prototype.monitor=RedisClient.prototype.MONITOR=function monitor(callback){var self=this;var call_on_write=function(){self.monitoring=true};return this.internal_send_command(new Command("monitor",[],callback,call_on_write))};Multi.prototype.monitor=Multi.prototype.MONITOR=function monitor(callback){if(this.exec!==this.exec_transaction){var self=this;var call_on_write=function(){self._client.monitoring=true};this.queue.push(new Command("monitor",[],callback,call_on_write));return this}this.monitoring=true;return this};function quit_callback(self,callback){return function(err,res){if(err&&err.code==="NR_CLOSED"){err=null;res="OK"}utils.callback_or_emit(self,callback,err,res);if(self.stream.writable){self.stream.destroy()}}}RedisClient.prototype.QUIT=RedisClient.prototype.quit=function quit(callback){var backpressure_indicator=this.internal_send_command(new Command("quit",[],quit_callback(this,callback)));this.closing=true;this.ready=false;return backpressure_indicator};Multi.prototype.QUIT=Multi.prototype.quit=function quit(callback){var self=this._client;var call_on_write=function(){self.closing=true;self.ready=false};this.queue.push(new Command("quit",[],quit_callback(self,callback),call_on_write));return this};function info_callback(self,callback){return function(err,res){if(res){var obj={};var lines=res.toString().split("\r\n");var line,parts,sub_parts;for(var i=0;i<lines.length;i++){parts=lines[i].split(":");if(parts[1]){if(parts[0].indexOf("db")===0){sub_parts=parts[1].split(",");obj[parts[0]]={};while(line=sub_parts.pop()){line=line.split("=");obj[parts[0]][line[0]]=+line[1]}}else{obj[parts[0]]=parts[1]}}}obj.versions=[];if(obj.redis_version){obj.redis_version.split(".").forEach(function(num){obj.versions.push(+num)})}self.server_info=obj}else{self.server_info={}}utils.callback_or_emit(self,callback,err,res)}}RedisClient.prototype.info=RedisClient.prototype.INFO=function info(section,callback){var args=[];if(typeof section==="function"){callback=section}else if(section!==undefined){args=Array.isArray(section)?section:[section]}return this.internal_send_command(new Command("info",args,info_callback(this,callback)))};Multi.prototype.info=Multi.prototype.INFO=function info(section,callback){var args=[];if(typeof section==="function"){callback=section}else if(section!==undefined){args=Array.isArray(section)?section:[section]}this.queue.push(new Command("info",args,info_callback(this._client,callback)));return this};function auth_callback(self,pass,user,callback){return function(err,res){if(err){if(no_password_is_set.test(err.message)){self.warn("Warning: Redis server does not require a password, but a password was supplied.");err=null;res="OK"}else if(loading.test(err.message)){debug("Redis still loading, trying to authenticate later");setTimeout(function(){self.auth(pass,user,callback)},100);return}}utils.callback_or_emit(self,callback,err,res)}}RedisClient.prototype.auth=RedisClient.prototype.AUTH=function auth(pass,user,callback){debug("Sending auth to "+this.address+" id "+this.connection_id);if(user instanceof Function){callback=user;user=null}this.auth_pass=pass;this.auth_user=user;var ready=this.ready;this.ready=ready||this.offline_queue.length===0;var tmp=this.internal_send_command(new Command("auth",user?[user,pass]:[pass],auth_callback(this,pass,user,callback)));this.ready=ready;return tmp};Multi.prototype.auth=Multi.prototype.AUTH=function auth(pass,user,callback){debug("Sending auth to "+this.address+" id "+this.connection_id);if(user instanceof Function){callback=user;user=null}this.auth_pass=pass;this.auth_user=user;this.queue.push(new Command("auth",user?[user,pass]:[pass],auth_callback(this._client,pass,user,callback)));return this};RedisClient.prototype.client=RedisClient.prototype.CLIENT=function client(){var arr,len=arguments.length,callback,i=0;if(Array.isArray(arguments[0])){arr=arguments[0];callback=arguments[1]}else if(Array.isArray(arguments[1])){if(len===3){callback=arguments[2]}len=arguments[1].length;arr=new Array(len+1);arr[0]=arguments[0];for(;i<len;i+=1){arr[i+1]=arguments[1][i]}}else{len=arguments.length;if(len!==0&&(typeof arguments[len-1]==="function"||typeof arguments[len-1]==="undefined")){len--;callback=arguments[len]}arr=new Array(len);for(;i<len;i+=1){arr[i]=arguments[i]}}var self=this;var call_on_write=undefined;if(arr.length===2&&arr[0].toString().toUpperCase()==="REPLY"){var reply_on_off=arr[1].toString().toUpperCase();if(reply_on_off==="ON"||reply_on_off==="OFF"||reply_on_off==="SKIP"){call_on_write=function(){self.reply=reply_on_off}}}return this.internal_send_command(new Command("client",arr,callback,call_on_write))};Multi.prototype.client=Multi.prototype.CLIENT=function client(){var arr,len=arguments.length,callback,i=0;if(Array.isArray(arguments[0])){arr=arguments[0];callback=arguments[1]}else if(Array.isArray(arguments[1])){if(len===3){callback=arguments[2]}len=arguments[1].length;arr=new Array(len+1);arr[0]=arguments[0];for(;i<len;i+=1){arr[i+1]=arguments[1][i]}}else{len=arguments.length;if(len!==0&&(typeof arguments[len-1]==="function"||typeof arguments[len-1]==="undefined")){len--;callback=arguments[len]}arr=new Array(len);for(;i<len;i+=1){arr[i]=arguments[i]}}var self=this._client;var call_on_write=undefined;if(arr.length===2&&arr[0].toString().toUpperCase()==="REPLY"){var reply_on_off=arr[1].toString().toUpperCase();if(reply_on_off==="ON"||reply_on_off==="OFF"||reply_on_off==="SKIP"){call_on_write=function(){self.reply=reply_on_off}}}this.queue.push(new Command("client",arr,callback,call_on_write));return this};RedisClient.prototype.hmset=RedisClient.prototype.HMSET=function hmset(){var arr,len=arguments.length,callback,i=0;if(Array.isArray(arguments[0])){arr=arguments[0];callback=arguments[1]}else if(Array.isArray(arguments[1])){if(len===3){callback=arguments[2]}len=arguments[1].length;arr=new Array(len+1);arr[0]=arguments[0];for(;i<len;i+=1){arr[i+1]=arguments[1][i]}}else if(typeof arguments[1]==="object"&&(arguments.length===2||arguments.length===3&&(typeof arguments[2]==="function"||typeof arguments[2]==="undefined"))){arr=[arguments[0]];for(var field in arguments[1]){arr.push(field,arguments[1][field])}callback=arguments[2]}else{len=arguments.length;if(len!==0&&(typeof arguments[len-1]==="function"||typeof arguments[len-1]==="undefined")){len--;callback=arguments[len]}arr=new Array(len);for(;i<len;i+=1){arr[i]=arguments[i]}}return this.internal_send_command(new Command("hmset",arr,callback))};Multi.prototype.hmset=Multi.prototype.HMSET=function hmset(){var arr,len=arguments.length,callback,i=0;if(Array.isArray(arguments[0])){arr=arguments[0];callback=arguments[1]}else if(Array.isArray(arguments[1])){if(len===3){callback=arguments[2]}len=arguments[1].length;arr=new Array(len+1);arr[0]=arguments[0];for(;i<len;i+=1){arr[i+1]=arguments[1][i]}}else if(typeof arguments[1]==="object"&&(arguments.length===2||arguments.length===3&&(typeof arguments[2]==="function"||typeof arguments[2]==="undefined"))){arr=[arguments[0]];for(var field in arguments[1]){arr.push(field,arguments[1][field])}callback=arguments[2]}else{len=arguments.length;if(len!==0&&(typeof arguments[len-1]==="function"||typeof arguments[len-1]==="undefined")){len--;callback=arguments[len]}arr=new Array(len);for(;i<len;i+=1){arr[i]=arguments[i]}}this.queue.push(new Command("hmset",arr,callback));return this};RedisClient.prototype.subscribe=RedisClient.prototype.SUBSCRIBE=function subscribe(){var arr,len=arguments.length,callback,i=0;if(Array.isArray(arguments[0])){arr=arguments[0].slice(0);callback=arguments[1]}else{len=arguments.length;if(len!==0&&(typeof arguments[len-1]==="function"||typeof arguments[len-1]==="undefined")){len--;callback=arguments[len]}arr=new Array(len);for(;i<len;i+=1){arr[i]=arguments[i]}}var self=this;var call_on_write=function(){self.pub_sub_mode=self.pub_sub_mode||self.command_queue.length+1};return this.internal_send_command(new Command("subscribe",arr,callback,call_on_write))};Multi.prototype.subscribe=Multi.prototype.SUBSCRIBE=function subscribe(){var arr,len=arguments.length,callback,i=0;if(Array.isArray(arguments[0])){arr=arguments[0].slice(0);callback=arguments[1]}else{len=arguments.length;if(len!==0&&(typeof arguments[len-1]==="function"||typeof arguments[len-1]==="undefined")){len--;callback=arguments[len]}arr=new Array(len);for(;i<len;i+=1){arr[i]=arguments[i]}}var self=this._client;var call_on_write=function(){self.pub_sub_mode=self.pub_sub_mode||self.command_queue.length+1};this.queue.push(new Command("subscribe",arr,callback,call_on_write));return this};RedisClient.prototype.unsubscribe=RedisClient.prototype.UNSUBSCRIBE=function unsubscribe(){var arr,len=arguments.length,callback,i=0;if(Array.isArray(arguments[0])){arr=arguments[0].slice(0);callback=arguments[1]}else{len=arguments.length;if(len!==0&&(typeof arguments[len-1]==="function"||typeof arguments[len-1]==="undefined")){len--;callback=arguments[len]}arr=new Array(len);for(;i<len;i+=1){arr[i]=arguments[i]}}var self=this;var call_on_write=function(){self.pub_sub_mode=self.pub_sub_mode||self.command_queue.length+1};return this.internal_send_command(new Command("unsubscribe",arr,callback,call_on_write))};Multi.prototype.unsubscribe=Multi.prototype.UNSUBSCRIBE=function unsubscribe(){var arr,len=arguments.length,callback,i=0;if(Array.isArray(arguments[0])){arr=arguments[0].slice(0);callback=arguments[1]}else{len=arguments.length;if(len!==0&&(typeof arguments[len-1]==="function"||typeof arguments[len-1]==="undefined")){len--;callback=arguments[len]}arr=new Array(len);for(;i<len;i+=1){arr[i]=arguments[i]}}var self=this._client;var call_on_write=function(){self.pub_sub_mode=self.pub_sub_mode||self.command_queue.length+1};this.queue.push(new Command("unsubscribe",arr,callback,call_on_write));return this};RedisClient.prototype.psubscribe=RedisClient.prototype.PSUBSCRIBE=function psubscribe(){var arr,len=arguments.length,callback,i=0;if(Array.isArray(arguments[0])){arr=arguments[0].slice(0);callback=arguments[1]}else{len=arguments.length;if(len!==0&&(typeof arguments[len-1]==="function"||typeof arguments[len-1]==="undefined")){len--;callback=arguments[len]}arr=new Array(len);for(;i<len;i+=1){arr[i]=arguments[i]}}var self=this;var call_on_write=function(){self.pub_sub_mode=self.pub_sub_mode||self.command_queue.length+1};return this.internal_send_command(new Command("psubscribe",arr,callback,call_on_write))};Multi.prototype.psubscribe=Multi.prototype.PSUBSCRIBE=function psubscribe(){var arr,len=arguments.length,callback,i=0;if(Array.isArray(arguments[0])){arr=arguments[0].slice(0);callback=arguments[1]}else{len=arguments.length;if(len!==0&&(typeof arguments[len-1]==="function"||typeof arguments[len-1]==="undefined")){len--;callback=arguments[len]}arr=new Array(len);for(;i<len;i+=1){arr[i]=arguments[i]}}var self=this._client;var call_on_write=function(){self.pub_sub_mode=self.pub_sub_mode||self.command_queue.length+1};this.queue.push(new Command("psubscribe",arr,callback,call_on_write));return this};RedisClient.prototype.punsubscribe=RedisClient.prototype.PUNSUBSCRIBE=function punsubscribe(){var arr,len=arguments.length,callback,i=0;if(Array.isArray(arguments[0])){arr=arguments[0].slice(0);callback=arguments[1]}else{len=arguments.length;if(len!==0&&(typeof arguments[len-1]==="function"||typeof arguments[len-1]==="undefined")){len--;callback=arguments[len]}arr=new Array(len);for(;i<len;i+=1){arr[i]=arguments[i]}}var self=this;var call_on_write=function(){self.pub_sub_mode=self.pub_sub_mode||self.command_queue.length+1};return this.internal_send_command(new Command("punsubscribe",arr,callback,call_on_write))};Multi.prototype.punsubscribe=Multi.prototype.PUNSUBSCRIBE=function punsubscribe(){var arr,len=arguments.length,callback,i=0;if(Array.isArray(arguments[0])){arr=arguments[0].slice(0);callback=arguments[1]}else{len=arguments.length;if(len!==0&&(typeof arguments[len-1]==="function"||typeof arguments[len-1]==="undefined")){len--;callback=arguments[len]}arr=new Array(len);for(;i<len;i+=1){arr[i]=arguments[i]}}var self=this._client;var call_on_write=function(){self.pub_sub_mode=self.pub_sub_mode||self.command_queue.length+1};this.queue.push(new Command("punsubscribe",arr,callback,call_on_write));return this}},{"../":246,"./command":247,"./debug":251,"./multi":254,"./utils":255}],254:[function(require,module,exports){"use strict";var Queue=require("denque");var utils=require("./utils");var Command=require("./command");function Multi(client,args){this._client=client;this.queue=new Queue;var command,tmp_args;if(args){for(var i=0;i<args.length;i++){command=args[i][0];tmp_args=args[i].slice(1);if(Array.isArray(command)){this[command[0]].apply(this,command.slice(1).concat(tmp_args))}else{this[command].apply(this,tmp_args)}}}}function pipeline_transaction_command(self,command_obj,index){var tmp=command_obj.callback;command_obj.callback=function(err,reply){if(err&&index!==-1){if(tmp){tmp(err)}err.position=index;self.errors.push(err)}self.wants_buffers[index]=command_obj.buffer_args;command_obj.callback=tmp};self._client.internal_send_command(command_obj)}Multi.prototype.exec_atomic=Multi.prototype.EXEC_ATOMIC=Multi.prototype.execAtomic=function exec_atomic(callback){if(this.queue.length<2){return this.exec_batch(callback)}return this.exec(callback)};function multi_callback(self,err,replies){var i=0,command_obj;if(err){err.errors=self.errors;if(self.callback){self.callback(err)}else if(err.code!=="CONNECTION_BROKEN"){self._client.emit("error",err)}return}if(replies){while(command_obj=self.queue.shift()){if(replies[i]instanceof Error){var match=replies[i].message.match(utils.err_code);if(match){replies[i].code=match[1]}replies[i].command=command_obj.command.toUpperCase();if(typeof command_obj.callback==="function"){command_obj.callback(replies[i])}}else{replies[i]=self._client.handle_reply(replies[i],command_obj.command,self.wants_buffers[i]);if(typeof command_obj.callback==="function"){command_obj.callback(null,replies[i])}}i++}}if(self.callback){self.callback(null,replies)}}Multi.prototype.exec_transaction=function exec_transaction(callback){if(this.monitoring||this._client.monitoring){var err=new RangeError("Using transaction with a client that is in monitor mode does not work due to faulty return values of Redis.");err.command="EXEC";err.code="EXECABORT";return utils.reply_in_order(this._client,callback,err)}var self=this;var len=self.queue.length;self.errors=[];self.callback=callback;self._client.cork();self.wants_buffers=new Array(len);pipeline_transaction_command(self,new Command("multi",[]),-1);for(var index=0;index<len;index++){pipeline_transaction_command(self,self.queue.get(index),index)}self._client.internal_send_command(new Command("exec",[],function(err,replies){multi_callback(self,err,replies)}));self._client.uncork();return!self._client.should_buffer};function batch_callback(self,cb,i){return function batch_callback(err,res){if(err){self.results[i]=err;self.results[i].position=i}else{self.results[i]=res}cb(err,res)}}Multi.prototype.exec=Multi.prototype.EXEC=Multi.prototype.exec_batch=function exec_batch(callback){var self=this;var len=self.queue.length;var index=0;var command_obj;if(len===0){utils.reply_in_order(self._client,callback,null,[]);return!self._client.should_buffer}self._client.cork();if(!callback){while(command_obj=self.queue.shift()){self._client.internal_send_command(command_obj)}self._client.uncork();return!self._client.should_buffer}var callback_without_own_cb=function(err,res){if(err){self.results.push(err);var i=self.results.length-1;self.results[i].position=i}else{self.results.push(res)}};var last_callback=function(cb){return function(err,res){cb(err,res);callback(null,self.results)}};self.results=[];while(command_obj=self.queue.shift()){if(typeof command_obj.callback==="function"){command_obj.callback=batch_callback(self,command_obj.callback,index)}else{command_obj.callback=callback_without_own_cb}if(typeof callback==="function"&&index===len-1){command_obj.callback=last_callback(command_obj.callback)}this._client.internal_send_command(command_obj);index++}self._client.uncork();return!self._client.should_buffer};module.exports=Multi},{"./command":247,"./utils":255,denque:87}],255:[function(require,module,exports){"use strict";function replyToObject(reply){if(reply.length===0||!(reply instanceof Array)){return null}var obj={};for(var i=0;i<reply.length;i+=2){obj[reply[i].toString("binary")]=reply[i+1]}return obj}function replyToStrings(reply){if(reply instanceof Buffer){return reply.toString()}if(reply instanceof Array){var res=new Array(reply.length);for(var i=0;i<reply.length;i++){res[i]=replyToStrings(reply[i])}return res}return reply}function print(err,reply){if(err){console.log(err.toString())}else{console.log("Reply: "+reply)}}var camelCase;function clone(obj){var copy;if(Array.isArray(obj)){copy=new Array(obj.length);for(var i=0;i<obj.length;i++){copy[i]=clone(obj[i])}return copy}if(Object.prototype.toString.call(obj)==="[object Object]"){copy={};var elems=Object.keys(obj);var elem;while(elem=elems.pop()){if(elem==="tls"){copy[elem]=obj[elem];continue}var snake_case=elem.replace(/[A-Z][^A-Z]/g,"_$&").toLowerCase();if(snake_case!==elem.toLowerCase()){camelCase=true}copy[snake_case]=clone(obj[elem])}return copy}return obj}function convenienceClone(obj){camelCase=false;obj=clone(obj)||{};if(camelCase){obj.camel_case=true}return obj}function callbackOrEmit(self,callback,err,res){if(callback){callback(err,res)}else if(err){self.emit("error",err)}}function replyInOrder(self,callback,err,res,queue){var command_obj;if(queue){command_obj=queue.peekBack()}else{command_obj=self.offline_queue.peekBack()||self.command_queue.peekBack()}if(!command_obj){process.nextTick(function(){callbackOrEmit(self,callback,err,res)})}else{var tmp=command_obj.callback;command_obj.callback=tmp?function(e,r){tmp(e,r);callbackOrEmit(self,callback,err,res)}:function(e,r){if(e){self.emit("error",e)}callbackOrEmit(self,callback,err,res)}}}module.exports={reply_to_strings:replyToStrings,reply_to_object:replyToObject,print:print,err_code:/^([A-Z]+)\s+(.+)$/,monitor_regex:/^[0-9]{10,11}\.[0-9]+ \[[0-9]+ .+\].*"$/,clone:convenienceClone,callback_or_emit:callbackOrEmit,reply_in_order:replyInOrder}},{}],256:[function(require,module,exports){const assert=require("assert");const path=require("path");const fs=require("fs");let glob=undefined;try{glob=require("glob")}catch(_err){}const defaultGlobOpts={nosort:true,silent:true};let timeout=0;const isWindows=process.platform==="win32";const defaults=options=>{const methods=["unlink","chmod","stat","lstat","rmdir","readdir"];methods.forEach(m=>{options[m]=options[m]||fs[m];m=m+"Sync";options[m]=options[m]||fs[m]});options.maxBusyTries=options.maxBusyTries||3;options.emfileWait=options.emfileWait||1e3;if(options.glob===false){options.disableGlob=true}if(options.disableGlob!==true&&glob===undefined){throw Error("glob dependency not found, set `options.disableGlob = true` if intentional")}options.disableGlob=options.disableGlob||false;options.glob=options.glob||defaultGlobOpts};const rimraf=(p,options,cb)=>{if(typeof options==="function"){cb=options;options={}}assert(p,"rimraf: missing path");assert.equal(typeof p,"string","rimraf: path should be a string");assert.equal(typeof cb,"function","rimraf: callback function required");assert(options,"rimraf: invalid options argument provided");assert.equal(typeof options,"object","rimraf: options should be object");defaults(options);let busyTries=0;let errState=null;let n=0;const next=er=>{errState=errState||er;if(--n===0)cb(errState)};const afterGlob=(er,results)=>{if(er)return cb(er);n=results.length;if(n===0)return cb();results.forEach(p=>{const CB=er=>{if(er){if((er.code==="EBUSY"||er.code==="ENOTEMPTY"||er.code==="EPERM")&&busyTries<options.maxBusyTries){busyTries++;return setTimeout(()=>rimraf_(p,options,CB),busyTries*100)}if(er.code==="EMFILE"&&timeout<options.emfileWait){return setTimeout(()=>rimraf_(p,options,CB),timeout++)}if(er.code==="ENOENT")er=null}timeout=0;next(er)};rimraf_(p,options,CB)})};if(options.disableGlob||!glob.hasMagic(p))return afterGlob(null,[p]);options.lstat(p,(er,stat)=>{if(!er)return afterGlob(null,[p]);glob(p,options.glob,afterGlob)})};const rimraf_=(p,options,cb)=>{assert(p);assert(options);assert(typeof cb==="function");options.lstat(p,(er,st)=>{if(er&&er.code==="ENOENT")return cb(null);if(er&&er.code==="EPERM"&&isWindows)fixWinEPERM(p,options,er,cb);if(st&&st.isDirectory())return rmdir(p,options,er,cb);options.unlink(p,er=>{if(er){if(er.code==="ENOENT")return cb(null);if(er.code==="EPERM")return isWindows?fixWinEPERM(p,options,er,cb):rmdir(p,options,er,cb);if(er.code==="EISDIR")return rmdir(p,options,er,cb)}return cb(er)})})};const fixWinEPERM=(p,options,er,cb)=>{assert(p);assert(options);assert(typeof cb==="function");options.chmod(p,438,er2=>{if(er2)cb(er2.code==="ENOENT"?null:er);else options.stat(p,(er3,stats)=>{if(er3)cb(er3.code==="ENOENT"?null:er);else if(stats.isDirectory())rmdir(p,options,er,cb);else options.unlink(p,cb)})})};const fixWinEPERMSync=(p,options,er)=>{assert(p);assert(options);try{options.chmodSync(p,438)}catch(er2){if(er2.code==="ENOENT")return;else throw er}let stats;try{stats=options.statSync(p)}catch(er3){if(er3.code==="ENOENT")return;else throw er}if(stats.isDirectory())rmdirSync(p,options,er);else options.unlinkSync(p)};const rmdir=(p,options,originalEr,cb)=>{assert(p);assert(options);assert(typeof cb==="function");options.rmdir(p,er=>{if(er&&(er.code==="ENOTEMPTY"||er.code==="EEXIST"||er.code==="EPERM"))rmkids(p,options,cb);else if(er&&er.code==="ENOTDIR")cb(originalEr);else cb(er)})};const rmkids=(p,options,cb)=>{assert(p);assert(options);assert(typeof cb==="function");options.readdir(p,(er,files)=>{if(er)return cb(er);let n=files.length;if(n===0)return options.rmdir(p,cb);let errState;files.forEach(f=>{rimraf(path.join(p,f),options,er=>{if(errState)return;if(er)return cb(errState=er);if(--n===0)options.rmdir(p,cb)})})})};const rimrafSync=(p,options)=>{options=options||{};defaults(options);assert(p,"rimraf: missing path");assert.equal(typeof p,"string","rimraf: path should be a string");assert(options,"rimraf: missing options");assert.equal(typeof options,"object","rimraf: options should be object");let results;if(options.disableGlob||!glob.hasMagic(p)){results=[p]}else{try{options.lstatSync(p);results=[p]}catch(er){results=glob.sync(p,options.glob)}}if(!results.length)return;for(let i=0;i<results.length;i++){const p=results[i];let st;try{st=options.lstatSync(p)}catch(er){if(er.code==="ENOENT")return;if(er.code==="EPERM"&&isWindows)fixWinEPERMSync(p,options,er)}try{if(st&&st.isDirectory())rmdirSync(p,options,null);else options.unlinkSync(p)}catch(er){if(er.code==="ENOENT")return;if(er.code==="EPERM")return isWindows?fixWinEPERMSync(p,options,er):rmdirSync(p,options,er);if(er.code!=="EISDIR")throw er;rmdirSync(p,options,er)}}};const rmdirSync=(p,options,originalEr)=>{assert(p);assert(options);try{options.rmdirSync(p)}catch(er){if(er.code==="ENOENT")return;if(er.code==="ENOTDIR")throw originalEr;if(er.code==="ENOTEMPTY"||er.code==="EEXIST"||er.code==="EPERM")rmkidsSync(p,options)}};const rmkidsSync=(p,options)=>{assert(p);assert(options);options.readdirSync(p).forEach(f=>rimrafSync(path.join(p,f),options));const retries=isWindows?100:1;let i=0;do{let threw=true;try{const ret=options.rmdirSync(p,options);threw=false;return ret}finally{if(++i<retries&&threw)continue}}while(true)};module.exports=rimraf;rimraf.sync=rimrafSync},{assert:undefined,fs:undefined,glob:193,path:undefined}],257:[function(require,module,exports){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var buffer=require("buffer");var Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src){dst[key]=src[key]}}if(Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow){module.exports=buffer}else{copyProps(buffer,exports);exports.Buffer=SafeBuffer}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}SafeBuffer.prototype=Object.create(Buffer.prototype);copyProps(Buffer,SafeBuffer);SafeBuffer.from=function(arg,encodingOrOffset,length){if(typeof arg==="number"){throw new TypeError("Argument must not be a number")}return Buffer(arg,encodingOrOffset,length)};SafeBuffer.alloc=function(size,fill,encoding){if(typeof size!=="number"){throw new TypeError("Argument must be a number")}var buf=Buffer(size);if(fill!==undefined){if(typeof encoding==="string"){buf.fill(fill,encoding)}else{buf.fill(fill)}}else{buf.fill(0)}return buf};SafeBuffer.allocUnsafe=function(size){if(typeof size!=="number"){throw new TypeError("Argument must be a number")}return Buffer(size)};SafeBuffer.allocUnsafeSlow=function(size){if(typeof size!=="number"){throw new TypeError("Argument must be a number")}return buffer.SlowBuffer(size)}},{buffer:undefined}],258:[function(require,module,exports){var html4={};html4.atype={NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10};html4.ATTRIBS={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::tabindex":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0};html4.eflags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128};html4.ELEMENTS={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:4,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,noframes:20,noscript:20,object:16,ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:84,select:0,small:0,span:0,strike:0,strong:0,style:148,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,var:0};html4.URIEFFECTS={};html4.LOADERTYPES={};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=html4}exports.URI=html4}else{if(typeof window!=="undefined"){window["html4"]=html4}}},{}],259:[function(require,module,exports){var URI=function(){function parse(uriStr){var m=(""+uriStr).match(URI_RE_);if(!m){return null}return new URI(nullIfAbsent(m[1]),nullIfAbsent(m[2]),nullIfAbsent(m[3]),nullIfAbsent(m[4]),nullIfAbsent(m[5]),nullIfAbsent(m[6]),nullIfAbsent(m[7]))}function create(scheme,credentials,domain,port,path,query,fragment){var uri=new URI(encodeIfExists2(scheme,URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_),encodeIfExists2(credentials,URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_),encodeIfExists(domain),port>0?port.toString():null,encodeIfExists2(path,URI_DISALLOWED_IN_PATH_),null,encodeIfExists(fragment));if(query){if("string"===typeof query){uri.setRawQuery(query.replace(/[^?&=0-9A-Za-z_\-~.%]/g,encodeOne))}else{uri.setAllParameters(query)}}return uri}function encodeIfExists(unescapedPart){if("string"==typeof unescapedPart){return encodeURIComponent(unescapedPart)}return null}function encodeIfExists2(unescapedPart,extra){if("string"==typeof unescapedPart){return encodeURI(unescapedPart).replace(extra,encodeOne)}return null}function encodeOne(ch){var n=ch.charCodeAt(0);return"%"+"0123456789ABCDEF".charAt(n>>4&15)+"0123456789ABCDEF".charAt(n&15)}function normPath(path){return path.replace(/(^|\/)\.(?:\/|$)/g,"$1").replace(/\/{2,}/g,"/")}var PARENT_DIRECTORY_HANDLER=new RegExp(""+"(/|^)"+"(?:[^./][^/]*|\\.{2,}(?:[^./][^/]*)|\\.{3,}[^/]*)"+"/\\.\\.(?:/|$)");var PARENT_DIRECTORY_HANDLER_RE=new RegExp(PARENT_DIRECTORY_HANDLER);var EXTRA_PARENT_PATHS_RE=/^(?:\.\.\/)*(?:\.\.$)?/;function collapse_dots(path){if(path===null){return null}var p=normPath(path);var r=PARENT_DIRECTORY_HANDLER_RE;for(var q;(q=p.replace(r,"$1"))!=p;p=q){}return p}function resolve(baseUri,relativeUri){var absoluteUri=baseUri.clone();var overridden=relativeUri.hasScheme();if(overridden){absoluteUri.setRawScheme(relativeUri.getRawScheme())}else{overridden=relativeUri.hasCredentials()}if(overridden){absoluteUri.setRawCredentials(relativeUri.getRawCredentials())}else{overridden=relativeUri.hasDomain()}if(overridden){absoluteUri.setRawDomain(relativeUri.getRawDomain())}else{overridden=relativeUri.hasPort()}var rawPath=relativeUri.getRawPath();var simplifiedPath=collapse_dots(rawPath);if(overridden){absoluteUri.setPort(relativeUri.getPort());simplifiedPath=simplifiedPath&&simplifiedPath.replace(EXTRA_PARENT_PATHS_RE,"")}else{overridden=!!rawPath;if(overridden){if(simplifiedPath.charCodeAt(0)!==47){var absRawPath=collapse_dots(absoluteUri.getRawPath()||"").replace(EXTRA_PARENT_PATHS_RE,"");var slash=absRawPath.lastIndexOf("/")+1;simplifiedPath=collapse_dots((slash?absRawPath.substring(0,slash):"")+collapse_dots(rawPath)).replace(EXTRA_PARENT_PATHS_RE,"")}}else{simplifiedPath=simplifiedPath&&simplifiedPath.replace(EXTRA_PARENT_PATHS_RE,"");if(simplifiedPath!==rawPath){absoluteUri.setRawPath(simplifiedPath)}}}if(overridden){absoluteUri.setRawPath(simplifiedPath)}else{overridden=relativeUri.hasQuery()}if(overridden){absoluteUri.setRawQuery(relativeUri.getRawQuery())}else{overridden=relativeUri.hasFragment()}if(overridden){absoluteUri.setRawFragment(relativeUri.getRawFragment())}return absoluteUri}function URI(rawScheme,rawCredentials,rawDomain,port,rawPath,rawQuery,rawFragment){this.scheme_=rawScheme;this.credentials_=rawCredentials;this.domain_=rawDomain;this.port_=port;this.path_=rawPath;this.query_=rawQuery;this.fragment_=rawFragment;this.paramCache_=null}URI.prototype.toString=function(){var out=[];if(null!==this.scheme_){out.push(this.scheme_,":")}if(null!==this.domain_){out.push("//");if(null!==this.credentials_){out.push(this.credentials_,"@")}out.push(this.domain_);if(null!==this.port_){out.push(":",this.port_.toString())}}if(null!==this.path_){out.push(this.path_)}if(null!==this.query_){out.push("?",this.query_)}if(null!==this.fragment_){out.push("#",this.fragment_)}return out.join("")};URI.prototype.clone=function(){return new URI(this.scheme_,this.credentials_,this.domain_,this.port_,this.path_,this.query_,this.fragment_)};URI.prototype.getScheme=function(){return this.scheme_&&decodeURIComponent(this.scheme_).toLowerCase()};URI.prototype.getRawScheme=function(){return this.scheme_};URI.prototype.setScheme=function(newScheme){this.scheme_=encodeIfExists2(newScheme,URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_);return this};URI.prototype.setRawScheme=function(newScheme){this.scheme_=newScheme?newScheme:null;return this};URI.prototype.hasScheme=function(){return null!==this.scheme_};URI.prototype.getCredentials=function(){return this.credentials_&&decodeURIComponent(this.credentials_)};URI.prototype.getRawCredentials=function(){return this.credentials_};URI.prototype.setCredentials=function(newCredentials){this.credentials_=encodeIfExists2(newCredentials,URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_);return this};URI.prototype.setRawCredentials=function(newCredentials){this.credentials_=newCredentials?newCredentials:null;return this};URI.prototype.hasCredentials=function(){return null!==this.credentials_};URI.prototype.getDomain=function(){return this.domain_&&decodeURIComponent(this.domain_)};URI.prototype.getRawDomain=function(){return this.domain_};URI.prototype.setDomain=function(newDomain){return this.setRawDomain(newDomain&&encodeURIComponent(newDomain))};URI.prototype.setRawDomain=function(newDomain){this.domain_=newDomain?newDomain:null;return this.setRawPath(this.path_)};URI.prototype.hasDomain=function(){return null!==this.domain_};URI.prototype.getPort=function(){return this.port_&&decodeURIComponent(this.port_)};URI.prototype.setPort=function(newPort){if(newPort){newPort=Number(newPort);if(newPort!==(newPort&65535)){throw new Error("Bad port number "+newPort)}this.port_=""+newPort}else{this.port_=null}return this};URI.prototype.hasPort=function(){return null!==this.port_};URI.prototype.getPath=function(){return this.path_&&decodeURIComponent(this.path_)};URI.prototype.getRawPath=function(){return this.path_};URI.prototype.setPath=function(newPath){return this.setRawPath(encodeIfExists2(newPath,URI_DISALLOWED_IN_PATH_))};URI.prototype.setRawPath=function(newPath){if(newPath){newPath=String(newPath);this.path_=!this.domain_||/^\//.test(newPath)?newPath:"/"+newPath}else{this.path_=null}return this};URI.prototype.hasPath=function(){return null!==this.path_};URI.prototype.getQuery=function(){return this.query_&&decodeURIComponent(this.query_).replace(/\+/g," ")};URI.prototype.getRawQuery=function(){return this.query_};URI.prototype.setQuery=function(newQuery){this.paramCache_=null;this.query_=encodeIfExists(newQuery);return this};URI.prototype.setRawQuery=function(newQuery){this.paramCache_=null;this.query_=newQuery?newQuery:null;return this};URI.prototype.hasQuery=function(){return null!==this.query_};URI.prototype.setAllParameters=function(params){if(typeof params==="object"){if(!(params instanceof Array)&&(params instanceof Object||Object.prototype.toString.call(params)!=="[object Array]")){var newParams=[];var i=-1;for(var k in params){var v=params[k];if("string"===typeof v){newParams[++i]=k;newParams[++i]=v}}params=newParams}}this.paramCache_=null;var queryBuf=[];var separator="";for(var j=0;j<params.length;){var k=params[j++];var v=params[j++];queryBuf.push(separator,encodeURIComponent(k.toString()));separator="&";if(v){queryBuf.push("=",encodeURIComponent(v.toString()))}}this.query_=queryBuf.join("");return this};URI.prototype.checkParameterCache_=function(){if(!this.paramCache_){var q=this.query_;if(!q){this.paramCache_=[]}else{var cgiParams=q.split(/[&\?]/);var out=[];var k=-1;for(var i=0;i<cgiParams.length;++i){var m=cgiParams[i].match(/^([^=]*)(?:=(.*))?$/);out[++k]=decodeURIComponent(m[1]).replace(/\+/g," ");out[++k]=decodeURIComponent(m[2]||"").replace(/\+/g," ")}this.paramCache_=out}}};URI.prototype.setParameterValues=function(key,values){if(typeof values==="string"){values=[values]}this.checkParameterCache_();var newValueIndex=0;var pc=this.paramCache_;var params=[];for(var i=0,k=0;i<pc.length;i+=2){if(key===pc[i]){if(newValueIndex<values.length){params.push(key,values[newValueIndex++])}}else{params.push(pc[i],pc[i+1])}}while(newValueIndex<values.length){params.push(key,values[newValueIndex++])}this.setAllParameters(params);return this};URI.prototype.removeParameter=function(key){return this.setParameterValues(key,[])};URI.prototype.getAllParameters=function(){this.checkParameterCache_();return this.paramCache_.slice(0,this.paramCache_.length)};URI.prototype.getParameterValues=function(paramNameUnescaped){this.checkParameterCache_();var values=[];for(var i=0;i<this.paramCache_.length;i+=2){if(paramNameUnescaped===this.paramCache_[i]){values.push(this.paramCache_[i+1])}}return values};URI.prototype.getParameterMap=function(paramNameUnescaped){this.checkParameterCache_();var paramMap={};for(var i=0;i<this.paramCache_.length;i+=2){var key=this.paramCache_[i++],value=this.paramCache_[i++];if(!(key in paramMap)){paramMap[key]=[value]}else{paramMap[key].push(value)}}return paramMap};URI.prototype.getParameterValue=function(paramNameUnescaped){this.checkParameterCache_();for(var i=0;i<this.paramCache_.length;i+=2){if(paramNameUnescaped===this.paramCache_[i]){return this.paramCache_[i+1]}}return null};URI.prototype.getFragment=function(){return this.fragment_&&decodeURIComponent(this.fragment_)};URI.prototype.getRawFragment=function(){return this.fragment_};URI.prototype.setFragment=function(newFragment){this.fragment_=newFragment?encodeURIComponent(newFragment):null;return this};URI.prototype.setRawFragment=function(newFragment){this.fragment_=newFragment?newFragment:null;return this};URI.prototype.hasFragment=function(){return null!==this.fragment_};function nullIfAbsent(matchPart){return"string"==typeof matchPart&&matchPart.length>0?matchPart:null}var URI_RE_=new RegExp("^"+"(?:"+"([^:/?#]+)"+":)?"+"(?://"+"(?:([^/?#]*)@)?"+"([^/?#:@]*)"+"(?::([0-9]+))?"+")?"+"([^?#]+)?"+"(?:\\?([^#]*))?"+"(?:#(.*))?"+"$");var URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_=/[#\/\?@]/g;var URI_DISALLOWED_IN_PATH_=/[\#\?]/g;URI.parse=parse;URI.create=create;URI.resolve=resolve;URI.collapse_dots=collapse_dots;URI.utils={mimeTypeOf:function(uri){var uriObj=parse(uri);if(/\.html$/.test(uriObj.getPath())){return"text/html"}else{return"application/javascript"}},resolve:function(base,uri){if(base){return resolve(parse(base),parse(uri)).toString()}else{return""+uri}}};return URI}();if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=URI}exports.URI=URI}else{if(typeof window!=="undefined"){window["URI"]=URI}}},{}],260:[function(require,module,exports){var html4=require("./lib/html4.js");var URI=require("./lib/uri.js");if("I".toLowerCase()!=="i"){throw"I/i problem"}var html=function(html4){var parseCssDeclarations,sanitizeCssProperty,cssSchema;if("undefined"!==typeof window){parseCssDeclarations=window["parseCssDeclarations"];sanitizeCssProperty=window["sanitizeCssProperty"];cssSchema=window["cssSchema"]}var ENTITIES={lt:"<",LT:"<",gt:">",GT:">",amp:"&",AMP:"&",quot:'"',apos:"'",nbsp:""};var decimalEscapeRe=/^#(\d+)$/;var hexEscapeRe=/^#x([0-9A-Fa-f]+)$/;var safeEntityNameRe=/^[A-Za-z][A-za-z0-9]+$/;var entityLookupElement="undefined"!==typeof window&&window["document"]?window["document"].createElement("textarea"):null;function lookupEntity(name){if(ENTITIES.hasOwnProperty(name)){return ENTITIES[name]}var m=name.match(decimalEscapeRe);if(m){return String.fromCharCode(parseInt(m[1],10))}else if(!!(m=name.match(hexEscapeRe))){return String.fromCharCode(parseInt(m[1],16))}else if(entityLookupElement&&safeEntityNameRe.test(name)){entityLookupElement.innerHTML="&"+name+";";var text=entityLookupElement.textContent;ENTITIES[name]=text;return text}else{return"&"+name+";"}}function decodeOneEntity(_,name){return lookupEntity(name)}var nulRe=/\0/g;function stripNULs(s){return s.replace(nulRe,"")}var ENTITY_RE_1=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g;var ENTITY_RE_2=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/;function unescapeEntities(s){if(s){return s.replace(ENTITY_RE_1,decodeOneEntity)}else{return s}}var ampRe=/&/g;var looseAmpRe=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi;var ltRe=/[<]/g;var gtRe=/>/g;var quotRe=/\"/g;function escapeAttrib(s){if(s){return(""+s).replace(ampRe,"&amp;").replace(ltRe,"&lt;").replace(gtRe,"&gt;").replace(quotRe,"&#34;")}else{return s}}function normalizeRCData(rcdata){if(rcdata){return rcdata.replace(looseAmpRe,"&amp;$1").replace(ltRe,"&lt;").replace(gtRe,"&gt;")}else{return rcdata}}var ATTR_RE=new RegExp("^\\s*"+"([-.:\\w]+)"+"(?:"+("\\s*(=)\\s*"+"("+('(")[^"]*("|$)'+"|"+"(')[^']*('|$)"+"|"+"(?=[a-z][-\\w]*\\s*=)"+"|"+"[^\"'\\s]*")+")")+")?","i");var splitWillCapture="a,b".split(/(,)/).length===3;var EFLAGS_TEXT=html4.eflags["CDATA"]|html4.eflags["RCDATA"];function makeSaxParser(handler){var hcopy={cdata:handler.cdata||handler["cdata"],comment:handler.comment||handler["comment"],endDoc:handler.endDoc||handler["endDoc"],endTag:handler.endTag||handler["endTag"],pcdata:handler.pcdata||handler["pcdata"],rcdata:handler.rcdata||handler["rcdata"],startDoc:handler.startDoc||handler["startDoc"],startTag:handler.startTag||handler["startTag"]};return function(htmlText,param){return parse(htmlText,hcopy,param)}}var continuationMarker={};function parse(htmlText,handler,param){var m,p,tagName;var parts=htmlSplit(htmlText);var state={noMoreGT:false,noMoreEndComments:false};parseCPS(handler,parts,0,state,param)}function continuationMaker(h,parts,initial,state,param){return function(){parseCPS(h,parts,initial,state,param)}}function parseCPS(h,parts,initial,state,param){try{if(h.startDoc&&initial==0){h.startDoc(param)}var m,p,tagName;for(var pos=initial,end=parts.length;pos<end;){var current=parts[pos++];var next=parts[pos];switch(current){case"&":if(ENTITY_RE_2.test(next)){if(h.pcdata){h.pcdata("&"+next,param,continuationMarker,continuationMaker(h,parts,pos,state,param))}pos++}else{if(h.pcdata){h.pcdata("&amp;",param,continuationMarker,continuationMaker(h,parts,pos,state,param))}}break;case"</":if(m=/^([-\w:]+)[^\'\"]*/.exec(next)){if(m[0].length===next.length&&parts[pos+1]===">"){pos+=2;tagName=m[1].toLowerCase();if(h.endTag){h.endTag(tagName,param,continuationMarker,continuationMaker(h,parts,pos,state,param))}}else{pos=parseEndTag(parts,pos,h,param,continuationMarker,state)}}else{if(h.pcdata){h.pcdata("&lt;/",param,continuationMarker,continuationMaker(h,parts,pos,state,param))}}break;case"<":if(m=/^([-\w:]+)\s*\/?/.exec(next)){if(m[0].length===next.length&&parts[pos+1]===">"){pos+=2;tagName=m[1].toLowerCase();if(h.startTag){h.startTag(tagName,[],param,continuationMarker,continuationMaker(h,parts,pos,state,param))}var eflags=html4.ELEMENTS[tagName];if(eflags&EFLAGS_TEXT){var tag={name:tagName,next:pos,eflags:eflags};pos=parseText(parts,tag,h,param,continuationMarker,state)}}else{pos=parseStartTag(parts,pos,h,param,continuationMarker,state)}}else{if(h.pcdata){h.pcdata("&lt;",param,continuationMarker,continuationMaker(h,parts,pos,state,param))}}break;case"\x3c!--":if(!state.noMoreEndComments){for(p=pos+1;p<end;p++){if(parts[p]===">"&&/--$/.test(parts[p-1])){break}}if(p<end){if(h.comment){var comment=parts.slice(pos,p).join("");h.comment(comment.substr(0,comment.length-2),param,continuationMarker,continuationMaker(h,parts,p+1,state,param))}pos=p+1}else{state.noMoreEndComments=true}}if(state.noMoreEndComments){if(h.pcdata){h.pcdata("&lt;!--",param,continuationMarker,continuationMaker(h,parts,pos,state,param))}}break;case"<!":if(!/^\w/.test(next)){if(h.pcdata){h.pcdata("&lt;!",param,continuationMarker,continuationMaker(h,parts,pos,state,param))}}else{if(!state.noMoreGT){for(p=pos+1;p<end;p++){if(parts[p]===">"){break}}if(p<end){pos=p+1}else{state.noMoreGT=true}}if(state.noMoreGT){if(h.pcdata){h.pcdata("&lt;!",param,continuationMarker,continuationMaker(h,parts,pos,state,param))}}}break;case"<?":if(!state.noMoreGT){for(p=pos+1;p<end;p++){if(parts[p]===">"){break}}if(p<end){pos=p+1}else{state.noMoreGT=true}}if(state.noMoreGT){if(h.pcdata){h.pcdata("&lt;?",param,continuationMarker,continuationMaker(h,parts,pos,state,param))}}break;case">":if(h.pcdata){h.pcdata("&gt;",param,continuationMarker,continuationMaker(h,parts,pos,state,param))}break;case"":break;default:if(h.pcdata){h.pcdata(current,param,continuationMarker,continuationMaker(h,parts,pos,state,param))}break}}if(h.endDoc){h.endDoc(param)}}catch(e){if(e!==continuationMarker){throw e}}}function htmlSplit(str){var re=/(<\/|<\!--|<[!?]|[&<>])/g;str+="";if(splitWillCapture){return str.split(re)}else{var parts=[];var lastPos=0;var m;while((m=re.exec(str))!==null){parts.push(str.substring(lastPos,m.index));parts.push(m[0]);lastPos=m.index+m[0].length}parts.push(str.substring(lastPos));return parts}}function parseEndTag(parts,pos,h,param,continuationMarker,state){var tag=parseTagAndAttrs(parts,pos);if(!tag){return parts.length}if(h.endTag){h.endTag(tag.name,param,continuationMarker,continuationMaker(h,parts,pos,state,param))}return tag.next}function parseStartTag(parts,pos,h,param,continuationMarker,state){var tag=parseTagAndAttrs(parts,pos);if(!tag){return parts.length}if(h.startTag){h.startTag(tag.name,tag.attrs,param,continuationMarker,continuationMaker(h,parts,tag.next,state,param))}if(tag.eflags&EFLAGS_TEXT){return parseText(parts,tag,h,param,continuationMarker,state)}else{return tag.next}}var endTagRe={};function parseText(parts,tag,h,param,continuationMarker,state){var end=parts.length;if(!endTagRe.hasOwnProperty(tag.name)){endTagRe[tag.name]=new RegExp("^"+tag.name+"(?:[\\s\\/]|$)","i")}var re=endTagRe[tag.name];var first=tag.next;var p=tag.next+1;for(;p<end;p++){if(parts[p-1]==="</"&&re.test(parts[p])){break}}if(p<end){p-=1}var buf=parts.slice(first,p).join("");if(tag.eflags&html4.eflags["CDATA"]){if(h.cdata){h.cdata(buf,param,continuationMarker,continuationMaker(h,parts,p,state,param))}}else if(tag.eflags&html4.eflags["RCDATA"]){if(h.rcdata){h.rcdata(normalizeRCData(buf),param,continuationMarker,continuationMaker(h,parts,p,state,param))}}else{throw new Error("bug")}return p}function parseTagAndAttrs(parts,pos){var m=/^([-\w:]+)/.exec(parts[pos]);var tag={};tag.name=m[1].toLowerCase();tag.eflags=html4.ELEMENTS[tag.name];var buf=parts[pos].substr(m[0].length);var p=pos+1;var end=parts.length;for(;p<end;p++){if(parts[p]===">"){break}buf+=parts[p]}if(end<=p){return void 0}var attrs=[];while(buf!==""){m=ATTR_RE.exec(buf);if(!m){buf=buf.replace(/^[\s\S][^a-z\s]*/,"")}else if(m[4]&&!m[5]||m[6]&&!m[7]){var quote=m[4]||m[6];var sawQuote=false;var abuf=[buf,parts[p++]];for(;p<end;p++){if(sawQuote){if(parts[p]===">"){break}}else if(0<=parts[p].indexOf(quote)){sawQuote=true}abuf.push(parts[p])}if(end<=p){break}buf=abuf.join("");continue}else{var aName=m[1].toLowerCase();var aValue=m[2]?decodeValue(m[3]):"";attrs.push(aName,aValue);buf=buf.substr(m[0].length)}}tag.attrs=attrs;tag.next=p+1;return tag}function decodeValue(v){var q=v.charCodeAt(0);if(q===34||q===39){v=v.substr(1,v.length-2)}return unescapeEntities(stripNULs(v))}function makeHtmlSanitizer(tagPolicy){var stack;var ignoring;var emit=function(text,out){if(!ignoring){out.push(text)}};return makeSaxParser({startDoc:function(_){stack=[];ignoring=false},startTag:function(tagNameOrig,attribs,out){if(ignoring){return}if(!html4.ELEMENTS.hasOwnProperty(tagNameOrig)){return}var eflagsOrig=html4.ELEMENTS[tagNameOrig];if(eflagsOrig&html4.eflags["FOLDABLE"]){return}var decision=tagPolicy(tagNameOrig,attribs);if(!decision){ignoring=!(eflagsOrig&html4.eflags["EMPTY"]);return}else if(typeof decision!=="object"){throw new Error("tagPolicy did not return object (old API?)")}if("attribs"in decision){attribs=decision["attribs"]}else{throw new Error("tagPolicy gave no attribs")}var eflagsRep;var tagNameRep;if("tagName"in decision){tagNameRep=decision["tagName"];eflagsRep=html4.ELEMENTS[tagNameRep]}else{tagNameRep=tagNameOrig;eflagsRep=eflagsOrig}if(eflagsOrig&html4.eflags["OPTIONAL_ENDTAG"]){var onStack=stack[stack.length-1];if(onStack&&onStack.orig===tagNameOrig&&(onStack.rep!==tagNameRep||tagNameOrig!==tagNameRep)){out.push("</",onStack.rep,">")}}if(!(eflagsOrig&html4.eflags["EMPTY"])){stack.push({orig:tagNameOrig,rep:tagNameRep})}out.push("<",tagNameRep);for(var i=0,n=attribs.length;i<n;i+=2){var attribName=attribs[i],value=attribs[i+1];if(value!==null&&value!==void 0){out.push(" ",attribName,'="',escapeAttrib(value),'"')}}out.push(">");if(eflagsOrig&html4.eflags["EMPTY"]&&!(eflagsRep&html4.eflags["EMPTY"])){out.push("</",tagNameRep,">")}},endTag:function(tagName,out){if(ignoring){ignoring=false;return}if(!html4.ELEMENTS.hasOwnProperty(tagName)){return}var eflags=html4.ELEMENTS[tagName];if(!(eflags&(html4.eflags["EMPTY"]|html4.eflags["FOLDABLE"]))){var index;if(eflags&html4.eflags["OPTIONAL_ENDTAG"]){for(index=stack.length;--index>=0;){var stackElOrigTag=stack[index].orig;if(stackElOrigTag===tagName){break}if(!(html4.ELEMENTS[stackElOrigTag]&html4.eflags["OPTIONAL_ENDTAG"])){return}}}else{for(index=stack.length;--index>=0;){if(stack[index].orig===tagName){break}}}if(index<0){return}for(var i=stack.length;--i>index;){var stackElRepTag=stack[i].rep;if(!(html4.ELEMENTS[stackElRepTag]&html4.eflags["OPTIONAL_ENDTAG"])){out.push("</",stackElRepTag,">")}}if(index<stack.length){tagName=stack[index].rep}stack.length=index;out.push("</",tagName,">")}},pcdata:emit,rcdata:emit,cdata:emit,endDoc:function(out){for(;stack.length;stack.length--){out.push("</",stack[stack.length-1].rep,">")}}})}var ALLOWED_URI_SCHEMES=/^(?:https?|mailto)$/i;function safeUri(uri,effect,ltype,hints,naiveUriRewriter){if(!naiveUriRewriter){return null}try{var parsed=URI.parse(""+uri);if(parsed){if(!parsed.hasScheme()||ALLOWED_URI_SCHEMES.test(parsed.getScheme())){var safe=naiveUriRewriter(parsed,effect,ltype,hints);return safe?safe.toString():null}}}catch(e){return null}return null}function log(logger,tagName,attribName,oldValue,newValue){if(!attribName){logger(tagName+" removed",{change:"removed",tagName:tagName})}if(oldValue!==newValue){var changed="changed";if(oldValue&&!newValue){changed="removed"}else if(!oldValue&&newValue){changed="added"}logger(tagName+"."+attribName+" "+changed,{change:changed,tagName:tagName,attribName:attribName,oldValue:oldValue,newValue:newValue})}}function lookupAttribute(map,tagName,attribName){var attribKey;attribKey=tagName+"::"+attribName;if(map.hasOwnProperty(attribKey)){return map[attribKey]}attribKey="*::"+attribName;if(map.hasOwnProperty(attribKey)){return map[attribKey]}return void 0}function getAttributeType(tagName,attribName){return lookupAttribute(html4.ATTRIBS,tagName,attribName)}function getLoaderType(tagName,attribName){return lookupAttribute(html4.LOADERTYPES,tagName,attribName)}function getUriEffect(tagName,attribName){return lookupAttribute(html4.URIEFFECTS,tagName,attribName)}function sanitizeAttribs(tagName,attribs,opt_naiveUriRewriter,opt_nmTokenPolicy,opt_logger){for(var i=0;i<attribs.length;i+=2){var attribName=attribs[i];var value=attribs[i+1];var oldValue=value;var atype=null,attribKey;if((attribKey=tagName+"::"+attribName,html4.ATTRIBS.hasOwnProperty(attribKey))||(attribKey="*::"+attribName,html4.ATTRIBS.hasOwnProperty(attribKey))){atype=html4.ATTRIBS[attribKey]}if(atype!==null){switch(atype){case html4.atype["NONE"]:break;case html4.atype["SCRIPT"]:value=null;if(opt_logger){log(opt_logger,tagName,attribName,oldValue,value)}break;case html4.atype["STYLE"]:if("undefined"===typeof parseCssDeclarations){value=null;if(opt_logger){log(opt_logger,tagName,attribName,oldValue,value)}break}var sanitizedDeclarations=[];parseCssDeclarations(value,{declaration:function(property,tokens){var normProp=property.toLowerCase();sanitizeCssProperty(normProp,tokens,opt_naiveUriRewriter?function(url){return safeUri(url,html4.ueffects.SAME_DOCUMENT,html4.ltypes.SANDBOXED,{TYPE:"CSS",CSS_PROP:normProp},opt_naiveUriRewriter)}:null);if(tokens.length){sanitizedDeclarations.push(normProp+": "+tokens.join(" "))}}});value=sanitizedDeclarations.length>0?sanitizedDeclarations.join(" ; "):null;if(opt_logger){log(opt_logger,tagName,attribName,oldValue,value)}break;case html4.atype["ID"]:case html4.atype["IDREF"]:case html4.atype["IDREFS"]:case html4.atype["GLOBAL_NAME"]:case html4.atype["LOCAL_NAME"]:case html4.atype["CLASSES"]:value=opt_nmTokenPolicy?opt_nmTokenPolicy(value):value;if(opt_logger){log(opt_logger,tagName,attribName,oldValue,value)}break;case html4.atype["URI"]:value=safeUri(value,getUriEffect(tagName,attribName),getLoaderType(tagName,attribName),{TYPE:"MARKUP",XML_ATTR:attribName,XML_TAG:tagName},opt_naiveUriRewriter);if(opt_logger){log(opt_logger,tagName,attribName,oldValue,value)}break;case html4.atype["URI_FRAGMENT"]:if(value&&"#"===value.charAt(0)){value=value.substring(1);value=opt_nmTokenPolicy?opt_nmTokenPolicy(value):value;if(value!==null&&value!==void 0){value="#"+value}}else{value=null}if(opt_logger){log(opt_logger,tagName,attribName,oldValue,value)}break;default:value=null;if(opt_logger){log(opt_logger,tagName,attribName,oldValue,value)}break}}else{value=null;if(opt_logger){log(opt_logger,tagName,attribName,oldValue,value)}}attribs[i+1]=value}return attribs}function makeTagPolicy(opt_naiveUriRewriter,opt_nmTokenPolicy,opt_logger){return function(tagName,attribs){if(!(html4.ELEMENTS[tagName]&html4.eflags["UNSAFE"])){return{attribs:sanitizeAttribs(tagName,attribs,opt_naiveUriRewriter,opt_nmTokenPolicy,opt_logger)}}else{if(opt_logger){log(opt_logger,tagName,undefined,undefined,undefined)}}}}function sanitizeWithPolicy(inputHtml,tagPolicy){var outputArray=[];makeHtmlSanitizer(tagPolicy)(inputHtml,outputArray);return outputArray.join("")}function sanitize(inputHtml,opt_naiveUriRewriter,opt_nmTokenPolicy,opt_logger){var tagPolicy=makeTagPolicy(opt_naiveUriRewriter,opt_nmTokenPolicy,opt_logger);return sanitizeWithPolicy(inputHtml,tagPolicy)}var html={};html.escapeAttrib=html["escapeAttrib"]=escapeAttrib;html.makeHtmlSanitizer=html["makeHtmlSanitizer"]=makeHtmlSanitizer;html.makeSaxParser=html["makeSaxParser"]=makeSaxParser;html.makeTagPolicy=html["makeTagPolicy"]=makeTagPolicy;html.normalizeRCData=html["normalizeRCData"]=normalizeRCData;html.sanitize=html["sanitize"]=sanitize;html.sanitizeAttribs=html["sanitizeAttribs"]=sanitizeAttribs;html.sanitizeWithPolicy=html["sanitizeWithPolicy"]=sanitizeWithPolicy;html.unescapeEntities=html["unescapeEntities"]=unescapeEntities;return html}(html4);var html_sanitize=html["sanitize"];if(typeof window!=="undefined"){window["html"]=html;window["html_sanitize"]=html_sanitize}var Sanitizer={};Sanitizer.escapeAttrib=html.escapeAttrib;Sanitizer.makeHtmlSanitizer=html.makeHtmlSanitizer;Sanitizer.makeSaxParser=html.makeSaxParser;Sanitizer.makeTagPolicy=html.makeTagPolicy;Sanitizer.normalizeRCData=html.normalizeRCData;Sanitizer.sanitizeAttribs=html.sanitizeAttribs;Sanitizer.sanitizeWithPolicy=html.sanitizeWithPolicy;Sanitizer.unescapeEntities=html.unescapeEntities;Sanitizer.escape=html.escapeAttrib;Sanitizer.sanitize=function(inputHtml,opt_naiveUriRewriter,opt_nmTokenPolicy,opt_logger){if(typeof inputHtml==="string"){inputHtml=inputHtml.replace(/<([a-zA-Z]+)([^>]*)\/>/g,"<$1$2></$1>")}if(inputHtml){return html.sanitize(inputHtml,opt_naiveUriRewriter,opt_nmTokenPolicy,opt_logger)}else{return inputHtml}};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=Sanitizer}exports.Sanitizer=Sanitizer}else{this.Sanitizer=Sanitizer}},{"./lib/html4.js":258,"./lib/uri.js":259}],261:[function(require,module,exports){"use strict";const ANY=Symbol("SemVer ANY");class Comparator{static get ANY(){return ANY}constructor(comp,options){options=parseOptions(options);if(comp instanceof Comparator){if(comp.loose===!!options.loose){return comp}else{comp=comp.value}}comp=comp.trim().split(/\s+/).join(" ");debug("comparator",comp,options);this.options=options;this.loose=!!options.loose;this.parse(comp);if(this.semver===ANY){this.value=""}else{this.value=this.operator+this.semver.version}debug("comp",this)}parse(comp){const r=this.options.loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR];const m=comp.match(r);if(!m){throw new TypeError(`Invalid comparator: ${comp}`)}this.operator=m[1]!==undefined?m[1]:"";if(this.operator==="="){this.operator=""}if(!m[2]){this.semver=ANY}else{this.semver=new SemVer(m[2],this.options.loose)}}toString(){return this.value}test(version){debug("Comparator.test",version,this.options.loose);if(this.semver===ANY||version===ANY){return true}if(typeof version==="string"){try{version=new SemVer(version,this.options)}catch(er){return false}}return cmp(version,this.operator,this.semver,this.options)}intersects(comp,options){if(!(comp instanceof Comparator)){throw new TypeError("a Comparator is required")}if(this.operator===""){if(this.value===""){return true}return new Range(comp.value,options).test(this.value)}else if(comp.operator===""){if(comp.value===""){return true}return new Range(this.value,options).test(comp.semver)}options=parseOptions(options);if(options.includePrerelease&&(this.value==="<0.0.0-0"||comp.value==="<0.0.0-0")){return false}if(!options.includePrerelease&&(this.value.startsWith("<0.0.0")||comp.value.startsWith("<0.0.0"))){return false}if(this.operator.startsWith(">")&&comp.operator.startsWith(">")){return true}if(this.operator.startsWith("<")&&comp.operator.startsWith("<")){return true}if(this.semver.version===comp.semver.version&&this.operator.includes("=")&&comp.operator.includes("=")){return true}if(cmp(this.semver,"<",comp.semver,options)&&this.operator.startsWith(">")&&comp.operator.startsWith("<")){return true}if(cmp(this.semver,">",comp.semver,options)&&this.operator.startsWith("<")&&comp.operator.startsWith(">")){return true}return false}}module.exports=Comparator;const parseOptions=require("../internal/parse-options");const{safeRe:re,t:t}=require("../internal/re");const cmp=require("../functions/cmp");const debug=require("../internal/debug");const SemVer=require("./semver");const Range=require("./range")},{"../functions/cmp":265,"../internal/debug":290,"../internal/parse-options":293,"../internal/re":294,"./range":262,"./semver":263}],262:[function(require,module,exports){"use strict";const SPACE_CHARACTERS=/\s+/g;class Range{constructor(range,options){options=parseOptions(options);if(range instanceof Range){if(range.loose===!!options.loose&&range.includePrerelease===!!options.includePrerelease){return range}else{return new Range(range.raw,options)}}if(range instanceof Comparator){this.raw=range.value;this.set=[[range]];this.formatted=undefined;return this}this.options=options;this.loose=!!options.loose;this.includePrerelease=!!options.includePrerelease;this.raw=range.trim().replace(SPACE_CHARACTERS," ");this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(c=>c.length);if(!this.set.length){throw new TypeError(`Invalid SemVer Range: ${this.raw}`)}if(this.set.length>1){const first=this.set[0];this.set=this.set.filter(c=>!isNullSet(c[0]));if(this.set.length===0){this.set=[first]}else if(this.set.length>1){for(const c of this.set){if(c.length===1&&isAny(c[0])){this.set=[c];break}}}}this.formatted=undefined}get range(){if(this.formatted===undefined){this.formatted="";for(let i=0;i<this.set.length;i++){if(i>0){this.formatted+="||"}const comps=this.set[i];for(let k=0;k<comps.length;k++){if(k>0){this.formatted+=" "}this.formatted+=comps[k].toString().trim()}}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(range){const memoOpts=(this.options.includePrerelease&&FLAG_INCLUDE_PRERELEASE)|(this.options.loose&&FLAG_LOOSE);const memoKey=memoOpts+":"+range;const cached=cache.get(memoKey);if(cached){return cached}const loose=this.options.loose;const hr=loose?re[t.HYPHENRANGELOOSE]:re[t.HYPHENRANGE];range=range.replace(hr,hyphenReplace(this.options.includePrerelease));debug("hyphen replace",range);range=range.replace(re[t.COMPARATORTRIM],comparatorTrimReplace);debug("comparator trim",range);range=range.replace(re[t.TILDETRIM],tildeTrimReplace);debug("tilde trim",range);range=range.replace(re[t.CARETTRIM],caretTrimReplace);debug("caret trim",range);let rangeList=range.split(" ").map(comp=>parseComparator(comp,this.options)).join(" ").split(/\s+/).map(comp=>replaceGTE0(comp,this.options));if(loose){rangeList=rangeList.filter(comp=>{debug("loose invalid filter",comp,this.options);return!!comp.match(re[t.COMPARATORLOOSE])})}debug("range list",rangeList);const rangeMap=new Map;const comparators=rangeList.map(comp=>new Comparator(comp,this.options));for(const comp of comparators){if(isNullSet(comp)){return[comp]}rangeMap.set(comp.value,comp)}if(rangeMap.size>1&&rangeMap.has("")){rangeMap.delete("")}const result=[...rangeMap.values()];cache.set(memoKey,result);return result}intersects(range,options){if(!(range instanceof Range)){throw new TypeError("a Range is required")}return this.set.some(thisComparators=>isSatisfiable(thisComparators,options)&&range.set.some(rangeComparators=>isSatisfiable(rangeComparators,options)&&thisComparators.every(thisComparator=>rangeComparators.every(rangeComparator=>thisComparator.intersects(rangeComparator,options)))))}test(version){if(!version){return false}if(typeof version==="string"){try{version=new SemVer(version,this.options)}catch(er){return false}}for(let i=0;i<this.set.length;i++){if(testSet(this.set[i],version,this.options)){return true}}return false}}module.exports=Range;const LRU=require("../internal/lrucache");const cache=new LRU;const parseOptions=require("../internal/parse-options");const Comparator=require("./comparator");const debug=require("../internal/debug");const SemVer=require("./semver");const{safeRe:re,t:t,comparatorTrimReplace:comparatorTrimReplace,tildeTrimReplace:tildeTrimReplace,caretTrimReplace:caretTrimReplace}=require("../internal/re");const{FLAG_INCLUDE_PRERELEASE:FLAG_INCLUDE_PRERELEASE,FLAG_LOOSE:FLAG_LOOSE}=require("../internal/constants");const isNullSet=c=>c.value==="<0.0.0-0";const isAny=c=>c.value==="";const isSatisfiable=(comparators,options)=>{let result=true;const remainingComparators=comparators.slice();let testComparator=remainingComparators.pop();while(result&&remainingComparators.length){result=remainingComparators.every(otherComparator=>testComparator.intersects(otherComparator,options));testComparator=remainingComparators.pop()}return result};const parseComparator=(comp,options)=>{debug("comp",comp,options);comp=replaceCarets(comp,options);debug("caret",comp);comp=replaceTildes(comp,options);debug("tildes",comp);comp=replaceXRanges(comp,options);debug("xrange",comp);comp=replaceStars(comp,options);debug("stars",comp);return comp};const isX=id=>!id||id.toLowerCase()==="x"||id==="*";const replaceTildes=(comp,options)=>comp.trim().split(/\s+/).map(c=>replaceTilde(c,options)).join(" ");const replaceTilde=(comp,options)=>{const r=options.loose?re[t.TILDELOOSE]:re[t.TILDE];return comp.replace(r,(_,M,m,p,pr)=>{debug("tilde",comp,_,M,m,p,pr);let ret;if(isX(M)){ret=""}else if(isX(m)){ret=`>=${M}.0.0 <${+M+1}.0.0-0`}else if(isX(p)){ret=`>=${M}.${m}.0 <${M}.${+m+1}.0-0`}else if(pr){debug("replaceTilde pr",pr);ret=`>=${M}.${m}.${p}-${pr} <${M}.${+m+1}.0-0`}else{ret=`>=${M}.${m}.${p} <${M}.${+m+1}.0-0`}debug("tilde return",ret);return ret})};const replaceCarets=(comp,options)=>comp.trim().split(/\s+/).map(c=>replaceCaret(c,options)).join(" ");const replaceCaret=(comp,options)=>{debug("caret",comp,options);const r=options.loose?re[t.CARETLOOSE]:re[t.CARET];const z=options.includePrerelease?"-0":"";return comp.replace(r,(_,M,m,p,pr)=>{debug("caret",comp,_,M,m,p,pr);let ret;if(isX(M)){ret=""}else if(isX(m)){ret=`>=${M}.0.0${z} <${+M+1}.0.0-0`}else if(isX(p)){if(M==="0"){ret=`>=${M}.${m}.0${z} <${M}.${+m+1}.0-0`}else{ret=`>=${M}.${m}.0${z} <${+M+1}.0.0-0`}}else if(pr){debug("replaceCaret pr",pr);if(M==="0"){if(m==="0"){ret=`>=${M}.${m}.${p}-${pr} <${M}.${m}.${+p+1}-0`}else{ret=`>=${M}.${m}.${p}-${pr} <${M}.${+m+1}.0-0`}}else{ret=`>=${M}.${m}.${p}-${pr} <${+M+1}.0.0-0`}}else{debug("no pr");if(M==="0"){if(m==="0"){ret=`>=${M}.${m}.${p}${z} <${M}.${m}.${+p+1}-0`}else{ret=`>=${M}.${m}.${p}${z} <${M}.${+m+1}.0-0`}}else{ret=`>=${M}.${m}.${p} <${+M+1}.0.0-0`}}debug("caret return",ret);return ret})};const replaceXRanges=(comp,options)=>{debug("replaceXRanges",comp,options);return comp.split(/\s+/).map(c=>replaceXRange(c,options)).join(" ")};const replaceXRange=(comp,options)=>{comp=comp.trim();const r=options.loose?re[t.XRANGELOOSE]:re[t.XRANGE];return comp.replace(r,(ret,gtlt,M,m,p,pr)=>{debug("xRange",comp,ret,gtlt,M,m,p,pr);const xM=isX(M);const xm=xM||isX(m);const xp=xm||isX(p);const anyX=xp;if(gtlt==="="&&anyX){gtlt=""}pr=options.includePrerelease?"-0":"";if(xM){if(gtlt===">"||gtlt==="<"){ret="<0.0.0-0"}else{ret="*"}}else if(gtlt&&anyX){if(xm){m=0}p=0;if(gtlt===">"){gtlt=">=";if(xm){M=+M+1;m=0;p=0}else{m=+m+1;p=0}}else if(gtlt==="<="){gtlt="<";if(xm){M=+M+1}else{m=+m+1}}if(gtlt==="<"){pr="-0"}ret=`${gtlt+M}.${m}.${p}${pr}`}else if(xm){ret=`>=${M}.0.0${pr} <${+M+1}.0.0-0`}else if(xp){ret=`>=${M}.${m}.0${pr} <${M}.${+m+1}.0-0`}debug("xRange return",ret);return ret})};const replaceStars=(comp,options)=>{debug("replaceStars",comp,options);return comp.trim().replace(re[t.STAR],"")};const replaceGTE0=(comp,options)=>{debug("replaceGTE0",comp,options);return comp.trim().replace(re[options.includePrerelease?t.GTE0PRE:t.GTE0],"")};const hyphenReplace=incPr=>($0,from,fM,fm,fp,fpr,fb,to,tM,tm,tp,tpr)=>{if(isX(fM)){from=""}else if(isX(fm)){from=`>=${fM}.0.0${incPr?"-0":""}`}else if(isX(fp)){from=`>=${fM}.${fm}.0${incPr?"-0":""}`}else if(fpr){from=`>=${from}`}else{from=`>=${from}${incPr?"-0":""}`}if(isX(tM)){to=""}else if(isX(tm)){to=`<${+tM+1}.0.0-0`}else if(isX(tp)){to=`<${tM}.${+tm+1}.0-0`}else if(tpr){to=`<=${tM}.${tm}.${tp}-${tpr}`}else if(incPr){to=`<${tM}.${tm}.${+tp+1}-0`}else{to=`<=${to}`}return`${from} ${to}`.trim()};const testSet=(set,version,options)=>{for(let i=0;i<set.length;i++){if(!set[i].test(version)){return false}}if(version.prerelease.length&&!options.includePrerelease){for(let i=0;i<set.length;i++){debug(set[i].semver);if(set[i].semver===Comparator.ANY){continue}if(set[i].semver.prerelease.length>0){const allowed=set[i].semver;if(allowed.major===version.major&&allowed.minor===version.minor&&allowed.patch===version.patch){return true}}}return false}return true}},{"../internal/constants":289,"../internal/debug":290,"../internal/lrucache":292,"../internal/parse-options":293,"../internal/re":294,"./comparator":261,"./semver":263}],263:[function(require,module,exports){"use strict";const debug=require("../internal/debug");const{MAX_LENGTH:MAX_LENGTH,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER}=require("../internal/constants");const{safeRe:re,t:t}=require("../internal/re");const parseOptions=require("../internal/parse-options");const{compareIdentifiers:compareIdentifiers}=require("../internal/identifiers");class SemVer{constructor(version,options){options=parseOptions(options);if(version instanceof SemVer){if(version.loose===!!options.loose&&version.includePrerelease===!!options.includePrerelease){return version}else{version=version.version}}else if(typeof version!=="string"){throw new TypeError(`Invalid version. Must be a string. Got type "${typeof version}".`)}if(version.length>MAX_LENGTH){throw new TypeError(`version is longer than ${MAX_LENGTH} characters`)}debug("SemVer",version,options);this.options=options;this.loose=!!options.loose;this.includePrerelease=!!options.includePrerelease;const m=version.trim().match(options.loose?re[t.LOOSE]:re[t.FULL]);if(!m){throw new TypeError(`Invalid Version: ${version}`)}this.raw=version;this.major=+m[1];this.minor=+m[2];this.patch=+m[3];if(this.major>MAX_SAFE_INTEGER||this.major<0){throw new TypeError("Invalid major version")}if(this.minor>MAX_SAFE_INTEGER||this.minor<0){throw new TypeError("Invalid minor version")}if(this.patch>MAX_SAFE_INTEGER||this.patch<0){throw new TypeError("Invalid patch version")}if(!m[4]){this.prerelease=[]}else{this.prerelease=m[4].split(".").map(id=>{if(/^[0-9]+$/.test(id)){const num=+id;if(num>=0&&num<MAX_SAFE_INTEGER){return num}}return id})}this.build=m[5]?m[5].split("."):[];this.format()}format(){this.version=`${this.major}.${this.minor}.${this.patch}`;if(this.prerelease.length){this.version+=`-${this.prerelease.join(".")}`}return this.version}toString(){return this.version}compare(other){debug("SemVer.compare",this.version,this.options,other);if(!(other instanceof SemVer)){if(typeof other==="string"&&other===this.version){return 0}other=new SemVer(other,this.options)}if(other.version===this.version){return 0}return this.compareMain(other)||this.comparePre(other)}compareMain(other){if(!(other instanceof SemVer)){other=new SemVer(other,this.options)}return compareIdentifiers(this.major,other.major)||compareIdentifiers(this.minor,other.minor)||compareIdentifiers(this.patch,other.patch)}comparePre(other){if(!(other instanceof SemVer)){other=new SemVer(other,this.options)}if(this.prerelease.length&&!other.prerelease.length){return-1}else if(!this.prerelease.length&&other.prerelease.length){return 1}else if(!this.prerelease.length&&!other.prerelease.length){return 0}let i=0;do{const a=this.prerelease[i];const b=other.prerelease[i];debug("prerelease compare",i,a,b);if(a===undefined&&b===undefined){return 0}else if(b===undefined){return 1}else if(a===undefined){return-1}else if(a===b){continue}else{return compareIdentifiers(a,b)}}while(++i)}compareBuild(other){if(!(other instanceof SemVer)){other=new SemVer(other,this.options)}let i=0;do{const a=this.build[i];const b=other.build[i];debug("build compare",i,a,b);if(a===undefined&&b===undefined){return 0}else if(b===undefined){return 1}else if(a===undefined){return-1}else if(a===b){continue}else{return compareIdentifiers(a,b)}}while(++i)}inc(release,identifier,identifierBase){if(release.startsWith("pre")){if(!identifier&&identifierBase===false){throw new Error("invalid increment argument: identifier is empty")}if(identifier){const match=`-${identifier}`.match(this.options.loose?re[t.PRERELEASELOOSE]:re[t.PRERELEASE]);if(!match||match[1]!==identifier){throw new Error(`invalid identifier: ${identifier}`)}}}switch(release){case"premajor":this.prerelease.length=0;this.patch=0;this.minor=0;this.major++;this.inc("pre",identifier,identifierBase);break;case"preminor":this.prerelease.length=0;this.patch=0;this.minor++;this.inc("pre",identifier,identifierBase);break;case"prepatch":this.prerelease.length=0;this.inc("patch",identifier,identifierBase);this.inc("pre",identifier,identifierBase);break;case"prerelease":if(this.prerelease.length===0){this.inc("patch",identifier,identifierBase)}this.inc("pre",identifier,identifierBase);break;case"release":if(this.prerelease.length===0){throw new Error(`version ${this.raw} is not a prerelease`)}this.prerelease.length=0;break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0){this.major++}this.minor=0;this.patch=0;this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0){this.minor++}this.patch=0;this.prerelease=[];break;case"patch":if(this.prerelease.length===0){this.patch++}this.prerelease=[];break;case"pre":{const base=Number(identifierBase)?1:0;if(this.prerelease.length===0){this.prerelease=[base]}else{let i=this.prerelease.length;while(--i>=0){if(typeof this.prerelease[i]==="number"){this.prerelease[i]++;i=-2}}if(i===-1){if(identifier===this.prerelease.join(".")&&identifierBase===false){throw new Error("invalid increment argument: identifier already exists")}this.prerelease.push(base)}}if(identifier){let prerelease=[identifier,base];if(identifierBase===false){prerelease=[identifier]}if(compareIdentifiers(this.prerelease[0],identifier)===0){if(isNaN(this.prerelease[1])){this.prerelease=prerelease}}else{this.prerelease=prerelease}}break}default:throw new Error(`invalid increment argument: ${release}`)}this.raw=this.format();if(this.build.length){this.raw+=`+${this.build.join(".")}`}return this}}module.exports=SemVer},{"../internal/constants":289,"../internal/debug":290,"../internal/identifiers":291,"../internal/parse-options":293,"../internal/re":294}],264:[function(require,module,exports){"use strict";const parse=require("./parse");const clean=(version,options)=>{const s=parse(version.trim().replace(/^[=v]+/,""),options);return s?s.version:null};module.exports=clean},{"./parse":280}],265:[function(require,module,exports){"use strict";const eq=require("./eq");const neq=require("./neq");const gt=require("./gt");const gte=require("./gte");const lt=require("./lt");const lte=require("./lte");const cmp=(a,op,b,loose)=>{switch(op){case"===":if(typeof a==="object"){a=a.version}if(typeof b==="object"){b=b.version}return a===b;case"!==":if(typeof a==="object"){a=a.version}if(typeof b==="object"){b=b.version}return a!==b;case"":case"=":case"==":return eq(a,b,loose);case"!=":return neq(a,b,loose);case">":return gt(a,b,loose);case">=":return gte(a,b,loose);case"<":return lt(a,b,loose);case"<=":return lte(a,b,loose);default:throw new TypeError(`Invalid operator: ${op}`)}};module.exports=cmp},{"./eq":271,"./gt":272,"./gte":273,"./lt":275,"./lte":276,"./neq":279}],266:[function(require,module,exports){"use strict";const SemVer=require("../classes/semver");const parse=require("./parse");const{safeRe:re,t:t}=require("../internal/re");const coerce=(version,options)=>{if(version instanceof SemVer){return version}if(typeof version==="number"){version=String(version)}if(typeof version!=="string"){return null}options=options||{};let match=null;if(!options.rtl){match=version.match(options.includePrerelease?re[t.COERCEFULL]:re[t.COERCE])}else{const coerceRtlRegex=options.includePrerelease?re[t.COERCERTLFULL]:re[t.COERCERTL];let next;while((next=coerceRtlRegex.exec(version))&&(!match||match.index+match[0].length!==version.length)){if(!match||next.index+next[0].length!==match.index+match[0].length){match=next}coerceRtlRegex.lastIndex=next.index+next[1].length+next[2].length}coerceRtlRegex.lastIndex=-1}if(match===null){return null}const major=match[2];const minor=match[3]||"0";const patch=match[4]||"0";const prerelease=options.includePrerelease&&match[5]?`-${match[5]}`:"";const build=options.includePrerelease&&match[6]?`+${match[6]}`:"";return parse(`${major}.${minor}.${patch}${prerelease}${build}`,options)};module.exports=coerce},{"../classes/semver":263,"../internal/re":294,"./parse":280}],267:[function(require,module,exports){"use strict";const SemVer=require("../classes/semver");const compareBuild=(a,b,loose)=>{const versionA=new SemVer(a,loose);const versionB=new SemVer(b,loose);return versionA.compare(versionB)||versionA.compareBuild(versionB)};module.exports=compareBuild},{"../classes/semver":263}],268:[function(require,module,exports){"use strict";const compare=require("./compare");const compareLoose=(a,b)=>compare(a,b,true);module.exports=compareLoose},{"./compare":269}],269:[function(require,module,exports){"use strict";const SemVer=require("../classes/semver");const compare=(a,b,loose)=>new SemVer(a,loose).compare(new SemVer(b,loose));module.exports=compare},{"../classes/semver":263}],270:[function(require,module,exports){"use strict";const parse=require("./parse.js");const diff=(version1,version2)=>{const v1=parse(version1,null,true);const v2=parse(version2,null,true);const comparison=v1.compare(v2);if(comparison===0){return null}const v1Higher=comparison>0;const highVersion=v1Higher?v1:v2;const lowVersion=v1Higher?v2:v1;const highHasPre=!!highVersion.prerelease.length;const lowHasPre=!!lowVersion.prerelease.length;if(lowHasPre&&!highHasPre){if(!lowVersion.patch&&!lowVersion.minor){return"major"}if(lowVersion.compareMain(highVersion)===0){if(lowVersion.minor&&!lowVersion.patch){return"minor"}return"patch"}}const prefix=highHasPre?"pre":"";if(v1.major!==v2.major){return prefix+"major"}if(v1.minor!==v2.minor){return prefix+"minor"}if(v1.patch!==v2.patch){return prefix+"patch"}return"prerelease"};module.exports=diff},{"./parse.js":280}],271:[function(require,module,exports){"use strict";const compare=require("./compare");const eq=(a,b,loose)=>compare(a,b,loose)===0;module.exports=eq},{"./compare":269}],272:[function(require,module,exports){"use strict";const compare=require("./compare");const gt=(a,b,loose)=>compare(a,b,loose)>0;module.exports=gt},{"./compare":269}],273:[function(require,module,exports){"use strict";const compare=require("./compare");const gte=(a,b,loose)=>compare(a,b,loose)>=0;module.exports=gte},{"./compare":269}],274:[function(require,module,exports){"use strict";const SemVer=require("../classes/semver");const inc=(version,release,options,identifier,identifierBase)=>{if(typeof options==="string"){identifierBase=identifier;identifier=options;options=undefined}try{return new SemVer(version instanceof SemVer?version.version:version,options).inc(release,identifier,identifierBase).version}catch(er){return null}};module.exports=inc},{"../classes/semver":263}],275:[function(require,module,exports){"use strict";const compare=require("./compare");const lt=(a,b,loose)=>compare(a,b,loose)<0;module.exports=lt},{"./compare":269}],276:[function(require,module,exports){"use strict";const compare=require("./compare");const lte=(a,b,loose)=>compare(a,b,loose)<=0;module.exports=lte},{"./compare":269}],277:[function(require,module,exports){"use strict";const SemVer=require("../classes/semver");const major=(a,loose)=>new SemVer(a,loose).major;module.exports=major},{"../classes/semver":263}],278:[function(require,module,exports){"use strict";const SemVer=require("../classes/semver");const minor=(a,loose)=>new SemVer(a,loose).minor;module.exports=minor},{"../classes/semver":263}],279:[function(require,module,exports){"use strict";const compare=require("./compare");const neq=(a,b,loose)=>compare(a,b,loose)!==0;module.exports=neq},{"./compare":269}],280:[function(require,module,exports){"use strict";const SemVer=require("../classes/semver");const parse=(version,options,throwErrors=false)=>{if(version instanceof SemVer){return version}try{return new SemVer(version,options)}catch(er){if(!throwErrors){return null}throw er}};module.exports=parse},{"../classes/semver":263}],281:[function(require,module,exports){"use strict";const SemVer=require("../classes/semver");const patch=(a,loose)=>new SemVer(a,loose).patch;module.exports=patch},{"../classes/semver":263}],282:[function(require,module,exports){"use strict";const parse=require("./parse");const prerelease=(version,options)=>{const parsed=parse(version,options);return parsed&&parsed.prerelease.length?parsed.prerelease:null};module.exports=prerelease},{"./parse":280}],283:[function(require,module,exports){"use strict";const compare=require("./compare");const rcompare=(a,b,loose)=>compare(b,a,loose);module.exports=rcompare},{"./compare":269}],284:[function(require,module,exports){"use strict";const compareBuild=require("./compare-build");const rsort=(list,loose)=>list.sort((a,b)=>compareBuild(b,a,loose));module.exports=rsort},{"./compare-build":267}],285:[function(require,module,exports){"use strict";const Range=require("../classes/range");const satisfies=(version,range,options)=>{try{range=new Range(range,options)}catch(er){return false}return range.test(version)};module.exports=satisfies},{"../classes/range":262}],286:[function(require,module,exports){"use strict";const compareBuild=require("./compare-build");const sort=(list,loose)=>list.sort((a,b)=>compareBuild(a,b,loose));module.exports=sort},{"./compare-build":267}],287:[function(require,module,exports){"use strict";const parse=require("./parse");const valid=(version,options)=>{const v=parse(version,options);return v?v.version:null};module.exports=valid},{"./parse":280}],288:[function(require,module,exports){"use strict";const internalRe=require("./internal/re");const constants=require("./internal/constants");const SemVer=require("./classes/semver");const identifiers=require("./internal/identifiers");const parse=require("./functions/parse");const valid=require("./functions/valid");const clean=require("./functions/clean");const inc=require("./functions/inc");const diff=require("./functions/diff");const major=require("./functions/major");const minor=require("./functions/minor");const patch=require("./functions/patch");const prerelease=require("./functions/prerelease");const compare=require("./functions/compare");const rcompare=require("./functions/rcompare");const compareLoose=require("./functions/compare-loose");const compareBuild=require("./functions/compare-build");const sort=require("./functions/sort");const rsort=require("./functions/rsort");const gt=require("./functions/gt");const lt=require("./functions/lt");const eq=require("./functions/eq");const neq=require("./functions/neq");const gte=require("./functions/gte");const lte=require("./functions/lte");const cmp=require("./functions/cmp");const coerce=require("./functions/coerce");const Comparator=require("./classes/comparator");const Range=require("./classes/range");const satisfies=require("./functions/satisfies");const toComparators=require("./ranges/to-comparators");const maxSatisfying=require("./ranges/max-satisfying");const minSatisfying=require("./ranges/min-satisfying");const minVersion=require("./ranges/min-version");const validRange=require("./ranges/valid");const outside=require("./ranges/outside");const gtr=require("./ranges/gtr");const ltr=require("./ranges/ltr");const intersects=require("./ranges/intersects");const simplifyRange=require("./ranges/simplify");const subset=require("./ranges/subset");module.exports={parse:parse,valid:valid,clean:clean,inc:inc,diff:diff,major:major,minor:minor,patch:patch,prerelease:prerelease,compare:compare,rcompare:rcompare,compareLoose:compareLoose,compareBuild:compareBuild,sort:sort,rsort:rsort,gt:gt,lt:lt,eq:eq,neq:neq,gte:gte,lte:lte,cmp:cmp,coerce:coerce,Comparator:Comparator,Range:Range,satisfies:satisfies,toComparators:toComparators,maxSatisfying:maxSatisfying,minSatisfying:minSatisfying,minVersion:minVersion,validRange:validRange,outside:outside,gtr:gtr,ltr:ltr,intersects:intersects,simplifyRange:simplifyRange,subset:subset,SemVer:SemVer,re:internalRe.re,src:internalRe.src,tokens:internalRe.t,SEMVER_SPEC_VERSION:constants.SEMVER_SPEC_VERSION,RELEASE_TYPES:constants.RELEASE_TYPES,compareIdentifiers:identifiers.compareIdentifiers,rcompareIdentifiers:identifiers.rcompareIdentifiers}},{"./classes/comparator":261,"./classes/range":262,"./classes/semver":263,"./functions/clean":264,"./functions/cmp":265,"./functions/coerce":266,"./functions/compare":269,"./functions/compare-build":267,"./functions/compare-loose":268,"./functions/diff":270,"./functions/eq":271,"./functions/gt":272,"./functions/gte":273,"./functions/inc":274,"./functions/lt":275,"./functions/lte":276,"./functions/major":277,"./functions/minor":278,"./functions/neq":279,"./functions/parse":280,"./functions/patch":281,"./functions/prerelease":282,"./functions/rcompare":283,"./functions/rsort":284,"./functions/satisfies":285,"./functions/sort":286,"./functions/valid":287,"./internal/constants":289,"./internal/identifiers":291,"./internal/re":294,"./ranges/gtr":295,"./ranges/intersects":296,"./ranges/ltr":297,"./ranges/max-satisfying":298,"./ranges/min-satisfying":299,"./ranges/min-version":300,"./ranges/outside":301,"./ranges/simplify":302,"./ranges/subset":303,"./ranges/to-comparators":304,"./ranges/valid":305}],289:[function(require,module,exports){"use strict";const SEMVER_SPEC_VERSION="2.0.0";const MAX_LENGTH=256;const MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;const MAX_SAFE_COMPONENT_LENGTH=16;const MAX_SAFE_BUILD_LENGTH=MAX_LENGTH-6;const RELEASE_TYPES=["major","premajor","minor","preminor","patch","prepatch","prerelease"];module.exports={MAX_LENGTH:MAX_LENGTH,MAX_SAFE_COMPONENT_LENGTH:MAX_SAFE_COMPONENT_LENGTH,MAX_SAFE_BUILD_LENGTH:MAX_SAFE_BUILD_LENGTH,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER,RELEASE_TYPES:RELEASE_TYPES,SEMVER_SPEC_VERSION:SEMVER_SPEC_VERSION,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},{}],290:[function(require,module,exports){"use strict";const debug=typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...args)=>console.error("SEMVER",...args):()=>{};module.exports=debug},{}],291:[function(require,module,exports){"use strict";const numeric=/^[0-9]+$/;const compareIdentifiers=(a,b)=>{const anum=numeric.test(a);const bnum=numeric.test(b);if(anum&&bnum){a=+a;b=+b}return a===b?0:anum&&!bnum?-1:bnum&&!anum?1:a<b?-1:1};const rcompareIdentifiers=(a,b)=>compareIdentifiers(b,a);module.exports={compareIdentifiers:compareIdentifiers,rcompareIdentifiers:rcompareIdentifiers}},{}],292:[function(require,module,exports){"use strict";class LRUCache{constructor(){this.max=1e3;this.map=new Map}get(key){const value=this.map.get(key);if(value===undefined){return undefined}else{this.map.delete(key);this.map.set(key,value);return value}}delete(key){return this.map.delete(key)}set(key,value){const deleted=this.delete(key);if(!deleted&&value!==undefined){if(this.map.size>=this.max){const firstKey=this.map.keys().next().value;this.delete(firstKey)}this.map.set(key,value)}return this}}module.exports=LRUCache},{}],293:[function(require,module,exports){"use strict";const looseOption=Object.freeze({loose:true});const emptyOpts=Object.freeze({});const parseOptions=options=>{if(!options){return emptyOpts}if(typeof options!=="object"){return looseOption}return options};module.exports=parseOptions},{}],294:[function(require,module,exports){"use strict";const{MAX_SAFE_COMPONENT_LENGTH:MAX_SAFE_COMPONENT_LENGTH,MAX_SAFE_BUILD_LENGTH:MAX_SAFE_BUILD_LENGTH,MAX_LENGTH:MAX_LENGTH}=require("./constants");const debug=require("./debug");exports=module.exports={};const re=exports.re=[];const safeRe=exports.safeRe=[];const src=exports.src=[];const safeSrc=exports.safeSrc=[];const t=exports.t={};let R=0;const LETTERDASHNUMBER="[a-zA-Z0-9-]";const safeRegexReplacements=[["\\s",1],["\\d",MAX_LENGTH],[LETTERDASHNUMBER,MAX_SAFE_BUILD_LENGTH]];const makeSafeRegex=value=>{for(const[token,max]of safeRegexReplacements){value=value.split(`${token}*`).join(`${token}{0,${max}}`).split(`${token}+`).join(`${token}{1,${max}}`)}return value};const createToken=(name,value,isGlobal)=>{const safe=makeSafeRegex(value);const index=R++;debug(name,index,value);t[name]=index;src[index]=value;safeSrc[index]=safe;re[index]=new RegExp(value,isGlobal?"g":undefined);safeRe[index]=new RegExp(safe,isGlobal?"g":undefined)};createToken("NUMERICIDENTIFIER","0|[1-9]\\d*");createToken("NUMERICIDENTIFIERLOOSE","\\d+");createToken("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`);createToken("MAINVERSION",`(${src[t.NUMERICIDENTIFIER]})\\.`+`(${src[t.NUMERICIDENTIFIER]})\\.`+`(${src[t.NUMERICIDENTIFIER]})`);createToken("MAINVERSIONLOOSE",`(${src[t.NUMERICIDENTIFIERLOOSE]})\\.`+`(${src[t.NUMERICIDENTIFIERLOOSE]})\\.`+`(${src[t.NUMERICIDENTIFIERLOOSE]})`);createToken("PRERELEASEIDENTIFIER",`(?:${src[t.NONNUMERICIDENTIFIER]}|${src[t.NUMERICIDENTIFIER]})`);createToken("PRERELEASEIDENTIFIERLOOSE",`(?:${src[t.NONNUMERICIDENTIFIER]}|${src[t.NUMERICIDENTIFIERLOOSE]})`);createToken("PRERELEASE",`(?:-(${src[t.PRERELEASEIDENTIFIER]}(?:\\.${src[t.PRERELEASEIDENTIFIER]})*))`);createToken("PRERELEASELOOSE",`(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`);createToken("BUILDIDENTIFIER",`${LETTERDASHNUMBER}+`);createToken("BUILD",`(?:\\+(${src[t.BUILDIDENTIFIER]}(?:\\.${src[t.BUILDIDENTIFIER]})*))`);createToken("FULLPLAIN",`v?${src[t.MAINVERSION]}${src[t.PRERELEASE]}?${src[t.BUILD]}?`);createToken("FULL",`^${src[t.FULLPLAIN]}$`);createToken("LOOSEPLAIN",`[v=\\s]*${src[t.MAINVERSIONLOOSE]}${src[t.PRERELEASELOOSE]}?${src[t.BUILD]}?`);createToken("LOOSE",`^${src[t.LOOSEPLAIN]}$`);createToken("GTLT","((?:<|>)?=?)");createToken("XRANGEIDENTIFIERLOOSE",`${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);createToken("XRANGEIDENTIFIER",`${src[t.NUMERICIDENTIFIER]}|x|X|\\*`);createToken("XRANGEPLAIN",`[v=\\s]*(${src[t.XRANGEIDENTIFIER]})`+`(?:\\.(${src[t.XRANGEIDENTIFIER]})`+`(?:\\.(${src[t.XRANGEIDENTIFIER]})`+`(?:${src[t.PRERELEASE]})?${src[t.BUILD]}?`+`)?)?`);createToken("XRANGEPLAINLOOSE",`[v=\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${src[t.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${src[t.XRANGEIDENTIFIERLOOSE]})`+`(?:${src[t.PRERELEASELOOSE]})?${src[t.BUILD]}?`+`)?)?`);createToken("XRANGE",`^${src[t.GTLT]}\\s*${src[t.XRANGEPLAIN]}$`);createToken("XRANGELOOSE",`^${src[t.GTLT]}\\s*${src[t.XRANGEPLAINLOOSE]}$`);createToken("COERCEPLAIN",`${"(^|[^\\d])"+"(\\d{1,"}${MAX_SAFE_COMPONENT_LENGTH}})`+`(?:\\.(\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`+`(?:\\.(\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`);createToken("COERCE",`${src[t.COERCEPLAIN]}(?:$|[^\\d])`);createToken("COERCEFULL",src[t.COERCEPLAIN]+`(?:${src[t.PRERELEASE]})?`+`(?:${src[t.BUILD]})?`+`(?:$|[^\\d])`);createToken("COERCERTL",src[t.COERCE],true);createToken("COERCERTLFULL",src[t.COERCEFULL],true);createToken("LONETILDE","(?:~>?)");createToken("TILDETRIM",`(\\s*)${src[t.LONETILDE]}\\s+`,true);exports.tildeTrimReplace="$1~";createToken("TILDE",`^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`);createToken("TILDELOOSE",`^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`);createToken("LONECARET","(?:\\^)");createToken("CARETTRIM",`(\\s*)${src[t.LONECARET]}\\s+`,true);exports.caretTrimReplace="$1^";createToken("CARET",`^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`);createToken("CARETLOOSE",`^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`);createToken("COMPARATORLOOSE",`^${src[t.GTLT]}\\s*(${src[t.LOOSEPLAIN]})$|^$`);createToken("COMPARATOR",`^${src[t.GTLT]}\\s*(${src[t.FULLPLAIN]})$|^$`);createToken("COMPARATORTRIM",`(\\s*)${src[t.GTLT]}\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`,true);exports.comparatorTrimReplace="$1$2$3";createToken("HYPHENRANGE",`^\\s*(${src[t.XRANGEPLAIN]})`+`\\s+-\\s+`+`(${src[t.XRANGEPLAIN]})`+`\\s*$`);createToken("HYPHENRANGELOOSE",`^\\s*(${src[t.XRANGEPLAINLOOSE]})`+`\\s+-\\s+`+`(${src[t.XRANGEPLAINLOOSE]})`+`\\s*$`);createToken("STAR","(<|>)?=?\\s*\\*");createToken("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");createToken("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},{"./constants":289,"./debug":290}],295:[function(require,module,exports){"use strict";const outside=require("./outside");const gtr=(version,range,options)=>outside(version,range,">",options);module.exports=gtr},{"./outside":301}],296:[function(require,module,exports){"use strict";const Range=require("../classes/range");const intersects=(r1,r2,options)=>{r1=new Range(r1,options);r2=new Range(r2,options);return r1.intersects(r2,options)};module.exports=intersects},{"../classes/range":262}],297:[function(require,module,exports){"use strict";const outside=require("./outside");const ltr=(version,range,options)=>outside(version,range,"<",options);module.exports=ltr},{"./outside":301}],298:[function(require,module,exports){"use strict";const SemVer=require("../classes/semver");const Range=require("../classes/range");const maxSatisfying=(versions,range,options)=>{let max=null;let maxSV=null;let rangeObj=null;try{rangeObj=new Range(range,options)}catch(er){return null}versions.forEach(v=>{if(rangeObj.test(v)){if(!max||maxSV.compare(v)===-1){max=v;maxSV=new SemVer(max,options)}}});return max};module.exports=maxSatisfying},{"../classes/range":262,"../classes/semver":263}],299:[function(require,module,exports){"use strict";const SemVer=require("../classes/semver");const Range=require("../classes/range");const minSatisfying=(versions,range,options)=>{let min=null;let minSV=null;let rangeObj=null;try{rangeObj=new Range(range,options)}catch(er){return null}versions.forEach(v=>{if(rangeObj.test(v)){if(!min||minSV.compare(v)===1){min=v;minSV=new SemVer(min,options)}}});return min};module.exports=minSatisfying},{"../classes/range":262,"../classes/semver":263}],300:[function(require,module,exports){"use strict";const SemVer=require("../classes/semver");const Range=require("../classes/range");const gt=require("../functions/gt");const minVersion=(range,loose)=>{range=new Range(range,loose);let minver=new SemVer("0.0.0");if(range.test(minver)){return minver}minver=new SemVer("0.0.0-0");if(range.test(minver)){return minver}minver=null;for(let i=0;i<range.set.length;++i){const comparators=range.set[i];let setMin=null;comparators.forEach(comparator=>{const compver=new SemVer(comparator.semver.version);switch(comparator.operator){case">":if(compver.prerelease.length===0){compver.patch++}else{compver.prerelease.push(0)}compver.raw=compver.format();case"":case">=":if(!setMin||gt(compver,setMin)){setMin=compver}break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${comparator.operator}`)}});if(setMin&&(!minver||gt(minver,setMin))){minver=setMin}}if(minver&&range.test(minver)){return minver}return null};module.exports=minVersion},{"../classes/range":262,"../classes/semver":263,"../functions/gt":272}],301:[function(require,module,exports){"use strict";const SemVer=require("../classes/semver");const Comparator=require("../classes/comparator");const{ANY:ANY}=Comparator;const Range=require("../classes/range");const satisfies=require("../functions/satisfies");const gt=require("../functions/gt");const lt=require("../functions/lt");const lte=require("../functions/lte");const gte=require("../functions/gte");const outside=(version,range,hilo,options)=>{version=new SemVer(version,options);range=new Range(range,options);let gtfn,ltefn,ltfn,comp,ecomp;switch(hilo){case">":gtfn=gt;ltefn=lte;ltfn=lt;comp=">";ecomp=">=";break;case"<":gtfn=lt;ltefn=gte;ltfn=gt;comp="<";ecomp="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(version,range,options)){return false}for(let i=0;i<range.set.length;++i){const comparators=range.set[i];let high=null;let low=null;comparators.forEach(comparator=>{if(comparator.semver===ANY){comparator=new Comparator(">=0.0.0")}high=high||comparator;low=low||comparator;if(gtfn(comparator.semver,high.semver,options)){high=comparator}else if(ltfn(comparator.semver,low.semver,options)){low=comparator}});if(high.operator===comp||high.operator===ecomp){return false}if((!low.operator||low.operator===comp)&&ltefn(version,low.semver)){return false}else if(low.operator===ecomp&&ltfn(version,low.semver)){return false}}return true};module.exports=outside},{"../classes/comparator":261,"../classes/range":262,"../classes/semver":263,"../functions/gt":272,"../functions/gte":273,"../functions/lt":275,"../functions/lte":276,"../functions/satisfies":285}],302:[function(require,module,exports){"use strict";const satisfies=require("../functions/satisfies.js");const compare=require("../functions/compare.js");module.exports=(versions,range,options)=>{const set=[];let first=null;let prev=null;const v=versions.sort((a,b)=>compare(a,b,options));for(const version of v){const included=satisfies(version,range,options);if(included){prev=version;if(!first){first=version}}else{if(prev){set.push([first,prev])}prev=null;first=null}}if(first){set.push([first,null])}const ranges=[];for(const[min,max]of set){if(min===max){ranges.push(min)}else if(!max&&min===v[0]){ranges.push("*")}else if(!max){ranges.push(`>=${min}`)}else if(min===v[0]){ranges.push(`<=${max}`)}else{ranges.push(`${min} - ${max}`)}}const simplified=ranges.join(" || ");const original=typeof range.raw==="string"?range.raw:String(range);return simplified.length<original.length?simplified:range}},{"../functions/compare.js":269,"../functions/satisfies.js":285}],303:[function(require,module,exports){"use strict";const Range=require("../classes/range.js");const Comparator=require("../classes/comparator.js");const{ANY:ANY}=Comparator;const satisfies=require("../functions/satisfies.js");const compare=require("../functions/compare.js");const subset=(sub,dom,options={})=>{if(sub===dom){return true}sub=new Range(sub,options);dom=new Range(dom,options);let sawNonNull=false;OUTER:for(const simpleSub of sub.set){for(const simpleDom of dom.set){const isSub=simpleSubset(simpleSub,simpleDom,options);sawNonNull=sawNonNull||isSub!==null;if(isSub){continue OUTER}}if(sawNonNull){return false}}return true};const minimumVersionWithPreRelease=[new Comparator(">=0.0.0-0")];const minimumVersion=[new Comparator(">=0.0.0")];const simpleSubset=(sub,dom,options)=>{if(sub===dom){return true}if(sub.length===1&&sub[0].semver===ANY){if(dom.length===1&&dom[0].semver===ANY){return true}else if(options.includePrerelease){sub=minimumVersionWithPreRelease}else{sub=minimumVersion}}if(dom.length===1&&dom[0].semver===ANY){if(options.includePrerelease){return true}else{dom=minimumVersion}}const eqSet=new Set;let gt,lt;for(const c of sub){if(c.operator===">"||c.operator===">="){gt=higherGT(gt,c,options)}else if(c.operator==="<"||c.operator==="<="){lt=lowerLT(lt,c,options)}else{eqSet.add(c.semver)}}if(eqSet.size>1){return null}let gtltComp;if(gt&&lt){gtltComp=compare(gt.semver,lt.semver,options);if(gtltComp>0){return null}else if(gtltComp===0&&(gt.operator!==">="||lt.operator!=="<=")){return null}}for(const eq of eqSet){if(gt&&!satisfies(eq,String(gt),options)){return null}if(lt&&!satisfies(eq,String(lt),options)){return null}for(const c of dom){if(!satisfies(eq,String(c),options)){return false}}return true}let higher,lower;let hasDomLT,hasDomGT;let needDomLTPre=lt&&!options.includePrerelease&&lt.semver.prerelease.length?lt.semver:false;let needDomGTPre=gt&&!options.includePrerelease&&gt.semver.prerelease.length?gt.semver:false;if(needDomLTPre&&needDomLTPre.prerelease.length===1&&lt.operator==="<"&&needDomLTPre.prerelease[0]===0){needDomLTPre=false}for(const c of dom){hasDomGT=hasDomGT||c.operator===">"||c.operator===">=";hasDomLT=hasDomLT||c.operator==="<"||c.operator==="<=";if(gt){if(needDomGTPre){if(c.semver.prerelease&&c.semver.prerelease.length&&c.semver.major===needDomGTPre.major&&c.semver.minor===needDomGTPre.minor&&c.semver.patch===needDomGTPre.patch){needDomGTPre=false}}if(c.operator===">"||c.operator===">="){higher=higherGT(gt,c,options);if(higher===c&&higher!==gt){return false}}else if(gt.operator===">="&&!satisfies(gt.semver,String(c),options)){return false}}if(lt){if(needDomLTPre){if(c.semver.prerelease&&c.semver.prerelease.length&&c.semver.major===needDomLTPre.major&&c.semver.minor===needDomLTPre.minor&&c.semver.patch===needDomLTPre.patch){needDomLTPre=false}}if(c.operator==="<"||c.operator==="<="){lower=lowerLT(lt,c,options);if(lower===c&&lower!==lt){return false}}else if(lt.operator==="<="&&!satisfies(lt.semver,String(c),options)){return false}}if(!c.operator&&(lt||gt)&&gtltComp!==0){return false}}if(gt&&hasDomLT&&!lt&&gtltComp!==0){return false}if(lt&&hasDomGT&&!gt&&gtltComp!==0){return false}if(needDomGTPre||needDomLTPre){return false}return true};const higherGT=(a,b,options)=>{if(!a){return b}const comp=compare(a.semver,b.semver,options);return comp>0?a:comp<0?b:b.operator===">"&&a.operator===">="?b:a};const lowerLT=(a,b,options)=>{if(!a){return b}const comp=compare(a.semver,b.semver,options);return comp<0?a:comp>0?b:b.operator==="<"&&a.operator==="<="?b:a};module.exports=subset},{"../classes/comparator.js":261,"../classes/range.js":262,"../functions/compare.js":269,"../functions/satisfies.js":285}],304:[function(require,module,exports){"use strict";const Range=require("../classes/range");const toComparators=(range,options)=>new Range(range,options).set.map(comp=>comp.map(c=>c.value).join(" ").trim().split(" "));module.exports=toComparators},{"../classes/range":262}],305:[function(require,module,exports){"use strict";const Range=require("../classes/range");const validRange=(range,options)=>{try{return new Range(range,options).range||"*"}catch(er){return null}};module.exports=validRange},{"../classes/range":262}],306:[function(require,module,exports){module.exports=function(blocking){[process.stdout,process.stderr].forEach(function(stream){if(stream._handle&&stream.isTTY&&typeof stream._handle.setBlocking==="function"){stream._handle.setBlocking(blocking)}})}},{}],307:[function(require,module,exports){var process=global.process;const processOk=function(process){return process&&typeof process==="object"&&typeof process.removeListener==="function"&&typeof process.emit==="function"&&typeof process.reallyExit==="function"&&typeof process.listeners==="function"&&typeof process.kill==="function"&&typeof process.pid==="number"&&typeof process.on==="function"};if(!processOk(process)){module.exports=function(){return function(){}}}else{var assert=require("assert");var signals=require("./signals.js");var isWin=/^win/i.test(process.platform);var EE=require("events");if(typeof EE!=="function"){EE=EE.EventEmitter}var emitter;if(process.__signal_exit_emitter__){emitter=process.__signal_exit_emitter__}else{emitter=process.__signal_exit_emitter__=new EE;emitter.count=0;emitter.emitted={}}if(!emitter.infinite){emitter.setMaxListeners(Infinity);emitter.infinite=true}module.exports=function(cb,opts){if(!processOk(global.process)){return function(){}}assert.equal(typeof cb,"function","a callback must be provided for exit handler");if(loaded===false){load()}var ev="exit";if(opts&&opts.alwaysLast){ev="afterexit"}var remove=function(){emitter.removeListener(ev,cb);if(emitter.listeners("exit").length===0&&emitter.listeners("afterexit").length===0){unload()}};emitter.on(ev,cb);return remove};var unload=function unload(){if(!loaded||!processOk(global.process)){return}loaded=false;signals.forEach(function(sig){try{process.removeListener(sig,sigListeners[sig])}catch(er){}});process.emit=originalProcessEmit;process.reallyExit=originalProcessReallyExit;emitter.count-=1};module.exports.unload=unload;var emit=function emit(event,code,signal){if(emitter.emitted[event]){return}emitter.emitted[event]=true;emitter.emit(event,code,signal)};var sigListeners={};signals.forEach(function(sig){sigListeners[sig]=function listener(){if(!processOk(global.process)){return}var listeners=process.listeners(sig);if(listeners.length===emitter.count){unload();emit("exit",null,sig);emit("afterexit",null,sig);if(isWin&&sig==="SIGHUP"){sig="SIGINT"}process.kill(process.pid,sig)}}});module.exports.signals=function(){return signals};var loaded=false;var load=function load(){if(loaded||!processOk(global.process)){return}loaded=true;emitter.count+=1;signals=signals.filter(function(sig){try{process.on(sig,sigListeners[sig]);return true}catch(er){return false}});process.emit=processEmit;process.reallyExit=processReallyExit};module.exports.load=load;var originalProcessReallyExit=process.reallyExit;var processReallyExit=function processReallyExit(code){if(!processOk(global.process)){return}process.exitCode=code||0;emit("exit",process.exitCode,null);emit("afterexit",process.exitCode,null);originalProcessReallyExit.call(process,process.exitCode)};var originalProcessEmit=process.emit;var processEmit=function processEmit(ev,arg){if(ev==="exit"&&processOk(global.process)){if(arg!==undefined){process.exitCode=arg}var ret=originalProcessEmit.apply(this,arguments);emit("exit",process.exitCode,null);emit("afterexit",process.exitCode,null);return ret}else{return originalProcessEmit.apply(this,arguments)}}}},{"./signals.js":308,assert:undefined,events:undefined}],308:[function(require,module,exports){module.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];if(process.platform!=="win32"){module.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT")}if(process.platform==="linux"){module.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")}},{}],309:[function(require,module,exports){"use strict";var __rest=this&&this.__rest||function(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]]}return t};Object.defineProperty(exports,"__esModule",{value:true});exports.ClusterAdapterWithHeartbeat=exports.ClusterAdapter=exports.MessageType=void 0;const in_memory_adapter_1=require("./in-memory-adapter");const debug_1=require("debug");const crypto_1=require("crypto");const debug=(0,debug_1.debug)("socket.io-adapter");const EMITTER_UID="emitter";const DEFAULT_TIMEOUT=5e3;function randomId(){return(0,crypto_1.randomBytes)(8).toString("hex")}var MessageType;(function(MessageType){MessageType[MessageType["INITIAL_HEARTBEAT"]=1]="INITIAL_HEARTBEAT";MessageType[MessageType["HEARTBEAT"]=2]="HEARTBEAT";MessageType[MessageType["BROADCAST"]=3]="BROADCAST";MessageType[MessageType["SOCKETS_JOIN"]=4]="SOCKETS_JOIN";MessageType[MessageType["SOCKETS_LEAVE"]=5]="SOCKETS_LEAVE";MessageType[MessageType["DISCONNECT_SOCKETS"]=6]="DISCONNECT_SOCKETS";MessageType[MessageType["FETCH_SOCKETS"]=7]="FETCH_SOCKETS";MessageType[MessageType["FETCH_SOCKETS_RESPONSE"]=8]="FETCH_SOCKETS_RESPONSE";MessageType[MessageType["SERVER_SIDE_EMIT"]=9]="SERVER_SIDE_EMIT";MessageType[MessageType["SERVER_SIDE_EMIT_RESPONSE"]=10]="SERVER_SIDE_EMIT_RESPONSE";MessageType[MessageType["BROADCAST_CLIENT_COUNT"]=11]="BROADCAST_CLIENT_COUNT";MessageType[MessageType["BROADCAST_ACK"]=12]="BROADCAST_ACK";MessageType[MessageType["ADAPTER_CLOSE"]=13]="ADAPTER_CLOSE"})(MessageType=exports.MessageType||(exports.MessageType={}));function encodeOptions(opts){return{rooms:[...opts.rooms],except:[...opts.except],flags:opts.flags}}function decodeOptions(opts){return{rooms:new Set(opts.rooms),except:new Set(opts.except),flags:opts.flags}}class ClusterAdapter extends in_memory_adapter_1.Adapter{constructor(nsp){super(nsp);this.requests=new Map;this.ackRequests=new Map;this.uid=randomId()}onMessage(message,offset){if(message.uid===this.uid){return debug("[%s] ignore message from self",this.uid)}debug("[%s] new event of type %d from %s",this.uid,message.type,message.uid);switch(message.type){case MessageType.BROADCAST:{const withAck=message.data.requestId!==undefined;if(withAck){super.broadcastWithAck(message.data.packet,decodeOptions(message.data.opts),clientCount=>{debug("[%s] waiting for %d client acknowledgements",this.uid,clientCount);this.publishResponse(message.uid,{type:MessageType.BROADCAST_CLIENT_COUNT,data:{requestId:message.data.requestId,clientCount:clientCount}})},arg=>{debug("[%s] received acknowledgement with value %j",this.uid,arg);this.publishResponse(message.uid,{type:MessageType.BROADCAST_ACK,data:{requestId:message.data.requestId,packet:arg}})})}else{const packet=message.data.packet;const opts=decodeOptions(message.data.opts);this.addOffsetIfNecessary(packet,opts,offset);super.broadcast(packet,opts)}break}case MessageType.SOCKETS_JOIN:super.addSockets(decodeOptions(message.data.opts),message.data.rooms);break;case MessageType.SOCKETS_LEAVE:super.delSockets(decodeOptions(message.data.opts),message.data.rooms);break;case MessageType.DISCONNECT_SOCKETS:super.disconnectSockets(decodeOptions(message.data.opts),message.data.close);break;case MessageType.FETCH_SOCKETS:{debug("[%s] calling fetchSockets with opts %j",this.uid,message.data.opts);super.fetchSockets(decodeOptions(message.data.opts)).then(localSockets=>{this.publishResponse(message.uid,{type:MessageType.FETCH_SOCKETS_RESPONSE,data:{requestId:message.data.requestId,sockets:localSockets.map(socket=>{const _a=socket.handshake,{sessionStore:sessionStore}=_a,handshake=__rest(_a,["sessionStore"]);return{id:socket.id,handshake:handshake,rooms:[...socket.rooms],data:socket.data}})}})});break}case MessageType.SERVER_SIDE_EMIT:{const packet=message.data.packet;const withAck=message.data.requestId!==undefined;if(!withAck){this.nsp._onServerSideEmit(packet);return}let called=false;const callback=arg=>{if(called){return}called=true;debug("[%s] calling acknowledgement with %j",this.uid,arg);this.publishResponse(message.uid,{type:MessageType.SERVER_SIDE_EMIT_RESPONSE,data:{requestId:message.data.requestId,packet:arg}})};this.nsp._onServerSideEmit([...packet,callback]);break}case MessageType.BROADCAST_CLIENT_COUNT:case MessageType.BROADCAST_ACK:case MessageType.FETCH_SOCKETS_RESPONSE:case MessageType.SERVER_SIDE_EMIT_RESPONSE:this.onResponse(message);break;default:debug("[%s] unknown message type: %s",this.uid,message.type)}}onResponse(response){var _a,_b;const requestId=response.data.requestId;debug("[%s] received response %s to request %s",this.uid,response.type,requestId);switch(response.type){case MessageType.BROADCAST_CLIENT_COUNT:{(_a=this.ackRequests.get(requestId))===null||_a===void 0?void 0:_a.clientCountCallback(response.data.clientCount);break}case MessageType.BROADCAST_ACK:{(_b=this.ackRequests.get(requestId))===null||_b===void 0?void 0:_b.ack(response.data.packet);break}case MessageType.FETCH_SOCKETS_RESPONSE:{const request=this.requests.get(requestId);if(!request){return}request.current++;response.data.sockets.forEach(socket=>request.responses.push(socket));if(request.current===request.expected){clearTimeout(request.timeout);request.resolve(request.responses);this.requests.delete(requestId)}break}case MessageType.SERVER_SIDE_EMIT_RESPONSE:{const request=this.requests.get(requestId);if(!request){return}request.current++;request.responses.push(response.data.packet);if(request.current===request.expected){clearTimeout(request.timeout);request.resolve(null,request.responses);this.requests.delete(requestId)}break}default:debug("[%s] unknown response type: %s",this.uid,response.type)}}async broadcast(packet,opts){var _a;const onlyLocal=(_a=opts.flags)===null||_a===void 0?void 0:_a.local;if(!onlyLocal){try{const offset=await this.publishAndReturnOffset({type:MessageType.BROADCAST,data:{packet:packet,opts:encodeOptions(opts)}});this.addOffsetIfNecessary(packet,opts,offset)}catch(e){return debug("[%s] error while broadcasting message: %s",this.uid,e.message)}}super.broadcast(packet,opts)}addOffsetIfNecessary(packet,opts,offset){var _a;if(!this.nsp.server.opts.connectionStateRecovery){return}const isEventPacket=packet.type===2;const withoutAcknowledgement=packet.id===undefined;const notVolatile=((_a=opts.flags)===null||_a===void 0?void 0:_a.volatile)===undefined;if(isEventPacket&&withoutAcknowledgement&&notVolatile){packet.data.push(offset)}}broadcastWithAck(packet,opts,clientCountCallback,ack){var _a;const onlyLocal=(_a=opts===null||opts===void 0?void 0:opts.flags)===null||_a===void 0?void 0:_a.local;if(!onlyLocal){const requestId=randomId();this.ackRequests.set(requestId,{clientCountCallback:clientCountCallback,ack:ack});this.publish({type:MessageType.BROADCAST,data:{packet:packet,requestId:requestId,opts:encodeOptions(opts)}});setTimeout(()=>{this.ackRequests.delete(requestId)},opts.flags.timeout)}super.broadcastWithAck(packet,opts,clientCountCallback,ack)}async addSockets(opts,rooms){var _a;const onlyLocal=(_a=opts.flags)===null||_a===void 0?void 0:_a.local;if(!onlyLocal){try{await this.publishAndReturnOffset({type:MessageType.SOCKETS_JOIN,data:{opts:encodeOptions(opts),rooms:rooms}})}catch(e){debug("[%s] error while publishing message: %s",this.uid,e.message)}}super.addSockets(opts,rooms)}async delSockets(opts,rooms){var _a;const onlyLocal=(_a=opts.flags)===null||_a===void 0?void 0:_a.local;if(!onlyLocal){try{await this.publishAndReturnOffset({type:MessageType.SOCKETS_LEAVE,data:{opts:encodeOptions(opts),rooms:rooms}})}catch(e){debug("[%s] error while publishing message: %s",this.uid,e.message)}}super.delSockets(opts,rooms)}async disconnectSockets(opts,close){var _a;const onlyLocal=(_a=opts.flags)===null||_a===void 0?void 0:_a.local;if(!onlyLocal){try{await this.publishAndReturnOffset({type:MessageType.DISCONNECT_SOCKETS,data:{opts:encodeOptions(opts),close:close}})}catch(e){debug("[%s] error while publishing message: %s",this.uid,e.message)}}super.disconnectSockets(opts,close)}async fetchSockets(opts){var _a;const[localSockets,serverCount]=await Promise.all([super.fetchSockets(opts),this.serverCount()]);const expectedResponseCount=serverCount-1;if(((_a=opts.flags)===null||_a===void 0?void 0:_a.local)||expectedResponseCount<=0){return localSockets}const requestId=randomId();return new Promise((resolve,reject)=>{const timeout=setTimeout(()=>{const storedRequest=this.requests.get(requestId);if(storedRequest){reject(new Error(`timeout reached: only ${storedRequest.current} responses received out of ${storedRequest.expected}`));this.requests.delete(requestId)}},opts.flags.timeout||DEFAULT_TIMEOUT);const storedRequest={type:MessageType.FETCH_SOCKETS,resolve:resolve,timeout:timeout,current:0,expected:expectedResponseCount,responses:localSockets};this.requests.set(requestId,storedRequest);this.publish({type:MessageType.FETCH_SOCKETS,data:{opts:encodeOptions(opts),requestId:requestId}})})}async serverSideEmit(packet){const withAck=typeof packet[packet.length-1]==="function";if(!withAck){return this.publish({type:MessageType.SERVER_SIDE_EMIT,data:{packet:packet}})}const ack=packet.pop();const expectedResponseCount=await this.serverCount()-1;debug('[%s] waiting for %d responses to "serverSideEmit" request',this.uid,expectedResponseCount);if(expectedResponseCount<=0){return ack(null,[])}const requestId=randomId();const timeout=setTimeout(()=>{const storedRequest=this.requests.get(requestId);if(storedRequest){ack(new Error(`timeout reached: only ${storedRequest.current} responses received out of ${storedRequest.expected}`),storedRequest.responses);this.requests.delete(requestId)}},DEFAULT_TIMEOUT);const storedRequest={type:MessageType.SERVER_SIDE_EMIT,resolve:ack,timeout:timeout,current:0,expected:expectedResponseCount,responses:[]};this.requests.set(requestId,storedRequest);this.publish({type:MessageType.SERVER_SIDE_EMIT,data:{requestId:requestId,packet:packet}})}publish(message){this.publishAndReturnOffset(message).catch(err=>{debug("[%s] error while publishing message: %s",this.uid,err)})}publishAndReturnOffset(message){message.uid=this.uid;message.nsp=this.nsp.name;return this.doPublish(message)}publishResponse(requesterUid,response){response.uid=this.uid;response.nsp=this.nsp.name;this.doPublishResponse(requesterUid,response).catch(err=>{debug("[%s] error while publishing response: %s",this.uid,err)})}}exports.ClusterAdapter=ClusterAdapter;class ClusterAdapterWithHeartbeat extends ClusterAdapter{constructor(nsp,opts){super(nsp);this.nodesMap=new Map;this.customRequests=new Map;this._opts=Object.assign({heartbeatInterval:5e3,heartbeatTimeout:1e4},opts);this.cleanupTimer=setInterval(()=>{const now=Date.now();this.nodesMap.forEach((lastSeen,uid)=>{const nodeSeemsDown=now-lastSeen>this._opts.heartbeatTimeout;if(nodeSeemsDown){debug("[%s] node %s seems down",this.uid,uid);this.removeNode(uid)}})},1e3)}init(){this.publish({type:MessageType.INITIAL_HEARTBEAT})}scheduleHeartbeat(){if(this.heartbeatTimer){this.heartbeatTimer.refresh()}else{this.heartbeatTimer=setTimeout(()=>{this.publish({type:MessageType.HEARTBEAT})},this._opts.heartbeatInterval)}}close(){this.publish({type:MessageType.ADAPTER_CLOSE});clearTimeout(this.heartbeatTimer);if(this.cleanupTimer){clearInterval(this.cleanupTimer)}}onMessage(message,offset){if(message.uid===this.uid){return debug("[%s] ignore message from self",this.uid)}if(message.uid&&message.uid!==EMITTER_UID){this.nodesMap.set(message.uid,Date.now())}debug("[%s] new event of type %d from %s",this.uid,message.type,message.uid);switch(message.type){case MessageType.INITIAL_HEARTBEAT:this.publish({type:MessageType.HEARTBEAT});break;case MessageType.HEARTBEAT:break;case MessageType.ADAPTER_CLOSE:this.removeNode(message.uid);break;default:super.onMessage(message,offset)}}serverCount(){return Promise.resolve(1+this.nodesMap.size)}publish(message){this.scheduleHeartbeat();return super.publish(message)}async serverSideEmit(packet){const withAck=typeof packet[packet.length-1]==="function";if(!withAck){return this.publish({type:MessageType.SERVER_SIDE_EMIT,data:{packet:packet}})}const ack=packet.pop();const expectedResponseCount=this.nodesMap.size;debug('[%s] waiting for %d responses to "serverSideEmit" request',this.uid,expectedResponseCount);if(expectedResponseCount<=0){return ack(null,[])}const requestId=randomId();const timeout=setTimeout(()=>{const storedRequest=this.customRequests.get(requestId);if(storedRequest){ack(new Error(`timeout reached: missing ${storedRequest.missingUids.size} responses`),storedRequest.responses);this.customRequests.delete(requestId)}},DEFAULT_TIMEOUT);const storedRequest={type:MessageType.SERVER_SIDE_EMIT,resolve:ack,timeout:timeout,missingUids:new Set([...this.nodesMap.keys()]),responses:[]};this.customRequests.set(requestId,storedRequest);this.publish({type:MessageType.SERVER_SIDE_EMIT,data:{requestId:requestId,packet:packet}})}async fetchSockets(opts){var _a;const[localSockets,serverCount]=await Promise.all([super.fetchSockets({rooms:opts.rooms,except:opts.except,flags:{local:true}}),this.serverCount()]);const expectedResponseCount=serverCount-1;if(((_a=opts.flags)===null||_a===void 0?void 0:_a.local)||expectedResponseCount<=0){return localSockets}const requestId=randomId();return new Promise((resolve,reject)=>{const timeout=setTimeout(()=>{const storedRequest=this.customRequests.get(requestId);if(storedRequest){reject(new Error(`timeout reached: missing ${storedRequest.missingUids.size} responses`));this.customRequests.delete(requestId)}},opts.flags.timeout||DEFAULT_TIMEOUT);const storedRequest={type:MessageType.FETCH_SOCKETS,resolve:resolve,timeout:timeout,missingUids:new Set([...this.nodesMap.keys()]),responses:localSockets};this.customRequests.set(requestId,storedRequest);this.publish({type:MessageType.FETCH_SOCKETS,data:{opts:encodeOptions(opts),requestId:requestId}})})}onResponse(response){const requestId=response.data.requestId;debug("[%s] received response %s to request %s",this.uid,response.type,requestId);switch(response.type){case MessageType.FETCH_SOCKETS_RESPONSE:{const request=this.customRequests.get(requestId);if(!request){return}response.data.sockets.forEach(socket=>request.responses.push(socket));request.missingUids.delete(response.uid);if(request.missingUids.size===0){clearTimeout(request.timeout);request.resolve(request.responses);this.customRequests.delete(requestId)}break}case MessageType.SERVER_SIDE_EMIT_RESPONSE:{const request=this.customRequests.get(requestId);if(!request){return}request.responses.push(response.data.packet);request.missingUids.delete(response.uid);if(request.missingUids.size===0){clearTimeout(request.timeout);request.resolve(null,request.responses);this.customRequests.delete(requestId)}break}default:super.onResponse(response)}}removeNode(uid){this.customRequests.forEach((request,requestId)=>{request.missingUids.delete(uid);if(request.missingUids.size===0){clearTimeout(request.timeout);if(request.type===MessageType.FETCH_SOCKETS){request.resolve(request.responses)}else if(request.type===MessageType.SERVER_SIDE_EMIT){request.resolve(null,request.responses)}this.customRequests.delete(requestId)}});this.nodesMap.delete(uid)}}exports.ClusterAdapterWithHeartbeat=ClusterAdapterWithHeartbeat},{"./in-memory-adapter":311,crypto:undefined,debug:315}],310:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.yeast=exports.decode=exports.encode=void 0;const alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length=64,map={};let seed=0,i=0,prev;function encode(num){let encoded="";do{encoded=alphabet[num%length]+encoded;num=Math.floor(num/length)}while(num>0);return encoded}exports.encode=encode;function decode(str){let decoded=0;for(i=0;i<str.length;i++){decoded=decoded*length+map[str.charAt(i)]}return decoded}exports.decode=decode;function yeast(){const now=encode(+new Date);if(now!==prev)return seed=0,prev=now;return now+"."+encode(seed++)}exports.yeast=yeast;for(;i<length;i++)map[alphabet[i]]=i},{}],311:[function(require,module,exports){"use strict";var _a;Object.defineProperty(exports,"__esModule",{value:true});exports.SessionAwareAdapter=exports.Adapter=void 0;const events_1=require("events");const yeast_1=require("./contrib/yeast");const WebSocket=require("ws");const canPreComputeFrame=typeof((_a=WebSocket===null||WebSocket===void 0?void 0:WebSocket.Sender)===null||_a===void 0?void 0:_a.frame)==="function";class Adapter extends events_1.EventEmitter{constructor(nsp){super();this.nsp=nsp;this.rooms=new Map;this.sids=new Map;this.encoder=nsp.server.encoder}init(){}close(){}serverCount(){return Promise.resolve(1)}addAll(id,rooms){if(!this.sids.has(id)){this.sids.set(id,new Set)}for(const room of rooms){this.sids.get(id).add(room);if(!this.rooms.has(room)){this.rooms.set(room,new Set);this.emit("create-room",room)}if(!this.rooms.get(room).has(id)){this.rooms.get(room).add(id);this.emit("join-room",room,id)}}}del(id,room){if(this.sids.has(id)){this.sids.get(id).delete(room)}this._del(room,id)}_del(room,id){const _room=this.rooms.get(room);if(_room!=null){const deleted=_room.delete(id);if(deleted){this.emit("leave-room",room,id)}if(_room.size===0&&this.rooms.delete(room)){this.emit("delete-room",room)}}}delAll(id){if(!this.sids.has(id)){return}for(const room of this.sids.get(id)){this._del(room,id)}this.sids.delete(id)}broadcast(packet,opts){const flags=opts.flags||{};const packetOpts={preEncoded:true,volatile:flags.volatile,compress:flags.compress};packet.nsp=this.nsp.name;const encodedPackets=this._encode(packet,packetOpts);this.apply(opts,socket=>{if(typeof socket.notifyOutgoingListeners==="function"){socket.notifyOutgoingListeners(packet)}socket.client.writeToEngine(encodedPackets,packetOpts)})}broadcastWithAck(packet,opts,clientCountCallback,ack){const flags=opts.flags||{};const packetOpts={preEncoded:true,volatile:flags.volatile,compress:flags.compress};packet.nsp=this.nsp.name;packet.id=this.nsp._ids++;const encodedPackets=this._encode(packet,packetOpts);let clientCount=0;this.apply(opts,socket=>{clientCount++;socket.acks.set(packet.id,ack);if(typeof socket.notifyOutgoingListeners==="function"){socket.notifyOutgoingListeners(packet)}socket.client.writeToEngine(encodedPackets,packetOpts)});clientCountCallback(clientCount)}_encode(packet,packetOpts){const encodedPackets=this.encoder.encode(packet);if(canPreComputeFrame&&encodedPackets.length===1&&typeof encodedPackets[0]==="string"){const data=Buffer.from("4"+encodedPackets[0]);packetOpts.wsPreEncodedFrame=WebSocket.Sender.frame(data,{readOnly:false,mask:false,rsv1:false,opcode:1,fin:true})}return encodedPackets}sockets(rooms){const sids=new Set;this.apply({rooms:rooms},socket=>{sids.add(socket.id)});return Promise.resolve(sids)}socketRooms(id){return this.sids.get(id)}fetchSockets(opts){const sockets=[];this.apply(opts,socket=>{sockets.push(socket)});return Promise.resolve(sockets)}addSockets(opts,rooms){this.apply(opts,socket=>{socket.join(rooms)})}delSockets(opts,rooms){this.apply(opts,socket=>{rooms.forEach(room=>socket.leave(room))})}disconnectSockets(opts,close){this.apply(opts,socket=>{socket.disconnect(close)})}apply(opts,callback){const rooms=opts.rooms;const except=this.computeExceptSids(opts.except);if(rooms.size){const ids=new Set;for(const room of rooms){if(!this.rooms.has(room))continue;for(const id of this.rooms.get(room)){if(ids.has(id)||except.has(id))continue;const socket=this.nsp.sockets.get(id);if(socket){callback(socket);ids.add(id)}}}}else{for(const[id]of this.sids){if(except.has(id))continue;const socket=this.nsp.sockets.get(id);if(socket)callback(socket)}}}computeExceptSids(exceptRooms){const exceptSids=new Set;if(exceptRooms&&exceptRooms.size>0){for(const room of exceptRooms){if(this.rooms.has(room)){this.rooms.get(room).forEach(sid=>exceptSids.add(sid))}}}return exceptSids}serverSideEmit(packet){console.warn("this adapter does not support the serverSideEmit() functionality")}persistSession(session){}restoreSession(pid,offset){return null}}exports.Adapter=Adapter;class SessionAwareAdapter extends Adapter{constructor(nsp){super(nsp);this.nsp=nsp;this.sessions=new Map;this.packets=[];this.maxDisconnectionDuration=nsp.server.opts.connectionStateRecovery.maxDisconnectionDuration;const timer=setInterval(()=>{const threshold=Date.now()-this.maxDisconnectionDuration;this.sessions.forEach((session,sessionId)=>{const hasExpired=session.disconnectedAt<threshold;if(hasExpired){this.sessions.delete(sessionId)}});for(let i=this.packets.length-1;i>=0;i--){const hasExpired=this.packets[i].emittedAt<threshold;if(hasExpired){this.packets.splice(0,i+1);break}}},60*1e3);timer.unref()}persistSession(session){session.disconnectedAt=Date.now();this.sessions.set(session.pid,session)}restoreSession(pid,offset){const session=this.sessions.get(pid);if(!session){return null}const hasExpired=session.disconnectedAt+this.maxDisconnectionDuration<Date.now();if(hasExpired){this.sessions.delete(pid);return null}const index=this.packets.findIndex(packet=>packet.id===offset);if(index===-1){return null}const missedPackets=[];for(let i=index+1;i<this.packets.length;i++){const packet=this.packets[i];if(shouldIncludePacket(session.rooms,packet.opts)){missedPackets.push(packet.data)}}return Promise.resolve(Object.assign(Object.assign({},session),{missedPackets:missedPackets}))}broadcast(packet,opts){var _a;const isEventPacket=packet.type===2;const withoutAcknowledgement=packet.id===undefined;const notVolatile=((_a=opts.flags)===null||_a===void 0?void 0:_a.volatile)===undefined;if(isEventPacket&&withoutAcknowledgement&&notVolatile){const id=(0,yeast_1.yeast)();packet.data.push(id);this.packets.push({id:id,opts:opts,data:packet.data,emittedAt:Date.now()})}super.broadcast(packet,opts)}}exports.SessionAwareAdapter=SessionAwareAdapter;function shouldIncludePacket(sessionRooms,opts){const included=opts.rooms.size===0||sessionRooms.some(room=>opts.rooms.has(room));const notExcluded=sessionRooms.every(room=>!opts.except.has(room));return included&&notExcluded}},{"./contrib/yeast":310,events:undefined,ws:364}],312:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MessageType=exports.ClusterAdapterWithHeartbeat=exports.ClusterAdapter=exports.SessionAwareAdapter=exports.Adapter=void 0;var in_memory_adapter_1=require("./in-memory-adapter");Object.defineProperty(exports,"Adapter",{enumerable:true,get:function(){return in_memory_adapter_1.Adapter}});Object.defineProperty(exports,"SessionAwareAdapter",{enumerable:true,get:function(){return in_memory_adapter_1.SessionAwareAdapter}});var cluster_adapter_1=require("./cluster-adapter");Object.defineProperty(exports,"ClusterAdapter",{enumerable:true,get:function(){return cluster_adapter_1.ClusterAdapter}});Object.defineProperty(exports,"ClusterAdapterWithHeartbeat",{enumerable:true,get:function(){return cluster_adapter_1.ClusterAdapterWithHeartbeat}});Object.defineProperty(exports,"MessageType",{enumerable:true,get:function(){return cluster_adapter_1.MessageType}})},{"./cluster-adapter":309,"./in-memory-adapter":311}],313:[function(require,module,exports){arguments[4][113][0].apply(exports,arguments)},{"./common":314,dup:113}],314:[function(require,module,exports){arguments[4][114][0].apply(exports,arguments)},{dup:114,ms:212}],315:[function(require,module,exports){arguments[4][115][0].apply(exports,arguments)},{"./browser.js":313,"./node.js":316,dup:115}],316:[function(require,module,exports){arguments[4][116][0].apply(exports,arguments)},{"./common":314,dup:116,"supports-color":341,tty:undefined,util:undefined}],317:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.reconstructPacket=exports.deconstructPacket=void 0;const is_binary_js_1=require("./is-binary.js");function deconstructPacket(packet){const buffers=[];const packetData=packet.data;const pack=packet;pack.data=_deconstructPacket(packetData,buffers);pack.attachments=buffers.length;return{packet:pack,buffers:buffers}}exports.deconstructPacket=deconstructPacket;function _deconstructPacket(data,buffers){if(!data)return data;if((0,is_binary_js_1.isBinary)(data)){const placeholder={_placeholder:true,num:buffers.length};buffers.push(data);return placeholder}else if(Array.isArray(data)){const newData=new Array(data.length);for(let i=0;i<data.length;i++){newData[i]=_deconstructPacket(data[i],buffers)}return newData}else if(typeof data==="object"&&!(data instanceof Date)){const newData={};for(const key in data){if(Object.prototype.hasOwnProperty.call(data,key)){newData[key]=_deconstructPacket(data[key],buffers)}}return newData}return data}function reconstructPacket(packet,buffers){packet.data=_reconstructPacket(packet.data,buffers);delete packet.attachments;return packet}exports.reconstructPacket=reconstructPacket;function _reconstructPacket(data,buffers){if(!data)return data;if(data&&data._placeholder===true){const isIndexValid=typeof data.num==="number"&&data.num>=0&&data.num<buffers.length;if(isIndexValid){return buffers[data.num]}else{throw new Error("illegal attachments")}}else if(Array.isArray(data)){for(let i=0;i<data.length;i++){data[i]=_reconstructPacket(data[i],buffers)}}else if(typeof data==="object"){for(const key in data){if(Object.prototype.hasOwnProperty.call(data,key)){data[key]=_reconstructPacket(data[key],buffers)}}}return data}},{"./is-binary.js":319}],318:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Decoder=exports.Encoder=exports.PacketType=exports.protocol=void 0;const component_emitter_1=require("@socket.io/component-emitter");const binary_js_1=require("./binary.js");const is_binary_js_1=require("./is-binary.js");const debug_1=require("debug");const debug=(0,debug_1.default)("socket.io-parser");const RESERVED_EVENTS=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];exports.protocol=5;var PacketType;(function(PacketType){PacketType[PacketType["CONNECT"]=0]="CONNECT";PacketType[PacketType["DISCONNECT"]=1]="DISCONNECT";PacketType[PacketType["EVENT"]=2]="EVENT";PacketType[PacketType["ACK"]=3]="ACK";PacketType[PacketType["CONNECT_ERROR"]=4]="CONNECT_ERROR";PacketType[PacketType["BINARY_EVENT"]=5]="BINARY_EVENT";PacketType[PacketType["BINARY_ACK"]=6]="BINARY_ACK"})(PacketType=exports.PacketType||(exports.PacketType={}));class Encoder{constructor(replacer){this.replacer=replacer}encode(obj){debug("encoding packet %j",obj);if(obj.type===PacketType.EVENT||obj.type===PacketType.ACK){if((0,is_binary_js_1.hasBinary)(obj)){return this.encodeAsBinary({type:obj.type===PacketType.EVENT?PacketType.BINARY_EVENT:PacketType.BINARY_ACK,nsp:obj.nsp,data:obj.data,id:obj.id})}}return[this.encodeAsString(obj)]}encodeAsString(obj){let str=""+obj.type;if(obj.type===PacketType.BINARY_EVENT||obj.type===PacketType.BINARY_ACK){str+=obj.attachments+"-"}if(obj.nsp&&"/"!==obj.nsp){str+=obj.nsp+","}if(null!=obj.id){str+=obj.id}if(null!=obj.data){str+=JSON.stringify(obj.data,this.replacer)}debug("encoded %j as %s",obj,str);return str}encodeAsBinary(obj){const deconstruction=(0,binary_js_1.deconstructPacket)(obj);const pack=this.encodeAsString(deconstruction.packet);const buffers=deconstruction.buffers;buffers.unshift(pack);return buffers}}exports.Encoder=Encoder;function isObject(value){return Object.prototype.toString.call(value)==="[object Object]"}class Decoder extends component_emitter_1.Emitter{constructor(reviver){super();this.reviver=reviver}add(obj){let packet;if(typeof obj==="string"){if(this.reconstructor){throw new Error("got plaintext data when reconstructing a packet")}packet=this.decodeString(obj);const isBinaryEvent=packet.type===PacketType.BINARY_EVENT;if(isBinaryEvent||packet.type===PacketType.BINARY_ACK){packet.type=isBinaryEvent?PacketType.EVENT:PacketType.ACK;this.reconstructor=new BinaryReconstructor(packet);if(packet.attachments===0){super.emitReserved("decoded",packet)}}else{super.emitReserved("decoded",packet)}}else if((0,is_binary_js_1.isBinary)(obj)||obj.base64){if(!this.reconstructor){throw new Error("got binary data when not reconstructing a packet")}else{packet=this.reconstructor.takeBinaryData(obj);if(packet){this.reconstructor=null;super.emitReserved("decoded",packet)}}}else{throw new Error("Unknown type: "+obj)}}decodeString(str){let i=0;const p={type:Number(str.charAt(0))};if(PacketType[p.type]===undefined){throw new Error("unknown packet type "+p.type)}if(p.type===PacketType.BINARY_EVENT||p.type===PacketType.BINARY_ACK){const start=i+1;while(str.charAt(++i)!=="-"&&i!=str.length){}const buf=str.substring(start,i);if(buf!=Number(buf)||str.charAt(i)!=="-"){throw new Error("Illegal attachments")}p.attachments=Number(buf)}if("/"===str.charAt(i+1)){const start=i+1;while(++i){const c=str.charAt(i);if(","===c)break;if(i===str.length)break}p.nsp=str.substring(start,i)}else{p.nsp="/"}const next=str.charAt(i+1);if(""!==next&&Number(next)==next){const start=i+1;while(++i){const c=str.charAt(i);if(null==c||Number(c)!=c){--i;break}if(i===str.length)break}p.id=Number(str.substring(start,i+1))}if(str.charAt(++i)){const payload=this.tryParse(str.substr(i));if(Decoder.isPayloadValid(p.type,payload)){p.data=payload}else{throw new Error("invalid payload")}}debug("decoded %s as %j",str,p);return p}tryParse(str){try{return JSON.parse(str,this.reviver)}catch(e){return false}}static isPayloadValid(type,payload){switch(type){case PacketType.CONNECT:return isObject(payload);case PacketType.DISCONNECT:return payload===undefined;case PacketType.CONNECT_ERROR:return typeof payload==="string"||isObject(payload);case PacketType.EVENT:case PacketType.BINARY_EVENT:return Array.isArray(payload)&&(typeof payload[0]==="number"||typeof payload[0]==="string"&&RESERVED_EVENTS.indexOf(payload[0])===-1);case PacketType.ACK:case PacketType.BINARY_ACK:return Array.isArray(payload)}}destroy(){if(this.reconstructor){this.reconstructor.finishedReconstruction();this.reconstructor=null}}}exports.Decoder=Decoder;class BinaryReconstructor{constructor(packet){this.packet=packet;this.buffers=[];this.reconPack=packet}takeBinaryData(binData){this.buffers.push(binData);if(this.buffers.length===this.reconPack.attachments){const packet=(0,binary_js_1.reconstructPacket)(this.reconPack,this.buffers);this.finishedReconstruction();return packet}return null}finishedReconstruction(){this.reconPack=null;this.buffers=[]}}},{"./binary.js":317,"./is-binary.js":319,"@socket.io/component-emitter":22,debug:322}],319:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.hasBinary=exports.isBinary=void 0;const withNativeArrayBuffer=typeof ArrayBuffer==="function";const isView=obj=>typeof ArrayBuffer.isView==="function"?ArrayBuffer.isView(obj):obj.buffer instanceof ArrayBuffer;const toString=Object.prototype.toString;const withNativeBlob=typeof Blob==="function"||typeof Blob!=="undefined"&&toString.call(Blob)==="[object BlobConstructor]";const withNativeFile=typeof File==="function"||typeof File!=="undefined"&&toString.call(File)==="[object FileConstructor]";function isBinary(obj){return withNativeArrayBuffer&&(obj instanceof ArrayBuffer||isView(obj))||withNativeBlob&&obj instanceof Blob||withNativeFile&&obj instanceof File}exports.isBinary=isBinary;function hasBinary(obj,toJSON){if(!obj||typeof obj!=="object"){return false}if(Array.isArray(obj)){for(let i=0,l=obj.length;i<l;i++){if(hasBinary(obj[i])){return true}}return false}if(isBinary(obj)){return true}if(obj.toJSON&&typeof obj.toJSON==="function"&&arguments.length===1){return hasBinary(obj.toJSON(),true)}for(const key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)&&hasBinary(obj[key])){return true}}return false}exports.hasBinary=hasBinary},{}],320:[function(require,module,exports){arguments[4][113][0].apply(exports,arguments)},{"./common":321,dup:113}],321:[function(require,module,exports){arguments[4][114][0].apply(exports,arguments)},{dup:114,ms:212}],322:[function(require,module,exports){arguments[4][115][0].apply(exports,arguments)},{"./browser.js":320,"./node.js":323,dup:115}],323:[function(require,module,exports){arguments[4][116][0].apply(exports,arguments)},{"./common":321,dup:116,"supports-color":341,tty:undefined,util:undefined}],324:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RemoteSocket=exports.BroadcastOperator=void 0;const socket_types_1=require("./socket-types");const socket_io_parser_1=require("socket.io-parser");class BroadcastOperator{constructor(adapter,rooms=new Set,exceptRooms=new Set,flags={}){this.adapter=adapter;this.rooms=rooms;this.exceptRooms=exceptRooms;this.flags=flags}to(room){const rooms=new Set(this.rooms);if(Array.isArray(room)){room.forEach(r=>rooms.add(r))}else{rooms.add(room)}return new BroadcastOperator(this.adapter,rooms,this.exceptRooms,this.flags)}in(room){return this.to(room)}except(room){const exceptRooms=new Set(this.exceptRooms);if(Array.isArray(room)){room.forEach(r=>exceptRooms.add(r))}else{exceptRooms.add(room)}return new BroadcastOperator(this.adapter,this.rooms,exceptRooms,this.flags)}compress(compress){const flags=Object.assign({},this.flags,{compress:compress});return new BroadcastOperator(this.adapter,this.rooms,this.exceptRooms,flags)}get volatile(){const flags=Object.assign({},this.flags,{volatile:true});return new BroadcastOperator(this.adapter,this.rooms,this.exceptRooms,flags)}get local(){const flags=Object.assign({},this.flags,{local:true});return new BroadcastOperator(this.adapter,this.rooms,this.exceptRooms,flags)}timeout(timeout){const flags=Object.assign({},this.flags,{timeout:timeout});return new BroadcastOperator(this.adapter,this.rooms,this.exceptRooms,flags)}emit(ev,...args){if(socket_types_1.RESERVED_EVENTS.has(ev)){throw new Error(`"${String(ev)}" is a reserved event name`)}const data=[ev,...args];const packet={type:socket_io_parser_1.PacketType.EVENT,data:data};const withAck=typeof data[data.length-1]==="function";if(!withAck){this.adapter.broadcast(packet,{rooms:this.rooms,except:this.exceptRooms,flags:this.flags});return true}const ack=data.pop();let timedOut=false;let responses=[];const timer=setTimeout(()=>{timedOut=true;ack.apply(this,[new Error("operation has timed out"),this.flags.expectSingleResponse?null:responses])},this.flags.timeout);let expectedServerCount=-1;let actualServerCount=0;let expectedClientCount=0;const checkCompleteness=()=>{if(!timedOut&&expectedServerCount===actualServerCount&&responses.length===expectedClientCount){clearTimeout(timer);ack.apply(this,[null,this.flags.expectSingleResponse?responses[0]:responses])}};this.adapter.broadcastWithAck(packet,{rooms:this.rooms,except:this.exceptRooms,flags:this.flags},clientCount=>{expectedClientCount+=clientCount;actualServerCount++;checkCompleteness()},clientResponse=>{responses.push(clientResponse);checkCompleteness()});this.adapter.serverCount().then(serverCount=>{expectedServerCount=serverCount;checkCompleteness()});return true}emitWithAck(ev,...args){return new Promise((resolve,reject)=>{args.push((err,responses)=>{if(err){err.responses=responses;return reject(err)}else{return resolve(responses)}});this.emit(ev,...args)})}allSockets(){if(!this.adapter){throw new Error("No adapter for this namespace, are you trying to get the list of clients of a dynamic namespace?")}return this.adapter.sockets(this.rooms)}fetchSockets(){return this.adapter.fetchSockets({rooms:this.rooms,except:this.exceptRooms,flags:this.flags}).then(sockets=>sockets.map(socket=>{if(socket.server){return socket}else{return new RemoteSocket(this.adapter,socket)}}))}socketsJoin(room){this.adapter.addSockets({rooms:this.rooms,except:this.exceptRooms,flags:this.flags},Array.isArray(room)?room:[room])}socketsLeave(room){this.adapter.delSockets({rooms:this.rooms,except:this.exceptRooms,flags:this.flags},Array.isArray(room)?room:[room])}disconnectSockets(close=false){this.adapter.disconnectSockets({rooms:this.rooms,except:this.exceptRooms,flags:this.flags},close)}}exports.BroadcastOperator=BroadcastOperator;class RemoteSocket{constructor(adapter,details){this.id=details.id;this.handshake=details.handshake;this.rooms=new Set(details.rooms);this.data=details.data;this.operator=new BroadcastOperator(adapter,new Set([this.id]),new Set,{expectSingleResponse:true})}timeout(timeout){return this.operator.timeout(timeout)}emit(ev,...args){return this.operator.emit(ev,...args)}join(room){return this.operator.socketsJoin(room)}leave(room){return this.operator.socketsLeave(room)}disconnect(close=false){this.operator.disconnectSockets(close);return this}}exports.RemoteSocket=RemoteSocket},{"./socket-types":329,"socket.io-parser":318}],325:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Client=void 0;const socket_io_parser_1=require("socket.io-parser");const debugModule=require("debug");const url=require("url");const debug=debugModule("socket.io:client");class Client{constructor(server,conn){this.sockets=new Map;this.nsps=new Map;this.server=server;this.conn=conn;this.encoder=server.encoder;this.decoder=new server._parser.Decoder;this.id=conn.id;this.setup()}get request(){return this.conn.request}setup(){this.onclose=this.onclose.bind(this);this.ondata=this.ondata.bind(this);this.onerror=this.onerror.bind(this);this.ondecoded=this.ondecoded.bind(this);this.decoder.on("decoded",this.ondecoded);this.conn.on("data",this.ondata);this.conn.on("error",this.onerror);this.conn.on("close",this.onclose);this.connectTimeout=setTimeout(()=>{if(this.nsps.size===0){debug("no namespace joined yet, close the client");this.close()}else{debug("the client has already joined a namespace, nothing to do")}},this.server._connectTimeout)}connect(name,auth={}){if(this.server._nsps.has(name)){debug("connecting to namespace %s",name);return this.doConnect(name,auth)}this.server._checkNamespace(name,auth,dynamicNspName=>{if(dynamicNspName){this.doConnect(name,auth)}else{debug("creation of namespace %s was denied",name);this._packet({type:socket_io_parser_1.PacketType.CONNECT_ERROR,nsp:name,data:{message:"Invalid namespace"}})}})}doConnect(name,auth){const nsp=this.server.of(name);nsp._add(this,auth,socket=>{this.sockets.set(socket.id,socket);this.nsps.set(nsp.name,socket);if(this.connectTimeout){clearTimeout(this.connectTimeout);this.connectTimeout=undefined}})}_disconnect(){for(const socket of this.sockets.values()){socket.disconnect()}this.sockets.clear();this.close()}_remove(socket){if(this.sockets.has(socket.id)){const nsp=this.sockets.get(socket.id).nsp.name;this.sockets.delete(socket.id);this.nsps.delete(nsp)}else{debug("ignoring remove for %s",socket.id)}}close(){if("open"===this.conn.readyState){debug("forcing transport close");this.conn.close();this.onclose("forced server close")}}_packet(packet,opts={}){if(this.conn.readyState!=="open"){debug("ignoring packet write %j",packet);return}const encodedPackets=opts.preEncoded?packet:this.encoder.encode(packet);this.writeToEngine(encodedPackets,opts)}writeToEngine(encodedPackets,opts){if(opts.volatile&&!this.conn.transport.writable){debug("volatile packet is discarded since the transport is not currently writable");return}const packets=Array.isArray(encodedPackets)?encodedPackets:[encodedPackets];for(const encodedPacket of packets){this.conn.write(encodedPacket,opts)}}ondata(data){try{this.decoder.add(data)}catch(e){debug("invalid packet format");this.onerror(e)}}ondecoded(packet){let namespace;let authPayload;if(this.conn.protocol===3){const parsed=url.parse(packet.nsp,true);namespace=parsed.pathname;authPayload=parsed.query}else{namespace=packet.nsp;authPayload=packet.data}const socket=this.nsps.get(namespace);if(!socket&&packet.type===socket_io_parser_1.PacketType.CONNECT){this.connect(namespace,authPayload)}else if(socket&&packet.type!==socket_io_parser_1.PacketType.CONNECT&&packet.type!==socket_io_parser_1.PacketType.CONNECT_ERROR){process.nextTick(function(){socket._onpacket(packet)})}else{debug("invalid state (packet type: %s)",packet.type);this.close()}}onerror(err){for(const socket of this.sockets.values()){socket._onerror(err)}this.conn.close()}onclose(reason,description){debug("client close with reason %s",reason);this.destroy();for(const socket of this.sockets.values()){socket._onclose(reason,description)}this.sockets.clear();this.decoder.destroy()}destroy(){this.conn.removeListener("data",this.ondata);this.conn.removeListener("error",this.onerror);this.conn.removeListener("close",this.onclose);this.decoder.removeListener("decoded",this.ondecoded);if(this.connectTimeout){clearTimeout(this.connectTimeout);this.connectTimeout=undefined}}}exports.Client=Client},{debug:335,"socket.io-parser":318,url:undefined}],326:[function(require,module,exports){(function(__dirname){(function(){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.Namespace=exports.Socket=exports.Server=void 0;const http=require("http");const fs_1=require("fs");const zlib_1=require("zlib");const accepts=require("accepts");const stream_1=require("stream");const path=require("path");const engine_io_1=require("engine.io");const client_1=require("./client");const events_1=require("events");const namespace_1=require("./namespace");Object.defineProperty(exports,"Namespace",{enumerable:true,get:function(){return namespace_1.Namespace}});const parent_namespace_1=require("./parent-namespace");const socket_io_adapter_1=require("socket.io-adapter");const parser=__importStar(require("socket.io-parser"));const debug_1=__importDefault(require("debug"));const socket_1=require("./socket");Object.defineProperty(exports,"Socket",{enumerable:true,get:function(){return socket_1.Socket}});const typed_events_1=require("./typed-events");const uws_1=require("./uws");const cors_1=__importDefault(require("cors"));const debug=(0,debug_1.default)("socket.io:server");const clientVersion=require("../package.json").version;const dotMapRegex=/\.map/;class Server extends typed_events_1.StrictEventEmitter{constructor(srv,opts={}){super();this._nsps=new Map;this.parentNsps=new Map;this.parentNamespacesFromRegExp=new Map;if("object"===typeof srv&&srv instanceof Object&&!srv.listen){opts=srv;srv=undefined}this.path(opts.path||"/socket.io");this.connectTimeout(opts.connectTimeout||45e3);this.serveClient(false!==opts.serveClient);this._parser=opts.parser||parser;this.encoder=new this._parser.Encoder;this.opts=opts;if(opts.connectionStateRecovery){opts.connectionStateRecovery=Object.assign({maxDisconnectionDuration:2*60*1e3,skipMiddlewares:true},opts.connectionStateRecovery);this.adapter(opts.adapter||socket_io_adapter_1.SessionAwareAdapter)}else{this.adapter(opts.adapter||socket_io_adapter_1.Adapter)}opts.cleanupEmptyChildNamespaces=!!opts.cleanupEmptyChildNamespaces;this.sockets=this.of("/");if(srv||typeof srv=="number")this.attach(srv);if(this.opts.cors){this._corsMiddleware=(0,cors_1.default)(this.opts.cors)}}get _opts(){return this.opts}serveClient(v){if(!arguments.length)return this._serveClient;this._serveClient=v;return this}_checkNamespace(name,auth,fn){if(this.parentNsps.size===0)return fn(false);const keysIterator=this.parentNsps.keys();const run=()=>{const nextFn=keysIterator.next();if(nextFn.done){return fn(false)}nextFn.value(name,auth,(err,allow)=>{if(err||!allow){return run()}if(this._nsps.has(name)){debug("dynamic namespace %s already exists",name);return fn(this._nsps.get(name))}const namespace=this.parentNsps.get(nextFn.value).createChild(name);debug("dynamic namespace %s was created",name);fn(namespace)})};run()}path(v){if(!arguments.length)return this._path;this._path=v.replace(/\/$/,"");const escapedPath=this._path.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");this.clientPathRegex=new RegExp("^"+escapedPath+"/socket\\.io(\\.msgpack|\\.esm)?(\\.min)?\\.js(\\.map)?(?:\\?|$)");return this}connectTimeout(v){if(v===undefined)return this._connectTimeout;this._connectTimeout=v;return this}adapter(v){if(!arguments.length)return this._adapter;this._adapter=v;for(const nsp of this._nsps.values()){nsp._initAdapter()}return this}listen(srv,opts={}){return this.attach(srv,opts)}attach(srv,opts={}){if("function"==typeof srv){const msg="You are trying to attach socket.io to an express "+"request handler function. Please pass a http.Server instance.";throw new Error(msg)}if(Number(srv)==srv){srv=Number(srv)}if("number"==typeof srv){debug("creating http server and binding to %d",srv);const port=srv;srv=http.createServer((req,res)=>{res.writeHead(404);res.end()});srv.listen(port)}Object.assign(opts,this.opts);opts.path=opts.path||this._path;this.initEngine(srv,opts);return this}attachApp(app,opts={}){Object.assign(opts,this.opts);opts.path=opts.path||this._path;debug("creating uWebSockets.js-based engine with opts %j",opts);const engine=new engine_io_1.uServer(opts);engine.attach(app,opts);this.bind(engine);if(this._serveClient){app.get(`${this._path}/*`,(res,req)=>{if(!this.clientPathRegex.test(req.getUrl())){req.setYield(true);return}const filename=req.getUrl().replace(this._path,"").replace(/\?.*$/,"").replace(/^\//,"");const isMap=dotMapRegex.test(filename);const type=isMap?"map":"source";const expectedEtag='"'+clientVersion+'"';const weakEtag="W/"+expectedEtag;const etag=req.getHeader("if-none-match");if(etag){if(expectedEtag===etag||weakEtag===etag){debug("serve client %s 304",type);res.writeStatus("304 Not Modified");res.end();return}}debug("serve client %s",type);res.writeHeader("cache-control","public, max-age=0");res.writeHeader("content-type","application/"+(isMap?"json":"javascript")+"; charset=utf-8");res.writeHeader("etag",expectedEtag);const filepath=path.join(__dirname,"../client-dist/",filename);(0,uws_1.serveFile)(res,filepath)})}(0,uws_1.patchAdapter)(app)}initEngine(srv,opts){debug("creating engine.io instance with opts %j",opts);this.eio=(0,engine_io_1.attach)(srv,opts);if(this._serveClient)this.attachServe(srv);this.httpServer=srv;this.bind(this.eio)}attachServe(srv){debug("attaching client serving req handler");const evs=srv.listeners("request").slice(0);srv.removeAllListeners("request");srv.on("request",(req,res)=>{if(this.clientPathRegex.test(req.url)){if(this._corsMiddleware){this._corsMiddleware(req,res,()=>{this.serve(req,res)})}else{this.serve(req,res)}}else{for(let i=0;i<evs.length;i++){evs[i].call(srv,req,res)}}})}serve(req,res){const filename=req.url.replace(this._path,"").replace(/\?.*$/,"");const isMap=dotMapRegex.test(filename);const type=isMap?"map":"source";const expectedEtag='"'+clientVersion+'"';const weakEtag="W/"+expectedEtag;const etag=req.headers["if-none-match"];if(etag){if(expectedEtag===etag||weakEtag===etag){debug("serve client %s 304",type);res.writeHead(304);res.end();return}}debug("serve client %s",type);res.setHeader("Cache-Control","public, max-age=0");res.setHeader("Content-Type","application/"+(isMap?"json":"javascript")+"; charset=utf-8");res.setHeader("ETag",expectedEtag);Server.sendFile(filename,req,res)}static sendFile(filename,req,res){const readStream=(0,fs_1.createReadStream)(path.join(__dirname,"../client-dist/",filename));const encoding=accepts(req).encodings(["br","gzip","deflate"]);const onError=err=>{if(err){res.end()}};switch(encoding){case"br":res.writeHead(200,{"content-encoding":"br"});(0,stream_1.pipeline)(readStream,(0,zlib_1.createBrotliCompress)(),res,onError);break;case"gzip":res.writeHead(200,{"content-encoding":"gzip"});(0,stream_1.pipeline)(readStream,(0,zlib_1.createGzip)(),res,onError);break;case"deflate":res.writeHead(200,{"content-encoding":"deflate"});(0,stream_1.pipeline)(readStream,(0,zlib_1.createDeflate)(),res,onError);break;default:res.writeHead(200);(0,stream_1.pipeline)(readStream,res,onError)}}bind(engine){this.engine=engine;this.engine.on("connection",this.onconnection.bind(this));return this}onconnection(conn){debug("incoming connection with id %s",conn.id);const client=new client_1.Client(this,conn);if(conn.protocol===3){client.connect("/")}return this}of(name,fn){if(typeof name==="function"||name instanceof RegExp){const parentNsp=new parent_namespace_1.ParentNamespace(this);debug("initializing parent namespace %s",parentNsp.name);if(typeof name==="function"){this.parentNsps.set(name,parentNsp)}else{this.parentNsps.set((nsp,conn,next)=>next(null,name.test(nsp)),parentNsp);this.parentNamespacesFromRegExp.set(name,parentNsp)}if(fn){parentNsp.on("connect",fn)}return parentNsp}if(String(name)[0]!=="/")name="/"+name;let nsp=this._nsps.get(name);if(!nsp){for(const[regex,parentNamespace]of this.parentNamespacesFromRegExp){if(regex.test(name)){debug("attaching namespace %s to parent namespace %s",name,regex);return parentNamespace.createChild(name)}}debug("initializing namespace %s",name);nsp=new namespace_1.Namespace(this,name);this._nsps.set(name,nsp);if(name!=="/"){this.sockets.emitReserved("new_namespace",nsp)}}if(fn)nsp.on("connect",fn);return nsp}async close(fn){await Promise.allSettled([...this._nsps.values()].map(async nsp=>{nsp.sockets.forEach(socket=>{socket._onclose("server shutting down")});await nsp.adapter.close()}));this.engine.close();(0,uws_1.restoreAdapter)();if(this.httpServer){this.httpServer.close(fn)}else{fn&&fn()}}use(fn){this.sockets.use(fn);return this}to(room){return this.sockets.to(room)}in(room){return this.sockets.in(room)}except(room){return this.sockets.except(room)}send(...args){this.sockets.emit("message",...args);return this}write(...args){this.sockets.emit("message",...args);return this}serverSideEmit(ev,...args){return this.sockets.serverSideEmit(ev,...args)}serverSideEmitWithAck(ev,...args){return this.sockets.serverSideEmitWithAck(ev,...args)}allSockets(){return this.sockets.allSockets()}compress(compress){return this.sockets.compress(compress)}get volatile(){return this.sockets.volatile}get local(){return this.sockets.local}timeout(timeout){return this.sockets.timeout(timeout)}fetchSockets(){return this.sockets.fetchSockets()}socketsJoin(room){return this.sockets.socketsJoin(room)}socketsLeave(room){return this.sockets.socketsLeave(room)}disconnectSockets(close=false){return this.sockets.disconnectSockets(close)}}exports.Server=Server;const emitterMethods=Object.keys(events_1.EventEmitter.prototype).filter(function(key){return typeof events_1.EventEmitter.prototype[key]==="function"});emitterMethods.forEach(function(fn){Server.prototype[fn]=function(){return this.sockets[fn].apply(this.sockets,arguments)}});module.exports=(srv,opts)=>new Server(srv,opts);module.exports.Server=Server;module.exports.Namespace=namespace_1.Namespace;module.exports.Socket=socket_1.Socket}).call(this)}).call(this,require("path").join(__dirname,"node_modules","socket.io","dist"))},{"../package.json":337,"./client":325,"./namespace":327,"./parent-namespace":328,"./socket":330,"./typed-events":331,"./uws":332,accepts:24,cors:47,debug:335,"engine.io":97,events:undefined,fs:undefined,http:undefined,path:undefined,"socket.io-adapter":312,"socket.io-parser":318,stream:undefined,zlib:undefined}],327:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.Namespace=exports.RESERVED_EVENTS=void 0;const socket_1=require("./socket");const typed_events_1=require("./typed-events");const debug_1=__importDefault(require("debug"));const broadcast_operator_1=require("./broadcast-operator");const debug=(0,debug_1.default)("socket.io:namespace");exports.RESERVED_EVENTS=new Set(["connect","connection","new_namespace"]);class Namespace extends typed_events_1.StrictEventEmitter{constructor(server,name){super();this.sockets=new Map;this._preConnectSockets=new Map;this._fns=[];this._ids=0;this.server=server;this.name=name;this._initAdapter()}_initAdapter(){this.adapter=new(this.server.adapter())(this)}use(fn){this._fns.push(fn);return this}run(socket,fn){if(!this._fns.length)return fn();const fns=this._fns.slice(0);function run(i){fns[i](socket,err=>{if(err)return fn(err);if(!fns[i+1])return fn();run(i+1)})}run(0)}to(room){return new broadcast_operator_1.BroadcastOperator(this.adapter).to(room)}in(room){return new broadcast_operator_1.BroadcastOperator(this.adapter).in(room)}except(room){return new broadcast_operator_1.BroadcastOperator(this.adapter).except(room)}async _add(client,auth,fn){var _a;debug("adding socket to nsp %s",this.name);const socket=await this._createSocket(client,auth);this._preConnectSockets.set(socket.id,socket);if(((_a=this.server.opts.connectionStateRecovery)===null||_a===void 0?void 0:_a.skipMiddlewares)&&socket.recovered&&client.conn.readyState==="open"){return this._doConnect(socket,fn)}this.run(socket,err=>{process.nextTick(()=>{if("open"!==client.conn.readyState){debug("next called after client was closed - ignoring socket");socket._cleanup();return}if(err){debug("middleware error, sending CONNECT_ERROR packet to the client");socket._cleanup();if(client.conn.protocol===3){return socket._error(err.data||err.message)}else{return socket._error({message:err.message,data:err.data})}}this._doConnect(socket,fn)})})}async _createSocket(client,auth){const sessionId=auth.pid;const offset=auth.offset;if(this.server.opts.connectionStateRecovery&&typeof sessionId==="string"&&typeof offset==="string"){let session;try{session=await this.adapter.restoreSession(sessionId,offset)}catch(e){debug("error while restoring session: %s",e)}if(session){debug("connection state recovered for sid %s",session.sid);return new socket_1.Socket(this,client,auth,session)}}return new socket_1.Socket(this,client,auth)}_doConnect(socket,fn){this._preConnectSockets.delete(socket.id);this.sockets.set(socket.id,socket);socket._onconnect();if(fn)fn(socket);this.emitReserved("connect",socket);this.emitReserved("connection",socket)}_remove(socket){this.sockets.delete(socket.id)||this._preConnectSockets.delete(socket.id)}emit(ev,...args){return new broadcast_operator_1.BroadcastOperator(this.adapter).emit(ev,...args)}send(...args){this.emit("message",...args);return this}write(...args){this.emit("message",...args);return this}serverSideEmit(ev,...args){if(exports.RESERVED_EVENTS.has(ev)){throw new Error(`"${String(ev)}" is a reserved event name`)}args.unshift(ev);this.adapter.serverSideEmit(args);return true}serverSideEmitWithAck(ev,...args){return new Promise((resolve,reject)=>{args.push((err,responses)=>{if(err){err.responses=responses;return reject(err)}else{return resolve(responses)}});this.serverSideEmit(ev,...args)})}_onServerSideEmit(args){super.emitUntyped.apply(this,args)}allSockets(){return new broadcast_operator_1.BroadcastOperator(this.adapter).allSockets()}compress(compress){return new broadcast_operator_1.BroadcastOperator(this.adapter).compress(compress)}get volatile(){return new broadcast_operator_1.BroadcastOperator(this.adapter).volatile}get local(){return new broadcast_operator_1.BroadcastOperator(this.adapter).local}timeout(timeout){return new broadcast_operator_1.BroadcastOperator(this.adapter).timeout(timeout)}fetchSockets(){return new broadcast_operator_1.BroadcastOperator(this.adapter).fetchSockets()}socketsJoin(room){return new broadcast_operator_1.BroadcastOperator(this.adapter).socketsJoin(room)}socketsLeave(room){return new broadcast_operator_1.BroadcastOperator(this.adapter).socketsLeave(room)}disconnectSockets(close=false){return new broadcast_operator_1.BroadcastOperator(this.adapter).disconnectSockets(close)}}exports.Namespace=Namespace},{"./broadcast-operator":324,"./socket":330,"./typed-events":331,debug:335}],328:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.ParentNamespace=void 0;const namespace_1=require("./namespace");const socket_io_adapter_1=require("socket.io-adapter");const debug_1=__importDefault(require("debug"));const debug=(0,debug_1.default)("socket.io:parent-namespace");class ParentNamespace extends namespace_1.Namespace{constructor(server){super(server,"/_"+ParentNamespace.count++);this.children=new Set}_initAdapter(){this.adapter=new ParentBroadcastAdapter(this)}emit(ev,...args){this.children.forEach(nsp=>{nsp.emit(ev,...args)});return true}createChild(name){debug("creating child namespace %s",name);const namespace=new namespace_1.Namespace(this.server,name);this["_fns"].forEach(fn=>namespace.use(fn));this.listeners("connect").forEach(listener=>namespace.on("connect",listener));this.listeners("connection").forEach(listener=>namespace.on("connection",listener));this.children.add(namespace);if(this.server._opts.cleanupEmptyChildNamespaces){const remove=namespace._remove;namespace._remove=socket=>{remove.call(namespace,socket);if(namespace.sockets.size===0){debug("closing child namespace %s",name);namespace.adapter.close();this.server._nsps.delete(namespace.name);this.children.delete(namespace)}}}this.server._nsps.set(name,namespace);this.server.sockets.emitReserved("new_namespace",namespace);return namespace}fetchSockets(){throw new Error("fetchSockets() is not supported on parent namespaces")}}exports.ParentNamespace=ParentNamespace;ParentNamespace.count=0;class ParentBroadcastAdapter extends socket_io_adapter_1.Adapter{broadcast(packet,opts){this.nsp.children.forEach(nsp=>{nsp.adapter.broadcast(packet,opts)})}}},{"./namespace":327,debug:335,"socket.io-adapter":312}],329:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RESERVED_EVENTS=void 0;exports.RESERVED_EVENTS=new Set(["connect","connect_error","disconnect","disconnecting","newListener","removeListener"])},{}],330:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.Socket=void 0;const socket_io_parser_1=require("socket.io-parser");const debug_1=__importDefault(require("debug"));const typed_events_1=require("./typed-events");const base64id_1=__importDefault(require("base64id"));const broadcast_operator_1=require("./broadcast-operator");const socket_types_1=require("./socket-types");const debug=(0,debug_1.default)("socket.io:socket");const RECOVERABLE_DISCONNECT_REASONS=new Set(["transport error","transport close","forced close","ping timeout","server shutting down","forced server close"]);function noop(){}class Socket extends typed_events_1.StrictEventEmitter{constructor(nsp,client,auth,previousSession){super();this.nsp=nsp;this.client=client;this.recovered=false;this.data={};this.connected=false;this.acks=new Map;this.fns=[];this.flags={};this.server=nsp.server;this.adapter=this.nsp.adapter;if(previousSession){this.id=previousSession.sid;this.pid=previousSession.pid;previousSession.rooms.forEach(room=>this.join(room));this.data=previousSession.data;previousSession.missedPackets.forEach(packet=>{this.packet({type:socket_io_parser_1.PacketType.EVENT,data:packet})});this.recovered=true}else{if(client.conn.protocol===3){this.id=nsp.name!=="/"?nsp.name+"#"+client.id:client.id}else{this.id=base64id_1.default.generateId()}if(this.server._opts.connectionStateRecovery){this.pid=base64id_1.default.generateId()}}this.handshake=this.buildHandshake(auth);this.on("error",noop)}buildHandshake(auth){var _a,_b,_c,_d;return{headers:((_a=this.request)===null||_a===void 0?void 0:_a.headers)||{},time:new Date+"",address:this.conn.remoteAddress,xdomain:!!((_b=this.request)===null||_b===void 0?void 0:_b.headers.origin),secure:!this.request||!!this.request.connection.encrypted,issued:+new Date,url:(_c=this.request)===null||_c===void 0?void 0:_c.url,query:((_d=this.request)===null||_d===void 0?void 0:_d._query)||{},auth:auth}}emit(ev,...args){if(socket_types_1.RESERVED_EVENTS.has(ev)){throw new Error(`"${String(ev)}" is a reserved event name`)}const data=[ev,...args];const packet={type:socket_io_parser_1.PacketType.EVENT,data:data};if(typeof data[data.length-1]==="function"){const id=this.nsp._ids++;debug("emitting packet with ack id %d",id);this.registerAckCallback(id,data.pop());packet.id=id}const flags=Object.assign({},this.flags);this.flags={};if(this.nsp.server.opts.connectionStateRecovery){this.adapter.broadcast(packet,{rooms:new Set([this.id]),except:new Set,flags:flags})}else{this.notifyOutgoingListeners(packet);this.packet(packet,flags)}return true}emitWithAck(ev,...args){const withErr=this.flags.timeout!==undefined;return new Promise((resolve,reject)=>{args.push((arg1,arg2)=>{if(withErr){return arg1?reject(arg1):resolve(arg2)}else{return resolve(arg1)}});this.emit(ev,...args)})}registerAckCallback(id,ack){const timeout=this.flags.timeout;if(timeout===undefined){this.acks.set(id,ack);return}const timer=setTimeout(()=>{debug("event with ack id %d has timed out after %d ms",id,timeout);this.acks.delete(id);ack.call(this,new Error("operation has timed out"))},timeout);this.acks.set(id,(...args)=>{clearTimeout(timer);ack.apply(this,[null,...args])})}to(room){return this.newBroadcastOperator().to(room)}in(room){return this.newBroadcastOperator().in(room)}except(room){return this.newBroadcastOperator().except(room)}send(...args){this.emit("message",...args);return this}write(...args){this.emit("message",...args);return this}packet(packet,opts={}){packet.nsp=this.nsp.name;opts.compress=false!==opts.compress;this.client._packet(packet,opts)}join(rooms){debug("join room %s",rooms);return this.adapter.addAll(this.id,new Set(Array.isArray(rooms)?rooms:[rooms]))}leave(room){debug("leave room %s",room);return this.adapter.del(this.id,room)}leaveAll(){this.adapter.delAll(this.id)}_onconnect(){debug("socket connected - writing packet");this.connected=true;this.join(this.id);if(this.conn.protocol===3){this.packet({type:socket_io_parser_1.PacketType.CONNECT})}else{this.packet({type:socket_io_parser_1.PacketType.CONNECT,data:{sid:this.id,pid:this.pid}})}}_onpacket(packet){debug("got packet %j",packet);switch(packet.type){case socket_io_parser_1.PacketType.EVENT:this.onevent(packet);break;case socket_io_parser_1.PacketType.BINARY_EVENT:this.onevent(packet);break;case socket_io_parser_1.PacketType.ACK:this.onack(packet);break;case socket_io_parser_1.PacketType.BINARY_ACK:this.onack(packet);break;case socket_io_parser_1.PacketType.DISCONNECT:this.ondisconnect();break}}onevent(packet){const args=packet.data||[];debug("emitting event %j",args);if(null!=packet.id){debug("attaching ack callback to event");args.push(this.ack(packet.id))}if(this._anyListeners&&this._anyListeners.length){const listeners=this._anyListeners.slice();for(const listener of listeners){listener.apply(this,args)}}this.dispatch(args)}ack(id){const self=this;let sent=false;return function(){if(sent)return;const args=Array.prototype.slice.call(arguments);debug("sending ack %j",args);self.packet({id:id,type:socket_io_parser_1.PacketType.ACK,data:args});sent=true}}onack(packet){const ack=this.acks.get(packet.id);if("function"==typeof ack){debug("calling ack %s with %j",packet.id,packet.data);ack.apply(this,packet.data);this.acks.delete(packet.id)}else{debug("bad ack %s",packet.id)}}ondisconnect(){debug("got disconnect packet");this._onclose("client namespace disconnect")}_onerror(err){this.emitReserved("error",err)}_onclose(reason,description){if(!this.connected)return this;debug("closing socket - reason %s",reason);this.emitReserved("disconnecting",reason,description);if(this.server._opts.connectionStateRecovery&&RECOVERABLE_DISCONNECT_REASONS.has(reason)){debug("connection state recovery is enabled for sid %s",this.id);this.adapter.persistSession({sid:this.id,pid:this.pid,rooms:[...this.rooms],data:this.data})}this._cleanup();this.client._remove(this);this.connected=false;this.emitReserved("disconnect",reason,description);return}_cleanup(){this.leaveAll();this.nsp._remove(this);this.join=noop}_error(err){this.packet({type:socket_io_parser_1.PacketType.CONNECT_ERROR,data:err})}disconnect(close=false){if(!this.connected)return this;if(close){this.client._disconnect()}else{this.packet({type:socket_io_parser_1.PacketType.DISCONNECT});this._onclose("server namespace disconnect")}return this}compress(compress){this.flags.compress=compress;return this}get volatile(){this.flags.volatile=true;return this}get broadcast(){return this.newBroadcastOperator()}get local(){return this.newBroadcastOperator().local}timeout(timeout){this.flags.timeout=timeout;return this}dispatch(event){debug("dispatching an event %j",event);this.run(event,err=>{process.nextTick(()=>{if(err){return this._onerror(err)}if(this.connected){super.emitUntyped.apply(this,event)}else{debug("ignore packet received after disconnection")}})})}use(fn){this.fns.push(fn);return this}run(event,fn){if(!this.fns.length)return fn();const fns=this.fns.slice(0);function run(i){fns[i](event,err=>{if(err)return fn(err);if(!fns[i+1])return fn();run(i+1)})}run(0)}get disconnected(){return!this.connected}get request(){return this.client.request}get conn(){return this.client.conn}get rooms(){return this.adapter.socketRooms(this.id)||new Set}onAny(listener){this._anyListeners=this._anyListeners||[];this._anyListeners.push(listener);return this}prependAny(listener){this._anyListeners=this._anyListeners||[];this._anyListeners.unshift(listener);return this}offAny(listener){if(!this._anyListeners){return this}if(listener){const listeners=this._anyListeners;for(let i=0;i<listeners.length;i++){if(listener===listeners[i]){listeners.splice(i,1);return this}}}else{this._anyListeners=[]}return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(listener){this._anyOutgoingListeners=this._anyOutgoingListeners||[];this._anyOutgoingListeners.push(listener);return this}prependAnyOutgoing(listener){this._anyOutgoingListeners=this._anyOutgoingListeners||[];this._anyOutgoingListeners.unshift(listener);return this}offAnyOutgoing(listener){if(!this._anyOutgoingListeners){return this}if(listener){const listeners=this._anyOutgoingListeners;for(let i=0;i<listeners.length;i++){if(listener===listeners[i]){listeners.splice(i,1);return this}}}else{this._anyOutgoingListeners=[]}return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(packet){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const listeners=this._anyOutgoingListeners.slice();for(const listener of listeners){listener.apply(this,packet.data)}}}newBroadcastOperator(){const flags=Object.assign({},this.flags);this.flags={};return new broadcast_operator_1.BroadcastOperator(this.adapter,new Set,new Set([this.id]),flags)}}exports.Socket=Socket},{"./broadcast-operator":324,"./socket-types":329,"./typed-events":331,base64id:33,debug:335,"socket.io-parser":318}],331:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StrictEventEmitter=void 0;const events_1=require("events");class StrictEventEmitter extends events_1.EventEmitter{on(ev,listener){return super.on(ev,listener)}once(ev,listener){return super.once(ev,listener)}emit(ev,...args){return super.emit(ev,...args)}emitReserved(ev,...args){return super.emit(ev,...args)}emitUntyped(ev,...args){return super.emit(ev,...args)}listeners(event){return super.listeners(event)}}exports.StrictEventEmitter=StrictEventEmitter},{events:undefined}],332:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});exports.patchAdapter=patchAdapter;exports.restoreAdapter=restoreAdapter;exports.serveFile=serveFile;const socket_io_adapter_1=require("socket.io-adapter");const fs_1=require("fs");const debug_1=__importDefault(require("debug"));const debug=(0,debug_1.default)("socket.io:adapter-uws");const SEPARATOR="";const{addAll:addAll,del:del,broadcast:broadcast}=socket_io_adapter_1.Adapter.prototype;function patchAdapter(app){socket_io_adapter_1.Adapter.prototype.addAll=function(id,rooms){const isNew=!this.sids.has(id);addAll.call(this,id,rooms);const socket=this.nsp.sockets.get(id)||this.nsp._preConnectSockets.get(id);if(!socket){return}if(socket.conn.transport.name==="websocket"){subscribe(this.nsp.name,socket,isNew,rooms);return}if(isNew){socket.conn.on("upgrade",()=>{const rooms=this.sids.get(id);if(rooms){subscribe(this.nsp.name,socket,isNew,rooms)}})}};socket_io_adapter_1.Adapter.prototype.del=function(id,room){del.call(this,id,room);const socket=this.nsp.sockets.get(id)||this.nsp._preConnectSockets.get(id);if(socket&&socket.conn.transport.name==="websocket"){const sessionId=socket.conn.id;const websocket=socket.conn.transport.socket;const topic=`${this.nsp.name}${SEPARATOR}${room}`;debug("unsubscribe connection %s from topic %s",sessionId,topic);websocket.unsubscribe(topic)}};socket_io_adapter_1.Adapter.prototype.broadcast=function(packet,opts){const useFastPublish=opts.rooms.size<=1&&opts.except.size===0;if(!useFastPublish){broadcast.call(this,packet,opts);return}const flags=opts.flags||{};const basePacketOpts={preEncoded:true,volatile:flags.volatile,compress:flags.compress};packet.nsp=this.nsp.name;const encodedPackets=this.encoder.encode(packet);const topic=opts.rooms.size===0?this.nsp.name:`${this.nsp.name}${SEPARATOR}${opts.rooms.keys().next().value}`;debug("fast publish to %s",topic);encodedPackets.forEach(encodedPacket=>{const isBinary=typeof encodedPacket!=="string";app.publish(topic,isBinary?encodedPacket:"4"+encodedPacket,isBinary)});this.apply(opts,socket=>{if(socket.conn.transport.name!=="websocket"){socket.client.writeToEngine(encodedPackets,basePacketOpts)}})}}function subscribe(namespaceName,socket,isNew,rooms){const sessionId=socket.conn.id;const websocket=socket.conn.transport.socket;if(isNew){debug("subscribe connection %s to topic %s",sessionId,namespaceName);websocket.subscribe(namespaceName)}rooms.forEach(room=>{const topic=`${namespaceName}${SEPARATOR}${room}`;debug("subscribe connection %s to topic %s",sessionId,topic);websocket.subscribe(topic)})}function restoreAdapter(){socket_io_adapter_1.Adapter.prototype.addAll=addAll;socket_io_adapter_1.Adapter.prototype.del=del;socket_io_adapter_1.Adapter.prototype.broadcast=broadcast}const toArrayBuffer=buffer=>{const{buffer:arrayBuffer,byteOffset:byteOffset,byteLength:byteLength}=buffer;return arrayBuffer.slice(byteOffset,byteOffset+byteLength)};function serveFile(res,filepath){const{size:size}=(0,fs_1.statSync)(filepath);const readStream=(0,fs_1.createReadStream)(filepath);const destroyReadStream=()=>!readStream.destroyed&&readStream.destroy();const onError=error=>{destroyReadStream();throw error};const onDataChunk=chunk=>{const arrayBufferChunk=toArrayBuffer(chunk);res.cork(()=>{const lastOffset=res.getWriteOffset();const[ok,done]=res.tryEnd(arrayBufferChunk,size);if(!done&&!ok){readStream.pause();res.onWritable(offset=>{const[ok,done]=res.tryEnd(arrayBufferChunk.slice(offset-lastOffset),size);if(!done&&ok){readStream.resume()}return ok})}})};res.onAborted(destroyReadStream);readStream.on("data",onDataChunk).on("error",onError).on("end",destroyReadStream)}},{debug:335,fs:undefined,"socket.io-adapter":312}],333:[function(require,module,exports){arguments[4][113][0].apply(exports,arguments)},{"./common":334,dup:113}],334:[function(require,module,exports){arguments[4][114][0].apply(exports,arguments)},{dup:114,ms:212}],335:[function(require,module,exports){arguments[4][115][0].apply(exports,arguments)},{"./browser.js":333,"./node.js":336,dup:115}],336:[function(require,module,exports){arguments[4][116][0].apply(exports,arguments)},{"./common":334,dup:116,"supports-color":341,tty:undefined,util:undefined}],337:[function(require,module,exports){module.exports={name:"socket.io",version:"4.8.1",description:"node.js realtime framework server",keywords:["realtime","framework","websocket","tcp","events","socket","io"],files:["dist/","client-dist/","wrapper.mjs","!**/*.tsbuildinfo"],directories:{doc:"docs/",example:"example/",lib:"lib/",test:"test/"},type:"commonjs",main:"./dist/index.js",exports:{types:"./dist/index.d.ts",import:"./wrapper.mjs",require:"./dist/index.js"},types:"./dist/index.d.ts",license:"MIT",homepage:"https://github.com/socketio/socket.io/tree/main/packages/socket.io#readme",repository:{type:"git",url:"git+https://github.com/socketio/socket.io.git"},bugs:{url:"https://github.com/socketio/socket.io/issues"},scripts:{compile:"rimraf ./dist && tsc",test:"npm run format:check && npm run compile && npm run test:types && npm run test:unit","test:types":"tsd","test:unit":"nyc mocha --require ts-node/register --reporter spec --slow 200 --bail --timeout 10000 test/index.ts","format:check":'prettier --check "lib/**/*.ts" "test/**/*.ts"',"format:fix":'prettier --write "lib/**/*.ts" "test/**/*.ts"',prepack:"npm run compile"},dependencies:{accepts:"~1.3.4",base64id:"~2.0.0",cors:"~2.8.5",debug:"~4.3.2","engine.io":"~6.6.0","socket.io-adapter":"~2.5.2","socket.io-parser":"~4.2.4"},contributors:[{name:"Guillermo Rauch",email:"rauchg@gmail.com"},{name:"Arnout Kazemier",email:"info@3rd-eden.com"},{name:"Vladimir Dronnikov",email:"dronnikov@gmail.com"},{name:"Einar Otto Stangvik",email:"einaros@gmail.com"}],engines:{node:">=10.2.0"},tsd:{directory:"test"}}},{}],338:[function(require,module,exports){"use strict";const stripAnsi=require("strip-ansi");const isFullwidthCodePoint=require("is-fullwidth-code-point");const emojiRegex=require("emoji-regex");const stringWidth=string=>{if(typeof string!=="string"||string.length===0){return 0}string=stripAnsi(string);if(string.length===0){return 0}string=string.replace(emojiRegex(),"  ");let width=0;for(let i=0;i<string.length;i++){const code=string.codePointAt(i);if(code<=31||code>=127&&code<=159){continue}if(code>=768&&code<=879){continue}if(code>65535){i++}width+=isFullwidthCodePoint(code)?2:1}return width};module.exports=stringWidth;module.exports.default=stringWidth},{"emoji-regex":92,"is-fullwidth-code-point":200,"strip-ansi":340}],339:[function(require,module,exports){"use strict";var Buffer=require("safe-buffer").Buffer;var isEncoding=Buffer.isEncoding||function(encoding){encoding=""+encoding;switch(encoding&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function _normalizeEncoding(enc){if(!enc)return"utf8";var retried;while(true){switch(enc){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return enc;default:if(retried)return;enc=(""+enc).toLowerCase();retried=true}}}function normalizeEncoding(enc){var nenc=_normalizeEncoding(enc);if(typeof nenc!=="string"&&(Buffer.isEncoding===isEncoding||!isEncoding(enc)))throw new Error("Unknown encoding: "+enc);return nenc||enc}exports.StringDecoder=StringDecoder;function StringDecoder(encoding){this.encoding=normalizeEncoding(encoding);var nb;switch(this.encoding){case"utf16le":this.text=utf16Text;this.end=utf16End;nb=4;break;case"utf8":this.fillLast=utf8FillLast;nb=4;break;case"base64":this.text=base64Text;this.end=base64End;nb=3;break;default:this.write=simpleWrite;this.end=simpleEnd;return}this.lastNeed=0;this.lastTotal=0;this.lastChar=Buffer.allocUnsafe(nb)}StringDecoder.prototype.write=function(buf){if(buf.length===0)return"";var r;var i;if(this.lastNeed){r=this.fillLast(buf);if(r===undefined)return"";i=this.lastNeed;this.lastNeed=0}else{i=0}if(i<buf.length)return r?r+this.text(buf,i):this.text(buf,i);return r||""};StringDecoder.prototype.end=utf8End;StringDecoder.prototype.text=utf8Text;StringDecoder.prototype.fillLast=function(buf){if(this.lastNeed<=buf.length){buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length);this.lastNeed-=buf.length};function utf8CheckByte(byte){if(byte<=127)return 0;else if(byte>>5===6)return 2;else if(byte>>4===14)return 3;else if(byte>>3===30)return 4;return byte>>6===2?-1:-2}function utf8CheckIncomplete(self,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0)self.lastNeed=nb-1;return nb}if(--j<i||nb===-2)return 0;nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0)self.lastNeed=nb-2;return nb}if(--j<i||nb===-2)return 0;nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0){if(nb===2)nb=0;else self.lastNeed=nb-3}return nb}return 0}function utf8CheckExtraBytes(self,buf,p){if((buf[0]&192)!==128){self.lastNeed=0;return""}if(self.lastNeed>1&&buf.length>1){if((buf[1]&192)!==128){self.lastNeed=1;return""}if(self.lastNeed>2&&buf.length>2){if((buf[2]&192)!==128){self.lastNeed=2;return""}}}}function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed;var r=utf8CheckExtraBytes(this,buf,p);if(r!==undefined)return r;if(this.lastNeed<=buf.length){buf.copy(this.lastChar,p,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}buf.copy(this.lastChar,p,0,buf.length);this.lastNeed-=buf.length}function utf8Text(buf,i){var total=utf8CheckIncomplete(this,buf,i);if(!this.lastNeed)return buf.toString("utf8",i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);buf.copy(this.lastChar,0,end);return buf.toString("utf8",i,end)}function utf8End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed)return r+"";return r}function utf16Text(buf,i){if((buf.length-i)%2===0){var r=buf.toString("utf16le",i);if(r){var c=r.charCodeAt(r.length-1);if(c>=55296&&c<=56319){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=buf[buf.length-2];this.lastChar[1]=buf[buf.length-1];return r.slice(0,-1)}}return r}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=buf[buf.length-1];return buf.toString("utf16le",i,buf.length-1)}function utf16End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,end)}return r}function base64Text(buf,i){var n=(buf.length-i)%3;if(n===0)return buf.toString("base64",i);this.lastNeed=3-n;this.lastTotal=3;if(n===1){this.lastChar[0]=buf[buf.length-1]}else{this.lastChar[0]=buf[buf.length-2];this.lastChar[1]=buf[buf.length-1]}return buf.toString("base64",i,buf.length-n)}function base64End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed)return r+this.lastChar.toString("base64",0,3-this.lastNeed);return r}function simpleWrite(buf){return buf.toString(this.encoding)}function simpleEnd(buf){return buf&&buf.length?this.write(buf):""}},{"safe-buffer":257}],340:[function(require,module,exports){"use strict";const ansiRegex=require("ansi-regex");module.exports=string=>typeof string==="string"?string.replace(ansiRegex(),""):string},{"ansi-regex":25}],341:[function(require,module,exports){"use strict";const os=require("os");const tty=require("tty");const hasFlag=require("has-flag");const{env:env}=process;let flagForceColor;if(hasFlag("no-color")||hasFlag("no-colors")||hasFlag("color=false")||hasFlag("color=never")){flagForceColor=0}else if(hasFlag("color")||hasFlag("colors")||hasFlag("color=true")||hasFlag("color=always")){flagForceColor=1}function envForceColor(){if("FORCE_COLOR"in env){if(env.FORCE_COLOR==="true"){return 1}if(env.FORCE_COLOR==="false"){return 0}return env.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(env.FORCE_COLOR,10),3)}}function translateLevel(level){if(level===0){return false}return{level:level,hasBasic:true,has256:level>=2,has16m:level>=3}}function supportsColor(haveStream,{streamIsTTY:streamIsTTY,sniffFlags:sniffFlags=true}={}){const noFlagForceColor=envForceColor();if(noFlagForceColor!==undefined){flagForceColor=noFlagForceColor}const forceColor=sniffFlags?flagForceColor:noFlagForceColor;if(forceColor===0){return 0}if(sniffFlags){if(hasFlag("color=16m")||hasFlag("color=full")||hasFlag("color=truecolor")){return 3}if(hasFlag("color=256")){return 2}}if(haveStream&&!streamIsTTY&&forceColor===undefined){return 0}const min=forceColor||0;if(env.TERM==="dumb"){return min}if(process.platform==="win32"){const osRelease=os.release().split(".");if(Number(osRelease[0])>=10&&Number(osRelease[2])>=10586){return Number(osRelease[2])>=14931?3:2}return 1}if("CI"in env){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(sign=>sign in env)||env.CI_NAME==="codeship"){return 1}return min}if("TEAMCITY_VERSION"in env){return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(env.TEAMCITY_VERSION)?1:0}if(env.COLORTERM==="truecolor"){return 3}if("TERM_PROGRAM"in env){const version=Number.parseInt((env.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(env.TERM_PROGRAM){case"iTerm.app":return version>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(env.TERM)){return 2}if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)){return 1}if("COLORTERM"in env){return 1}return min}function getSupportLevel(stream,options={}){const level=supportsColor(stream,{streamIsTTY:stream&&stream.isTTY,...options});return translateLevel(level)}module.exports={supportsColor:getSupportLevel,stdout:getSupportLevel({isTTY:tty.isatty(1)}),stderr:getSupportLevel({isTTY:tty.isatty(2)})}},{"has-flag":195,os:undefined,tty:undefined}],342:[function(require,module,exports){"use strict";var isPrototype=require("../prototype/is");module.exports=function(value){if(typeof value!=="function")return false;if(!hasOwnProperty.call(value,"length"))return false;try{if(typeof value.length!=="number")return false;if(typeof value.call!=="function")return false;if(typeof value.apply!=="function")return false}catch(error){return false}return!isPrototype(value)}},{"../prototype/is":349}],343:[function(require,module,exports){"use strict";var stringCoerce=require("../string/coerce"),toShortString=require("./to-short-string");module.exports=function(errorMessage,value,inputOptions){if(inputOptions&&inputOptions.errorMessage){errorMessage=stringCoerce(inputOptions.errorMessage)}var valueInsertIndex=errorMessage.indexOf("%v");var valueToken=valueInsertIndex>-1?toShortString(value):null;if(inputOptions&&inputOptions.name){var nameInsertIndex=errorMessage.indexOf("%n");if(nameInsertIndex>-1){if(valueInsertIndex>-1){var firstToken,secondToken,firstInsertIndex,secondInsertIndex;if(nameInsertIndex>valueInsertIndex){firstToken=valueToken;firstInsertIndex=valueInsertIndex;secondToken=inputOptions.name;secondInsertIndex=nameInsertIndex}else{firstToken=inputOptions.name;firstInsertIndex=nameInsertIndex;secondToken=valueToken;secondInsertIndex=valueInsertIndex}return errorMessage.slice(0,firstInsertIndex)+firstToken+errorMessage.slice(firstInsertIndex+2,secondInsertIndex)+secondToken+errorMessage.slice(secondInsertIndex+2)}return errorMessage.slice(0,nameInsertIndex)+inputOptions.name+errorMessage.slice(nameInsertIndex+2)}}if(valueInsertIndex>-1){return errorMessage.slice(0,valueInsertIndex)+valueToken+errorMessage.slice(valueInsertIndex+2)}return errorMessage}},{"../string/coerce":350,"./to-short-string":346}],344:[function(require,module,exports){"use strict";var isValue=require("../value/is"),resolveErrorMessage=require("./resolve-error-message");module.exports=function(value,defaultMessage,inputOptions){if(inputOptions&&!isValue(value)){if("default"in inputOptions)return inputOptions["default"];if(inputOptions.isOptional)return null}var ErrorConstructor=inputOptions&&inputOptions.Error||TypeError;var error=new ErrorConstructor(resolveErrorMessage(defaultMessage,value,inputOptions));if(inputOptions&&inputOptions.errorCode)error.code=inputOptions.errorCode;throw error}},{"../value/is":353,"./resolve-error-message":343}],345:[function(require,module,exports){"use strict";module.exports=function(value){try{return value.toString()}catch(error){try{return String(value)}catch(error2){return null}}}},{}],346:[function(require,module,exports){"use strict";var safeToString=require("./safe-to-string");var reNewLine=/[\n\r\u2028\u2029]/g;module.exports=function(value){var string=safeToString(value);if(string===null)return"<Non-coercible to string value>";if(string.length>100)string=string.slice(0,99)+"";string=string.replace(reNewLine,function(char){switch(char){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}});return string}},{"./safe-to-string":345}],347:[function(require,module,exports){"use strict";var isValue=require("../value/is");var possibleTypes={object:true,function:true,undefined:true};module.exports=function(value){if(!isValue(value))return false;return hasOwnProperty.call(possibleTypes,typeof value)}},{"../value/is":353}],348:[function(require,module,exports){"use strict";var isFunction=require("../function/is");var classRe=/^\s*class[\s{/}]/,functionToString=Function.prototype.toString;module.exports=function(value){if(!isFunction(value))return false;if(classRe.test(functionToString.call(value)))return false;return true}},{"../function/is":342}],349:[function(require,module,exports){"use strict";var isObject=require("../object/is");module.exports=function(value){if(!isObject(value))return false;try{if(!value.constructor)return false;return value.constructor.prototype===value}catch(error){return false}}},{"../object/is":347}],350:[function(require,module,exports){"use strict";var isValue=require("../value/is"),isObject=require("../object/is");var objectToString=Object.prototype.toString;module.exports=function(value){if(!isValue(value))return null;if(isObject(value)){var valueToString=value.toString;if(typeof valueToString!=="function")return null;if(valueToString===objectToString)return null}try{return""+value}catch(error){return null}}},{"../object/is":347,"../value/is":353}],351:[function(require,module,exports){"use strict";var resolveException=require("../lib/resolve-exception"),coerce=require("./coerce");module.exports=function(value){var coerced=coerce(value);if(coerced!==null)return coerced;var options=arguments[1];var errorMessage=options&&options.name?"Expected a string for %n, received %v":"%v is not a string";return resolveException(value,errorMessage,options)}},{"../lib/resolve-exception":344,"./coerce":350}],352:[function(require,module,exports){"use strict";var resolveException=require("../lib/resolve-exception"),is=require("./is");module.exports=function(value){if(is(value))return value;var options=arguments[1];var errorMessage=options&&options.name?"Expected a value for %n, received %v":"Cannot use %v";return resolveException(value,errorMessage,options)}},{"../lib/resolve-exception":344,"./is":353}],353:[function(require,module,exports){"use strict";var _undefined=void 0;module.exports=function(value){return value!==_undefined&&value!==null}},{}],354:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define("underscore",factory):(global=typeof globalThis!=="undefined"?globalThis:global||self,function(){var current=global._;var exports=global._=factory();exports.noConflict=function(){global._=current;return exports}}())})(this,function(){var VERSION="1.13.7";var root=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{};var ArrayProto=Array.prototype,ObjProto=Object.prototype;var SymbolProto=typeof Symbol!=="undefined"?Symbol.prototype:null;var push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var supportsArrayBuffer=typeof ArrayBuffer!=="undefined",supportsDataView=typeof DataView!=="undefined";var nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeCreate=Object.create,nativeIsView=supportsArrayBuffer&&ArrayBuffer.isView;var _isNaN=isNaN,_isFinite=isFinite;var hasEnumBug=!{toString:null}.propertyIsEnumerable("toString");var nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];var MAX_ARRAY_INDEX=Math.pow(2,53)-1;function restArguments(func,startIndex){startIndex=startIndex==null?func.length-1:+startIndex;return function(){var length=Math.max(arguments.length-startIndex,0),rest=Array(length),index=0;for(;index<length;index++){rest[index]=arguments[index+startIndex]}switch(startIndex){case 0:return func.call(this,rest);case 1:return func.call(this,arguments[0],rest);case 2:return func.call(this,arguments[0],arguments[1],rest)}var args=Array(startIndex+1);for(index=0;index<startIndex;index++){args[index]=arguments[index]}args[startIndex]=rest;return func.apply(this,args)}}function isObject(obj){var type=typeof obj;return type==="function"||type==="object"&&!!obj}function isNull(obj){return obj===null}function isUndefined(obj){return obj===void 0}function isBoolean(obj){return obj===true||obj===false||toString.call(obj)==="[object Boolean]"}function isElement(obj){return!!(obj&&obj.nodeType===1)}function tagTester(name){var tag="[object "+name+"]";return function(obj){return toString.call(obj)===tag}}var isString=tagTester("String");var isNumber=tagTester("Number");var isDate=tagTester("Date");var isRegExp=tagTester("RegExp");var isError=tagTester("Error");var isSymbol=tagTester("Symbol");var isArrayBuffer=tagTester("ArrayBuffer");var isFunction=tagTester("Function");var nodelist=root.document&&root.document.childNodes;if(typeof/./!="function"&&typeof Int8Array!="object"&&typeof nodelist!="function"){isFunction=function(obj){return typeof obj=="function"||false}}var isFunction$1=isFunction;var hasObjectTag=tagTester("Object");var hasDataViewBug=supportsDataView&&(!/\[native code\]/.test(String(DataView))||hasObjectTag(new DataView(new ArrayBuffer(8)))),isIE11=typeof Map!=="undefined"&&hasObjectTag(new Map);var isDataView=tagTester("DataView");function alternateIsDataView(obj){return obj!=null&&isFunction$1(obj.getInt8)&&isArrayBuffer(obj.buffer)}var isDataView$1=hasDataViewBug?alternateIsDataView:isDataView;var isArray=nativeIsArray||tagTester("Array");function has$1(obj,key){return obj!=null&&hasOwnProperty.call(obj,key)}var isArguments=tagTester("Arguments");(function(){if(!isArguments(arguments)){isArguments=function(obj){return has$1(obj,"callee")}}})();var isArguments$1=isArguments;function isFinite$1(obj){return!isSymbol(obj)&&_isFinite(obj)&&!isNaN(parseFloat(obj))}function isNaN$1(obj){return isNumber(obj)&&_isNaN(obj)}function constant(value){return function(){return value}}function createSizePropertyCheck(getSizeProperty){return function(collection){var sizeProperty=getSizeProperty(collection);return typeof sizeProperty=="number"&&sizeProperty>=0&&sizeProperty<=MAX_ARRAY_INDEX}}function shallowProperty(key){return function(obj){return obj==null?void 0:obj[key]}}var getByteLength=shallowProperty("byteLength");var isBufferLike=createSizePropertyCheck(getByteLength);var typedArrayPattern=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function isTypedArray(obj){return nativeIsView?nativeIsView(obj)&&!isDataView$1(obj):isBufferLike(obj)&&typedArrayPattern.test(toString.call(obj))}var isTypedArray$1=supportsArrayBuffer?isTypedArray:constant(false);var getLength=shallowProperty("length");function emulatedSet(keys){var hash={};for(var l=keys.length,i=0;i<l;++i)hash[keys[i]]=true;return{contains:function(key){return hash[key]===true},push:function(key){hash[key]=true;return keys.push(key)}}}function collectNonEnumProps(obj,keys){keys=emulatedSet(keys);var nonEnumIdx=nonEnumerableProps.length;var constructor=obj.constructor;var proto=isFunction$1(constructor)&&constructor.prototype||ObjProto;var prop="constructor";if(has$1(obj,prop)&&!keys.contains(prop))keys.push(prop);while(nonEnumIdx--){prop=nonEnumerableProps[nonEnumIdx];if(prop in obj&&obj[prop]!==proto[prop]&&!keys.contains(prop)){keys.push(prop)}}}function keys(obj){if(!isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)if(has$1(obj,key))keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys}function isEmpty(obj){if(obj==null)return true;var length=getLength(obj);if(typeof length=="number"&&(isArray(obj)||isString(obj)||isArguments$1(obj)))return length===0;return getLength(keys(obj))===0}function isMatch(object,attrs){var _keys=keys(attrs),length=_keys.length;if(object==null)return!length;var obj=Object(object);for(var i=0;i<length;i++){var key=_keys[i];if(attrs[key]!==obj[key]||!(key in obj))return false}return true}function _$1(obj){if(obj instanceof _$1)return obj;if(!(this instanceof _$1))return new _$1(obj);this._wrapped=obj}_$1.VERSION=VERSION;_$1.prototype.value=function(){return this._wrapped};_$1.prototype.valueOf=_$1.prototype.toJSON=_$1.prototype.value;_$1.prototype.toString=function(){return String(this._wrapped)};function toBufferView(bufferSource){return new Uint8Array(bufferSource.buffer||bufferSource,bufferSource.byteOffset||0,getByteLength(bufferSource))}var tagDataView="[object DataView]";function eq(a,b,aStack,bStack){if(a===b)return a!==0||1/a===1/b;if(a==null||b==null)return false;if(a!==a)return b!==b;var type=typeof a;if(type!=="function"&&type!=="object"&&typeof b!="object")return false;return deepEq(a,b,aStack,bStack)}function deepEq(a,b,aStack,bStack){if(a instanceof _$1)a=a._wrapped;if(b instanceof _$1)b=b._wrapped;var className=toString.call(a);if(className!==toString.call(b))return false;if(hasDataViewBug&&className=="[object Object]"&&isDataView$1(a)){if(!isDataView$1(b))return false;className=tagDataView}switch(className){case"[object RegExp]":case"[object String]":return""+a===""+b;case"[object Number]":if(+a!==+a)return+b!==+b;return+a===0?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b;case"[object Symbol]":return SymbolProto.valueOf.call(a)===SymbolProto.valueOf.call(b);case"[object ArrayBuffer]":case tagDataView:return deepEq(toBufferView(a),toBufferView(b),aStack,bStack)}var areArrays=className==="[object Array]";if(!areArrays&&isTypedArray$1(a)){var byteLength=getByteLength(a);if(byteLength!==getByteLength(b))return false;if(a.buffer===b.buffer&&a.byteOffset===b.byteOffset)return true;areArrays=true}if(!areArrays){if(typeof a!="object"||typeof b!="object")return false;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(isFunction$1(aCtor)&&aCtor instanceof aCtor&&isFunction$1(bCtor)&&bCtor instanceof bCtor)&&("constructor"in a&&"constructor"in b)){return false}}aStack=aStack||[];bStack=bStack||[];var length=aStack.length;while(length--){if(aStack[length]===a)return bStack[length]===b}aStack.push(a);bStack.push(b);if(areArrays){length=a.length;if(length!==b.length)return false;while(length--){if(!eq(a[length],b[length],aStack,bStack))return false}}else{var _keys=keys(a),key;length=_keys.length;if(keys(b).length!==length)return false;while(length--){key=_keys[length];if(!(has$1(b,key)&&eq(a[key],b[key],aStack,bStack)))return false}}aStack.pop();bStack.pop();return true}function isEqual(a,b){return eq(a,b)}function allKeys(obj){if(!isObject(obj))return[];var keys=[];for(var key in obj)keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys}function ie11fingerprint(methods){var length=getLength(methods);return function(obj){if(obj==null)return false;var keys=allKeys(obj);if(getLength(keys))return false;for(var i=0;i<length;i++){if(!isFunction$1(obj[methods[i]]))return false}return methods!==weakMapMethods||!isFunction$1(obj[forEachName])}}var forEachName="forEach",hasName="has",commonInit=["clear","delete"],mapTail=["get",hasName,"set"];var mapMethods=commonInit.concat(forEachName,mapTail),weakMapMethods=commonInit.concat(mapTail),setMethods=["add"].concat(commonInit,forEachName,hasName);var isMap=isIE11?ie11fingerprint(mapMethods):tagTester("Map");var isWeakMap=isIE11?ie11fingerprint(weakMapMethods):tagTester("WeakMap");var isSet=isIE11?ie11fingerprint(setMethods):tagTester("Set");var isWeakSet=tagTester("WeakSet");function values(obj){var _keys=keys(obj);var length=_keys.length;var values=Array(length);for(var i=0;i<length;i++){values[i]=obj[_keys[i]]}return values}function pairs(obj){var _keys=keys(obj);var length=_keys.length;var pairs=Array(length);for(var i=0;i<length;i++){pairs[i]=[_keys[i],obj[_keys[i]]]}return pairs}function invert(obj){var result={};var _keys=keys(obj);for(var i=0,length=_keys.length;i<length;i++){result[obj[_keys[i]]]=_keys[i]}return result}function functions(obj){var names=[];for(var key in obj){if(isFunction$1(obj[key]))names.push(key)}return names.sort()}function createAssigner(keysFunc,defaults){return function(obj){var length=arguments.length;if(defaults)obj=Object(obj);if(length<2||obj==null)return obj;for(var index=1;index<length;index++){var source=arguments[index],keys=keysFunc(source),l=keys.length;for(var i=0;i<l;i++){var key=keys[i];if(!defaults||obj[key]===void 0)obj[key]=source[key]}}return obj}}var extend=createAssigner(allKeys);var extendOwn=createAssigner(keys);var defaults=createAssigner(allKeys,true);function ctor(){return function(){}}function baseCreate(prototype){if(!isObject(prototype))return{};if(nativeCreate)return nativeCreate(prototype);var Ctor=ctor();Ctor.prototype=prototype;var result=new Ctor;Ctor.prototype=null;return result}function create(prototype,props){var result=baseCreate(prototype);if(props)extendOwn(result,props);return result}function clone(obj){if(!isObject(obj))return obj;return isArray(obj)?obj.slice():extend({},obj)}function tap(obj,interceptor){interceptor(obj);return obj}function toPath$1(path){return isArray(path)?path:[path]}_$1.toPath=toPath$1;function toPath(path){return _$1.toPath(path)}function deepGet(obj,path){var length=path.length;for(var i=0;i<length;i++){if(obj==null)return void 0;obj=obj[path[i]]}return length?obj:void 0}function get(object,path,defaultValue){var value=deepGet(object,toPath(path));return isUndefined(value)?defaultValue:value}function has(obj,path){path=toPath(path);var length=path.length;for(var i=0;i<length;i++){var key=path[i];if(!has$1(obj,key))return false;obj=obj[key]}return!!length}function identity(value){return value}function matcher(attrs){attrs=extendOwn({},attrs);return function(obj){return isMatch(obj,attrs)}}function property(path){path=toPath(path);return function(obj){return deepGet(obj,path)}}function optimizeCb(func,context,argCount){if(context===void 0)return func;switch(argCount==null?3:argCount){case 1:return function(value){return func.call(context,value)};case 3:return function(value,index,collection){return func.call(context,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection)}}return function(){return func.apply(context,arguments)}}function baseIteratee(value,context,argCount){if(value==null)return identity;if(isFunction$1(value))return optimizeCb(value,context,argCount);if(isObject(value)&&!isArray(value))return matcher(value);return property(value)}function iteratee(value,context){return baseIteratee(value,context,Infinity)}_$1.iteratee=iteratee;function cb(value,context,argCount){if(_$1.iteratee!==iteratee)return _$1.iteratee(value,context);return baseIteratee(value,context,argCount)}function mapObject(obj,iteratee,context){iteratee=cb(iteratee,context);var _keys=keys(obj),length=_keys.length,results={};for(var index=0;index<length;index++){var currentKey=_keys[index];results[currentKey]=iteratee(obj[currentKey],currentKey,obj)}return results}function noop(){}function propertyOf(obj){if(obj==null)return noop;return function(path){return get(obj,path)}}function times(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=optimizeCb(iteratee,context,1);for(var i=0;i<n;i++)accum[i]=iteratee(i);return accum}function random(min,max){if(max==null){max=min;min=0}return min+Math.floor(Math.random()*(max-min+1))}var now=Date.now||function(){return(new Date).getTime()};function createEscaper(map){var escaper=function(match){return map[match]};var source="(?:"+keys(map).join("|")+")";var testRegexp=RegExp(source);var replaceRegexp=RegExp(source,"g");return function(string){string=string==null?"":""+string;return testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}}var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var _escape=createEscaper(escapeMap);var unescapeMap=invert(escapeMap);var _unescape=createEscaper(unescapeMap);var templateSettings=_$1.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var escapeRegExp=/\\|'|\r|\n|\u2028|\u2029/g;function escapeChar(match){return"\\"+escapes[match]}var bareIdentifier=/^\s*(\w|\$)+\s*$/;function template(text,settings,oldSettings){if(!settings&&oldSettings)settings=oldSettings;settings=defaults({},settings,_$1.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g");var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escapeRegExp,escapeChar);index=offset+match.length;if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"}else if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"}else if(evaluate){source+="';\n"+evaluate+"\n__p+='"}return match});source+="';\n";var argument=settings.variable;if(argument){if(!bareIdentifier.test(argument))throw new Error("variable is not a bare identifier: "+argument)}else{source="with(obj||{}){\n"+source+"}\n";argument="obj"}source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";var render;try{render=new Function(argument,"_",source)}catch(e){e.source=source;throw e}var template=function(data){return render.call(this,data,_$1)};template.source="function("+argument+"){\n"+source+"}";return template}function result(obj,path,fallback){path=toPath(path);var length=path.length;if(!length){return isFunction$1(fallback)?fallback.call(obj):fallback}for(var i=0;i<length;i++){var prop=obj==null?void 0:obj[path[i]];if(prop===void 0){prop=fallback;i=length}obj=isFunction$1(prop)?prop.call(obj):prop}return obj}var idCounter=0;function uniqueId(prefix){var id=++idCounter+"";return prefix?prefix+id:id}function chain(obj){var instance=_$1(obj);instance._chain=true;return instance}function executeBound(sourceFunc,boundFunc,context,callingContext,args){if(!(callingContext instanceof boundFunc))return sourceFunc.apply(context,args);var self=baseCreate(sourceFunc.prototype);var result=sourceFunc.apply(self,args);if(isObject(result))return result;return self}var partial=restArguments(function(func,boundArgs){var placeholder=partial.placeholder;var bound=function(){var position=0,length=boundArgs.length;var args=Array(length);for(var i=0;i<length;i++){args[i]=boundArgs[i]===placeholder?arguments[position++]:boundArgs[i]}while(position<arguments.length)args.push(arguments[position++]);return executeBound(func,bound,this,this,args)};return bound});partial.placeholder=_$1;var bind=restArguments(function(func,context,args){if(!isFunction$1(func))throw new TypeError("Bind must be called on a function");var bound=restArguments(function(callArgs){return executeBound(func,bound,context,this,args.concat(callArgs))});return bound});var isArrayLike=createSizePropertyCheck(getLength);function flatten$1(input,depth,strict,output){output=output||[];if(!depth&&depth!==0){depth=Infinity}else if(depth<=0){return output.concat(input)}var idx=output.length;for(var i=0,length=getLength(input);i<length;i++){var value=input[i];if(isArrayLike(value)&&(isArray(value)||isArguments$1(value))){if(depth>1){flatten$1(value,depth-1,strict,output);idx=output.length}else{var j=0,len=value.length;while(j<len)output[idx++]=value[j++]}}else if(!strict){output[idx++]=value}}return output}var bindAll=restArguments(function(obj,keys){keys=flatten$1(keys,false,false);var index=keys.length;if(index<1)throw new Error("bindAll must be passed function names");while(index--){var key=keys[index];obj[key]=bind(obj[key],obj)}return obj});function memoize(func,hasher){var memoize=function(key){var cache=memoize.cache;var address=""+(hasher?hasher.apply(this,arguments):key);if(!has$1(cache,address))cache[address]=func.apply(this,arguments);return cache[address]};memoize.cache={};return memoize}var delay=restArguments(function(func,wait,args){return setTimeout(function(){return func.apply(null,args)},wait)});var defer=partial(delay,_$1,1);function throttle(func,wait,options){var timeout,context,args,result;var previous=0;if(!options)options={};var later=function(){previous=options.leading===false?0:now();timeout=null;result=func.apply(context,args);if(!timeout)context=args=null};var throttled=function(){var _now=now();if(!previous&&options.leading===false)previous=_now;var remaining=wait-(_now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null}previous=_now;result=func.apply(context,args);if(!timeout)context=args=null}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining)}return result};throttled.cancel=function(){clearTimeout(timeout);previous=0;timeout=context=args=null};return throttled}function debounce(func,wait,immediate){var timeout,previous,args,result,context;var later=function(){var passed=now()-previous;if(wait>passed){timeout=setTimeout(later,wait-passed)}else{timeout=null;if(!immediate)result=func.apply(context,args);if(!timeout)args=context=null}};var debounced=restArguments(function(_args){context=this;args=_args;previous=now();if(!timeout){timeout=setTimeout(later,wait);if(immediate)result=func.apply(context,args)}return result});debounced.cancel=function(){clearTimeout(timeout);timeout=args=context=null};return debounced}function wrap(func,wrapper){return partial(wrapper,func)}function negate(predicate){return function(){return!predicate.apply(this,arguments)}}function compose(){var args=arguments;var start=args.length-1;return function(){var i=start;var result=args[start].apply(this,arguments);while(i--)result=args[i].call(this,result);return result}}function after(times,func){return function(){if(--times<1){return func.apply(this,arguments)}}}function before(times,func){var memo;return function(){if(--times>0){memo=func.apply(this,arguments)}if(times<=1)func=null;return memo}}var once=partial(before,2);function findKey(obj,predicate,context){predicate=cb(predicate,context);var _keys=keys(obj),key;for(var i=0,length=_keys.length;i<length;i++){key=_keys[i];if(predicate(obj[key],key,obj))return key}}function createPredicateIndexFinder(dir){return function(array,predicate,context){predicate=cb(predicate,context);var length=getLength(array);var index=dir>0?0:length-1;for(;index>=0&&index<length;index+=dir){if(predicate(array[index],index,array))return index}return-1}}var findIndex=createPredicateIndexFinder(1);var findLastIndex=createPredicateIndexFinder(-1);function sortedIndex(array,obj,iteratee,context){iteratee=cb(iteratee,context,1);var value=iteratee(obj);var low=0,high=getLength(array);while(low<high){var mid=Math.floor((low+high)/2);if(iteratee(array[mid])<value)low=mid+1;else high=mid}return low}function createIndexFinder(dir,predicateFind,sortedIndex){return function(array,item,idx){var i=0,length=getLength(array);if(typeof idx=="number"){if(dir>0){i=idx>=0?idx:Math.max(idx+length,i)}else{length=idx>=0?Math.min(idx+1,length):idx+length+1}}else if(sortedIndex&&idx&&length){idx=sortedIndex(array,item);return array[idx]===item?idx:-1}if(item!==item){idx=predicateFind(slice.call(array,i,length),isNaN$1);return idx>=0?idx+i:-1}for(idx=dir>0?i:length-1;idx>=0&&idx<length;idx+=dir){if(array[idx]===item)return idx}return-1}}var indexOf=createIndexFinder(1,findIndex,sortedIndex);var lastIndexOf=createIndexFinder(-1,findLastIndex);function find(obj,predicate,context){var keyFinder=isArrayLike(obj)?findIndex:findKey;var key=keyFinder(obj,predicate,context);if(key!==void 0&&key!==-1)return obj[key]}function findWhere(obj,attrs){return find(obj,matcher(attrs))}function each(obj,iteratee,context){iteratee=optimizeCb(iteratee,context);var i,length;if(isArrayLike(obj)){for(i=0,length=obj.length;i<length;i++){iteratee(obj[i],i,obj)}}else{var _keys=keys(obj);for(i=0,length=_keys.length;i<length;i++){iteratee(obj[_keys[i]],_keys[i],obj)}}return obj}function map(obj,iteratee,context){iteratee=cb(iteratee,context);var _keys=!isArrayLike(obj)&&keys(obj),length=(_keys||obj).length,results=Array(length);for(var index=0;index<length;index++){var currentKey=_keys?_keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj)}return results}function createReduce(dir){var reducer=function(obj,iteratee,memo,initial){var _keys=!isArrayLike(obj)&&keys(obj),length=(_keys||obj).length,index=dir>0?0:length-1;if(!initial){memo=obj[_keys?_keys[index]:index];index+=dir}for(;index>=0&&index<length;index+=dir){var currentKey=_keys?_keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj)}return memo};return function(obj,iteratee,memo,context){var initial=arguments.length>=3;return reducer(obj,optimizeCb(iteratee,context,4),memo,initial)}}var reduce=createReduce(1);var reduceRight=createReduce(-1);function filter(obj,predicate,context){var results=[];predicate=cb(predicate,context);each(obj,function(value,index,list){if(predicate(value,index,list))results.push(value)});return results}function reject(obj,predicate,context){return filter(obj,negate(cb(predicate)),context)}function every(obj,predicate,context){predicate=cb(predicate,context);var _keys=!isArrayLike(obj)&&keys(obj),length=(_keys||obj).length;for(var index=0;index<length;index++){var currentKey=_keys?_keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return false}return true}function some(obj,predicate,context){predicate=cb(predicate,context);var _keys=!isArrayLike(obj)&&keys(obj),length=(_keys||obj).length;for(var index=0;index<length;index++){var currentKey=_keys?_keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return true}return false}function contains(obj,item,fromIndex,guard){if(!isArrayLike(obj))obj=values(obj);if(typeof fromIndex!="number"||guard)fromIndex=0;return indexOf(obj,item,fromIndex)>=0}var invoke=restArguments(function(obj,path,args){var contextPath,func;if(isFunction$1(path)){func=path}else{path=toPath(path);contextPath=path.slice(0,-1);path=path[path.length-1]}return map(obj,function(context){var method=func;if(!method){if(contextPath&&contextPath.length){context=deepGet(context,contextPath)}if(context==null)return void 0;method=context[path]}return method==null?method:method.apply(context,args)})});function pluck(obj,key){return map(obj,property(key))}function where(obj,attrs){return filter(obj,matcher(attrs))}function max(obj,iteratee,context){var result=-Infinity,lastComputed=-Infinity,value,computed;if(iteratee==null||typeof iteratee=="number"&&typeof obj[0]!="object"&&obj!=null){obj=isArrayLike(obj)?obj:values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value!=null&&value>result){result=value}}}else{iteratee=cb(iteratee,context);each(obj,function(v,index,list){computed=iteratee(v,index,list);if(computed>lastComputed||computed===-Infinity&&result===-Infinity){result=v;lastComputed=computed}})}return result}function min(obj,iteratee,context){var result=Infinity,lastComputed=Infinity,value,computed;if(iteratee==null||typeof iteratee=="number"&&typeof obj[0]!="object"&&obj!=null){obj=isArrayLike(obj)?obj:values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value!=null&&value<result){result=value}}}else{iteratee=cb(iteratee,context);each(obj,function(v,index,list){computed=iteratee(v,index,list);if(computed<lastComputed||computed===Infinity&&result===Infinity){result=v;lastComputed=computed}})}return result}var reStrSymbol=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function toArray(obj){if(!obj)return[];if(isArray(obj))return slice.call(obj);if(isString(obj)){return obj.match(reStrSymbol)}if(isArrayLike(obj))return map(obj,identity);return values(obj)}function sample(obj,n,guard){if(n==null||guard){if(!isArrayLike(obj))obj=values(obj);return obj[random(obj.length-1)]}var sample=toArray(obj);var length=getLength(sample);n=Math.max(Math.min(n,length),0);var last=length-1;for(var index=0;index<n;index++){var rand=random(index,last);var temp=sample[index];sample[index]=sample[rand];sample[rand]=temp}return sample.slice(0,n)}function shuffle(obj){return sample(obj,Infinity)}function sortBy(obj,iteratee,context){var index=0;iteratee=cb(iteratee,context);return pluck(map(obj,function(value,key,list){return{value:value,index:index++,criteria:iteratee(value,key,list)}}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1}return left.index-right.index}),"value")}function group(behavior,partition){return function(obj,iteratee,context){var result=partition?[[],[]]:{};iteratee=cb(iteratee,context);each(obj,function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key)});return result}}var groupBy=group(function(result,value,key){if(has$1(result,key))result[key].push(value);else result[key]=[value]});var indexBy=group(function(result,value,key){result[key]=value});var countBy=group(function(result,value,key){if(has$1(result,key))result[key]++;else result[key]=1});var partition=group(function(result,value,pass){result[pass?0:1].push(value)},true);function size(obj){if(obj==null)return 0;return isArrayLike(obj)?obj.length:keys(obj).length}function keyInObj(value,key,obj){return key in obj}var pick=restArguments(function(obj,keys){var result={},iteratee=keys[0];if(obj==null)return result;if(isFunction$1(iteratee)){if(keys.length>1)iteratee=optimizeCb(iteratee,keys[1]);keys=allKeys(obj)}else{iteratee=keyInObj;keys=flatten$1(keys,false,false);obj=Object(obj)}for(var i=0,length=keys.length;i<length;i++){var key=keys[i];var value=obj[key];if(iteratee(value,key,obj))result[key]=value}return result});var omit=restArguments(function(obj,keys){var iteratee=keys[0],context;if(isFunction$1(iteratee)){iteratee=negate(iteratee);if(keys.length>1)context=keys[1]}else{keys=map(flatten$1(keys,false,false),String);iteratee=function(value,key){return!contains(keys,key)}}return pick(obj,iteratee,context)});function initial(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(n==null||guard?1:n)))}function first(array,n,guard){if(array==null||array.length<1)return n==null||guard?void 0:[];if(n==null||guard)return array[0];return initial(array,array.length-n)}function rest(array,n,guard){return slice.call(array,n==null||guard?1:n)}function last(array,n,guard){if(array==null||array.length<1)return n==null||guard?void 0:[];if(n==null||guard)return array[array.length-1];return rest(array,Math.max(0,array.length-n))}function compact(array){return filter(array,Boolean)}function flatten(array,depth){return flatten$1(array,depth,false)}var difference=restArguments(function(array,rest){rest=flatten$1(rest,true,true);return filter(array,function(value){return!contains(rest,value)})});var without=restArguments(function(array,otherArrays){return difference(array,otherArrays)});function uniq(array,isSorted,iteratee,context){if(!isBoolean(isSorted)){context=iteratee;iteratee=isSorted;isSorted=false}if(iteratee!=null)iteratee=cb(iteratee,context);var result=[];var seen=[];for(var i=0,length=getLength(array);i<length;i++){var value=array[i],computed=iteratee?iteratee(value,i,array):value;if(isSorted&&!iteratee){if(!i||seen!==computed)result.push(value);seen=computed}else if(iteratee){if(!contains(seen,computed)){seen.push(computed);result.push(value)}}else if(!contains(result,value)){result.push(value)}}return result}var union=restArguments(function(arrays){return uniq(flatten$1(arrays,true,true))});function intersection(array){var result=[];var argsLength=arguments.length;for(var i=0,length=getLength(array);i<length;i++){var item=array[i];if(contains(result,item))continue;var j;for(j=1;j<argsLength;j++){if(!contains(arguments[j],item))break}if(j===argsLength)result.push(item)}return result}function unzip(array){var length=array&&max(array,getLength).length||0;var result=Array(length);for(var index=0;index<length;index++){result[index]=pluck(array,index)}return result}var zip=restArguments(unzip);function object(list,values){var result={};for(var i=0,length=getLength(list);i<length;i++){if(values){result[list[i]]=values[i]}else{result[list[i][0]]=list[i][1]}}return result}function range(start,stop,step){if(stop==null){stop=start||0;start=0}if(!step){step=stop<start?-1:1}var length=Math.max(Math.ceil((stop-start)/step),0);var range=Array(length);for(var idx=0;idx<length;idx++,start+=step){range[idx]=start}return range}function chunk(array,count){if(count==null||count<1)return[];var result=[];var i=0,length=array.length;while(i<length){result.push(slice.call(array,i,i+=count))}return result}function chainResult(instance,obj){return instance._chain?_$1(obj).chain():obj}function mixin(obj){each(functions(obj),function(name){var func=_$1[name]=obj[name];_$1.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return chainResult(this,func.apply(_$1,args))}});return _$1}each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_$1.prototype[name]=function(){var obj=this._wrapped;if(obj!=null){method.apply(obj,arguments);if((name==="shift"||name==="splice")&&obj.length===0){delete obj[0]}}return chainResult(this,obj)}});each(["concat","join","slice"],function(name){var method=ArrayProto[name];_$1.prototype[name]=function(){var obj=this._wrapped;if(obj!=null)obj=method.apply(obj,arguments);return chainResult(this,obj)}});var allExports={__proto__:null,VERSION:VERSION,restArguments:restArguments,isObject:isObject,isNull:isNull,isUndefined:isUndefined,isBoolean:isBoolean,isElement:isElement,isString:isString,isNumber:isNumber,isDate:isDate,isRegExp:isRegExp,isError:isError,isSymbol:isSymbol,isArrayBuffer:isArrayBuffer,isDataView:isDataView$1,isArray:isArray,isFunction:isFunction$1,isArguments:isArguments$1,isFinite:isFinite$1,isNaN:isNaN$1,isTypedArray:isTypedArray$1,isEmpty:isEmpty,isMatch:isMatch,isEqual:isEqual,isMap:isMap,isWeakMap:isWeakMap,isSet:isSet,isWeakSet:isWeakSet,keys:keys,allKeys:allKeys,values:values,pairs:pairs,invert:invert,functions:functions,methods:functions,extend:extend,extendOwn:extendOwn,assign:extendOwn,defaults:defaults,create:create,clone:clone,tap:tap,get:get,has:has,mapObject:mapObject,identity:identity,constant:constant,noop:noop,toPath:toPath$1,property:property,propertyOf:propertyOf,matcher:matcher,matches:matcher,times:times,random:random,now:now,escape:_escape,unescape:_unescape,templateSettings:templateSettings,template:template,result:result,uniqueId:uniqueId,chain:chain,iteratee:iteratee,partial:partial,bind:bind,bindAll:bindAll,memoize:memoize,delay:delay,defer:defer,throttle:throttle,debounce:debounce,wrap:wrap,negate:negate,compose:compose,after:after,before:before,once:once,findKey:findKey,findIndex:findIndex,findLastIndex:findLastIndex,sortedIndex:sortedIndex,indexOf:indexOf,lastIndexOf:lastIndexOf,find:find,detect:find,findWhere:findWhere,each:each,forEach:each,map:map,collect:map,reduce:reduce,foldl:reduce,inject:reduce,reduceRight:reduceRight,foldr:reduceRight,filter:filter,select:filter,reject:reject,every:every,all:every,some:some,any:some,contains:contains,includes:contains,include:contains,invoke:invoke,pluck:pluck,where:where,max:max,min:min,shuffle:shuffle,sample:sample,sortBy:sortBy,groupBy:groupBy,indexBy:indexBy,countBy:countBy,partition:partition,toArray:toArray,size:size,pick:pick,omit:omit,first:first,head:first,take:first,initial:initial,last:last,rest:rest,tail:rest,drop:rest,compact:compact,flatten:flatten,without:without,uniq:uniq,unique:uniq,union:union,intersection:intersection,difference:difference,unzip:unzip,transpose:unzip,zip:zip,object:object,range:range,chunk:chunk,mixin:mixin,default:_$1};var _=mixin(allExports);_._=_;return _})},{}],355:[function(require,module,exports){"use strict";var ensureString=require("type/string/ensure"),uniGlobal=require("./lib/uni-global");var objHasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(key){key=ensureString(key,{name:"key"});if(objHasOwnProperty.call(uniGlobal,key))return uniGlobal[key];var value=Object.create?Object.create(null):{};uniGlobal[key]=value;return value}},{"./lib/uni-global":357,"type/string/ensure":351}],356:[function(require,module,exports){"use strict";if(!Object.defineProperty||!Object.create)module.exports="3";else if(typeof Symbol==="function"&&Symbol["for"])module.exports="2015+";else module.exports="5"},{}],357:[function(require,module,exports){"use strict";var esEnvType=require("./es-env-type");switch(esEnvType){case"3":if(EvalError.$ug202109){module.exports=EvalError.$ug202109;return}module.exports=EvalError.$ug202109={};return;case"5":if(EvalError.$uniGlobal202109){module.exports=EvalError.$uniGlobal202109;return}Object.defineProperty(EvalError,"$uniGlobal202109",{value:module.exports=Object.create(null)});return;case"2015+":var uniGlobalSymbol=Symbol["for"]("$uniGlobal202109");if(EvalError[uniGlobalSymbol]){module.exports=EvalError[uniGlobalSymbol];return}Object.defineProperty(EvalError,uniGlobalSymbol,{value:module.exports=Object.create(null)});return;default:throw new Error("Unrecognized environment type: "+esEnvType)}},{"./es-env-type":356}],358:[function(require,module,exports){
/*!
 * unpipe
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
"use strict";module.exports=unpipe;function hasPipeDataListeners(stream){var listeners=stream.listeners("data");for(var i=0;i<listeners.length;i++){if(listeners[i].name==="ondata"){return true}}return false}function unpipe(stream){if(!stream){throw new TypeError("argument stream is required")}if(typeof stream.unpipe==="function"){stream.unpipe();return}if(!hasPipeDataListeners(stream)){return}var listener;var listeners=stream.listeners("close");for(var i=0;i<listeners.length;i++){listener=listeners[i];if(listener.name!=="cleanup"&&listener.name!=="onclose"){continue}listener.call(stream)}}},{}],359:[function(require,module,exports){module.exports=require("util").deprecate},{util:undefined}],360:[function(require,module,exports){exports=module.exports=function(a,b){if(a&&b){for(var key in b){a[key]=b[key]}}return a}},{}],361:[function(require,module,exports){
/*!
 * vary
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */
"use strict";module.exports=vary;module.exports.append=append;var FIELD_NAME_REGEXP=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/;function append(header,field){if(typeof header!=="string"){throw new TypeError("header argument is required")}if(!field){throw new TypeError("field argument is required")}var fields=!Array.isArray(field)?parse(String(field)):field;for(var j=0;j<fields.length;j++){if(!FIELD_NAME_REGEXP.test(fields[j])){throw new TypeError("field argument contains an invalid header name")}}if(header==="*"){return header}var val=header;var vals=parse(header.toLowerCase());if(fields.indexOf("*")!==-1||vals.indexOf("*")!==-1){return"*"}for(var i=0;i<fields.length;i++){var fld=fields[i].toLowerCase();if(vals.indexOf(fld)===-1){vals.push(fld);val=val?val+", "+fields[i]:fields[i]}}return val}function parse(header){var end=0;var list=[];var start=0;for(var i=0,len=header.length;i<len;i++){switch(header.charCodeAt(i)){case 32:if(start===end){start=end=i+1}break;case 44:list.push(header.substring(start,end));start=end=i+1;break;default:end=i+1;break}}list.push(header.substring(start,end));return list}function vary(res,field){if(!res||!res.getHeader||!res.setHeader){throw new TypeError("res argument is required")}var val=res.getHeader("Vary")||"";var header=Array.isArray(val)?val.join(", "):String(val);if(val=append(header,field)){res.setHeader("Vary",val)}}},{}],362:[function(require,module,exports){"use strict";var stringWidth=require("string-width");exports.center=alignCenter;exports.left=alignLeft;exports.right=alignRight;function createPadding(width){var result="";var string=" ";var n=width;do{if(n%2){result+=string}n=Math.floor(n/2);string+=string}while(n);return result}function alignLeft(str,width){var trimmed=str.trimRight();if(trimmed.length===0&&str.length>=width)return str;var padding="";var strWidth=stringWidth(trimmed);if(strWidth<width){padding=createPadding(width-strWidth)}return trimmed+padding}function alignRight(str,width){var trimmed=str.trimLeft();if(trimmed.length===0&&str.length>=width)return str;var padding="";var strWidth=stringWidth(trimmed);if(strWidth<width){padding=createPadding(width-strWidth)}return padding+trimmed}function alignCenter(str,width){var trimmed=str.trim();if(trimmed.length===0&&str.length>=width)return str;var padLeft="";var padRight="";var strWidth=stringWidth(trimmed);if(strWidth<width){var padLeftBy=parseInt((width-strWidth)/2,10);padLeft=createPadding(padLeftBy);padRight=createPadding(width-(strWidth+padLeftBy))}return padLeft+trimmed+padRight}},{"string-width":338}],363:[function(require,module,exports){module.exports=wrappy;function wrappy(fn,cb){if(fn&&cb)return wrappy(fn)(cb);if(typeof fn!=="function")throw new TypeError("need wrapper function");Object.keys(fn).forEach(function(k){wrapper[k]=fn[k]});return wrapper;function wrapper(){var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}var ret=fn.apply(this,args);var cb=args[args.length-1];if(typeof ret==="function"&&ret!==cb){Object.keys(cb).forEach(function(k){ret[k]=cb[k]})}return ret}}},{}],364:[function(require,module,exports){"use strict";const WebSocket=require("./lib/websocket");WebSocket.createWebSocketStream=require("./lib/stream");WebSocket.Server=require("./lib/websocket-server");WebSocket.Receiver=require("./lib/receiver");WebSocket.Sender=require("./lib/sender");WebSocket.WebSocket=WebSocket;WebSocket.WebSocketServer=WebSocket.Server;module.exports=WebSocket},{"./lib/receiver":371,"./lib/sender":372,"./lib/stream":373,"./lib/websocket":377,"./lib/websocket-server":376}],365:[function(require,module,exports){"use strict";const{EMPTY_BUFFER:EMPTY_BUFFER}=require("./constants");const FastBuffer=Buffer[Symbol.species];function concat(list,totalLength){if(list.length===0)return EMPTY_BUFFER;if(list.length===1)return list[0];const target=Buffer.allocUnsafe(totalLength);let offset=0;for(let i=0;i<list.length;i++){const buf=list[i];target.set(buf,offset);offset+=buf.length}if(offset<totalLength){return new FastBuffer(target.buffer,target.byteOffset,offset)}return target}function _mask(source,mask,output,offset,length){for(let i=0;i<length;i++){output[offset+i]=source[i]^mask[i&3]}}function _unmask(buffer,mask){for(let i=0;i<buffer.length;i++){buffer[i]^=mask[i&3]}}function toArrayBuffer(buf){if(buf.length===buf.buffer.byteLength){return buf.buffer}return buf.buffer.slice(buf.byteOffset,buf.byteOffset+buf.length)}function toBuffer(data){toBuffer.readOnly=true;if(Buffer.isBuffer(data))return data;let buf;if(data instanceof ArrayBuffer){buf=new FastBuffer(data)}else if(ArrayBuffer.isView(data)){buf=new FastBuffer(data.buffer,data.byteOffset,data.byteLength)}else{buf=Buffer.from(data);toBuffer.readOnly=false}return buf}module.exports={concat:concat,mask:_mask,toArrayBuffer:toArrayBuffer,toBuffer:toBuffer,unmask:_unmask};if(!process.env.WS_NO_BUFFER_UTIL){try{const bufferUtil=require("bufferutil");module.exports.mask=function(source,mask,output,offset,length){if(length<48)_mask(source,mask,output,offset,length);else bufferUtil.mask(source,mask,output,offset,length)};module.exports.unmask=function(buffer,mask){if(buffer.length<32)_unmask(buffer,mask);else bufferUtil.unmask(buffer,mask)}}catch(e){}}},{"./constants":366,bufferutil:undefined}],366:[function(require,module,exports){"use strict";module.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},{}],367:[function(require,module,exports){"use strict";const{kForOnEventAttribute:kForOnEventAttribute,kListener:kListener}=require("./constants");const kCode=Symbol("kCode");const kData=Symbol("kData");const kError=Symbol("kError");const kMessage=Symbol("kMessage");const kReason=Symbol("kReason");const kTarget=Symbol("kTarget");const kType=Symbol("kType");const kWasClean=Symbol("kWasClean");class Event{constructor(type){this[kTarget]=null;this[kType]=type}get target(){return this[kTarget]}get type(){return this[kType]}}Object.defineProperty(Event.prototype,"target",{enumerable:true});Object.defineProperty(Event.prototype,"type",{enumerable:true});class CloseEvent extends Event{constructor(type,options={}){super(type);this[kCode]=options.code===undefined?0:options.code;this[kReason]=options.reason===undefined?"":options.reason;this[kWasClean]=options.wasClean===undefined?false:options.wasClean}get code(){return this[kCode]}get reason(){return this[kReason]}get wasClean(){return this[kWasClean]}}Object.defineProperty(CloseEvent.prototype,"code",{enumerable:true});Object.defineProperty(CloseEvent.prototype,"reason",{enumerable:true});Object.defineProperty(CloseEvent.prototype,"wasClean",{enumerable:true});class ErrorEvent extends Event{constructor(type,options={}){super(type);this[kError]=options.error===undefined?null:options.error;this[kMessage]=options.message===undefined?"":options.message}get error(){return this[kError]}get message(){return this[kMessage]}}Object.defineProperty(ErrorEvent.prototype,"error",{enumerable:true});Object.defineProperty(ErrorEvent.prototype,"message",{enumerable:true});class MessageEvent extends Event{constructor(type,options={}){super(type);this[kData]=options.data===undefined?null:options.data}get data(){return this[kData]}}Object.defineProperty(MessageEvent.prototype,"data",{enumerable:true});const EventTarget={addEventListener(type,handler,options={}){for(const listener of this.listeners(type)){if(!options[kForOnEventAttribute]&&listener[kListener]===handler&&!listener[kForOnEventAttribute]){return}}let wrapper;if(type==="message"){wrapper=function onMessage(data,isBinary){const event=new MessageEvent("message",{data:isBinary?data:data.toString()});event[kTarget]=this;callListener(handler,this,event)}}else if(type==="close"){wrapper=function onClose(code,message){const event=new CloseEvent("close",{code:code,reason:message.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});event[kTarget]=this;callListener(handler,this,event)}}else if(type==="error"){wrapper=function onError(error){const event=new ErrorEvent("error",{error:error,message:error.message});event[kTarget]=this;callListener(handler,this,event)}}else if(type==="open"){wrapper=function onOpen(){const event=new Event("open");event[kTarget]=this;callListener(handler,this,event)}}else{return}wrapper[kForOnEventAttribute]=!!options[kForOnEventAttribute];wrapper[kListener]=handler;if(options.once){this.once(type,wrapper)}else{this.on(type,wrapper)}},removeEventListener(type,handler){for(const listener of this.listeners(type)){if(listener[kListener]===handler&&!listener[kForOnEventAttribute]){this.removeListener(type,listener);break}}}};module.exports={CloseEvent:CloseEvent,ErrorEvent:ErrorEvent,Event:Event,EventTarget:EventTarget,MessageEvent:MessageEvent};function callListener(listener,thisArg,event){if(typeof listener==="object"&&listener.handleEvent){listener.handleEvent.call(listener,event)}else{listener.call(thisArg,event)}}},{"./constants":366}],368:[function(require,module,exports){"use strict";const{tokenChars:tokenChars}=require("./validation");function push(dest,name,elem){if(dest[name]===undefined)dest[name]=[elem];else dest[name].push(elem)}function parse(header){const offers=Object.create(null);let params=Object.create(null);let mustUnescape=false;let isEscaping=false;let inQuotes=false;let extensionName;let paramName;let start=-1;let code=-1;let end=-1;let i=0;for(;i<header.length;i++){code=header.charCodeAt(i);if(extensionName===undefined){if(end===-1&&tokenChars[code]===1){if(start===-1)start=i}else if(i!==0&&(code===32||code===9)){if(end===-1&&start!==-1)end=i}else if(code===59||code===44){if(start===-1){throw new SyntaxError(`Unexpected character at index ${i}`)}if(end===-1)end=i;const name=header.slice(start,end);if(code===44){push(offers,name,params);params=Object.create(null)}else{extensionName=name}start=end=-1}else{throw new SyntaxError(`Unexpected character at index ${i}`)}}else if(paramName===undefined){if(end===-1&&tokenChars[code]===1){if(start===-1)start=i}else if(code===32||code===9){if(end===-1&&start!==-1)end=i}else if(code===59||code===44){if(start===-1){throw new SyntaxError(`Unexpected character at index ${i}`)}if(end===-1)end=i;push(params,header.slice(start,end),true);if(code===44){push(offers,extensionName,params);params=Object.create(null);extensionName=undefined}start=end=-1}else if(code===61&&start!==-1&&end===-1){paramName=header.slice(start,i);start=end=-1}else{throw new SyntaxError(`Unexpected character at index ${i}`)}}else{if(isEscaping){if(tokenChars[code]!==1){throw new SyntaxError(`Unexpected character at index ${i}`)}if(start===-1)start=i;else if(!mustUnescape)mustUnescape=true;isEscaping=false}else if(inQuotes){if(tokenChars[code]===1){if(start===-1)start=i}else if(code===34&&start!==-1){inQuotes=false;end=i}else if(code===92){isEscaping=true}else{throw new SyntaxError(`Unexpected character at index ${i}`)}}else if(code===34&&header.charCodeAt(i-1)===61){inQuotes=true}else if(end===-1&&tokenChars[code]===1){if(start===-1)start=i}else if(start!==-1&&(code===32||code===9)){if(end===-1)end=i}else if(code===59||code===44){if(start===-1){throw new SyntaxError(`Unexpected character at index ${i}`)}if(end===-1)end=i;let value=header.slice(start,end);if(mustUnescape){value=value.replace(/\\/g,"");mustUnescape=false}push(params,paramName,value);if(code===44){push(offers,extensionName,params);params=Object.create(null);extensionName=undefined}paramName=undefined;start=end=-1}else{throw new SyntaxError(`Unexpected character at index ${i}`)}}}if(start===-1||inQuotes||code===32||code===9){throw new SyntaxError("Unexpected end of input")}if(end===-1)end=i;const token=header.slice(start,end);if(extensionName===undefined){push(offers,token,params)}else{if(paramName===undefined){push(params,token,true)}else if(mustUnescape){push(params,paramName,token.replace(/\\/g,""))}else{push(params,paramName,token)}push(offers,extensionName,params)}return offers}function format(extensions){return Object.keys(extensions).map(extension=>{let configurations=extensions[extension];if(!Array.isArray(configurations))configurations=[configurations];return configurations.map(params=>[extension].concat(Object.keys(params).map(k=>{let values=params[k];if(!Array.isArray(values))values=[values];return values.map(v=>v===true?k:`${k}=${v}`).join("; ")})).join("; ")).join(", ")}).join(", ")}module.exports={format:format,parse:parse}},{"./validation":375}],369:[function(require,module,exports){"use strict";const kDone=Symbol("kDone");const kRun=Symbol("kRun");class Limiter{constructor(concurrency){this[kDone]=()=>{this.pending--;this[kRun]()};this.concurrency=concurrency||Infinity;this.jobs=[];this.pending=0}add(job){this.jobs.push(job);this[kRun]()}[kRun](){if(this.pending===this.concurrency)return;if(this.jobs.length){const job=this.jobs.shift();this.pending++;job(this[kDone])}}}module.exports=Limiter},{}],370:[function(require,module,exports){"use strict";const zlib=require("zlib");const bufferUtil=require("./buffer-util");const Limiter=require("./limiter");const{kStatusCode:kStatusCode}=require("./constants");const FastBuffer=Buffer[Symbol.species];const TRAILER=Buffer.from([0,0,255,255]);const kPerMessageDeflate=Symbol("permessage-deflate");const kTotalLength=Symbol("total-length");const kCallback=Symbol("callback");const kBuffers=Symbol("buffers");const kError=Symbol("error");let zlibLimiter;class PerMessageDeflate{constructor(options,isServer,maxPayload){this._maxPayload=maxPayload|0;this._options=options||{};this._threshold=this._options.threshold!==undefined?this._options.threshold:1024;this._isServer=!!isServer;this._deflate=null;this._inflate=null;this.params=null;if(!zlibLimiter){const concurrency=this._options.concurrencyLimit!==undefined?this._options.concurrencyLimit:10;zlibLimiter=new Limiter(concurrency)}}static get extensionName(){return"permessage-deflate"}offer(){const params={};if(this._options.serverNoContextTakeover){params.server_no_context_takeover=true}if(this._options.clientNoContextTakeover){params.client_no_context_takeover=true}if(this._options.serverMaxWindowBits){params.server_max_window_bits=this._options.serverMaxWindowBits}if(this._options.clientMaxWindowBits){params.client_max_window_bits=this._options.clientMaxWindowBits}else if(this._options.clientMaxWindowBits==null){params.client_max_window_bits=true}return params}accept(configurations){configurations=this.normalizeParams(configurations);this.params=this._isServer?this.acceptAsServer(configurations):this.acceptAsClient(configurations);return this.params}cleanup(){if(this._inflate){this._inflate.close();this._inflate=null}if(this._deflate){const callback=this._deflate[kCallback];this._deflate.close();this._deflate=null;if(callback){callback(new Error("The deflate stream was closed while data was being processed"))}}}acceptAsServer(offers){const opts=this._options;const accepted=offers.find(params=>{if(opts.serverNoContextTakeover===false&&params.server_no_context_takeover||params.server_max_window_bits&&(opts.serverMaxWindowBits===false||typeof opts.serverMaxWindowBits==="number"&&opts.serverMaxWindowBits>params.server_max_window_bits)||typeof opts.clientMaxWindowBits==="number"&&!params.client_max_window_bits){return false}return true});if(!accepted){throw new Error("None of the extension offers can be accepted")}if(opts.serverNoContextTakeover){accepted.server_no_context_takeover=true}if(opts.clientNoContextTakeover){accepted.client_no_context_takeover=true}if(typeof opts.serverMaxWindowBits==="number"){accepted.server_max_window_bits=opts.serverMaxWindowBits}if(typeof opts.clientMaxWindowBits==="number"){accepted.client_max_window_bits=opts.clientMaxWindowBits}else if(accepted.client_max_window_bits===true||opts.clientMaxWindowBits===false){delete accepted.client_max_window_bits}return accepted}acceptAsClient(response){const params=response[0];if(this._options.clientNoContextTakeover===false&&params.client_no_context_takeover){throw new Error('Unexpected parameter "client_no_context_takeover"')}if(!params.client_max_window_bits){if(typeof this._options.clientMaxWindowBits==="number"){params.client_max_window_bits=this._options.clientMaxWindowBits}}else if(this._options.clientMaxWindowBits===false||typeof this._options.clientMaxWindowBits==="number"&&params.client_max_window_bits>this._options.clientMaxWindowBits){throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}return params}normalizeParams(configurations){configurations.forEach(params=>{Object.keys(params).forEach(key=>{let value=params[key];if(value.length>1){throw new Error(`Parameter "${key}" must have only a single value`)}value=value[0];if(key==="client_max_window_bits"){if(value!==true){const num=+value;if(!Number.isInteger(num)||num<8||num>15){throw new TypeError(`Invalid value for parameter "${key}": ${value}`)}value=num}else if(!this._isServer){throw new TypeError(`Invalid value for parameter "${key}": ${value}`)}}else if(key==="server_max_window_bits"){const num=+value;if(!Number.isInteger(num)||num<8||num>15){throw new TypeError(`Invalid value for parameter "${key}": ${value}`)}value=num}else if(key==="client_no_context_takeover"||key==="server_no_context_takeover"){if(value!==true){throw new TypeError(`Invalid value for parameter "${key}": ${value}`)}}else{throw new Error(`Unknown parameter "${key}"`)}params[key]=value})});return configurations}decompress(data,fin,callback){zlibLimiter.add(done=>{this._decompress(data,fin,(err,result)=>{done();callback(err,result)})})}compress(data,fin,callback){zlibLimiter.add(done=>{this._compress(data,fin,(err,result)=>{done();callback(err,result)})})}_decompress(data,fin,callback){const endpoint=this._isServer?"client":"server";if(!this._inflate){const key=`${endpoint}_max_window_bits`;const windowBits=typeof this.params[key]!=="number"?zlib.Z_DEFAULT_WINDOWBITS:this.params[key];this._inflate=zlib.createInflateRaw({...this._options.zlibInflateOptions,windowBits:windowBits});this._inflate[kPerMessageDeflate]=this;this._inflate[kTotalLength]=0;this._inflate[kBuffers]=[];this._inflate.on("error",inflateOnError);this._inflate.on("data",inflateOnData)}this._inflate[kCallback]=callback;this._inflate.write(data);if(fin)this._inflate.write(TRAILER);this._inflate.flush(()=>{const err=this._inflate[kError];if(err){this._inflate.close();this._inflate=null;callback(err);return}const data=bufferUtil.concat(this._inflate[kBuffers],this._inflate[kTotalLength]);if(this._inflate._readableState.endEmitted){this._inflate.close();this._inflate=null}else{this._inflate[kTotalLength]=0;this._inflate[kBuffers]=[];if(fin&&this.params[`${endpoint}_no_context_takeover`]){this._inflate.reset()}}callback(null,data)})}_compress(data,fin,callback){const endpoint=this._isServer?"server":"client";if(!this._deflate){const key=`${endpoint}_max_window_bits`;const windowBits=typeof this.params[key]!=="number"?zlib.Z_DEFAULT_WINDOWBITS:this.params[key];this._deflate=zlib.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:windowBits});this._deflate[kTotalLength]=0;this._deflate[kBuffers]=[];this._deflate.on("data",deflateOnData)}this._deflate[kCallback]=callback;this._deflate.write(data);this._deflate.flush(zlib.Z_SYNC_FLUSH,()=>{if(!this._deflate){return}let data=bufferUtil.concat(this._deflate[kBuffers],this._deflate[kTotalLength]);if(fin){data=new FastBuffer(data.buffer,data.byteOffset,data.length-4)}this._deflate[kCallback]=null;this._deflate[kTotalLength]=0;this._deflate[kBuffers]=[];if(fin&&this.params[`${endpoint}_no_context_takeover`]){this._deflate.reset()}callback(null,data)})}}module.exports=PerMessageDeflate;function deflateOnData(chunk){this[kBuffers].push(chunk);this[kTotalLength]+=chunk.length}function inflateOnData(chunk){this[kTotalLength]+=chunk.length;if(this[kPerMessageDeflate]._maxPayload<1||this[kTotalLength]<=this[kPerMessageDeflate]._maxPayload){this[kBuffers].push(chunk);return}this[kError]=new RangeError("Max payload size exceeded");this[kError].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH";this[kError][kStatusCode]=1009;this.removeListener("data",inflateOnData);this.reset()}function inflateOnError(err){this[kPerMessageDeflate]._inflate=null;err[kStatusCode]=1007;this[kCallback](err)}},{"./buffer-util":365,"./constants":366,"./limiter":369,zlib:undefined}],371:[function(require,module,exports){"use strict";const{Writable:Writable}=require("stream");const PerMessageDeflate=require("./permessage-deflate");const{BINARY_TYPES:BINARY_TYPES,EMPTY_BUFFER:EMPTY_BUFFER,kStatusCode:kStatusCode,kWebSocket:kWebSocket}=require("./constants");const{concat:concat,toArrayBuffer:toArrayBuffer,unmask:unmask}=require("./buffer-util");const{isValidStatusCode:isValidStatusCode,isValidUTF8:isValidUTF8}=require("./validation");const FastBuffer=Buffer[Symbol.species];const GET_INFO=0;const GET_PAYLOAD_LENGTH_16=1;const GET_PAYLOAD_LENGTH_64=2;const GET_MASK=3;const GET_DATA=4;const INFLATING=5;const DEFER_EVENT=6;class Receiver extends Writable{constructor(options={}){super();this._allowSynchronousEvents=options.allowSynchronousEvents!==undefined?options.allowSynchronousEvents:true;this._binaryType=options.binaryType||BINARY_TYPES[0];this._extensions=options.extensions||{};this._isServer=!!options.isServer;this._maxPayload=options.maxPayload|0;this._skipUTF8Validation=!!options.skipUTF8Validation;this[kWebSocket]=undefined;this._bufferedBytes=0;this._buffers=[];this._compressed=false;this._payloadLength=0;this._mask=undefined;this._fragmented=0;this._masked=false;this._fin=false;this._opcode=0;this._totalPayloadLength=0;this._messageLength=0;this._fragments=[];this._errored=false;this._loop=false;this._state=GET_INFO}_write(chunk,encoding,cb){if(this._opcode===8&&this._state==GET_INFO)return cb();this._bufferedBytes+=chunk.length;this._buffers.push(chunk);this.startLoop(cb)}consume(n){this._bufferedBytes-=n;if(n===this._buffers[0].length)return this._buffers.shift();if(n<this._buffers[0].length){const buf=this._buffers[0];this._buffers[0]=new FastBuffer(buf.buffer,buf.byteOffset+n,buf.length-n);return new FastBuffer(buf.buffer,buf.byteOffset,n)}const dst=Buffer.allocUnsafe(n);do{const buf=this._buffers[0];const offset=dst.length-n;if(n>=buf.length){dst.set(this._buffers.shift(),offset)}else{dst.set(new Uint8Array(buf.buffer,buf.byteOffset,n),offset);this._buffers[0]=new FastBuffer(buf.buffer,buf.byteOffset+n,buf.length-n)}n-=buf.length}while(n>0);return dst}startLoop(cb){this._loop=true;do{switch(this._state){case GET_INFO:this.getInfo(cb);break;case GET_PAYLOAD_LENGTH_16:this.getPayloadLength16(cb);break;case GET_PAYLOAD_LENGTH_64:this.getPayloadLength64(cb);break;case GET_MASK:this.getMask();break;case GET_DATA:this.getData(cb);break;case INFLATING:case DEFER_EVENT:this._loop=false;return}}while(this._loop);if(!this._errored)cb()}getInfo(cb){if(this._bufferedBytes<2){this._loop=false;return}const buf=this.consume(2);if((buf[0]&48)!==0){const error=this.createError(RangeError,"RSV2 and RSV3 must be clear",true,1002,"WS_ERR_UNEXPECTED_RSV_2_3");cb(error);return}const compressed=(buf[0]&64)===64;if(compressed&&!this._extensions[PerMessageDeflate.extensionName]){const error=this.createError(RangeError,"RSV1 must be clear",true,1002,"WS_ERR_UNEXPECTED_RSV_1");cb(error);return}this._fin=(buf[0]&128)===128;this._opcode=buf[0]&15;this._payloadLength=buf[1]&127;if(this._opcode===0){if(compressed){const error=this.createError(RangeError,"RSV1 must be clear",true,1002,"WS_ERR_UNEXPECTED_RSV_1");cb(error);return}if(!this._fragmented){const error=this.createError(RangeError,"invalid opcode 0",true,1002,"WS_ERR_INVALID_OPCODE");cb(error);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){const error=this.createError(RangeError,`invalid opcode ${this._opcode}`,true,1002,"WS_ERR_INVALID_OPCODE");cb(error);return}this._compressed=compressed}else if(this._opcode>7&&this._opcode<11){if(!this._fin){const error=this.createError(RangeError,"FIN must be set",true,1002,"WS_ERR_EXPECTED_FIN");cb(error);return}if(compressed){const error=this.createError(RangeError,"RSV1 must be clear",true,1002,"WS_ERR_UNEXPECTED_RSV_1");cb(error);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){const error=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,true,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");cb(error);return}}else{const error=this.createError(RangeError,`invalid opcode ${this._opcode}`,true,1002,"WS_ERR_INVALID_OPCODE");cb(error);return}if(!this._fin&&!this._fragmented)this._fragmented=this._opcode;this._masked=(buf[1]&128)===128;if(this._isServer){if(!this._masked){const error=this.createError(RangeError,"MASK must be set",true,1002,"WS_ERR_EXPECTED_MASK");cb(error);return}}else if(this._masked){const error=this.createError(RangeError,"MASK must be clear",true,1002,"WS_ERR_UNEXPECTED_MASK");cb(error);return}if(this._payloadLength===126)this._state=GET_PAYLOAD_LENGTH_16;else if(this._payloadLength===127)this._state=GET_PAYLOAD_LENGTH_64;else this.haveLength(cb)}getPayloadLength16(cb){if(this._bufferedBytes<2){this._loop=false;return}this._payloadLength=this.consume(2).readUInt16BE(0);this.haveLength(cb)}getPayloadLength64(cb){if(this._bufferedBytes<8){this._loop=false;return}const buf=this.consume(8);const num=buf.readUInt32BE(0);if(num>Math.pow(2,53-32)-1){const error=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",false,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");cb(error);return}this._payloadLength=num*Math.pow(2,32)+buf.readUInt32BE(4);this.haveLength(cb)}haveLength(cb){if(this._payloadLength&&this._opcode<8){this._totalPayloadLength+=this._payloadLength;if(this._totalPayloadLength>this._maxPayload&&this._maxPayload>0){const error=this.createError(RangeError,"Max payload size exceeded",false,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");cb(error);return}}if(this._masked)this._state=GET_MASK;else this._state=GET_DATA}getMask(){if(this._bufferedBytes<4){this._loop=false;return}this._mask=this.consume(4);this._state=GET_DATA}getData(cb){let data=EMPTY_BUFFER;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=false;return}data=this.consume(this._payloadLength);if(this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0){unmask(data,this._mask)}}if(this._opcode>7){this.controlMessage(data,cb);return}if(this._compressed){this._state=INFLATING;this.decompress(data,cb);return}if(data.length){this._messageLength=this._totalPayloadLength;this._fragments.push(data)}this.dataMessage(cb)}decompress(data,cb){const perMessageDeflate=this._extensions[PerMessageDeflate.extensionName];perMessageDeflate.decompress(data,this._fin,(err,buf)=>{if(err)return cb(err);if(buf.length){this._messageLength+=buf.length;if(this._messageLength>this._maxPayload&&this._maxPayload>0){const error=this.createError(RangeError,"Max payload size exceeded",false,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");cb(error);return}this._fragments.push(buf)}this.dataMessage(cb);if(this._state===GET_INFO)this.startLoop(cb)})}dataMessage(cb){if(!this._fin){this._state=GET_INFO;return}const messageLength=this._messageLength;const fragments=this._fragments;this._totalPayloadLength=0;this._messageLength=0;this._fragmented=0;this._fragments=[];if(this._opcode===2){let data;if(this._binaryType==="nodebuffer"){data=concat(fragments,messageLength)}else if(this._binaryType==="arraybuffer"){data=toArrayBuffer(concat(fragments,messageLength))}else{data=fragments}if(this._allowSynchronousEvents){this.emit("message",data,true);this._state=GET_INFO}else{this._state=DEFER_EVENT;setImmediate(()=>{this.emit("message",data,true);this._state=GET_INFO;this.startLoop(cb)})}}else{const buf=concat(fragments,messageLength);if(!this._skipUTF8Validation&&!isValidUTF8(buf)){const error=this.createError(Error,"invalid UTF-8 sequence",true,1007,"WS_ERR_INVALID_UTF8");cb(error);return}if(this._state===INFLATING||this._allowSynchronousEvents){this.emit("message",buf,false);this._state=GET_INFO}else{this._state=DEFER_EVENT;setImmediate(()=>{this.emit("message",buf,false);this._state=GET_INFO;this.startLoop(cb)})}}}controlMessage(data,cb){if(this._opcode===8){if(data.length===0){this._loop=false;this.emit("conclude",1005,EMPTY_BUFFER);this.end()}else{const code=data.readUInt16BE(0);if(!isValidStatusCode(code)){const error=this.createError(RangeError,`invalid status code ${code}`,true,1002,"WS_ERR_INVALID_CLOSE_CODE");cb(error);return}const buf=new FastBuffer(data.buffer,data.byteOffset+2,data.length-2);if(!this._skipUTF8Validation&&!isValidUTF8(buf)){const error=this.createError(Error,"invalid UTF-8 sequence",true,1007,"WS_ERR_INVALID_UTF8");cb(error);return}this._loop=false;this.emit("conclude",code,buf);this.end()}this._state=GET_INFO;return}if(this._allowSynchronousEvents){this.emit(this._opcode===9?"ping":"pong",data);this._state=GET_INFO}else{this._state=DEFER_EVENT;setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",data);this._state=GET_INFO;this.startLoop(cb)})}}createError(ErrorCtor,message,prefix,statusCode,errorCode){this._loop=false;this._errored=true;const err=new ErrorCtor(prefix?`Invalid WebSocket frame: ${message}`:message);Error.captureStackTrace(err,this.createError);err.code=errorCode;err[kStatusCode]=statusCode;return err}}module.exports=Receiver},{"./buffer-util":365,"./constants":366,"./permessage-deflate":370,"./validation":375,stream:undefined}],372:[function(require,module,exports){"use strict";const{Duplex:Duplex}=require("stream");const{randomFillSync:randomFillSync}=require("crypto");const PerMessageDeflate=require("./permessage-deflate");const{EMPTY_BUFFER:EMPTY_BUFFER}=require("./constants");const{isValidStatusCode:isValidStatusCode}=require("./validation");const{mask:applyMask,toBuffer:toBuffer}=require("./buffer-util");const kByteLength=Symbol("kByteLength");const maskBuffer=Buffer.alloc(4);const RANDOM_POOL_SIZE=8*1024;let randomPool;let randomPoolPointer=RANDOM_POOL_SIZE;class Sender{constructor(socket,extensions,generateMask){this._extensions=extensions||{};if(generateMask){this._generateMask=generateMask;this._maskBuffer=Buffer.alloc(4)}this._socket=socket;this._firstFragment=true;this._compress=false;this._bufferedBytes=0;this._deflating=false;this._queue=[]}static frame(data,options){let mask;let merge=false;let offset=2;let skipMasking=false;if(options.mask){mask=options.maskBuffer||maskBuffer;if(options.generateMask){options.generateMask(mask)}else{if(randomPoolPointer===RANDOM_POOL_SIZE){if(randomPool===undefined){randomPool=Buffer.alloc(RANDOM_POOL_SIZE)}randomFillSync(randomPool,0,RANDOM_POOL_SIZE);randomPoolPointer=0}mask[0]=randomPool[randomPoolPointer++];mask[1]=randomPool[randomPoolPointer++];mask[2]=randomPool[randomPoolPointer++];mask[3]=randomPool[randomPoolPointer++]}skipMasking=(mask[0]|mask[1]|mask[2]|mask[3])===0;offset=6}let dataLength;if(typeof data==="string"){if((!options.mask||skipMasking)&&options[kByteLength]!==undefined){dataLength=options[kByteLength]}else{data=Buffer.from(data);dataLength=data.length}}else{dataLength=data.length;merge=options.mask&&options.readOnly&&!skipMasking}let payloadLength=dataLength;if(dataLength>=65536){offset+=8;payloadLength=127}else if(dataLength>125){offset+=2;payloadLength=126}const target=Buffer.allocUnsafe(merge?dataLength+offset:offset);target[0]=options.fin?options.opcode|128:options.opcode;if(options.rsv1)target[0]|=64;target[1]=payloadLength;if(payloadLength===126){target.writeUInt16BE(dataLength,2)}else if(payloadLength===127){target[2]=target[3]=0;target.writeUIntBE(dataLength,4,6)}if(!options.mask)return[target,data];target[1]|=128;target[offset-4]=mask[0];target[offset-3]=mask[1];target[offset-2]=mask[2];target[offset-1]=mask[3];if(skipMasking)return[target,data];if(merge){applyMask(data,mask,target,offset,dataLength);return[target]}applyMask(data,mask,data,0,dataLength);return[target,data]}close(code,data,mask,cb){let buf;if(code===undefined){buf=EMPTY_BUFFER}else if(typeof code!=="number"||!isValidStatusCode(code)){throw new TypeError("First argument must be a valid error code number")}else if(data===undefined||!data.length){buf=Buffer.allocUnsafe(2);buf.writeUInt16BE(code,0)}else{const length=Buffer.byteLength(data);if(length>123){throw new RangeError("The message must not be greater than 123 bytes")}buf=Buffer.allocUnsafe(2+length);buf.writeUInt16BE(code,0);if(typeof data==="string"){buf.write(data,2)}else{buf.set(data,2)}}const options={[kByteLength]:buf.length,fin:true,generateMask:this._generateMask,mask:mask,maskBuffer:this._maskBuffer,opcode:8,readOnly:false,rsv1:false};if(this._deflating){this.enqueue([this.dispatch,buf,false,options,cb])}else{this.sendFrame(Sender.frame(buf,options),cb)}}ping(data,mask,cb){let byteLength;let readOnly;if(typeof data==="string"){byteLength=Buffer.byteLength(data);readOnly=false}else{data=toBuffer(data);byteLength=data.length;readOnly=toBuffer.readOnly}if(byteLength>125){throw new RangeError("The data size must not be greater than 125 bytes")}const options={[kByteLength]:byteLength,fin:true,generateMask:this._generateMask,mask:mask,maskBuffer:this._maskBuffer,opcode:9,readOnly:readOnly,rsv1:false};if(this._deflating){this.enqueue([this.dispatch,data,false,options,cb])}else{this.sendFrame(Sender.frame(data,options),cb)}}pong(data,mask,cb){let byteLength;let readOnly;if(typeof data==="string"){byteLength=Buffer.byteLength(data);readOnly=false}else{data=toBuffer(data);byteLength=data.length;readOnly=toBuffer.readOnly}if(byteLength>125){throw new RangeError("The data size must not be greater than 125 bytes")}const options={[kByteLength]:byteLength,fin:true,generateMask:this._generateMask,mask:mask,maskBuffer:this._maskBuffer,opcode:10,readOnly:readOnly,rsv1:false};if(this._deflating){this.enqueue([this.dispatch,data,false,options,cb])}else{this.sendFrame(Sender.frame(data,options),cb)}}send(data,options,cb){const perMessageDeflate=this._extensions[PerMessageDeflate.extensionName];let opcode=options.binary?2:1;let rsv1=options.compress;let byteLength;let readOnly;if(typeof data==="string"){byteLength=Buffer.byteLength(data);readOnly=false}else{data=toBuffer(data);byteLength=data.length;readOnly=toBuffer.readOnly}if(this._firstFragment){this._firstFragment=false;if(rsv1&&perMessageDeflate&&perMessageDeflate.params[perMessageDeflate._isServer?"server_no_context_takeover":"client_no_context_takeover"]){rsv1=byteLength>=perMessageDeflate._threshold}this._compress=rsv1}else{rsv1=false;opcode=0}if(options.fin)this._firstFragment=true;if(perMessageDeflate){const opts={[kByteLength]:byteLength,fin:options.fin,generateMask:this._generateMask,mask:options.mask,maskBuffer:this._maskBuffer,opcode:opcode,readOnly:readOnly,rsv1:rsv1};if(this._deflating){this.enqueue([this.dispatch,data,this._compress,opts,cb])}else{this.dispatch(data,this._compress,opts,cb)}}else{this.sendFrame(Sender.frame(data,{[kByteLength]:byteLength,fin:options.fin,generateMask:this._generateMask,mask:options.mask,maskBuffer:this._maskBuffer,opcode:opcode,readOnly:readOnly,rsv1:false}),cb)}}dispatch(data,compress,options,cb){if(!compress){this.sendFrame(Sender.frame(data,options),cb);return}const perMessageDeflate=this._extensions[PerMessageDeflate.extensionName];this._bufferedBytes+=options[kByteLength];this._deflating=true;perMessageDeflate.compress(data,options.fin,(_,buf)=>{if(this._socket.destroyed){const err=new Error("The socket was closed while data was being compressed");if(typeof cb==="function")cb(err);for(let i=0;i<this._queue.length;i++){const params=this._queue[i];const callback=params[params.length-1];if(typeof callback==="function")callback(err)}return}this._bufferedBytes-=options[kByteLength];this._deflating=false;options.readOnly=false;this.sendFrame(Sender.frame(buf,options),cb);this.dequeue()})}dequeue(){while(!this._deflating&&this._queue.length){const params=this._queue.shift();this._bufferedBytes-=params[3][kByteLength];Reflect.apply(params[0],this,params.slice(1))}}enqueue(params){this._bufferedBytes+=params[3][kByteLength];this._queue.push(params)}sendFrame(list,cb){if(list.length===2){this._socket.cork();this._socket.write(list[0]);this._socket.write(list[1],cb);this._socket.uncork()}else{this._socket.write(list[0],cb)}}}module.exports=Sender},{"./buffer-util":365,"./constants":366,"./permessage-deflate":370,"./validation":375,crypto:undefined,stream:undefined}],373:[function(require,module,exports){"use strict";const{Duplex:Duplex}=require("stream");function emitClose(stream){stream.emit("close")}function duplexOnEnd(){if(!this.destroyed&&this._writableState.finished){this.destroy()}}function duplexOnError(err){this.removeListener("error",duplexOnError);this.destroy();if(this.listenerCount("error")===0){this.emit("error",err)}}function createWebSocketStream(ws,options){let terminateOnDestroy=true;const duplex=new Duplex({...options,autoDestroy:false,emitClose:false,objectMode:false,writableObjectMode:false});ws.on("message",function message(msg,isBinary){const data=!isBinary&&duplex._readableState.objectMode?msg.toString():msg;if(!duplex.push(data))ws.pause()});ws.once("error",function error(err){if(duplex.destroyed)return;terminateOnDestroy=false;duplex.destroy(err)});ws.once("close",function close(){if(duplex.destroyed)return;duplex.push(null)});duplex._destroy=function(err,callback){if(ws.readyState===ws.CLOSED){callback(err);process.nextTick(emitClose,duplex);return}let called=false;ws.once("error",function error(err){called=true;callback(err)});ws.once("close",function close(){if(!called)callback(err);process.nextTick(emitClose,duplex)});if(terminateOnDestroy)ws.terminate()};duplex._final=function(callback){if(ws.readyState===ws.CONNECTING){ws.once("open",function open(){duplex._final(callback)});return}if(ws._socket===null)return;if(ws._socket._writableState.finished){callback();if(duplex._readableState.endEmitted)duplex.destroy()}else{ws._socket.once("finish",function finish(){callback()});ws.close()}};duplex._read=function(){if(ws.isPaused)ws.resume()};duplex._write=function(chunk,encoding,callback){if(ws.readyState===ws.CONNECTING){ws.once("open",function open(){duplex._write(chunk,encoding,callback)});return}ws.send(chunk,callback)};duplex.on("end",duplexOnEnd);duplex.on("error",duplexOnError);return duplex}module.exports=createWebSocketStream},{stream:undefined}],374:[function(require,module,exports){"use strict";const{tokenChars:tokenChars}=require("./validation");function parse(header){const protocols=new Set;let start=-1;let end=-1;let i=0;for(i;i<header.length;i++){const code=header.charCodeAt(i);if(end===-1&&tokenChars[code]===1){if(start===-1)start=i}else if(i!==0&&(code===32||code===9)){if(end===-1&&start!==-1)end=i}else if(code===44){if(start===-1){throw new SyntaxError(`Unexpected character at index ${i}`)}if(end===-1)end=i;const protocol=header.slice(start,end);if(protocols.has(protocol)){throw new SyntaxError(`The "${protocol}" subprotocol is duplicated`)}protocols.add(protocol);start=end=-1}else{throw new SyntaxError(`Unexpected character at index ${i}`)}}if(start===-1||end!==-1){throw new SyntaxError("Unexpected end of input")}const protocol=header.slice(start,i);if(protocols.has(protocol)){throw new SyntaxError(`The "${protocol}" subprotocol is duplicated`)}protocols.add(protocol);return protocols}module.exports={parse:parse}},{"./validation":375}],375:[function(require,module,exports){"use strict";const{isUtf8:isUtf8}=require("buffer");const tokenChars=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function isValidStatusCode(code){return code>=1e3&&code<=1014&&code!==1004&&code!==1005&&code!==1006||code>=3e3&&code<=4999}function _isValidUTF8(buf){const len=buf.length;let i=0;while(i<len){if((buf[i]&128)===0){i++}else if((buf[i]&224)===192){if(i+1===len||(buf[i+1]&192)!==128||(buf[i]&254)===192){return false}i+=2}else if((buf[i]&240)===224){if(i+2>=len||(buf[i+1]&192)!==128||(buf[i+2]&192)!==128||buf[i]===224&&(buf[i+1]&224)===128||buf[i]===237&&(buf[i+1]&224)===160){return false}i+=3}else if((buf[i]&248)===240){if(i+3>=len||(buf[i+1]&192)!==128||(buf[i+2]&192)!==128||(buf[i+3]&192)!==128||buf[i]===240&&(buf[i+1]&240)===128||buf[i]===244&&buf[i+1]>143||buf[i]>244){return false}i+=4}else{return false}}return true}module.exports={isValidStatusCode:isValidStatusCode,isValidUTF8:_isValidUTF8,tokenChars:tokenChars};if(isUtf8){module.exports.isValidUTF8=function(buf){return buf.length<24?_isValidUTF8(buf):isUtf8(buf)}}else if(!process.env.WS_NO_UTF_8_VALIDATE){try{const isValidUTF8=require("utf-8-validate");module.exports.isValidUTF8=function(buf){return buf.length<32?_isValidUTF8(buf):isValidUTF8(buf)}}catch(e){}}},{buffer:undefined,"utf-8-validate":undefined}],376:[function(require,module,exports){"use strict";const EventEmitter=require("events");const http=require("http");const{Duplex:Duplex}=require("stream");const{createHash:createHash}=require("crypto");const extension=require("./extension");const PerMessageDeflate=require("./permessage-deflate");const subprotocol=require("./subprotocol");const WebSocket=require("./websocket");const{GUID:GUID,kWebSocket:kWebSocket}=require("./constants");const keyRegex=/^[+/0-9A-Za-z]{22}==$/;const RUNNING=0;const CLOSING=1;const CLOSED=2;class WebSocketServer extends EventEmitter{constructor(options,callback){super();options={allowSynchronousEvents:true,autoPong:true,maxPayload:100*1024*1024,skipUTF8Validation:false,perMessageDeflate:false,handleProtocols:null,clientTracking:true,verifyClient:null,noServer:false,backlog:null,server:null,host:null,path:null,port:null,WebSocket:WebSocket,...options};if(options.port==null&&!options.server&&!options.noServer||options.port!=null&&(options.server||options.noServer)||options.server&&options.noServer){throw new TypeError('One and only one of the "port", "server", or "noServer" options '+"must be specified")}if(options.port!=null){this._server=http.createServer((req,res)=>{const body=http.STATUS_CODES[426];res.writeHead(426,{"Content-Length":body.length,"Content-Type":"text/plain"});res.end(body)});this._server.listen(options.port,options.host,options.backlog,callback)}else if(options.server){this._server=options.server}if(this._server){const emitConnection=this.emit.bind(this,"connection");this._removeListeners=addListeners(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(req,socket,head)=>{this.handleUpgrade(req,socket,head,emitConnection)}})}if(options.perMessageDeflate===true)options.perMessageDeflate={};if(options.clientTracking){this.clients=new Set;this._shouldEmitClose=false}this.options=options;this._state=RUNNING}address(){if(this.options.noServer){throw new Error('The server is operating in "noServer" mode')}if(!this._server)return null;return this._server.address()}close(cb){if(this._state===CLOSED){if(cb){this.once("close",()=>{cb(new Error("The server is not running"))})}process.nextTick(emitClose,this);return}if(cb)this.once("close",cb);if(this._state===CLOSING)return;this._state=CLOSING;if(this.options.noServer||this.options.server){if(this._server){this._removeListeners();this._removeListeners=this._server=null}if(this.clients){if(!this.clients.size){process.nextTick(emitClose,this)}else{this._shouldEmitClose=true}}else{process.nextTick(emitClose,this)}}else{const server=this._server;this._removeListeners();this._removeListeners=this._server=null;server.close(()=>{emitClose(this)})}}shouldHandle(req){if(this.options.path){const index=req.url.indexOf("?");const pathname=index!==-1?req.url.slice(0,index):req.url;if(pathname!==this.options.path)return false}return true}handleUpgrade(req,socket,head,cb){socket.on("error",socketOnError);const key=req.headers["sec-websocket-key"];const upgrade=req.headers.upgrade;const version=+req.headers["sec-websocket-version"];if(req.method!=="GET"){const message="Invalid HTTP method";abortHandshakeOrEmitwsClientError(this,req,socket,405,message);return}if(upgrade===undefined||upgrade.toLowerCase()!=="websocket"){const message="Invalid Upgrade header";abortHandshakeOrEmitwsClientError(this,req,socket,400,message);return}if(key===undefined||!keyRegex.test(key)){const message="Missing or invalid Sec-WebSocket-Key header";abortHandshakeOrEmitwsClientError(this,req,socket,400,message);return}if(version!==8&&version!==13){const message="Missing or invalid Sec-WebSocket-Version header";abortHandshakeOrEmitwsClientError(this,req,socket,400,message);return}if(!this.shouldHandle(req)){abortHandshake(socket,400);return}const secWebSocketProtocol=req.headers["sec-websocket-protocol"];let protocols=new Set;if(secWebSocketProtocol!==undefined){try{protocols=subprotocol.parse(secWebSocketProtocol)}catch(err){const message="Invalid Sec-WebSocket-Protocol header";abortHandshakeOrEmitwsClientError(this,req,socket,400,message);return}}const secWebSocketExtensions=req.headers["sec-websocket-extensions"];const extensions={};if(this.options.perMessageDeflate&&secWebSocketExtensions!==undefined){const perMessageDeflate=new PerMessageDeflate(this.options.perMessageDeflate,true,this.options.maxPayload);try{const offers=extension.parse(secWebSocketExtensions);if(offers[PerMessageDeflate.extensionName]){perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);extensions[PerMessageDeflate.extensionName]=perMessageDeflate}}catch(err){const message="Invalid or unacceptable Sec-WebSocket-Extensions header";abortHandshakeOrEmitwsClientError(this,req,socket,400,message);return}}if(this.options.verifyClient){const info={origin:req.headers[`${version===8?"sec-websocket-origin":"origin"}`],secure:!!(req.socket.authorized||req.socket.encrypted),req:req};if(this.options.verifyClient.length===2){this.options.verifyClient(info,(verified,code,message,headers)=>{if(!verified){return abortHandshake(socket,code||401,message,headers)}this.completeUpgrade(extensions,key,protocols,req,socket,head,cb)});return}if(!this.options.verifyClient(info))return abortHandshake(socket,401)}this.completeUpgrade(extensions,key,protocols,req,socket,head,cb)}completeUpgrade(extensions,key,protocols,req,socket,head,cb){if(!socket.readable||!socket.writable)return socket.destroy();if(socket[kWebSocket]){throw new Error("server.handleUpgrade() was called more than once with the same "+"socket, possibly due to a misconfiguration")}if(this._state>RUNNING)return abortHandshake(socket,503);const digest=createHash("sha1").update(key+GUID).digest("base64");const headers=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${digest}`];const ws=new this.options.WebSocket(null,undefined,this.options);if(protocols.size){const protocol=this.options.handleProtocols?this.options.handleProtocols(protocols,req):protocols.values().next().value;if(protocol){headers.push(`Sec-WebSocket-Protocol: ${protocol}`);ws._protocol=protocol}}if(extensions[PerMessageDeflate.extensionName]){const params=extensions[PerMessageDeflate.extensionName].params;const value=extension.format({[PerMessageDeflate.extensionName]:[params]});headers.push(`Sec-WebSocket-Extensions: ${value}`);ws._extensions=extensions}this.emit("headers",headers,req);socket.write(headers.concat("\r\n").join("\r\n"));socket.removeListener("error",socketOnError);ws.setSocket(socket,head,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation});if(this.clients){this.clients.add(ws);ws.on("close",()=>{this.clients.delete(ws);if(this._shouldEmitClose&&!this.clients.size){process.nextTick(emitClose,this)}})}cb(ws,req)}}module.exports=WebSocketServer;function addListeners(server,map){for(const event of Object.keys(map))server.on(event,map[event]);return function removeListeners(){for(const event of Object.keys(map)){server.removeListener(event,map[event])}}}function emitClose(server){server._state=CLOSED;server.emit("close")}function socketOnError(){this.destroy()}function abortHandshake(socket,code,message,headers){message=message||http.STATUS_CODES[code];headers={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(message),...headers};socket.once("finish",socket.destroy);socket.end(`HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\r\n`+Object.keys(headers).map(h=>`${h}: ${headers[h]}`).join("\r\n")+"\r\n\r\n"+message)}function abortHandshakeOrEmitwsClientError(server,req,socket,code,message){if(server.listenerCount("wsClientError")){const err=new Error(message);Error.captureStackTrace(err,abortHandshakeOrEmitwsClientError);server.emit("wsClientError",err,socket,req)}else{abortHandshake(socket,code,message)}}},{"./constants":366,"./extension":368,"./permessage-deflate":370,"./subprotocol":374,"./websocket":377,crypto:undefined,events:undefined,http:undefined,stream:undefined}],377:[function(require,module,exports){"use strict";const EventEmitter=require("events");const https=require("https");const http=require("http");const net=require("net");const tls=require("tls");const{randomBytes:randomBytes,createHash:createHash}=require("crypto");const{Duplex:Duplex,Readable:Readable}=require("stream");const{URL:URL}=require("url");const PerMessageDeflate=require("./permessage-deflate");const Receiver=require("./receiver");const Sender=require("./sender");const{BINARY_TYPES:BINARY_TYPES,EMPTY_BUFFER:EMPTY_BUFFER,GUID:GUID,kForOnEventAttribute:kForOnEventAttribute,kListener:kListener,kStatusCode:kStatusCode,kWebSocket:kWebSocket,NOOP:NOOP}=require("./constants");const{EventTarget:{addEventListener:addEventListener,removeEventListener:removeEventListener}}=require("./event-target");const{format:format,parse:parse}=require("./extension");const{toBuffer:toBuffer}=require("./buffer-util");const closeTimeout=30*1e3;const kAborted=Symbol("kAborted");const protocolVersions=[8,13];const readyStates=["CONNECTING","OPEN","CLOSING","CLOSED"];const subprotocolRegex=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class WebSocket extends EventEmitter{constructor(address,protocols,options){super();this._binaryType=BINARY_TYPES[0];this._closeCode=1006;this._closeFrameReceived=false;this._closeFrameSent=false;this._closeMessage=EMPTY_BUFFER;this._closeTimer=null;this._extensions={};this._paused=false;this._protocol="";this._readyState=WebSocket.CONNECTING;this._receiver=null;this._sender=null;this._socket=null;if(address!==null){this._bufferedAmount=0;this._isServer=false;this._redirects=0;if(protocols===undefined){protocols=[]}else if(!Array.isArray(protocols)){if(typeof protocols==="object"&&protocols!==null){options=protocols;protocols=[]}else{protocols=[protocols]}}initAsClient(this,address,protocols,options)}else{this._autoPong=options.autoPong;this._isServer=true}}get binaryType(){return this._binaryType}set binaryType(type){if(!BINARY_TYPES.includes(type))return;this._binaryType=type;if(this._receiver)this._receiver._binaryType=type}get bufferedAmount(){if(!this._socket)return this._bufferedAmount;return this._socket._writableState.length+this._sender._bufferedBytes}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(socket,head,options){const receiver=new Receiver({allowSynchronousEvents:options.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:options.maxPayload,skipUTF8Validation:options.skipUTF8Validation});this._sender=new Sender(socket,this._extensions,options.generateMask);this._receiver=receiver;this._socket=socket;receiver[kWebSocket]=this;socket[kWebSocket]=this;receiver.on("conclude",receiverOnConclude);receiver.on("drain",receiverOnDrain);receiver.on("error",receiverOnError);receiver.on("message",receiverOnMessage);receiver.on("ping",receiverOnPing);receiver.on("pong",receiverOnPong);if(socket.setTimeout)socket.setTimeout(0);if(socket.setNoDelay)socket.setNoDelay();if(head.length>0)socket.unshift(head);socket.on("close",socketOnClose);socket.on("data",socketOnData);socket.on("end",socketOnEnd);socket.on("error",socketOnError);this._readyState=WebSocket.OPEN;this.emit("open")}emitClose(){if(!this._socket){this._readyState=WebSocket.CLOSED;this.emit("close",this._closeCode,this._closeMessage);return}if(this._extensions[PerMessageDeflate.extensionName]){this._extensions[PerMessageDeflate.extensionName].cleanup()}this._receiver.removeAllListeners();this._readyState=WebSocket.CLOSED;this.emit("close",this._closeCode,this._closeMessage)}close(code,data){if(this.readyState===WebSocket.CLOSED)return;if(this.readyState===WebSocket.CONNECTING){const msg="WebSocket was closed before the connection was established";abortHandshake(this,this._req,msg);return}if(this.readyState===WebSocket.CLOSING){if(this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)){this._socket.end()}return}this._readyState=WebSocket.CLOSING;this._sender.close(code,data,!this._isServer,err=>{if(err)return;this._closeFrameSent=true;if(this._closeFrameReceived||this._receiver._writableState.errorEmitted){this._socket.end()}});this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),closeTimeout)}pause(){if(this.readyState===WebSocket.CONNECTING||this.readyState===WebSocket.CLOSED){return}this._paused=true;this._socket.pause()}ping(data,mask,cb){if(this.readyState===WebSocket.CONNECTING){throw new Error("WebSocket is not open: readyState 0 (CONNECTING)")}if(typeof data==="function"){cb=data;data=mask=undefined}else if(typeof mask==="function"){cb=mask;mask=undefined}if(typeof data==="number")data=data.toString();if(this.readyState!==WebSocket.OPEN){sendAfterClose(this,data,cb);return}if(mask===undefined)mask=!this._isServer;this._sender.ping(data||EMPTY_BUFFER,mask,cb)}pong(data,mask,cb){if(this.readyState===WebSocket.CONNECTING){throw new Error("WebSocket is not open: readyState 0 (CONNECTING)")}if(typeof data==="function"){cb=data;data=mask=undefined}else if(typeof mask==="function"){cb=mask;mask=undefined}if(typeof data==="number")data=data.toString();if(this.readyState!==WebSocket.OPEN){sendAfterClose(this,data,cb);return}if(mask===undefined)mask=!this._isServer;this._sender.pong(data||EMPTY_BUFFER,mask,cb)}resume(){if(this.readyState===WebSocket.CONNECTING||this.readyState===WebSocket.CLOSED){return}this._paused=false;if(!this._receiver._writableState.needDrain)this._socket.resume()}send(data,options,cb){if(this.readyState===WebSocket.CONNECTING){throw new Error("WebSocket is not open: readyState 0 (CONNECTING)")}if(typeof options==="function"){cb=options;options={}}if(typeof data==="number")data=data.toString();if(this.readyState!==WebSocket.OPEN){sendAfterClose(this,data,cb);return}const opts={binary:typeof data!=="string",mask:!this._isServer,compress:true,fin:true,...options};if(!this._extensions[PerMessageDeflate.extensionName]){opts.compress=false}this._sender.send(data||EMPTY_BUFFER,opts,cb)}terminate(){if(this.readyState===WebSocket.CLOSED)return;if(this.readyState===WebSocket.CONNECTING){const msg="WebSocket was closed before the connection was established";abortHandshake(this,this._req,msg);return}if(this._socket){this._readyState=WebSocket.CLOSING;this._socket.destroy()}}}Object.defineProperty(WebSocket,"CONNECTING",{enumerable:true,value:readyStates.indexOf("CONNECTING")});Object.defineProperty(WebSocket.prototype,"CONNECTING",{enumerable:true,value:readyStates.indexOf("CONNECTING")});Object.defineProperty(WebSocket,"OPEN",{enumerable:true,value:readyStates.indexOf("OPEN")});Object.defineProperty(WebSocket.prototype,"OPEN",{enumerable:true,value:readyStates.indexOf("OPEN")});Object.defineProperty(WebSocket,"CLOSING",{enumerable:true,value:readyStates.indexOf("CLOSING")});Object.defineProperty(WebSocket.prototype,"CLOSING",{enumerable:true,value:readyStates.indexOf("CLOSING")});Object.defineProperty(WebSocket,"CLOSED",{enumerable:true,value:readyStates.indexOf("CLOSED")});Object.defineProperty(WebSocket.prototype,"CLOSED",{enumerable:true,value:readyStates.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(property=>{Object.defineProperty(WebSocket.prototype,property,{enumerable:true})});["open","error","close","message"].forEach(method=>{Object.defineProperty(WebSocket.prototype,`on${method}`,{enumerable:true,get(){for(const listener of this.listeners(method)){if(listener[kForOnEventAttribute])return listener[kListener]}return null},set(handler){for(const listener of this.listeners(method)){if(listener[kForOnEventAttribute]){this.removeListener(method,listener);break}}if(typeof handler!=="function")return;this.addEventListener(method,handler,{[kForOnEventAttribute]:true})}})});WebSocket.prototype.addEventListener=addEventListener;WebSocket.prototype.removeEventListener=removeEventListener;module.exports=WebSocket;function initAsClient(websocket,address,protocols,options){const opts={allowSynchronousEvents:true,autoPong:true,protocolVersion:protocolVersions[1],maxPayload:100*1024*1024,skipUTF8Validation:false,perMessageDeflate:true,followRedirects:false,maxRedirects:10,...options,socketPath:undefined,hostname:undefined,protocol:undefined,timeout:undefined,method:"GET",host:undefined,path:undefined,port:undefined};websocket._autoPong=opts.autoPong;if(!protocolVersions.includes(opts.protocolVersion)){throw new RangeError(`Unsupported protocol version: ${opts.protocolVersion} `+`(supported versions: ${protocolVersions.join(", ")})`)}let parsedUrl;if(address instanceof URL){parsedUrl=address}else{try{parsedUrl=new URL(address)}catch(e){throw new SyntaxError(`Invalid URL: ${address}`)}}if(parsedUrl.protocol==="http:"){parsedUrl.protocol="ws:"}else if(parsedUrl.protocol==="https:"){parsedUrl.protocol="wss:"}websocket._url=parsedUrl.href;const isSecure=parsedUrl.protocol==="wss:";const isIpcUrl=parsedUrl.protocol==="ws+unix:";let invalidUrlMessage;if(parsedUrl.protocol!=="ws:"&&!isSecure&&!isIpcUrl){invalidUrlMessage='The URL\'s protocol must be one of "ws:", "wss:", '+'"http:", "https", or "ws+unix:"'}else if(isIpcUrl&&!parsedUrl.pathname){invalidUrlMessage="The URL's pathname is empty"}else if(parsedUrl.hash){invalidUrlMessage="The URL contains a fragment identifier"}if(invalidUrlMessage){const err=new SyntaxError(invalidUrlMessage);if(websocket._redirects===0){throw err}else{emitErrorAndClose(websocket,err);return}}const defaultPort=isSecure?443:80;const key=randomBytes(16).toString("base64");const request=isSecure?https.request:http.request;const protocolSet=new Set;let perMessageDeflate;opts.createConnection=opts.createConnection||(isSecure?tlsConnect:netConnect);opts.defaultPort=opts.defaultPort||defaultPort;opts.port=parsedUrl.port||defaultPort;opts.host=parsedUrl.hostname.startsWith("[")?parsedUrl.hostname.slice(1,-1):parsedUrl.hostname;opts.headers={...opts.headers,"Sec-WebSocket-Version":opts.protocolVersion,"Sec-WebSocket-Key":key,Connection:"Upgrade",Upgrade:"websocket"};opts.path=parsedUrl.pathname+parsedUrl.search;opts.timeout=opts.handshakeTimeout;if(opts.perMessageDeflate){perMessageDeflate=new PerMessageDeflate(opts.perMessageDeflate!==true?opts.perMessageDeflate:{},false,opts.maxPayload);opts.headers["Sec-WebSocket-Extensions"]=format({[PerMessageDeflate.extensionName]:perMessageDeflate.offer()})}if(protocols.length){for(const protocol of protocols){if(typeof protocol!=="string"||!subprotocolRegex.test(protocol)||protocolSet.has(protocol)){throw new SyntaxError("An invalid or duplicated subprotocol was specified")}protocolSet.add(protocol)}opts.headers["Sec-WebSocket-Protocol"]=protocols.join(",")}if(opts.origin){if(opts.protocolVersion<13){opts.headers["Sec-WebSocket-Origin"]=opts.origin}else{opts.headers.Origin=opts.origin}}if(parsedUrl.username||parsedUrl.password){opts.auth=`${parsedUrl.username}:${parsedUrl.password}`}if(isIpcUrl){const parts=opts.path.split(":");opts.socketPath=parts[0];opts.path=parts[1]}let req;if(opts.followRedirects){if(websocket._redirects===0){websocket._originalIpc=isIpcUrl;websocket._originalSecure=isSecure;websocket._originalHostOrSocketPath=isIpcUrl?opts.socketPath:parsedUrl.host;const headers=options&&options.headers;options={...options,headers:{}};if(headers){for(const[key,value]of Object.entries(headers)){options.headers[key.toLowerCase()]=value}}}else if(websocket.listenerCount("redirect")===0){const isSameHost=isIpcUrl?websocket._originalIpc?opts.socketPath===websocket._originalHostOrSocketPath:false:websocket._originalIpc?false:parsedUrl.host===websocket._originalHostOrSocketPath;if(!isSameHost||websocket._originalSecure&&!isSecure){delete opts.headers.authorization;delete opts.headers.cookie;if(!isSameHost)delete opts.headers.host;opts.auth=undefined}}if(opts.auth&&!options.headers.authorization){options.headers.authorization="Basic "+Buffer.from(opts.auth).toString("base64")}req=websocket._req=request(opts);if(websocket._redirects){websocket.emit("redirect",websocket.url,req)}}else{req=websocket._req=request(opts)}if(opts.timeout){req.on("timeout",()=>{abortHandshake(websocket,req,"Opening handshake has timed out")})}req.on("error",err=>{if(req===null||req[kAborted])return;req=websocket._req=null;emitErrorAndClose(websocket,err)});req.on("response",res=>{const location=res.headers.location;const statusCode=res.statusCode;if(location&&opts.followRedirects&&statusCode>=300&&statusCode<400){if(++websocket._redirects>opts.maxRedirects){abortHandshake(websocket,req,"Maximum redirects exceeded");return}req.abort();let addr;try{addr=new URL(location,address)}catch(e){const err=new SyntaxError(`Invalid URL: ${location}`);emitErrorAndClose(websocket,err);return}initAsClient(websocket,addr,protocols,options)}else if(!websocket.emit("unexpected-response",req,res)){abortHandshake(websocket,req,`Unexpected server response: ${res.statusCode}`)}});req.on("upgrade",(res,socket,head)=>{websocket.emit("upgrade",res);if(websocket.readyState!==WebSocket.CONNECTING)return;req=websocket._req=null;const upgrade=res.headers.upgrade;if(upgrade===undefined||upgrade.toLowerCase()!=="websocket"){abortHandshake(websocket,socket,"Invalid Upgrade header");return}const digest=createHash("sha1").update(key+GUID).digest("base64");if(res.headers["sec-websocket-accept"]!==digest){abortHandshake(websocket,socket,"Invalid Sec-WebSocket-Accept header");return}const serverProt=res.headers["sec-websocket-protocol"];let protError;if(serverProt!==undefined){if(!protocolSet.size){protError="Server sent a subprotocol but none was requested"}else if(!protocolSet.has(serverProt)){protError="Server sent an invalid subprotocol"}}else if(protocolSet.size){protError="Server sent no subprotocol"}if(protError){abortHandshake(websocket,socket,protError);return}if(serverProt)websocket._protocol=serverProt;const secWebSocketExtensions=res.headers["sec-websocket-extensions"];if(secWebSocketExtensions!==undefined){if(!perMessageDeflate){const message="Server sent a Sec-WebSocket-Extensions header but no extension "+"was requested";abortHandshake(websocket,socket,message);return}let extensions;try{extensions=parse(secWebSocketExtensions)}catch(err){const message="Invalid Sec-WebSocket-Extensions header";abortHandshake(websocket,socket,message);return}const extensionNames=Object.keys(extensions);if(extensionNames.length!==1||extensionNames[0]!==PerMessageDeflate.extensionName){const message="Server indicated an extension that was not requested";abortHandshake(websocket,socket,message);return}try{perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName])}catch(err){const message="Invalid Sec-WebSocket-Extensions header";abortHandshake(websocket,socket,message);return}websocket._extensions[PerMessageDeflate.extensionName]=perMessageDeflate}websocket.setSocket(socket,head,{allowSynchronousEvents:opts.allowSynchronousEvents,generateMask:opts.generateMask,maxPayload:opts.maxPayload,skipUTF8Validation:opts.skipUTF8Validation})});if(opts.finishRequest){opts.finishRequest(req,websocket)}else{req.end()}}function emitErrorAndClose(websocket,err){websocket._readyState=WebSocket.CLOSING;websocket.emit("error",err);websocket.emitClose()}function netConnect(options){options.path=options.socketPath;return net.connect(options)}function tlsConnect(options){options.path=undefined;if(!options.servername&&options.servername!==""){options.servername=net.isIP(options.host)?"":options.host}return tls.connect(options)}function abortHandshake(websocket,stream,message){websocket._readyState=WebSocket.CLOSING;const err=new Error(message);Error.captureStackTrace(err,abortHandshake);if(stream.setHeader){stream[kAborted]=true;stream.abort();if(stream.socket&&!stream.socket.destroyed){stream.socket.destroy()}process.nextTick(emitErrorAndClose,websocket,err)}else{stream.destroy(err);stream.once("error",websocket.emit.bind(websocket,"error"));stream.once("close",websocket.emitClose.bind(websocket))}}function sendAfterClose(websocket,data,cb){if(data){const length=toBuffer(data).length;if(websocket._socket)websocket._sender._bufferedBytes+=length;else websocket._bufferedAmount+=length}if(cb){const err=new Error(`WebSocket is not open: readyState ${websocket.readyState} `+`(${readyStates[websocket.readyState]})`);process.nextTick(cb,err)}}function receiverOnConclude(code,reason){const websocket=this[kWebSocket];websocket._closeFrameReceived=true;websocket._closeMessage=reason;websocket._closeCode=code;if(websocket._socket[kWebSocket]===undefined)return;websocket._socket.removeListener("data",socketOnData);process.nextTick(resume,websocket._socket);if(code===1005)websocket.close();else websocket.close(code,reason)}function receiverOnDrain(){const websocket=this[kWebSocket];if(!websocket.isPaused)websocket._socket.resume()}function receiverOnError(err){const websocket=this[kWebSocket];if(websocket._socket[kWebSocket]!==undefined){websocket._socket.removeListener("data",socketOnData);process.nextTick(resume,websocket._socket);websocket.close(err[kStatusCode])}websocket.emit("error",err)}function receiverOnFinish(){this[kWebSocket].emitClose()}function receiverOnMessage(data,isBinary){this[kWebSocket].emit("message",data,isBinary)}function receiverOnPing(data){const websocket=this[kWebSocket];if(websocket._autoPong)websocket.pong(data,!this._isServer,NOOP);websocket.emit("ping",data)}function receiverOnPong(data){this[kWebSocket].emit("pong",data)}function resume(stream){stream.resume()}function socketOnClose(){const websocket=this[kWebSocket];this.removeListener("close",socketOnClose);this.removeListener("data",socketOnData);this.removeListener("end",socketOnEnd);websocket._readyState=WebSocket.CLOSING;let chunk;if(!this._readableState.endEmitted&&!websocket._closeFrameReceived&&!websocket._receiver._writableState.errorEmitted&&(chunk=websocket._socket.read())!==null){websocket._receiver.write(chunk)}websocket._receiver.end();this[kWebSocket]=undefined;clearTimeout(websocket._closeTimer);if(websocket._receiver._writableState.finished||websocket._receiver._writableState.errorEmitted){websocket.emitClose()}else{websocket._receiver.on("error",receiverOnFinish);websocket._receiver.on("finish",receiverOnFinish)}}function socketOnData(chunk){if(!this[kWebSocket]._receiver.write(chunk)){this.pause()}}function socketOnEnd(){const websocket=this[kWebSocket];websocket._readyState=WebSocket.CLOSING;websocket._receiver.end();this.end()}function socketOnError(){const websocket=this[kWebSocket];this.removeListener("error",socketOnError);this.on("error",NOOP);if(websocket){websocket._readyState=WebSocket.CLOSING;this.destroy()}}},{"./buffer-util":365,"./constants":366,"./event-target":367,"./extension":368,"./permessage-deflate":370,"./receiver":371,"./sender":372,crypto:undefined,events:undefined,http:undefined,https:undefined,net:undefined,stream:undefined,tls:undefined,url:undefined}],378:[function(require,module,exports){module.exports=[{name:"Sword 1",type:"weapon",sprite:"sword1",buy:0},{name:"Sword 2",type:"weapon",sprite:"sword2",buy:500},{name:"Axe",type:"weapon",sprite:"axe",buy:1e3},{name:"Morning Star",type:"weapon",sprite:"morningstar",buy:1500},{name:"Blue Sword",type:"weapon",sprite:"bluesword",buy:2e3},{name:"Red Sword",type:"weapon",sprite:"redsword",buy:2500},{name:"Golden Sword",type:"weapon",sprite:"goldensword",buy:3e3},{name:"Side Sword",type:"weapon",sprite:"sidesword",buy:3500},{name:"Spear",type:"weapon",sprite:"spear",buy:4e3},{name:"Scimitar",type:"weapon",sprite:"scimitar",buy:4500},{name:"Trident",type:"weapon",sprite:"trident",buy:5e3},{name:"Blue Scimitar",type:"weapon",sprite:"bluescimitar",buy:5500},{name:"Hammer",type:"weapon",sprite:"hammer",buy:6e3},{name:"Green Light Saber",type:"weapon",sprite:"greenlightsaber",buy:6500},{name:"Sky Light Saber",type:"weapon",sprite:"skylightsaber",buy:7e3},{name:"Red Light Saber",type:"weapon",sprite:"redlightsaber",buy:7500},{name:"Bastard Sword",type:"weapon",sprite:"bastardsword",buy:8e3},{name:"Red Metal Sword",type:"weapon",sprite:"redmetalsword",buy:8500},{name:"Justice Hammer",type:"weapon",sprite:"justicehammer",buy:9e3},{name:"Rose",type:"weapon",sprite:"rose",buy:9500},{name:"Ice Rose",type:"weapon",sprite:"icerose",buy:1e4},{name:"Halberd",type:"weapon",sprite:"halberd",buy:10500},{name:"Whip",type:"weapon",sprite:"whip",buy:11e3},{name:"Forest Guardian Sword",type:"weapon",sprite:"forestguardiansword",buy:11500},{name:"Sickle",type:"weapon",sprite:"sickle",buy:12e3},{name:"Plunger",type:"weapon",sprite:"plunger",buy:12500},{name:"Red Sickle",type:"weapon",sprite:"redsickle",buy:13e3},{name:"Day Walker",type:"weapon",sprite:"daywalker",buy:13500},{name:"Purple Cloud Kallege",type:"weapon",sprite:"purplecloudkallege",buy:14e3},{name:"Sea Rage",type:"weapon",sprite:"searage",buy:14500},{name:"Breaker",type:"weapon",sprite:"breaker",buy:15e3},{name:"Enel Trident",type:"weapon",sprite:"eneltrident",buy:15500},{name:"Rainbow Sword",type:"weapon",sprite:"rainbowsword",buy:16e3},{name:"Typhoon",type:"weapon",sprite:"typhoon",buy:16500},{name:"Memme",type:"weapon",sprite:"memme",buy:17e3},{name:"Candybar",type:"weapon",sprite:"candybar",buy:17500},{name:"Butcher Knife",type:"weapon",sprite:"butcherknife",buy:18e3},{name:"Fire Shot",type:"weapon",sprite:"fireshot",buy:18500},{name:"Comb",type:"weapon",sprite:"comb",buy:19e3},{name:"Squeaky Hammer",type:"weapon",sprite:"squeakyhammer",buy:19500},{name:"Fire Play",type:"weapon",sprite:"fireplay",buy:2e4},{name:"Wea Staff",type:"weapon",sprite:"weastaff",buy:20500},{name:"Pink Sword",type:"weapon",sprite:"pinksword",buy:21e3},{name:"Conference Call",type:"weapon",sprite:"conferencecall",buy:21500},{name:"Cactus Axe",type:"weapon",sprite:"cactusaxe",buy:22e3},{name:"Devil Kazya Sword",type:"weapon",sprite:"devilkazyasword",buy:22500},{name:"Bamboo Spear",type:"weapon",sprite:"bamboospear",buy:23e3},{name:"Paewoldo",type:"weapon",sprite:"paewoldo",buy:23500},{name:"Magic Spear",type:"weapon",sprite:"magicspear",buy:24e3},{name:"Fire Sword",type:"weapon",sprite:"firesword",buy:24500},{name:"Wooden Bow",type:"weaponarcher",sprite:"woodenbow",buy:0},{name:"Plastic Bow",type:"weaponarcher",sprite:"plasticbow",buy:500},{name:"Iron Bow",type:"weaponarcher",sprite:"ironbow",buy:1e3},{name:"Red Bow",type:"weaponarcher",sprite:"redbow",buy:1500},{name:"Violet Bow",type:"weaponarcher",sprite:"violetbow",buy:2e3},{name:"Death Bow",type:"weaponarcher",sprite:"deathbow",buy:2500},{name:"Golden Bow",type:"weaponarcher",sprite:"goldenbow",buy:3e3},{name:"Watermelon Bow",type:"weaponarcher",sprite:"watermelonbow",buy:3500},{name:"Green Bow",type:"weaponarcher",sprite:"greenbow",buy:4e3},{name:"Redenel Bow",type:"weaponarcher",sprite:"redenelbow",buy:4500},{name:"Mermaid Bow",type:"weaponarcher",sprite:"mermaidbow",buy:5e3},{name:"Seahorse Bow",type:"weaponarcher",sprite:"seahorsebow",buy:5500},{name:"Hunter Bow",type:"weaponarcher",sprite:"hunterbow",buy:6e3},{name:"Green Light Bow",type:"weaponarcher",sprite:"greenlightbow",buy:6500},{name:"Sky Light Bow",type:"weaponarcher",sprite:"skylightbow",buy:7e3},{name:"Red Light Bow",type:"weaponarcher",sprite:"redlightbow",buy:7500},{name:"Captain Bow",type:"weaponarcher",sprite:"captainbow",buy:8e3},{name:"Red Metal Bow",type:"weaponarcher",sprite:"redmetalbow",buy:8500},{name:"Justice Bow",type:"weaponarcher",sprite:"justicebow",buy:9e3},{name:"Rose Bow",type:"weaponarcher",sprite:"rosebow",buy:9500},{name:"Marine Bow",type:"weaponarcher",sprite:"marinebow",buy:1e4},{name:"Crystal Bow",type:"weaponarcher",sprite:"crystalbow",buy:10500},{name:"Colorful Bow",type:"weaponarcher",sprite:"gaybow",buy:11e3},{name:"Forest Bow",type:"weaponarcher",sprite:"forestbow",buy:11500},{name:"Sickle Bow",type:"weaponarcher",sprite:"sicklebow",buy:12e3},{name:"Blood Bow",type:"weaponarcher",sprite:"bloodbow",buy:12500},{name:"Red Sickle Bow",type:"weaponarcher",sprite:"redsicklebow",buy:13e3},{name:"Cloth Armor",type:"armor",sprite:"clotharmor",buy:0},{name:"Leather Armor",type:"armor",sprite:"leatherarmor",buy:500},{name:"Mail Armor",type:"armor",sprite:"mailarmor",buy:1e3},{name:"Plate Armor",type:"armor",sprite:"platearmor",buy:1500},{name:"Red Armor",type:"armor",sprite:"redarmor",buy:2e3},{name:"Golden Armor",type:"armor",sprite:"goldenarmor",buy:2500},{name:"Green Armor",type:"armor",sprite:"greenarmor",buy:3e3},{name:"Green Wing Armor",type:"armor",sprite:"greenwingarmor",buy:3500},{name:"Guard Armor",type:"armor",sprite:"guardarmor",buy:4e3},{name:"Red Guard Armor",type:"armor",sprite:"redguardarmor",buy:4500},{name:"White Armor",type:"armor",sprite:"whitearmor",buy:5e3},{name:"Rat Armor",type:"armor",sprite:"ratarmor",buy:5500},{name:"Blue Pirate Armor",type:"armor",sprite:"bluepiratearmor",buy:6e3},{name:"Cheoli Armor",type:"armor",sprite:"cheoliarmor",buy:6500},{name:"Dovakin Armor",type:"armor",sprite:"dovakinarmor",buy:7e3},{name:"GB Wing Armor",type:"armor",sprite:"gbwingarmor",buy:7500},{name:"Red Wing Armor",type:"armor",sprite:"redwingarmor",buy:8e3},{name:"Snow Fox Armor",type:"armor",sprite:"snowfoxarmor",buy:8500},{name:"Wolf Armor",type:"armor",sprite:"wolfarmor",buy:9e3},{name:"Blue Wing Armor",type:"armor",sprite:"bluewingarmor",buy:9500},{name:"Thief Armor",type:"armor",sprite:"thiefarmor",buy:1e4},{name:"Ninja Armor",type:"armor",sprite:"ninjaarmor",buy:10500},{name:"Dragon Armor",type:"armor",sprite:"dragonarmor",buy:11e3},{name:"Fallen Armor",type:"armor",sprite:"fallenarmor",buy:11500},{name:"Paladin Armor",type:"armor",sprite:"paladinarmor",buy:12e3},{name:"Crystal Armor",type:"armor",sprite:"crystalarmor",buy:12500},{name:"Adherer Robe",type:"armor",sprite:"adhererrobe",buy:13e3},{name:"Frost Armor",type:"armor",sprite:"frostarmor",buy:13500},{name:"Strap Armor",type:"armor",sprite:"gayarmor",buy:14e3},{name:"School Uniform",type:"armor",sprite:"schooluniform",buy:14500},{name:"Beautiful Life",type:"armor",sprite:"beautifullife",buy:15e3},{name:"Region Armor",type:"armor",sprite:"regionarmor",buy:15500},{name:"Ghost Rider",type:"armor",sprite:"ghostrider",buy:16e3},{name:"Taekwondo",type:"armor",sprite:"taekwondo",buy:16500},{name:"Rabbit Armor",type:"armor",sprite:"rabbitarmor",buy:17e3},{name:"Portal Armor",type:"armor",sprite:"portalarmor",buy:17500},{name:"Pirate King",type:"armor",sprite:"pirateking",buy:18e3},{name:"Sea Dragon Armor",type:"armor",sprite:"seadragonarmor",buy:18500},{name:"Shadow Region Armor",type:"armor",sprite:"shadowregionarmor",buy:19e3},{name:"Enel Armor",type:"armor",sprite:"enelarmor",buy:19500},{name:"Mini Sea Dragon Armor",type:"armor",sprite:"miniseadragonarmor",buy:2e4},{name:"Huni Armor",type:"armor",sprite:"huniarmor",buy:20500},{name:"Dambo Armor",type:"armor",sprite:"damboarmor",buy:21e3},{name:"Squid Armor",type:"armor",sprite:"squidarmor",buy:21500},{name:"Bee Armor",type:"armor",sprite:"beearmor",buy:22e3},{name:"Blue Dambo Armor",type:"armor",sprite:"bluedamboarmor",buy:22500},{name:"Rudolf Armor",type:"armor",sprite:"rudolfarmor",buy:23e3},{name:"Christmas Armor",type:"armor",sprite:"christmasarmor",buy:23500},{name:"Robocop Armor",type:"armor",sprite:"robocoparmor",buy:24e3},{name:"Pink Cockroach Armor",type:"armor",sprite:"pinkcockroacharmor",buy:24500},{name:"Cockroach Suit",type:"armor",sprite:"cockroachsuit",buy:25e3},{name:"Dinosaur Armor",type:"armor",sprite:"dinosaurarmor",buy:25500},{name:"Cat Armor",type:"armor",sprite:"catarmor",buy:26e3},{name:"Snowman Armor",type:"armor",sprite:"snowmanarmor",buy:26500},{name:"Beetle Armor",type:"armor",sprite:"beetlearmor",buy:27e3},{name:"Hongcheol Armor",type:"armor",sprite:"hongcheolarmor",buy:27500},{name:"Tiger Armor",type:"armor",sprite:"tigerarmor",buy:28e3},{name:"Wizard Rob",type:"armor",sprite:"wizardrobe",buy:28500},{name:"Iron Knight Armor",type:"armor",sprite:"ironknightarmor",buy:29e3},{name:"Evil Armor",type:"armor",sprite:"evilarmor",buy:29500},{name:"Green Dambo Armor",type:"armor",sprite:"greendamboarmor",buy:3e4},{name:"Red Dambo Armor",type:"armor",sprite:"reddamboarmor",buy:30500},{name:"Devil Kazya Armor",type:"armor",sprite:"devilkazyaarmor",buy:31e3},{name:"Bridal Mask",type:"armor",sprite:"bridalmask",buy:31500},{name:"Black Spider Armor",type:"armor",sprite:"blackspiderarmor",buy:32e3},{name:"Frog Armor",type:"armor",sprite:"frogarmor",buy:32500},{name:"Bearseonbi Armor",type:"armor",sprite:"bearseonbiarmor",buy:33e3},{name:"Raindow A Pro",type:"armor",sprite:"rainbowapro",buy:33500},{name:"Coke Armor",type:"armor",sprite:"cokearmor",buy:34e3},{name:"Fried Potato Armor",type:"armor",sprite:"friedpotatoarmor",buy:34500},{name:"Burger Armor",type:"armor",sprite:"burgerarmor",buy:35e3},{name:"Halloween JK Armor",type:"armor",sprite:"halloweenjkarmor",buy:35500},{name:"Frankenstein Armor",type:"armor",sprite:"frankensteinarmor",buy:36e3},{name:"Admin armor",type:"armor",sprite:"adminarmor",buy:36500},{name:"Cloth Armor",type:"armorarcher",sprite:"clotharmor",buy:0},{name:"Leather Armor",type:"armorarcher",sprite:"leatherarcherarmor",buy:500},{name:"Mail Armor",type:"armorarcher",sprite:"mailarcherarmor",buy:1e3},{name:"Plate Armor",type:"armorarcher",sprite:"platearcherarmor",buy:1500},{name:"Red Armor",type:"armorarcher",sprite:"redarcherarmor",buy:2e3},{name:"Golden Armor",type:"armorarcher",sprite:"goldenarcherarmor",buy:2500},{name:"Green Armor",type:"armorarcher",sprite:"greenarcherarmor",buy:3e3},{name:"Green Wing Armor",type:"armorarcher",sprite:"greenwingarcherarmor",buy:3500},{name:"Guard Armor",type:"armorarcher",sprite:"guardarcherarmor",buy:4e3},{name:"Red Guard Armor",type:"armorarcher",sprite:"redguardarcherarmor",buy:4500},{name:"White Armor",type:"armorarcher",sprite:"whitearcherarmor",buy:5e3},{name:"Pirate Armor",type:"armorarcher",sprite:"piratearcherarmor",buy:5500},{name:"Cheoli Armor",type:"armorarcher",sprite:"cheoliarcherarmor",buy:6e3},{name:"Dovakin Armor",type:"armorarcher",sprite:"dovakinarcherarmor",buy:6500},{name:"GB Wing Armor",type:"armorarcher",sprite:"gbwingarcherarmor",buy:7e3},{name:"Red Wing Armor",type:"armorarcher",sprite:"redwingarcherarmor",buy:7500},{name:"Snow Fox Armor",type:"armorarcher",sprite:"snowfoxarcherarmor",buy:8e3},{name:"Wolf Armor",type:"armorarcher",sprite:"wolfarcherarmor",buy:8500},{name:"Blue Wing Armor",type:"armorarcher",sprite:"bluewingarcherarmor",buy:9e3},{name:"Fallen Armor",type:"armorarcher",sprite:"fallenarcherarmor",buy:9500},{name:"Crystal Armor",type:"armorarcher",sprite:"crystalarcherarmor",buy:1e4},{name:"Legolas Armor",type:"armorarcher",sprite:"legolasarmor",buy:10500},{name:"Adherer Armor",type:"armorarcher",sprite:"adhererarcherarmor",buy:11e3},{name:"School Uniform",type:"armorarcher",sprite:"archerschooluniform",buy:11500},{name:"Combat Uniform",type:"armorarcher",sprite:"combatuniform",buy:12e3},{name:"Strap Armor",type:"armorarcher",sprite:"gayarcherarmor",buy:12500}]},{}],379:[function(require,module,exports){EventType={KILLMOB:1,LOOTITEM:2,KILLPLAYER:3,DAMAGE:4,USE_NODE:5,HARVEST:6};QuestType={KILLMOBKIND:1,GETITEMKIND:2,KILLMOBS:3,HIDEANDSEEK:4,USENODE:5};QuestStatus={STARTED:0,INPROGRESS:1,COMPLETE:2};InventoryMode={MODE_NORMAL:0,MODE_SELL:1,MODE_REPAIR:2,MODE_ENCHANT:3,MODE_BANK:4,MODE_AUCTION:5};SkillEffects={SkillType:{SELF:0,TARGET:1,ATTACK:2},TargetType:{SELF:0,ENEMY:1,PLAYER_AOE:2,ENEMY_AOE:3},EffectStat:{HP:0,EP:1,ATTACK:2,DEFENSE:3,DAMAGE:4,FREEZE:5,MOVESPEED:6}};Types={UserMessages:{CU_CONNECT_USER:1,CU_CREATE_USER:2,CU_LOGIN_USER:3,CU_CREATE_PLAYER:4,CU_LOGIN_PLAYER:5,CU_REMOVE_USER:6,UC_WORLD_READY:101,UC_WORLDS:102,UC_VERSION:103,UC_PLAYER_SUM:104,UC_ERROR:105,WU_CONNECT_WORLD:501,WU_GAMESERVER_INFO:502,WU_PLAYER_LOADED:503,WU_SAVE_PLAYER_AUCTIONS:504,WU_SAVE_PLAYER_LOOKS:505,WU_SAVE_PLAYERS_LIST:506,WU_SAVE_PLAYER_DATA:507,WU_PLAYER_LOGGED_IN:508,WU_SAVE_USER_BANS:509,WU_ADD_PLAYER_GOLD:510,WU_UPDATE_PLAYER_COUNT:511,UW_LOAD_PLAYER_AUCTIONS:601,UW_LOAD_PLAYER_LOOKS:602,UW_WORLD_SAVE:603,UW_WORLD_CLOSE:604,UW_LOAD_PLAYER_DATA:605,UW_LOAD_USER_BANS:606},Messages:{BI_SYNCTIME:200,CW_LOGIN_PLAYER:201,CW_ITEMSLOT:202,CW_APPEARANCEUNLOCK:203,CW_ATTACK:204,CW_AUCTIONBUY:205,CW_AUCTIONDELETE:206,CW_AUCTIONOPEN:207,CW_AUCTIONSELL:208,CW_BANKRETRIEVE:209,CW_BANKSTORE:210,CW_CHAT:211,CW_COLOR_TINT:212,CW_BLOCK_MODIFY:213,CW_GOLD:214,CW_PARTY:215,CW_HARVEST:216,CW_USE_NODE:217,CW_LOOKUPDATE:218,CW_LOOT:219,CW_MOVE:220,CW_MOVEPATH:221,CW_QUEST:222,CW_STATADD:223,CW_STOREBUY:224,CW_STORE_MODITEM:225,CW_STORESELL:226,CW_TALKTONPC:227,CW_CRAFT:228,CW_TELEPORT_MAP:229,CW_WHO:230,CW_SKILL:231,CW_SHORTCUT:232,CW_REQUEST:233,WC_ERROR:300,WC_PLAYER:301,WC_ACHIEVEMENT:302,WC_AUCTIONOPEN:303,WC_ITEMSLOT:304,WC_CHANGEPOINTS:305,WC_CHAT:306,WC_COLOR_TINT:307,WC_DAMAGE:308,WC_DESPAWN:309,WC_APPEARANCE:311,WC_GOLD:312,WC_PARTY:313,WC_PLAYERINFO:314,WC_ITEMLEVELUP:315,WC_STAT:316,WC_LEVELUP:317,WC_LIST:318,WC_LOG:320,WC_HARVEST:321,WC_MOVE:322,WC_MOVEPATH:323,WC_NOTIFY:324,WC_QUEST:325,WC_SKILLEFFECTS:326,WC_SKILLLOAD:327,WC_SPAWN:328,WC_SPEECH:329,WC_STATINFO:330,WC_TELEPORT_MAP:331,WC_SKILL_XP:332,WC_DIALOGUE:333,WC_SET_SPRITE:334,WC_SET_ANIMATION:335,WC_BLOCK_MODIFY:336,WC_PLAYERINFO:337,WC_VERSION:338},Orientations:{NONE:0,UP:1,DOWN:2,LEFT:3,RIGHT:4},EntityTypes:{NONE:0,PLAYER:1,MOB:2,ITEM:3,ITEMLOOT:4,NPCSTATIC:5,NPCMOVE:6,CHEST:7,BLOCK:8,TRAP:9,NODE:10},Keys:{ENTER:13,UP:38,DOWN:40,LEFT:37,RIGHT:39,W:87,A:65,S:83,D:68,SPACE:32,I:73,H:72,M:77,P:80,T:84,Y:89,KEYPAD_4:100,KEYPAD_6:102,KEYPAD_8:104,KEYPAD_2:98,KEY_0:48,KEY_1:49,KEY_2:50,KEY_3:51,KEY_4:52,KEY_5:53,KEY_6:54,KEY_7:55,KEY_8:56,KEY_9:57},Skills:{BLOODSUCKING:1,RECOVERHEALTH:2,HEALANDHEAL:3,AVOIDATTACK:4,ADDEXPERIENCE:5,ATTACKWITHBLOOD:6,CRITICALATTACK:7,CRITICALRATIO:8},PlayerClass:{FIGHTER:0,ARCHER:1,DEFENDER:2,MAGE:3},PlayerState:{Roaming:0,Moving:1,Following:2,Aggro:3,Hurting:4,GettingItems:5,FollowPlayer:6}};var EntityTypes=Types.EntityTypes;Types.expForLevel=[];Types.defenseExp=[];Types.attackExp=[];Types.moveExp=[];Types.skillExp=[];Types.weaponExp=[];Types.expForLevel[0]=0;Types.defenseExp[0]=0;Types.attackExp[0]=0;Types.moveExp[0]=0;Types.skillExp[0]=0;Types.weaponExp[0]=0;for(i=1;i<50;i++){var points=Math.floor(i*300*Math.pow(1.5,i/5));console.info("level_"+i+"="+points);Types.expForLevel[i]=points;Types.defenseExp[i]=points*10+50;Types.attackExp[i]=points*10+50;Types.moveExp[i]=points*5+20;Types.skillExp[i]=~~(points/1.5);Types.weaponExp[i]=points*10+50}Types.getLevel=function(exp){if(typeof exp=="undefined"||exp==0)return 1;for(var i=1;i<200;i++){if(exp<Types.expForLevel[i]){return i}}return 50};Types.getAttackLevel=function(exp){if(exp==0)return 1;for(var i=1;i<200;i++){if(exp<Types.attackExp[i]){return i}}return 50};Types.getDefenseLevel=function(exp){if(exp==0)return 1;for(var i=1;i<200;i++){if(exp<Types.defenseExp[i]){return i}}return 50};Types.getMoveLevel=function(exp){if(exp==0)return 1;for(var i=1;i<200;i++){if(exp<Types.moveExp[i]){return i}}return 50};Types.getWeaponLevel=function(exp){if(exp==0)return 1;for(var i=1;i<200;i++){if(exp<Types.weaponExp[i]){return i}}return 50};Types.getSkillLevel=function(exp,level){level=level||1;if(typeof exp=="undefined"||exp==0)return 1;for(var i=level;i<10;i++){if(exp<Types.skillExp[i]){return i}}return 20};Types.isPlayer=function(kind){if(kind===1||kind===222)return true;return false};Types.getOrientationAsString=function(orientation){switch(orientation){case Types.Orientations.LEFT:return"left";break;case Types.Orientations.RIGHT:return"right";break;case Types.Orientations.UP:return"up";break;case Types.Orientations.DOWN:return"down";break}};Types.getMessageTypeAsString=function(type){var typeName;_.each(Types.Messages,function(value,name){if(value===type){typeName=name}});if(!typeName){typeName="UNKNOWN"}return typeName};if(!(typeof exports==="undefined")){module.exports=Types}},{}],380:[function(require,module,exports){var ItemTypes={};var ItemData={};var KindData={};ItemTypes.setKindData=function(kindData){KindData=kindData;ItemTypes.KindData=kindData};ItemTypes.getData=function(k){var data=KindData[k];if(!data||data.legacy==1)return null;return data};ItemTypes.getName=function(kind){try{var item=KindData[kind];if(!item)return"";return item.name}catch(e){console.error("No name found for item: "+KindData[kind]);console.error("Error stack: "+e.stack)}};ItemTypes.getWeaponLevel=function(kind){try{var item=KindData[kind];if(!item)return 0;return item.modifier}catch(e){console.error("No level found for weapon: "+KindData[kind]);console.error("Error stack: "+e.stack)}};ItemTypes.getArmorLevel=function(kind){try{var item=KindData[kind];if(!item)return 0;return item.modifier}catch(e){console.error("No level found for armor: "+KindData[kind]);console.error("Error stack: "+e.stack)}};ItemTypes.getItemByLevel=function(type,level){for(var kind in KindData){var item=KindData[kind];if((item.type=="armor"||item.type=="armorarcher")&&item.type==type&&level==item.modifier){return item}if((item.type=="weapon"||item.type=="weaponarcher")&&item.type==type&&level==item.modifier){return item}}return null};ItemTypes.getLevelByKind=function(kind){var item=KindData[kind];if(ItemTypes.isArmor(kind)){return item.level}if(ItemTypes.isWeapon(kind)){return item.level}return null};ItemTypes.getType=function(kind){try{var item=KindData[kind];return item.type}catch(e){console.error("No type found for item: "+kind);console.error("Error stack: "+e.stack)}};ItemTypes.getBuyPrice=function(kind){var item=KindData[kind];if(!item)return 0;var type=item.type;if(type=="bow"){return Math.floor(item.modifier*item.modifier*5)}else if(type=="chest"){return Math.floor(item.modifier*item.modifier*5)}else if(ItemTypes.isArmor(kind)){return Math.floor(item.modifier*item.modifier*10)}else if(ItemTypes.isWeapon(kind)){return Math.floor(item.modifier*item.modifier*5)}else if(type=="object"&&item.buy>0){if(item.buyCount>1)return item.buy*item.buyCount;else return item.buy}return 0};ItemTypes.getCraftPrice=function(k){var item=KindData[k];if(!item||item.legacy==1)return 0;if(item.buy>0)return item.buy;return~~(ItemTypes.getBuyPrice(k)/4)};ItemTypes.getEnchantSellPrice=function(item){var value=ItemTypes.getBuyPrice(item.itemKind)/10;var enchantLevel=item.itemNumber;if(enchantLevel>1){value+=~~(ItemTypes.getEnchantPrice(item)/10)}value*=item.itemDurabilityMax/900;return Math.floor(value)};ItemTypes.getEnchantPrice=function(item,current){current=current||false;if(!item)return NaN;var data=KindData[item.itemKind];var enchantLevel=current?item.itemNumber:item.itemNumber+1;var curLevel=item.itemNumber;if(enchantLevel>=25)return NaN;experience=item.itemExperience;var baseLevel=data.modifier;console.info("getEnchantPrice: "+ItemTypes.itemExpForLevel[enchantLevel]);var cost=Math.floor(baseLevel*baseLevel*10*Math.pow(2,enchantLevel)*(1-experience/ItemTypes.itemExpForLevel[enchantLevel]));console.info("cost: "+cost);return cost};var Clamp=function(min,max,value){if(value<min){return min}else if(value>max){return max}else{return value}};ItemTypes.getRepairPrice=function(item){var value=ItemTypes.getBuyPrice(item.itemKind)/10;if(item.itemDurability==item.itemDurabilityMax)return 0;if(item.itemNumber>1){value=ItemTypes.getEnchantPrice(item,true)/10}var mp=item.itemDurabilityMax/900*(1-item.itemDurability/item.itemDurabilityMax);log.info("getRepairPrice - mp: "+mp);value*=Clamp(0,1,mp);return 1+~~value};ItemTypes.isEquippable=function(kind){if(ItemTypes.isArmor(kind)||ItemTypes.isWeapon(kind)||ItemTypes.isArcherWeapon(kind)||ItemTypes.isClothes(kind))return true;return false};ItemTypes.isClothes=function(kind){var item=KindData[kind];if(!item)return false;return item.type==="helm"||item.type==="chest"||item.type==="gloves"||item.type==="boots"};ItemTypes.isArmor=function(kind){var item=KindData[kind];if(!item)return false;return ItemTypes.isClothes(kind)};ItemTypes.isWeapon=function(kind){var item=KindData[kind];if(!item)return false;return ItemTypes.isMeleeWeapon(kind)||ItemTypes.isArcherWeapon(kind)};ItemTypes.isEquipment=function(kind){var item=KindData[kind];if(!item)return false;return ItemTypes.isWeapon(kind)||ItemTypes.isArmor(kind)};ItemTypes.getSpriteCode=function(kind){var data=KindData[kind];if(ItemTypes.isArmor(kind)){return kind}if(ItemTypes.isWeapon(kind)){var type=data.type;if(!type)return 0;if(type=="sword")return 1;if(type=="axe")return 2;if(type=="hammer")return 12;if(type=="bow")return 50}return 0};ItemTypes.getEquipmentSlot=function(kind){if(ItemTypes.isWeapon(kind))return 4;var item=KindData[kind];if(!item)return-1;if(item.type==="helm")return 0;if(item.type==="chest")return 1;if(item.type==="gloves")return 2;if(item.type==="boots")return 3;return-1};ItemTypes.isMeleeWeapon=function(kind){var item=KindData[kind];if(!item)return false;return item.type==="sword"||item.type==="hammer"||item.type==="axe"};ItemTypes.isHarvestWeapon=function(kind){var item=KindData[kind];if(!item)return false;return item.type==="hammer"||item.type==="axe"};ItemTypes.isArcherWeapon=function(kind){var item=KindData[kind];if(!item)return false;return item.type==="bow"};ItemTypes.isObject=function(kind){var item=KindData[kind];if(!item)return false;return item.type==="object"};ItemTypes.isCraftItem=function(kind){var item=KindData[kind];if(!item)return false;return item.type==="craft"};ItemTypes.isLootItem=function(kind){return kind>=1e3&&kind<2e3};ItemTypes.isConsumableItem=function(kind){var item=KindData[kind];if(!item)return false;return item.type==="object"};ItemTypes.isHealingItem=function(kind){var item=KindData[kind];if(!item)return false;return item.type==="object"&&(item.typemod=="health"||item.typemod=="healthpercent")};ItemTypes.isItem=function(kind){var item=ItemTypes.KindData[kind];if(!item)return false;return ItemTypes.isArmor(kind)||ItemTypes.isWeapon(kind)||item.type=="object"||item.type=="craft"};ItemTypes.isStackedItem=function(kind){var item=KindData[kind];if(!item)return false;return ItemTypes.isCraftItem(kind)||ItemTypes.isLootItem(kind)||ItemTypes.isConsumableItem(kind)};ItemTypes.forEachKind=function(callback){for(var k in kindData){callback(KindData[k],k)}};ItemTypes.forEachArmorKind=function(callback){Types.forEachKind(function(kind,kindName){if(ItemTypes.isArmor(kind)){callback(kind,kindName)}})};ItemTypes.forEachWeaponKind=function(callback){Types.forEachKind(function(kind,kindName){if(ItemTypes.isWeapon(kind)){callback(kind,kindName)}})};ItemTypes.forEachArcherWeaponKind=function(callback){Types.forEachKind(function(kind,kindName){if(ItemTypes.isArcherWeapon(kind)){callback(kind,kindName)}})};ItemTypes.getItemListBy=function(itemType,minLevel,maxLevel){var ItemsList=[];for(var k in KindData){var item=KindData[k];if(!item||item.legacy==1)continue;if(itemType==4&&!(ItemTypes.isArmor(k)||ItemTypes.isWeapon(k))){ItemsList.push({name:item.name,kind:k,type:item.type,buyCount:item.buycount,buyPrice:item.buy,craftPrice:ItemTypes.getCraftPrice(k),itemKind:k,itemNumber:item.buycount,craft:item.craft})}if(itemType==1&&item.type=="object"&&item.buy>0){ItemsList.push({name:item.name,kind:k,type:item.type,buyCount:item.buycount,buyPrice:item.buy,craftPrice:ItemTypes.getCraftPrice(k),itemKind:k,itemNumber:item.buycount,craft:item.craft})}else if(itemType==2&&ItemTypes.isArmor(k)&&item.modifier>=minLevel&&item.modifier<=maxLevel){ItemsList.push({name:item.name,kind:k,type:item.type,buyCount:item.buyCount,buyPrice:ItemTypes.getBuyPrice(k),craftPrice:ItemTypes.getCraftPrice(k),rank:item.level,itemKind:k,itemNumber:item.buycount,craft:item.craft})}else if(itemType==3&&ItemTypes.isWeapon(k)&&item.modifier>=minLevel&&item.modifier<=maxLevel){ItemsList.push({name:item.name,kind:k,type:item.type,buyCount:item.buyCount,buyPrice:ItemTypes.getBuyPrice(k),craftPrice:ItemTypes.getCraftPrice(k),rank:item.level,itemKind:k,itemNumber:item.buycount,craft:item.craft})}}if(ItemsList.length>0&&ItemsList[0].rank>0)ItemsList.sort(function(a,b){return a.rank-b.rank});return ItemsList};ItemTypes.Store={isBuy:function(id){var item=KindData[id];if(!item)return false;return item.buy>0?true:false},isBuyMultiple:function(id){var item=KindData[id];if(!item)return false;return item.buycount>0?true:false},isSell:function(id){var item=KindData[id];if(!item)return false;return item.buy>=2?true:false},getBuyCount:function(id){var item=KindData[id];if(!item)return false;return item.buyCount>1?item.buyCount:1},getItems:function(type,min,max){return ItemTypes.getItemListBy(type,min,max)}};ItemTypes.itemExpForLevel=[];ItemTypes.itemExpForLevel[0]=0;for(i=1;i<30;i++){var points=Math.floor(i*150*Math.pow(2,i/10));ItemTypes.itemExpForLevel[i]=points}ItemTypes.getItemLevel=function(exp){if(exp==0)return 1;var i=1;for(i=1;i<30;i++){if(exp>ItemTypes.itemExpForLevel[i-1]&&exp<=ItemTypes.itemExpForLevel[i]){return i}}return 30};if(!(typeof exports==="undefined")){module.exports=ItemTypes}},{}]},{},[6]);
